<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>分隔符</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="regexp.introduction.html">? 简介</a></li>
      <li style="float: right;"><a href="regexp.reference.meta.html">元字符 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="reference.pcre.pattern.syntax.html">PCRE 正则语法</a></li>
    <li>分隔符</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="regexp.reference.delimiters" class="section">
  <h2 class="title">分隔符</h2>
  <p class="para">
  当使用 PCRE 函数的时候，模式需要由<em class="emphasis">分隔符</em>闭合包裹。分隔符可以使任意非字母数字、非反斜线、非空白字符。
  </p>
  <p class="para">
  经常使用的分隔符是正斜线(<em>/</em>)、hash符号(<em>#</em>)
  以及取反符号(<em>~</em>)。下面的例子都是使用合法分隔符的模式。
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
/foo bar/
#^[^0-9]$#
+php+
%[a-zA-Z0-9_-]%
</pre></div>
    </div>

   </div>
  </p>
  <p class="para">
  如果分隔符需要在模式内进行匹配，它必须使用反斜线进行转义。如果分隔符经常在
  模式内出现， 一个更好的选择就是是用其他分隔符来提高可读性。
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
/http:\/\//
#http://#
</pre></div>
    </div>

   </div>
   需要将一个字符串放入模式中使用时，可以用 <span class="function"><a href="function.preg-quote.html" class="function">preg_quote()</a></span> 函数对其进行
   转义，它的第二个参数(可选)可以用于指定需要被转义的分隔符。
  </p>
  <p class="para">
  除了上面提到的分隔符，也可以使用括号样式的分隔符，左括号和右括号分别作为开始和结束
  分隔符。
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
{this is a pattern}
</pre></div>
    </div>

   </div>
  </p>
  <p class="para">
  可以在结束分隔符后面增加<a href="reference.pcre.pattern.modifiers.html" class="link">模式修饰符</a>。
  下面的例子是一个大小写不敏感的匹配：
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
#[a-z]#i
</pre></div>
    </div>

   </div>
  </p>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116773""></a>
  <div class="note">
   <strong class="user">Pedro Gimeno</strong>
   <a href="#116773" class="date">26-Feb-2015 09:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that bracket style opening and closing delimiters aren't a 100% problem-free solution, as they need to be escaped when they aren't in matching pairs within the expression. That mismatch can happen when they appear inside character classes [...], as most meta-characters lose their special meaning. Consider these examples:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; preg_match</span><span class="keyword">(</span><span class="string">'{[{]}'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// Warning: preg_match(): No ending matching delimiter '}'<br />
&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'{[}]}'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// Warning: preg_match(): Unknown modifier ']'<br />
&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'{[}{]}'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// Warning: preg_match(): Unknown modifier ']'<br />
</span><span class="default">?&gt;<br />
</span><br />
Escaping them solves it:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; preg_match</span><span class="keyword">(</span><span class="string">'{[\{]}'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// OK<br />
&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'{[}]}'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// OK<br />
&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'{[\}\{]}'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// OK<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
