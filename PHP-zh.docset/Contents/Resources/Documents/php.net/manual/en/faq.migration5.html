<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>从 PHP 4 移植到 PHP 5</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="faq.com.html">? PHP 和 COM</a></li>
      <li style="float: right;"><a href="faq.misc.html">杂类问题 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="faq.html">FAQ</a></li>
    <li>从 PHP 4 移植到 PHP 5</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="faq.migration5" class="chapter">
  <h1>从 PHP 4 移植到 PHP 5</h1>

  
  <p class="para">本章节将帮你从 PHP 4 移植到 PHP 5。</p>
  <div class="qandaset"><ol class="qandaset_questions"><li><a href="#faq.migration5.php45">
        从 PHP 4 向 PHP 5 移植
      </a></li><li><a href="#faq.migration5.mysql">
        PHP 5 中还能用 MySQL 吗？好像找不到了。
      </a></li><li><a href="#faq.migration5.oop">
        听说 PHP 有个全新的 OOP 模型，那现有的 OOP 代码还能运行吗？上哪去找这些新的 OOP 特性的信息？
      </a></li><li><a href="#faq.migration5.changes">
        除了 OOP 模型，PHP 5 还有哪些改动？此外，有没有专门针对 PHP 5 的手册？
      </a></li></ol></div>
    <dl class="qandaentry" id="faq.migration5.php45">
      <dt><strong>
        从 PHP 4 向 PHP 5 移植
      </strong></dt>
      <dd class="answer">
        <p class="para">尽管 PHP 5 提供了很多新特性，但它还是尽可能设计得与之前版本的 PHP 兼容，只有很少功能不一致。</p>
        <p class="para">确认阅读了本手册中相应的 
        <a href="migration5.html" class="link">PHP 5 移植附录</a>，它包含了更多移植到 PHP 5 的信息。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.migration5.mysql">
      <dt><strong>
        PHP 5 中还能用 MySQL 吗？好像找不到了。
      </strong></dt>
      <dd class="answer">
        <p class="para">
        <a href="ref.mysql.html" class="link">MySQL</a>依然被支持，唯一区别是 PHP 5 中
        <em class="emphasis">默认</em>为不激活。这意味着在 PHP 的 
        <a href="configuration.html" class="link">configure</a>一行中不包含有 
        <strong class="option configure">--with-mysql</strong>
选项，因此必须在编译时手工加入。Windows 用户可以编辑 <var class="filename">php.ini</var> 并激活 
        <var class="filename">php_mysql.dll</var>DLL。在 PHP 4 中没有这个 DLL，因为已经编译进 PHP 可执行文件中去了。</p>
        <p class="para">此外，MySQL 客户端库也不再绑定于 PHP 中了。有关此题目的更多细节见
        <a href="faq.databases.html#faq.databases.mysql.php5" class="link">此 FAQ</a>。另外确保阅读了 
        <a href="ref.mysql.html" class="link">MySQL 章节</a>中的安装详情。一个配置行的例子是 
        <strong class="option configure">--with-mysql=/usr</strong>
，Windows 用户则需要 
        <var class="filename">libmySQL.dll</var>。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.migration5.oop">
      <dt><strong>
        听说 PHP 有个全新的 OOP 模型，那现有的 OOP 代码还能运行吗？上哪去找这些新的 OOP 特性的信息？
      </strong></dt>
      <dd class="answer">
        <p class="para">PHP 5 的主要改进就是 OOP 模型现在使用了 
        <em class="emphasis">Zend Engine 2.0</em>。
        <a href="ini.core.html#ini.zend.ze1-compatibility-mode" class="link">zend.ze1_compatibility_mode</a>指令将激活与 Zend Engine 1.0（PHP 4）的兼容性。</p>
        <p class="para">新的 OOP 模型文档见 
        <a href="language.oop5.html" class="link">OOP 语言手册</a>和 
        <a href="migration5.oop.html" class="link">OOP 移植附录</a>章节。</p>
      </dd>
    </dl>
    <dl class="qandaentry" id="faq.migration5.changes">
      <dt><strong>
        除了 OOP 模型，PHP 5 还有哪些改动？此外，有没有专门针对 PHP 5 的手册？
      </strong></dt>
      <dd class="answer">
        <p class="para">其它几个改动见
        <a href="migration5.html" class="link">移植到 PHP 5 附录</a>。没有专门的 PHP 5 手册，因为 PHP 的主要部分还是一样的。</p>
      </dd>
    </dl>
  
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="75969""></a>
  <div class="note">
   <strong class="user">gfrank at neoservers dot com</strong>
   <a href="#75969" class="date">25-Jun-2007 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get PHP5 and PHP4 to work at the same time you will also need to change all "php_value", "php_flag", "php_admin_flag", and "php_admin_value" occurences; otherwise, you can't set configuration file settings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74823""></a>
  <div class="note">
   <strong class="user">odnowa-sql at o2 dot no-spam pl</strong>
   <a href="#74823" class="date">29-Apr-2007 02:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can run PHP4 and PHP5 as Apache2 modules at the same time. The trick is to hack the sources a little bit.<br />
Change all occurences of application/x-httpd-php (and MIME type for sources) to application/x-httpd-php5 and then add that mime type to apache conf.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
