<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Creates a new DateInterval object</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="class.dateinterval.html">? DateInterval</a></li>
      <li style="float: right;"><a href="dateinterval.createfromdatestring.html">DateInterval::createFromDateString ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.dateinterval.html">DateInterval</a></li>
    <li>Creates a new DateInterval object</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="dateinterval.construct" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateInterval::__construct</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7)</p><p class="refpurpose"><span class="refname">DateInterval::__construct</span> &mdash; <span class="dc-title">Creates a new DateInterval object</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-dateinterval.construct-description">
  <h3 class="title">说明</h3>
  <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>DateInterval::__construct</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$interval_spec</code></span>
   )</div>

  <p class="para rdfs-comment">
   Creates a new DateInterval object.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-dateinterval.construct-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">interval_spec</code></dt>

     <dd>

      <p class="para">
       An interval specification.
      </p>
      <p class="para">
       The format starts with the letter <em>P</em>,
       for "<span class="quote">period.</span>"
       Each duration period is represented by an integer value
       followed by a period designator.
       If the duration contains time elements, that portion
       of the specification is preceded by the letter
       <em>T</em>.
      </p>
      <p class="para">
       <table class="doctable table">
        <caption><strong>
         <code class="parameter">interval_spec</code> Period Designators
        </strong></caption>
        
         <thead>
          <tr>
           <th>Period Designator</th>
           <th>Description</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><em>Y</em></td>
           <td>years</td>
          </tr>

          <tr>
           <td><em>M</em></td>
           <td>months</td>
          </tr>

          <tr>
           <td><em>D</em></td>
           <td>days</td>
          </tr>

          <tr>
           <td><em>W</em></td>
           <td>
            weeks. These get converted into days,
            so can not be combined with <em>D</em>.
           </td>
          </tr>

          <tr>
           <td><em>H</em></td>
           <td>hours</td>
          </tr>

          <tr>
           <td><em>M</em></td>
           <td>minutes</td>
          </tr>

          <tr>
           <td><em>S</em></td>
           <td>seconds</td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       Here are some simple examples.
       Two days is <em>P2D</em>.
       Two seconds is <em>PT2S</em>.
       Six years and five minutes is <em>P6YT5M</em>.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        The unit types must be entered from the largest
        scale unit on the left to the smallest scale unit
        on the right.
        So years before months, months before days,
        days before minutes, etc.
        Thus one year and four days must be represented as
        <em>P1Y4D</em>, not <em>P4D1Y</em>.
       </p>
      </p></blockquote>
      <p class="para">
       The specification can also be represented as a date time.
       A sample of one year and four days would be
       <em>P0001-00-04T00:00:00</em>.
       But the values in this format can not exceed a given period&#039;s
       roll-over-point (e.g. <em>25</em> hours is invalid).
      </p>
      <p class="para">
       These formats are based on the <a href="http://en.wikipedia.org/wiki/Iso8601#Durations" class="link external" title="Link : http://en.wikipedia.org/wiki/Iso8601#Durations">&raquo;&nbsp;ISO 8601 duration
       specification</a>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-dateinterval.construct-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   Throws an <a href="class.exception.html" class="classname">Exception</a> when the <code class="parameter">interval_spec</code>
   cannot be parsed as an interval.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-dateinterval.construct-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2438">
    <p><strong>Example #1 <a href="class.dateinterval.html" class="classname">DateInterval</a> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$interval&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateInterval</span><span style="color: #007700">(</span><span style="color: #DD0000">'P2Y4DT6H8M'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$interval</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
object(DateInterval)#1 (8) {
  [&quot;y&quot;]=&gt;
  int(2)
  [&quot;m&quot;]=&gt;
  int(0)
  [&quot;d&quot;]=&gt;
  int(4)
  [&quot;h&quot;]=&gt;
  int(6)
  [&quot;i&quot;]=&gt;
  int(8)
  [&quot;s&quot;]=&gt;
  int(0)
  [&quot;invert&quot;]=&gt;
  int(0)
  [&quot;days&quot;]=&gt;
  bool(false)
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-dateinterval.construct-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="dateinterval.format.html" class="function" rel="rdfs-seeAlso">DateInterval::format()</a> - Formats the interval</span></li>
    <li class="member"><span class="function"><a href="datetime.add.html" class="function" rel="rdfs-seeAlso">DateTime::add()</a> - Adds an amount of days, months, years, hours, minutes and seconds to a
   DateTime object</span></li>
    <li class="member"><span class="function"><a href="datetime.sub.html" class="function" rel="rdfs-seeAlso">DateTime::sub()</a> - Subtracts an amount of days, months, years, hours, minutes and seconds from
   a DateTime object</span></li>
    <li class="member"><span class="function"><a href="datetime.diff.html" class="function" rel="rdfs-seeAlso">DateTime::diff()</a> - Returns the difference between two DateTime objects</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119260""></a>
  <div class="note">
   <strong class="user">Ray.Paseur sometimes uses Gmail</strong>
   <a href="#119260" class="date">29-Apr-2016 01:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To recover the interval specification string:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_interval_spec</span><span class="keyword">(</span><span class="default">DateTime $alpha</span><span class="keyword">, </span><span class="default">DateTime $omega</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intvl </span><span class="keyword">= </span><span class="default">$alpha</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$omega</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">) </span><span class="default">$date </span><span class="keyword">.= </span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">. </span><span class="string">'Y'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">m</span><span class="keyword">) </span><span class="default">$date </span><span class="keyword">.= </span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">m </span><span class="keyword">. </span><span class="string">'M'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">d</span><span class="keyword">) </span><span class="default">$date </span><span class="keyword">.= </span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">d </span><span class="keyword">. </span><span class="string">'D'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">h</span><span class="keyword">) </span><span class="default">$time </span><span class="keyword">.= </span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">. </span><span class="string">'H'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">) </span><span class="default">$time </span><span class="keyword">.= </span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">. </span><span class="string">'M'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">) </span><span class="default">$time </span><span class="keyword">.= </span><span class="default">$intvl</span><span class="keyword">-&gt;</span><span class="default">s </span><span class="keyword">. </span><span class="string">'S'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$time</span><span class="keyword">) </span><span class="default">$time </span><span class="keyword">= </span><span class="string">'T' </span><span class="keyword">. </span><span class="default">$time</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">=</span><span class="string">'P' </span><span class="keyword">. </span><span class="default">$date </span><span class="keyword">. </span><span class="default">$time</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$text </span><span class="keyword">== </span><span class="string">'P'</span><span class="keyword">) return </span><span class="string">'PT0S'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118973""></a>
  <div class="note">
   <strong class="user">lsloan-php dot net at umich dot edu</strong>
   <a href="#118973" class="date">11-Mar-2016 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although PHP refers to periods of time as "intervals", ISO 8601 refers to them as "durations".&nbsp; In ISO 8601, "intervals" are something else.<br />
<br />
While ISO 8601 allows fractions for all parts of a duration (e.g., "P0.5Y"), DateInterval does not.&nbsp; Use caution when calculating durations.&nbsp; If the duration has a fractional part, it may be lost when storing it in a DateInterval object.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118784""></a>
  <div class="note">
   <strong class="user">userexamplecom at mailinator dot com</strong>
   <a href="#118784" class="date">05-Feb-2016 10:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Take care, if you have a DateTime Object on the 31h of January and add Da DateInterval of one Month, then you are in March instead of February.<br />
<br />
For Example:<br />
---<br />
// given the actual date is 2017-01-31<br />
$today = new DateTime('now', $timeZoneObject);<br />
$today-&gt;add(new DateInterval('P1M'));<br />
echo $today-&gt;format('m');<br />
// output: 03<br />
---</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116750""></a>
  <div class="note">
   <strong class="user">admin at torntech dot com</strong>
   <a href="#116750" class="date">23-Feb-2015 06:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning - despite the $interval_spec accepting the ISO 8601 specification format, it does not accept decimal fraction values with period or comma as stated in the specification.<br />
<br />
https://bugs.php.net/bug.php?id=53831<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* Example from ISO 8601 documentation */<br />
</span><span class="default">$interval </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'P0.5Y'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Will result in<br />
Fatal error: Uncaught exception 'Exception' with message 'DateInterval::__construct(): Unknown or bad format (P0.5Y)'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113950""></a>
  <div class="note">
   <strong class="user">bkilinc at deyta dot net</strong>
   <a href="#113950" class="date">21-Dec-2013 12:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
interval_spec Period Designators, has two 'M's for months and minutes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112675""></a>
  <div class="note">
   <strong class="user">owen at beliefs.com</strong>
   <a href="#112675" class="date">12-Jul-2013 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
M is used to indicate both months and minutes.<br />
<br />
As noted on the referenced wikipedia page for ISO 6801 <a href="http://en.wikipedia.org/wiki/Iso8601#Durations" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Iso8601#Durations</a><br />
<br />
To resolve ambiguity, "P1M" is a one-month duration and "PT1M" is a one-minute duration (note the time designator, T, that precedes the time value).<br />
<br />
Using: PHP 5.3.2-1ubuntu4.19<br />
<br />
// For 3 Months<br />
$dateTime = new DateTime;echo $dateTime-&gt;format( DateTime::ISO8601 ), PHP_EOL;<br />
$dateTime-&gt;add(new DateInterval("P3M"));<br />
echo $dateTime-&gt;format( DateTime::ISO8601 ), PHP_EOL;<br />
Results in:<br />
2013-07-11T11:12:26-0400<br />
2013-10-11T11:12:26-0400<br />
<br />
// For 3 Minutes<br />
$dateTime = new DateTime;echo $dateTime-&gt;format( DateTime::ISO8601 ), PHP_EOL;<br />
$dateTime-&gt;add(new DateInterval("PT3M"));<br />
echo $dateTime-&gt;format( DateTime::ISO8601 ), PHP_EOL;<br />
Results in:<br />
2013-07-11T11:12:42-0400<br />
2013-07-11T11:15:42-0400<br />
<br />
Insert a T after the P in the interval to add 3 minutes instead of 3 months.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108228""></a>
  <div class="note">
   <strong class="user">buvinghausen at gmail dot com</strong>
   <a href="#108228" class="date">10-Apr-2012 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think it is easiest if you would just use the sub method on the DateTime class.<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">sub</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">"P89D"</span><span class="keyword">));</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107999""></a>
  <div class="note">
   <strong class="user">daniellehr at gmx dot de</strong>
   <a href="#107999" class="date">21-Mar-2012 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Alternatively you can use DateInterval::createFromDateString() for negative intervals:<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">'-89 days'</span><span class="keyword">));</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107610""></a>
  <div class="note">
   <strong class="user">jawzx01 at gmail dot com</strong>
   <a href="#107610" class="date">22-Feb-2012 07:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As previously mentioned, to do a negative DateInterval object, you'd code: 
<br />

<br />
<span class="default">&lt;?php
<br />
$date1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();
<br />
</span><span class="default">$eightynine_days_ago </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">( </span><span class="string">"P89D" </span><span class="keyword">);
<br />
</span><span class="default">$eightynine_days_ago</span><span class="keyword">-&gt;</span><span class="default">invert </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//Make it negative. 
<br />
</span><span class="default">$date1</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">( </span><span class="default">$eightynine_days_ago </span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
and then $date1 is now 89 days in the past.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102976""></a>
  <div class="note">
   <strong class="user">kevinpeno at gmail dot com</strong>
   <a href="#102976" class="date">17-Mar-2011 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that, while a DateInterval object has an $invert property, you cannot supply a negative directly to the constructor similar to specifying a negative in XSD ("-P1Y"). You will get an exception through if you do this. <br />
<br />
Instead you need to construct using a positive interval ("P1Y") and the specify the $invert property === 1.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102268""></a>
  <div class="note">
   <strong class="user">kuzb</strong>
   <a href="#102268" class="date">05-Feb-2011 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that this class will not calculate days/hours/minutes/seconds etc given a value in a single denomination of time.&nbsp; For example:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $di </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT3600S'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$di</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%H:%i:%s'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
will yield 0:0:3600 instead of the expected 1:0:0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
