<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>String 字符串</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.types.float.html">? Float 浮点型</a></li>
      <li style="float: right;"><a href="language.types.array.html">Array 数组 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.types.html">类型</a></li>
    <li>String 字符串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.types.string" class="sect1">
 <h2 class="title">String 字符串</h2>

 
 <p class="para">
  一个字符串 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 就是由一系列的字符组成，其中每个字符等同于一个字节。这意味着
  PHP 只能支持 256 的字符集，因此不支持 Unicode 。详见<a href="language.types.string.html#language.types.string.details" class="link">字符串类型详解</a>。
 </p>

 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <span class="simpara">
   <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 最大可以达到 2GB。
  </span>
 </p></blockquote>

 <div class="sect2" id="language.types.string.syntax">
  <h3 class="title">语法</h3>

  <p class="para">
   一个字符串可以用 4 种方式表达：
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.string.html#language.types.string.syntax.single" class="link">单引号</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.string.html#language.types.string.syntax.double" class="link">双引号</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.string.html#language.types.string.syntax.heredoc" class="link">heredoc 语法结构</a>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <a href="language.types.string.html#language.types.string.syntax.nowdoc" class="link">nowdoc 语法结构</a>（自 PHP 5.3.0 起）
    </span>
   </li>
  </ul>

  <div class="sect3" id="language.types.string.syntax.single">
   <h4 class="title">单引号</h4>

   <p class="para">
    定义一个字符串的最简单的方法是用单引号把它包围起来（字符 <em>&#039;</em>）。
   </p>

   <p class="para">
    要表达一个单引号自身，需在它的前面加个反斜线（<em>\</em>）来转义。要表达一个反斜线自身，则用两个反斜线（<em>\\</em>）。其它任何方式的反斜线都会被当成反斜线本身：也就是说如果想使用其它转义序列例如
    <em>\r</em> 或者 <em>\n</em>，并不代表任何特殊含义，就单纯是这两个字符本身。
   </p>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     不像<a href="language.types.string.html#language.types.string.syntax.double" class="link">双引号</a>和
     <a href="language.types.string.html#language.types.string.syntax.heredoc" class="link">heredoc</a>
     语法结构，在单引号字符串中的<a href="language.variables.html" class="link">变量</a>和特殊字符的转义序列将<em class="emphasis">不会</em>被替换。
    </span>
   </p></blockquote>

   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'this&nbsp;is&nbsp;a&nbsp;simple&nbsp;string'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;可以录入多行<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;can&nbsp;also&nbsp;have&nbsp;embedded&nbsp;newlines&nbsp;in&nbsp;<br />strings&nbsp;this&nbsp;way&nbsp;as&nbsp;it&nbsp;is<br />okay&nbsp;to&nbsp;do'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;输出：&nbsp;Arnold&nbsp;once&nbsp;said:&nbsp;"I'll&nbsp;be&nbsp;back"<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Arnold&nbsp;once&nbsp;said:&nbsp;"I\'ll&nbsp;be&nbsp;back"'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;输出：&nbsp;You&nbsp;deleted&nbsp;C:\*.*?<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;deleted&nbsp;C:\\*.*?'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;输出：&nbsp;You&nbsp;deleted&nbsp;C:\*.*?<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;deleted&nbsp;C:\*.*?'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;输出：&nbsp;This&nbsp;will&nbsp;not&nbsp;expand:&nbsp;\n&nbsp;a&nbsp;newline<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'This&nbsp;will&nbsp;not&nbsp;expand:&nbsp;\n&nbsp;a&nbsp;newline'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;输出：&nbsp;Variables&nbsp;do&nbsp;not&nbsp;$expand&nbsp;$either<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Variables&nbsp;do&nbsp;not&nbsp;$expand&nbsp;$either'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

  </div>

  <div class="sect3" id="language.types.string.syntax.double">
   <h4 class="title">双引号</h4>

   <p class="para">
    如果字符串是包围在双引号（&quot;）中， PHP 将对一些特殊的字符进行解析：
   </p>

   <table class="doctable table">
    <caption><strong>转义字符</strong></caption>

    
     <thead>
      <tr>
       <th>序列</th>
       <th>含义</th>
      </tr>

     </thead>


     <tbody class="tbody">
      <tr>
       <td><em>\n</em></td>
       <td>换行（ASCII 字符集中的 LF 或 0x0A (10)）</td>
      </tr>

      <tr>
       <td><em>\r</em></td>
       <td>回车（ASCII 字符集中的 CR 或 0x0D (13)）</td>
      </tr>

      <tr>
       <td><em>\t</em></td>
       <td>水平制表符（ASCII 字符集中的 HT 或 0x09 (9)）</td>
      </tr>

      <tr>
       <td><em>\v</em></td>
       <td>垂直制表符（ASCII 字符集中的 VT 或 0x0B (11)）（自 PHP 5.2.5 起）</td>
      </tr>

      <tr>
       <td><em>\e</em></td>
       <td>Escape（ASCII 字符集中的 ESC 或 0x1B (27)）（自 PHP 5.4.0 起）</td>
      </tr>

      <tr>
       <td><em>\f</em></td>
       <td>换页（ASCII 字符集中的 FF 或 0x0C (12)）（自 PHP 5.2.5 起）</td>
      </tr>

      <tr>
       <td><em>\\</em></td>
       <td>反斜线</td>
      </tr>

      <tr>
       <td><em>\$</em></td>
       <td>美元标记</td>
      </tr>

      <tr>
       <td><em>\&quot;</em></td>
       <td>双引号</td>
      </tr>

      <tr>
       <td><em>\[0-7]{1,3}</em></td>
       <td>
        符合该正则表达式序列的是一个以八进制方式来表达的字符
       </td>
      </tr>

      <tr>
       <td><em>\x[0-9A-Fa-f]{1,2}</em></td>
       <td>
        符合该正则表达式序列的是一个以十六进制方式来表达的字符
       </td>
      </tr>

     </tbody>
    
   </table>


   <p class="para">
    和单引号字符串一样，转义任何其它字符都会导致反斜线被显示出来。PHP 5.1.1
    以前，<em>\{$var}</em> 中的反斜线还不会被显示出来。
   </p>

   <p class="para">
    用双引号定义的字符串最重要的特征是变量会被解析，详见<a href="language.types.string.html#language.types.string.parsing" class="link">变量解析</a>。
   </p>
  </div>
  
  <div class="sect3" id="language.types.string.syntax.heredoc">
   <h4 class="title">Heredoc 结构</h4>

   <p class="simpara">
    第三种表达字符串的方法是用 heredoc
    句法结构：<em>&lt;&lt;&lt;</em>。在该运算符之后要提供一个标识符，然后换行。接下来是字符串
    <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 本身，最后要用前面定义的标识符作为结束标志。
   </p>

   <p class="simpara">
    结束时所引用的标识符<em class="emphasis">必须</em>在该行的第一列，而且，标识符的命名也要像其它标签一样遵守
    PHP 的规则：只能包含字母、数字和下划线，并且必须以字母和下划线作为开头。
   </p>
   
   <div class="warning"><strong class="warning">Warning</strong>
    <p class="simpara">
     要注意的是结束标识符这行除了<em class="emphasis">可能</em>有一个分号（<em>;</em>）外，绝对不能包含其它字符。这意味着标识符<em class="emphasis">不能缩进</em>，分号的前后也不能有任何空白或制表符。更重要的是结束标识符的前面必须是个被本地操作系统认可的换行，比如在
     UNIX 和 Mac OS X 系统中是 <em>\n</em>，而结束定界符（可能其后有个分号）之后也必须紧跟一个换行。
    </p>

    <p class="simpara">
     如果不遵守该规则导致结束标识不"干净"，PHP
     将认为它不是结束标识符而继续寻找。如果在文件结束前也没有找到一个正确的结束标识符，PHP
     将会在最后一行产生一个解析错误。
    </p>

    <p class="para">
     Heredocs 结构不能用来初始化类的属性。自 PHP 5.3 起，此限制仅对 heredoc 包含变量时有效。
    </p>
    
    <div class="example" id="example-85">
     <p><strong>Example #1 非法的示例</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;EOT<br /></span><span style="color: #DD0000">bar<br />&nbsp;&nbsp;&nbsp;&nbsp;EOT;<br />}<br />?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </div>

   <p class="para">
    Heredoc 结构就象是没有使用双引号的双引号字符串，这就是说在 heredoc
    结构中单引号不用被转义，但是上文中列出的转义序列还可以使用。变量将被替换，但在 heredoc
    结构中含有复杂的变量时要格外小心。
   </p>

   <div class="example" id="example-86"> 
    <p><strong>Example #2 Heredoc 结构的字符串示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$str&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;EOD<br /></span><span style="color: #DD0000">Example&nbsp;of&nbsp;string<br />spanning&nbsp;multiple&nbsp;lines<br />using&nbsp;heredoc&nbsp;syntax.<br /></span><span style="color: #007700">EOD;<br /><br /></span><span style="color: #FF8000">/*&nbsp;含有变量的更复杂示例&nbsp;*/<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Bar1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Bar2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Bar3'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'MyName'</span><span style="color: #007700">;<br /><br />echo&nbsp;&lt;&lt;&lt;EOT<br /></span><span style="color: #DD0000">My&nbsp;name&nbsp;is&nbsp;"</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">".&nbsp;I&nbsp;am&nbsp;printing&nbsp;some&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo</span><span style="color: #DD0000">.<br />Now,&nbsp;I&nbsp;am&nbsp;printing&nbsp;some&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}</span><span style="color: #DD0000">.<br />This&nbsp;should&nbsp;print&nbsp;a&nbsp;capital&nbsp;'A':&nbsp;\x41<br /></span><span style="color: #007700">EOT;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <p class="para">以上例程会输出：</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
My name is &quot;MyName&quot;. I am printing some Foo.
Now, I am printing some Bar2.
This should print a capital &#039;A&#039;: A</pre></div>
   </div>

   <p class="para">
    也可以把 Heredoc 结构用在函数参数中来传递数据：
   </p>

   <div class="example" id="example-87"> 
    <p><strong>Example #3 Heredoc 结构在参数中的示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(array(&lt;&lt;&lt;EOD<br /></span><span style="color: #DD0000">foobar!<br /></span><span style="color: #007700">EOD<br />));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <p class="para">
    在 PHP 5.3.0 以后，也可以用 Heredoc 结构来初始化静态变量和类的属性和常量：
   </p>

   <div class="example" id="example-88"> 
    <p><strong>Example #4 使用 Heredoc 结构来初始化静态值</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;静态变量<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;LABEL<br /></span><span style="color: #DD0000">Nothing&nbsp;in&nbsp;here...<br /></span><span style="color: #007700">LABEL;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;类的常量、属性<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;</span><span style="color: #0000BB">BAR&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;FOOBAR<br /></span><span style="color: #DD0000">Constant&nbsp;example<br /></span><span style="color: #007700">FOOBAR;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$baz&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;FOOBAR<br /></span><span style="color: #DD0000">Property&nbsp;example<br /></span><span style="color: #007700">FOOBAR;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <p class="para">
    自 PHP 5.3.0 起还可以在 Heredoc 结构中用双引号来声明标识符：
   </p>

   <div class="example" id="example-89"> 
    <p><strong>Example #5 在 heredoc 结构中使用双引号</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;&lt;&lt;&lt;"FOOBAR"<br /></span><span style="color: #DD0000">Hello&nbsp;World!<br /></span><span style="color: #007700">FOOBAR;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

  </div>
  
  <div class="sect3" id="language.types.string.syntax.nowdoc">
   <h4 class="title">Nowdoc 结构</h4>
   
   <p class="para">
    就象 heredoc 结构类似于双引号字符串，Nowdoc 结构是类似于单引号字符串的。Nowdoc
    结构很象 heredoc 结构，但是 nowdoc
    中<em class="emphasis">不进行解析操作</em>。这种结构很适合用于嵌入 PHP
    代码或其它大段文本而无需对其中的特殊字符进行转义。与 SGML 的
    <em>&lt;![CDATA[ ]]&gt;</em> 结构是用来声明大段的不用解析的文本类似，nowdoc 结构也有相同的特征。
   </p>
   
   <p class="para">
    一个 nowdoc 结构也用和 heredocs 结构一样的标记
    <em>&lt;&lt;&lt;</em>， 但是跟在后面的标识符要用单引号括起来，即
    <em>&lt;&lt;&lt;&#039;EOT&#039;</em>。Heredoc 结构的所有规则也同样适用于 nowdoc
    结构，尤其是结束标识符的规则。
   </p>
   
   <div class="example" id="example-90">
    <p><strong>Example #6 Nowdoc 结构字符串示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$str&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;'EOD'<br /></span><span style="color: #DD0000">Example&nbsp;of&nbsp;string<br />spanning&nbsp;multiple&nbsp;lines<br />using&nbsp;nowdoc&nbsp;syntax.<br /></span><span style="color: #007700">EOD;<br /><br /></span><span style="color: #FF8000">/*&nbsp;含有变量的更复杂的示例&nbsp;*/<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Bar1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Bar2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Bar3'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'MyName'</span><span style="color: #007700">;<br /><br />echo&nbsp;&lt;&lt;&lt;'EOT'<br /></span><span style="color: #DD0000">My&nbsp;name&nbsp;is&nbsp;"$name".&nbsp;I&nbsp;am&nbsp;printing&nbsp;some&nbsp;$foo-&gt;foo.<br />Now,&nbsp;I&nbsp;am&nbsp;printing&nbsp;some&nbsp;{$foo-&gt;bar[1]}.<br />This&nbsp;should&nbsp;not&nbsp;print&nbsp;a&nbsp;capital&nbsp;'A':&nbsp;\x41<br /></span><span style="color: #007700">EOT;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <p class="para">以上例程会输出：</p>
   <div class="example-contents screen">
<div class="cdata"><pre>
My name is &quot;$name&quot;. I am printing some $foo-&gt;foo.
Now, I am printing some {$foo-&gt;bar[1]}.
This should not print a capital &#039;A&#039;: \x41</pre></div></div>
   
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     不象 heredoc 结构，nowdoc 结构可以用在任意的静态数据环境中，最典型的示例是用来初始化类的属性或常量：
    </p>
    
    <div class="example" id="example-91">
     <p><strong>Example #7 静态数据的示例</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;'EOT'<br /></span><span style="color: #DD0000">bar<br /></span><span style="color: #007700">EOT;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p></blockquote>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     Nowdoc 结构是在 PHP 5.3.0 中加入的。
    </p>
   </p></blockquote>

  </div>

  <div class="sect3" id="language.types.string.parsing">
   <h4 class="title">变量解析</h4>

   <p class="simpara">
    当<span class="type"><span class="type 字符串">字符串</span></span>用双引号或 heredoc 结构定义时，其中的<a href="language.variables.html" class="link">变量</a>将会被解析。
   </p>

   <p class="simpara">
    这里共有两种语法规则：一种<a href="language.types.string.html#language.types.string.parsing.simple" class="link">简单</a>规则，一种<a href="language.types.string.html#language.types.string.parsing.complex" class="link">复杂</a>规则。简单的语法规则是最常用和最方便的，它可以用最少的代码在一个
    <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 中嵌入一个变量，一个 <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 的值，或一个 <span class="type"><a href="language.types.object.html" class="type object">object</a></span> 的属性。
   </p>

   <p class="simpara">
    复杂规则语法的显著标记是用花括号包围的表达式。
   </p>

   <div class="sect4" id="language.types.string.parsing.simple">
    <h5 class="title">简单语法</h5>

    <p class="simpara">
     当 PHP 解析器遇到一个美元符号（<em>$</em>）时，它会和其它很多解析器一样，去组合尽量多的标识以形成一个合法的变量名。可以用花括号来明确变量名的界线。
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$juice&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"He&nbsp;drank&nbsp;some&nbsp;</span><span style="color: #0000BB">$juice</span><span style="color: #DD0000">&nbsp;juice."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//&nbsp;Invalid.&nbsp;"s"&nbsp;is&nbsp;a&nbsp;valid&nbsp;character&nbsp;for&nbsp;a&nbsp;variable&nbsp;name,&nbsp;but&nbsp;the&nbsp;variable&nbsp;is&nbsp;$juice.<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"He&nbsp;drank&nbsp;some&nbsp;juice&nbsp;made&nbsp;of&nbsp;</span><span style="color: #0000BB">$juices</span><span style="color: #DD0000">."</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <p class="para">以上例程会输出：</p>
     <div class="example-contents screen">
<div class="cdata"><pre>
He drank some apple juice.
He drank some juice made of .
</pre></div>
     </div>
    </div>

    <p class="simpara">
     类似的，一个 <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 索引或一个 <span class="type"><a href="language.types.object.html" class="type object">object</a></span>
     属性也可被解析。数组索引要用方括号（<em>]</em>）来表示索引结束的边际，对象属性则是和上述的变量规则相同。
    </p>

    <div class="example" id="example-92">
     <p><strong>Example #8 简单语法示例</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$juices&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"orange"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"koolaid1"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"purple"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"He&nbsp;drank&nbsp;some&nbsp;</span><span style="color: #0000BB">$juices</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]</span><span style="color: #DD0000">&nbsp;juice."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"He&nbsp;drank&nbsp;some&nbsp;</span><span style="color: #0000BB">$juices</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]</span><span style="color: #DD0000">&nbsp;juice."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"He&nbsp;drank&nbsp;some&nbsp;juice&nbsp;made&nbsp;of&nbsp;</span><span style="color: #0000BB">$juice</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]</span><span style="color: #DD0000">s."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Won't&nbsp;work<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"He&nbsp;drank&nbsp;some&nbsp;</span><span style="color: #0000BB">$juices</span><span style="color: #007700">[</span><span style="color: #0000BB">koolaid1</span><span style="color: #007700">]</span><span style="color: #DD0000">&nbsp;juice."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">people&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$john&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"John&nbsp;Smith"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$jane&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Jane&nbsp;Smith"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$robert&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Robert&nbsp;Paulsen"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$smith&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Smith"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$people&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">people</span><span style="color: #007700">();<br /><br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">john</span><span style="color: #DD0000">&nbsp;drank&nbsp;some&nbsp;</span><span style="color: #0000BB">$juices</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]</span><span style="color: #DD0000">&nbsp;juice."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">john</span><span style="color: #DD0000">&nbsp;then&nbsp;said&nbsp;hello&nbsp;to&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">jane</span><span style="color: #DD0000">."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">john</span><span style="color: #DD0000">'s&nbsp;wife&nbsp;greeted&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">robert</span><span style="color: #DD0000">."</span><span style="color: #007700">.</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">robert</span><span style="color: #DD0000">&nbsp;greeted&nbsp;the&nbsp;two&nbsp;</span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">smiths</span><span style="color: #DD0000">."</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;Won't&nbsp;work<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>以上例程会输出：</p></div>
     <div class="example-contents screen">
<div class="cdata"><pre>
He drank some apple juice.
He drank some orange juice.
He drank some juice made of s.
He drank some purple juice.
John Smith drank some apple juice.
John Smith then said hello to Jane Smith.
John Smith&#039;s wife greeted Robert Paulsen.
Robert Paulsen greeted the two .
</pre></div>
     </div>
    </div>

    <p class="simpara">
     如果想要表达更复杂的结构，请用复杂语法。
    </p>
   </div>

   <div class="sect4" id="language.types.string.parsing.complex">
    <h5 class="title">复杂（花括号）语法</h5>

    <p class="simpara">
     复杂语法不是因为其语法复杂而得名，而是因为它可以使用复杂的表达式。
    </p>

    <p class="simpara">
     任何具有 <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
     表达的标量变量，数组单元或对象属性都可使用此语法。只需简单地像在
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 以外的地方那样写出表达式，然后用花括号
     <em>{</em> 和 <em>}</em> 把它括起来即可。由于
     <em>{</em> 无法被转义，只有 <em>$</em>
     紧挨着 <em>{</em> 时才会被识别。可以用
     <em>{\$</em> 来表达 <em>{$</em>。下面的示例可以更好的解释：
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;显示所有错误<br /></span><span style="color: #0000BB">error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$great&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'fantastic'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;无效，输出:&nbsp;This&nbsp;is&nbsp;{&nbsp;fantastic}<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;{&nbsp;</span><span style="color: #0000BB">$great</span><span style="color: #DD0000">}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效，输出：&nbsp;This&nbsp;is&nbsp;fantastic<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$great</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;</span><span style="color: #007700">${</span><span style="color: #0000BB">great</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;square&nbsp;is&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$square</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">width</span><span style="color: #007700">}</span><span style="color: #DD0000">00&nbsp;centimeters&nbsp;broad."</span><span style="color: #007700">;&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效，只有通过花括号语法才能正确解析带引号的键名<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'key'</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;这是错误的表达式，因为就象&nbsp;$foo[bar]&nbsp;的格式在字符串以外也是错的一样。<br />//&nbsp;换句话说，只有在&nbsp;PHP&nbsp;能找到常量&nbsp;foo&nbsp;的前提下才会正常工作；这里会产生一个<br />//&nbsp;E_NOTICE&nbsp;(undefined&nbsp;constant)&nbsp;级别的错误。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;wrong:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">foo</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">;&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效，当在字符串中使用多重数组时，一定要用括号将它括起来<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">]}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">];<br /><br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works&nbsp;too:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">values</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;var&nbsp;named&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #007700">{${</span><span style="color: #0000BB">$name</span><span style="color: #007700">}}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;var&nbsp;named&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;getName():&nbsp;</span><span style="color: #007700">{${</span><span style="color: #0000BB">getName</span><span style="color: #007700">()}}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;var&nbsp;named&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;\$object-&gt;getName():&nbsp;</span><span style="color: #007700">{${</span><span style="color: #0000BB">$object</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">()}}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;无效，输出：&nbsp;This&nbsp;is&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;getName():&nbsp;{getName()}<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;getName():&nbsp;{getName()}"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

     </div>

    </div>

    <p class="para">
     也可以在字符串中用此语法通过变量来调用类的属性。
    </p>

   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'I&nbsp;am&nbsp;bar.'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$baz&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'baz'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'quux'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$baz</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   <p class="para">以上例程会输出：</p>
   <div class="example-contents screen"><br />
I am bar.<br />
I am bar.<br />
   </div>
   </div>
    
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      函数、方法、静态类变量和类常量只有在 PHP 5 以后才可在 <em>{$}</em>
      中使用。然而，只有在该字符串被定义的命名空间中才可以将其值作为变量名来访问。只单一使用花括号
      (<em>{}</em>) 无法处理从函数或方法的返回值或者类常量以及类静态变量的值。
     </p>
    </p></blockquote>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;显示所有错误<br /></span><span style="color: #0000BB">error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br /><br />class&nbsp;</span><span style="color: #0000BB">beers&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;</span><span style="color: #0000BB">softdrink&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'rootbeer'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;</span><span style="color: #0000BB">$ale&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ipa'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$rootbeer&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'A&nbsp;&amp;&nbsp;W'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$ipa&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Alexander&nbsp;Keith\'s'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;有效，输出：&nbsp;I'd&nbsp;like&nbsp;an&nbsp;A&nbsp;&amp;&nbsp;W<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"I'd&nbsp;like&nbsp;an&nbsp;</span><span style="color: #007700">{${</span><span style="color: #0000BB">beers</span><span style="color: #007700">::</span><span style="color: #0000BB">softdrink</span><span style="color: #007700">}}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;也有效，输出：&nbsp;I'd&nbsp;like&nbsp;an&nbsp;Alexander&nbsp;Keith's<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"I'd&nbsp;like&nbsp;an&nbsp;</span><span style="color: #007700">{${</span><span style="color: #0000BB">beers</span><span style="color: #007700">::</span><span style="color: #0000BB">$ale</span><span style="color: #007700">}}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

   </div>
  </div>
  
  <div class="sect3" id="language.types.string.substr">
   <h4 class="title">存取和修改字符串中的字符</h4>

   <p class="para">
    <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 中的字符可以通过一个从 0 开始的下标，用类似
    <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 结构中的方括号包含对应的数字来访问和修改，比如
    <var class="varname"><var class="varname">$str[42]</var></var>。可以把 <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    当成字符组成的 <span class="type"><a href="language.types.array.html" class="type array">array</a></span>。函数 <span class="function"><a href="function.substr.html" class="function">substr()</a></span> 和
    <span class="function"><a href="function.substr-replace.html" class="function">substr_replace()</a></span> 可用于操作多于一个字符的情况。
   </p>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 也可用花括号访问，比如 <var class="varname"><var class="varname">$str{42}</var></var>。
    </span>
   </p></blockquote>

   <div class="warning"><strong class="warning">Warning</strong>
    <p class="simpara">
     用超出字符串长度的下标写入将会拉长该字符串并以空格填充。非整数类型下标会被转换成整数。非法下标类型会产生一个
     <strong><code>E_NOTICE</code></strong> 级别错误。用负数下标写入字符串时会产生一个 <strong><code>E_NOTICE</code></strong>
     级别错误，用负数下标读取字符串时返回空字符串。写入时只用到了赋值字符串的第一个字符。用空字符串赋值则赋给的值是
     NULL 字符。
    </p>
   </div>

   <div class="warning"><strong class="warning">Warning</strong>
    <p class="simpara">
     PHP 的字符串在内部是字节组成的数组。因此用花括号访问或修改字符串对多字节字符集很不安全。仅应对单字节编码例如
     ISO-8859-1 的字符串进行此类操作。
    </p>
   </div>

   <div class="example" id="example-93">
    <p><strong>Example #9 一些字符串示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;取得字符串的第一个字符<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'This&nbsp;is&nbsp;a&nbsp;test.'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$first&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;取得字符串的第三个字符<br /></span><span style="color: #0000BB">$third&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;取得字符串的最后一个字符<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'This&nbsp;is&nbsp;still&nbsp;a&nbsp;test.'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$last&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">];&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;修改字符串的最后一个字符<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Look&nbsp;at&nbsp;the&nbsp;sea'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'e'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <p class="para">
    自 PHP 5.4 起字符串下标必须为整数或可转换为整数的字符串，否则会发出警告。之前例如
    <em>&quot;foo&quot;</em> 的下标会无声地转换成 <em>0</em>。
   </p>

   <div class="example" id="example-94">
    <p><strong>Example #10 PHP 5.3 和 PHP 5.4 的区别</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'1'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(isset(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'1'</span><span style="color: #007700">]));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'1.0'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(isset(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'1.0'</span><span style="color: #007700">]));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'x'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(isset(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'x'</span><span style="color: #007700">]));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'1x'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(isset(</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #DD0000">'1x'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程在PHP 5.3中的输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(1) &quot;b&quot;
bool(true)
string(1) &quot;b&quot;
bool(true)
string(1) &quot;a&quot;
bool(true)
string(1) &quot;b&quot;
bool(true)
</pre></div>
    </div>
    <div class="example-contents"><p>以上例程在PHP 5.4中的输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(1) &quot;b&quot;
bool(true)

Warning: Illegal string offset &#039;1.0&#039; in /tmp/t.php on line 7
string(1) &quot;b&quot;
bool(false)

Warning: Illegal string offset &#039;x&#039; in /tmp/t.php on line 9
string(1) &quot;a&quot;
bool(false)
string(1) &quot;b&quot;
bool(false)
</pre></div>
    </div>
   </div>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     用 <em>[]</em> 或 <em>{}</em>
     访问任何其它类型（不包括数组或具有相应接口的对象实现）的变量只会无声地返回 <strong><code>NULL</code></strong>。
    </p>
   </p></blockquote>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     PHP 5.5 增加了直接在字符串原型中用
     <em>[]</em> 或 <em>{}</em> 访问字符的支持。
    </p>
   </p></blockquote>

  </div>
 </div>

 <div class="sect2" id="language.types.string.useful-funcs">
  <h3 class="title">有用的函数和运算符</h3>

  <p class="para">
   字符串可以用 &#039;.&#039;（点）运算符连接起来，注意
   &#039;+&#039;（加号）运算符<em class="emphasis">没有</em>这个功能。更多信息参考<a href="language.operators.string.html" class="link">字符串运算符</a>。
  </p>

  <p class="para">
   对于 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 的操作有很多有用的函数。
  </p>

  <p class="simpara">
   可以参考<a href="ref.strings.html" class="link">字符串函数</a>了解大部分函数，高级的查找与替换功能可以参考<a href="ref.regex.html" class="link">正则表达式函数</a>或
   <a href="ref.pcre.html" class="link">Perl 兼容正则表达式函数</a>。
  </p>

  <p class="simpara">
   另外还有 <a href="ref.url.html" class="link">URL
   字符串函数</a>，也有加密／解密字符串的函数（<a href="ref.mcrypt.html" class="link">mcrypt</a> 和
   <a href="ref.mhash.html" class="link">mhash</a>）。
  </p>

  <p class="simpara">
   最后，可以参考<a href="ref.ctype.html" class="link">字符类型函数</a>。
  </p>
 </div>

 <div class="sect2" id="language.types.string.casting">
  <h3 class="title">转换成字符串</h3>
  
  <p class="para">
   一个值可以通过在其前面加上 <em>(string)</em> 或用 <span class="function"><a href="function.strval.html" class="function">strval()</a></span>
   函数来转变成字符串。在一个需要字符串的表达式中，会自动转换为
   <span class="type"><a href="language.types.string.html" class="type string">string</a></span>。比如在使用函数 <span class="function"><a href="function.echo.html" class="function">echo</a></span> 或 <span class="function"><a href="function.print.html" class="function">print</a></span>
   时，或在一个变量和一个 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 进行比较时，就会发生这种转换。<a href="language.types.html" class="link">类型</a>和<a href="language.types.type-juggling.html" class="link">类型转换</a>可以更好的解释下面的事情，也可参考函数
   <span class="function"><a href="function.settype.html" class="function">settype()</a></span>。
  </p>
  
  <p class="para">
   一个布尔值 <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span> 的 <strong><code>TRUE</code></strong> 被转换成 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 的
   <em>&quot;1&quot;</em>。<span class="type"><a href="language.types.boolean.html" class="type Boolean">Boolean</a></span> 的 <strong><code>FALSE</code></strong> 被转换成
   <em>&quot;&quot;</em>（空字符串）。这种转换可以在 <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
   和 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 之间相互进行。
  </p>

  <p class="para"> 
   一个整数 <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> 或浮点数 <span class="type"><a href="language.types.float.html" class="type float">float</a></span> 被转换为数字的字面样式的
   <span class="type"><a href="language.types.string.html" class="type string">string</a></span>（包括 <span class="type"><a href="language.types.float.html" class="type float">float</a></span>
   中的指数部分）。使用指数计数法的浮点数（<em>4.1E+6</em>）也可转换。
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    在脚本的区域（category LC_NUMERIC）中定义了十进制小数点字符。参见 <span class="function"><a href="function.setlocale.html" class="function">setlocale()</a></span>。
   </p>
  </p></blockquote>

  <p class="para">
   数组 <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 总是转换成字符串
   <em>&quot;Array&quot;</em>，因此，<span class="function"><a href="function.echo.html" class="function">echo</a></span> 和 
   <span class="function"><a href="function.print.html" class="function">print</a></span> 无法显示出该<span class="type"><span class="type 数组">数组</span></span>的内容。要显示某个单元，可以用 
   <em>echo $arr[&#039;foo&#039;]</em> 这种结构。要显示整个数组内容见下文。
  </p>

  <p class="para">
   在 PHP 4 中对象 <span class="type"><a href="language.types.object.html" class="type object">object</a></span> 总是被转换成字符串
   <em>&quot;Object&quot;</em>，如果为了调试原因需要打印出对象的值，请继续阅读下文。为了得到对象的类的名称，可以用 
   <span class="function"><a href="function.get-class.html" class="function">get_class()</a></span> 函数。自 PHP 5 起，适当时可以用 <a href="language.oop5.magic.html" class="link">__toString</a> 方法。
  </p>

  <p class="para">
   资源 <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> 总会被转变成 <em>&quot;Resource id #1&quot; </em>
   这种结构的字符串，其中的 <em>1</em> 是 PHP
   在运行时分配给该 <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> 的唯一值。不要依赖此结构，可能会有变更。要得到一个
   <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> 的类型，可以用函数 <span class="function"><a href="function.get-resource-type.html" class="function">get_resource_type()</a></span>。
  </p>

  <p class="para">
   <strong><code>NULL</code></strong> 总是被转变成空字符串。
  </p>
  
  <p class="para">
   如上面所说的，直接把 <span class="type"><a href="language.types.array.html" class="type array">array</a></span>，<span class="type"><a href="language.types.object.html" class="type object">object</a></span> 或 <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span>
   转换成 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 不会得到除了其类型之外的任何有用信息。可以使用函数 
   <span class="function"><a href="function.print-r.html" class="function">print_r()</a></span> 和 <span class="function"><a href="function.var-dump.html" class="function">var_dump()</a></span> 列出这些类型的内容。
  </p>
  
  <p class="para">
   大部分的 PHP 值可以转变成 <span class="type"><a href="language.types.string.html" class="type string">string</a></span> 来永久保存，这被称作串行化，可以用函数
   <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span> 来实现。如果 PHP 引擎设定支持
   <a href="ref.wddx.html" class="link">WDDX</a>，PHP 值也可被串行化为格式良好的 XML 文本。
  </p>

 </div>

 <div class="sect2" id="language.types.string.conversion">
  <h3 class="title">字符串转换为数值</h3>

  <p class="simpara">
   当一个字符串被当作一个数值来取值，其结果和类型如下：
  </p>

  <p class="simpara">
   如果该字符串没有包含 &#039;.&#039;，&#039;e&#039; 或 &#039;E&#039;
   并且其数字值在整型的范围之内（由 <strong><code>PHP_INT_MAX</code></strong>
   所定义），该字符串将被当成 <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>
   来取值。其它所有情况下都被作为 <span class="type"><a href="language.types.float.html" class="type float">float</a></span> 来取值。
  </p>

  <p class="para">
   该字符串的开始部分决定了它的值。如果该字符串以合法的数值开始，则使用该数值。否则其值为
   0（零）。合法数值由可选的正负号，后面跟着一个或多个数字（可能有小数点），再跟着可选的指数部分。指数部分由
   &#039;e&#039; 或 &#039;E&#039; 后面跟着一个或多个数字构成。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"10.5"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;float&nbsp;(11.5)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"-1.3e3"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;float&nbsp;(-1299)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"bob-1.3e3"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;integer&nbsp;(1)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"bob3"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;integer&nbsp;(1)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"10&nbsp;Small&nbsp;Pigs"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;integer&nbsp;(11)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"10.2&nbsp;Little&nbsp;Piggies"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;float&nbsp;(14.2)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"10.0&nbsp;pigs&nbsp;"&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;float&nbsp;(11)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"10.0&nbsp;pigs&nbsp;"&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;is&nbsp;float&nbsp;(11)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="simpara">
   更多信息可以参考 Unix 手册中的 strtod(3)。
  </p>

  <p class="para">
   本节中的示例可以通过复制／粘贴到下面的代码中来显示：
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"\$foo==</span><span style="color: #0000BB">$foo</span><span style="color: #DD0000">;&nbsp;type&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">gettype&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="para">
   不要想像在 C 语言中的那样，通过将一个字符转换成整数以得到其代码。使用函数
   <span class="function"><a href="function.ord.html" class="function">ord()</a></span> 和 <span class="function"><a href="function.chr.html" class="function">chr()</a></span> 实现 ASCII 码和字符间的转换。
  </p>

 </div>

 <div class="sect2" id="language.types.string.details">
  
  <h3 class="title">字符串类型详解</h3>
  
  <p class="para">
   PHP 中的 <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
   的实现方式是一个由字节组成的数组再加上一个整数指明缓冲区长度。并无如何将字节转换成字符的信息，由程序员来决定。字符串由什么值来组成并无限制；特别的，其值为
   <em>0</em>（"NUL bytes"）的字节可以处于字符串任何位置（不过有几个函数，在本手册中被称为非"二进制安全"的，也许会把
   NUL 字节之后的数据全都忽略）。
  </p>
  <p class="para">
   字符串类型的此特性解释了为什么 PHP 中没有单独的"byte"类型 -
   已经用字符串来代替了。返回非文本值的函数 - 例如从网络套接字读取的任意数据
   - 仍会返回字符串。
  </p>
  <p class="para">
   由于 PHP 并不特别指明字符串的编码，那字符串到底是怎样编码的呢？例如字符串
   <em>&quot;á&quot;</em> 到底是等于
   <em>&quot;\xE1&quot;</em>（ISO-8859-1），<em>&quot;\xC3\xA1&quot;</em>（UTF-8，C
   form），<em>&quot;\x61\xCC\x81&quot;</em>（UTF-8，D
   form）还是任何其它可能的表达呢？答案是字符串会被按照该脚本文件相同的编码方式来编码。因此如果一个脚本的编码是
   ISO-8859-1，则其中的字符串也会被编码为 ISO-8859-1，以此类推。不过这并不适用于激活了 Zend Multibyte
   时；此时脚本可以是以任何方式编码的（明确指定或被自动检测）然后被转换为某种内部编码，然后字符串将被用此方式编码。注意脚本的编码有一些约束（如果激活了 Zend Multibyte 则是其内部编码）-
   这意味着此编码应该是 ASCII 的兼容超集，例如
   UTF-8 或 ISO-8859-1。不过要注意，依赖状态的编码其中相同的字节值可以用于首字母和非首字母而转换状态，这可能会造成问题。
  </p>
  <p class="para">
   当然了，要做到有用，操作文本的函数必须假定字符串是如何编码的。不幸的是，PHP
   关于此的函数有很多变种：
  </p>
  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     某些函数假定字符串是以单字节编码的，但并不需要将字节解释为特定的字符。例如
     <span class="function"><a href="function.substr.html" class="function">substr()</a></span>，<span class="function"><a href="function.strpos.html" class="function">strpos()</a></span>，<span class="function"><a href="function.strlen.html" class="function">strlen()</a></span> 和
     <span class="function"><a href="function.strcmp.html" class="function">strcmp()</a></span>。理解这些函数的另一种方法是它们作用于内存缓冲区，即按照字节和字节下标操作。
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     某些函数被传递入了字符串的编码方式，也可能会假定默认无此信息。例如
     <span class="function"><a href="function.htmlentities.html" class="function">htmlentities()</a></span> 和
     <a href="book.mbstring.html" class="link">mbstring</a> 扩展中的大部分函数。
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     其它函数使用了当前区域（见 <span class="function"><a href="function.setlocale.html" class="function">setlocale()</a></span>），但是逐字节操作。例如
     <span class="function"><a href="function.strcasecmp.html" class="function">strcasecmp()</a></span>，<span class="function"><a href="function.strtoupper.html" class="function">strtoupper()</a></span> 和
     <span class="function"><a href="function.ucfirst.html" class="function">ucfirst()</a></span>。这意味着这些函数只能用于单字节编码，而且编码要与区域匹配。例如
     <em>strtoupper(&quot;á&quot;)</em> 在区域设定正确并且 <em>á</em>
     是单字节编码时会返回 <em>&quot;á&quot;</em>。如果是用 UTF-8
     编码则不会返回正确结果，其结果根据当前区域有可能返回损坏的值。
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     最后一些函数会假定字符串是使用某特定编码的，通常是
     UTF-8。<a href="book.intl.html" class="link">intl</a> 扩展和
     <a href="book.pcre.html" class="link">PCRE</a>（上例中仅在使用了
     <em>u</em> 修饰符时）扩展中的大部分函数都是这样。尽管这是由于其特殊用途，<span class="function"><a href="function.utf8-decode.html" class="function">utf8_decode()</a></span>
     会假定 UTF-8 编码而 <span class="function"><a href="function.utf8-encode.html" class="function">utf8_encode()</a></span> 会假定
     ISO-8859-1 编码。
    </span>
   </li>
  </ul>

  <p class="para">
   最后，要书写能够正确使用 Unicode 的程序依赖于很小心地避免那些可能会损坏数据的函数。要使用来自于
   <a href="book.intl.html" class="link">intl</a> 和 <a href="book.mbstring.html" class="link">mbstring</a>
   扩展的函数。不过使用能处理 Unicode 编码的函数只是个开始。不管用何种语言提供的函数，最基本的还是了解
   Unicode 规格。例如一个程序如果假定只有大写和小写，那可是大错特错。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119304""></a>
  <div class="note">
   <strong class="user">user at grantsearch dot com dot au</strong>
   <a href="#119304" class="date">10-May-2016 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A word of caution about taking the use of single and double quotes shown here too literally.<br />
<br />
A convention is established early on, referring to double-quotes (") and semicolon (;) for example, so the later section about concatenation using the '.' (dot) operator seems to indicate the dot must be enclosed by single quotes.<br />
<br />
This tripped me up until I mentally reparsed it as the dot (.) operator.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118952""></a>
  <div class="note">
   <strong class="user">othpiik at gmail dot com</strong>
   <a href="#118952" class="date">06-Mar-2016 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"\n" and "\t"&nbsp; seem not work in PHP7.0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118916""></a>
  <div class="note">
   <strong class="user">sideshowAnthony at googlemail dot com</strong>
   <a href="#118916" class="date">27-Feb-2016 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something I experienced which no doubt will help someone . . .<br />
In my editor, this will syntax highlight HTML and the $comment:<br />
<br />
$html = &lt;&lt;&lt;"EOD"<br />
&lt;b&gt;$comment&lt;/b&gt;<br />
EOD;<br />
<br />
Using this shows all the same colour:<br />
<br />
$html = &lt;&lt;&lt;EOD<br />
&lt;b&gt;$comment&lt;/b&gt;<br />
EOD;<br />
<br />
making it a lot easier to work with</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116496""></a>
  <div class="note">
   <strong class="user">cnbk201 at gmail dot com</strong>
   <a href="#116496" class="date">13-Jan-2015 07:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Small note to consider in heredoc multiple dimension array will not work and neither will any native language functions<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"man"</span><span class="keyword">;<br />
</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'man'</span><span class="keyword">] = </span><span class="string">"player"</span><span class="keyword">;<br />
echo &lt;&lt;&lt;ED<br />
</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">] // will result in error<br />
substr(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">, 1) // will result in substr(man, 1)<br />
ED; <br />
?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114736""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#114736" class="date">01-Apr-2014 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$my_int = "12,140";<br />
echo&nbsp; 1 + $my_int ;<br />
<br />
Returns 13 not the expected 12141</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114578""></a>
  <div class="note">
   <strong class="user">Ray.Paseur often uses Gmail</strong>
   <a href="#114578" class="date">08-Mar-2014 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Example #8, above, consider the risk to the script if a programmer were to define('koolaid1', 'XYZ');&nbsp; For this reason it's wise to use quotes around literal-string associative array keys.&nbsp; As written without quotes, PHP should raise a Notice.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114526""></a>
  <div class="note">
   <strong class="user">benl39 at free dot fr</strong>
   <a href="#114526" class="date">04-Mar-2014 06:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="string">'error' </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">, </span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// TRUE<br />
</span><span class="keyword">echo </span><span class="string">'error' </span><span class="keyword">== </span><span class="string">'0'</span><span class="keyword">, </span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// FALSE<br />
</span><span class="keyword">echo </span><span class="string">'0' </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">, </span><span class="string">'&lt;br&gt;'</span><span class="keyword">; </span><span class="comment">// TRUE<br />
<br />
// So, 'error' != 'error' ?<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114523""></a>
  <div class="note">
   <strong class="user">necrodust44 at gmail dot com</strong>
   <a href="#114523" class="date">04-Mar-2014 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
String conversion to numbers.<br />
<br />
Unfortunately, the documentation is not correct.<br />
<br />
?The value is given by the initial portion of the string. If the string starts with valid numeric data, this will be the value used. Otherwise, the value will be 0 (zero).?<br />
<br />
It is not said and is not shown in examples throughout the documentation that, while converting strings to numbers, leading space characters are ignored, like with the strtod function.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&nbsp; &nbsp;&nbsp; \v\f&nbsp; &nbsp; \r&nbsp;&nbsp; 1234" </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// 1235<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_export </span><span class="keyword">(</span><span class="string">"\v\f&nbsp; &nbsp; \r&nbsp;&nbsp; 1234" </span><span class="keyword">== </span><span class="string">"1234"</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// true<br />
</span><span class="default">?&gt;<br />
</span><br />
However, PHP's behaviour differs even from the strtod's. The documentation says that if the string contains a "e" or "E" character, it will be parsed as a float, and suggests to see the manual for strtod for more information. The manual says<br />
<br />
?A hexadecimal number consists of a "0x" or "0X" followed by a nonempty sequence of hexadecimal digits possibly containing a radix character, optionally followed by a binary exponent.&nbsp; A binary exponent consists of a 'P' or 'p', followed by an optional plus or minus sign, followed by a nonempty sequence of decimal digits, and indicates multiplication by a power of 2.?<br />
<br />
But it seems that PHP does not recognise the exponent or the radix character.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"0xEp4" </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// 15<br />
</span><span class="default">?&gt;<br />
</span><br />
strtod also uses the current locale to choose the radix character, but PHP ignores the locale, and the radix character is always 2E. However, PHP uses the locale while converting numbers to strings.<br />
<br />
With strtod, the current locale is also used to choose the space characters, I don't know about PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113857""></a>
  <div class="note">
   <strong class="user">espertalhao04 at hotmail dot com</strong>
   <a href="#113857" class="date">10-Dec-2013 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
gtisza at gmail dot com<br />
<br />
You incorrectly stated that thee documentation doesn't refer anything about the semicolon at the end of the heredocs and nowdocs&nbsp; being interpreted as a "real" semicolon.<br />
<br />
If you read carefully, you will notice this, in the 1st sentence of the warning about heredocs:<br />
<br />
"It is very important to note that the line with the closing identifier must contain no other characters, except a semicolon (;)."<br />
<br />
Interesting...<br />
It is refering about semicolons...<br />
<br />
But wait, there is more:<br />
<br />
<a href="http://php.net/manual/en/language.basic-syntax.instruction-separation.php" rel="nofollow" target="_blank">http://php.net/manual/en/language.basic-syntax.instruction-separation.php</a><br />
1st sentence says:<br />
"As in C or Perl, PHP requires instructions to be terminated with a semicolon at the end of each statement."<br />
<br />
So, here says that semicolons are statement separators, basicly...<br />
<br />
So, if you put a "real" semicolon at the end of these examples:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $a</span><span class="keyword">=</span><span class="default">5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo</span><span class="keyword">=</span><span class="string">"String"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bar</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$yep</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$other</span><span class="keyword">=</span><span class="default">func</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span>Why shouldn't you put at the end of heredocs and nowdocs?<br />
After all, a heredoc or a nowdoc is simply a string.<br />
<br />
You should read more carefully the documentation first before saying any comment.<br />
<br />
About serious questions:<br />
I didn't read all comments here, but you can run functions inside strings and heredocs.<br />
<br />
And you can even nest them inside {}<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $f</span><span class="keyword">=function(</span><span class="default">$x</span><span class="keyword">){</span><span class="default">$a</span><span class="keyword">=</span><span class="default">func_get_args</span><span class="keyword">();unset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);};<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$b</span><span class="keyword">=&lt;&lt;&lt;NUMBERS<br />
</span><span class="string">4.0909 rounded is: </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">(</span><span class="string">'round'</span><span class="keyword">,</span><span class="default">4.0909</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">)}</span><span class="string"><br />
Time now is: </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">(</span><span class="string">'time'</span><span class="keyword">)}</span><span class="string"><br />
Nested heredocs/nowdocs: </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">(</span><span class="string">'sprintf'</span><span class="keyword">,&lt;&lt;&lt;OTHER<br />
</span><span class="string">Here is an %s of nested %s<br />
</span><span class="keyword">OTHER<br />
,</span><span class="string">"Example"</span><span class="keyword">,&lt;&lt;&lt;'NOW'<br />
</span><span class="string">heredocs and nowdocs<br />
</span><span class="keyword">NOW<br />
)}</span><span class="string"><br />
</span><span class="keyword">NUMBERS;<br />
<br />
</span><span class="comment">/*echoes (time is system and real time relative):<br />
4.0909 rounded is: 4<br />
Time now is: 1386670912<br />
Nested heredocs/nowdocs: Here is an Example of nested heredocs and nowdocs<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
It's not pretty, and is hard to read, but sometimes it is useful to confuse curious people (like minifying the code).<br />
<br />
Warning: if any function that runs inside a string or heredoc gives a fatal error, the script MAY continue!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111522""></a>
  <div class="note">
   <strong class="user">php at richardneill dot org</strong>
   <a href="#111522" class="date">01-Mar-2013 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Leading zeroes in strings are (least-surprise) not treated as octal.<br />
Consider:<br />
&nbsp; $x = "0123"&nbsp; + 0;&nbsp;&nbsp; <br />
&nbsp; $y = 0123 + 0;<br />
&nbsp; echo "x is $x, y is $y";&nbsp; &nbsp; //prints&nbsp; "x is 123, y is 83"<br />
in other words:<br />
&nbsp;* leading zeros in numeric literals in the source-code are interpreted as "octal", c.f. strtol().<br />
&nbsp;* leading zeros in strings (eg user-submitted data), when cast (implicitly or explicitly) to integer are ignored, and considered as decimal, c.f. strtod().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110259""></a>
  <div class="note">
   <strong class="user">mcamiano at ncsu dot edu</strong>
   <a href="#110259" class="date">05-Oct-2012 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the lack of complex expression interpolation, just assign an identity function to a variable and call it:<br />
<br />
function id($arg) { return $arg; }<br />
<br />
$expr = id;<br />
<br />
echo "Field is: {$expr( "1 ". ucfirst('whatzit')) }";<br />
&nbsp;<br />
It is slower due to an additional function call, but it does avoid the assignment of a one-shot temporary variable. When there are a lot of very simple value transformations made just for display purposes, it can de-clutter code.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108984""></a>
  <div class="note">
   <strong class="user">Denis R.</strong>
   <a href="#108984" class="date">10-Jun-2012 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi.<br />
<br />
I noticed that the documentation does not mention that when you have an XML element which contains a dash (-) in its name can only be accessed using the bracelets notation.<br />
For example:<br />
&lt;xml version="1"&gt;<br />
&lt;root&gt;<br />
&nbsp;&nbsp; &lt;element-one&gt;value4element-one&lt;/element-one&gt;<br />
&lt;/root&gt;<br />
<br />
to access the above 'element-one' using SimpleXML you need to use the following:<br />
<br />
$simpleXMLObj-&gt;root-&gt;{'element-one'}<br />
<br />
to retrieve the value.<br />
<br />
Hope this helps,<br />
Denis R.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108144""></a>
  <div class="note">
   <strong class="user">m021 at springtimesoftware dot com</strong>
   <a href="#108144" class="date">01-Apr-2012 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Heredoc literals delete any trailing space (tabs and blanks) on each line. This is unexpected, since quoted strings do not do this. This is probably done for historical reasons, so would not be considered a bug.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107138""></a>
  <div class="note">
   <strong class="user">gtisza at gmail dot com</strong>
   <a href="#107138" class="date">10-Jan-2012 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The documentation does not mention, but a closing semicolon at the end of the heredoc is actually interpreted as a real semicolon, and as such, sometimes leads to syntax errors.<br />
<br />
This works:<br />
<br />
<span class="default">&lt;?php<br />
$foo </span><span class="keyword">= &lt;&lt;&lt;END<br />
</span><span class="string">abcd<br />
</span><span class="keyword">END;<br />
</span><span class="default">?&gt;<br />
</span><br />
This does not:<br />
<br />
<span class="default">&lt;?php<br />
foo</span><span class="keyword">(&lt;&lt;&lt;END<br />
</span><span class="string">abcd<br />
</span><span class="keyword">END;<br />
);<br />
</span><span class="comment">// syntax error, unexpected ';'<br />
</span><span class="default">?&gt;<br />
</span><br />
Without semicolon, it works fine:<br />
<br />
<span class="default">&lt;?php<br />
foo</span><span class="keyword">(&lt;&lt;&lt;END<br />
</span><span class="string">abcd<br />
</span><span class="keyword">END<br />
);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105369""></a>
  <div class="note">
   <strong class="user">sgbeal at googlemail dot com</strong>
   <a href="#105369" class="date">12-Aug-2011 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The docs say: "Heredoc text behaves just like a double-quoted string, without the double quotes" but there is a notable hidden exception to that rule: the final newline in the string (the one before closing heredoc token) is elided. i.e. if you have:<br />
<br />
$foo = &lt;&lt;&lt;EOF<br />
a<br />
b<br />
c<br />
EOF;<br />
<br />
the result is equivalent to "a\nb\nc", NOT "a\nb\nc\n" like the docs imply.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103890""></a>
  <div class="note">
   <strong class="user">Michael</strong>
   <a href="#103890" class="date">09-May-2011 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just want to mention that if you want a literal { around a variable within a string, for example if you want your output to be something like the following:<br />
<br />
{hello, world}<br />
<br />
and all that you put inside the {} is a variable, you can do a double {{}}, like this:<br />
<br />
$test = 'hello, world';<br />
echo "{{$test}}";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103680""></a>
  <div class="note">
   <strong class="user">Ultimater at gmail dot com</strong>
   <a href="#103680" class="date">28-Apr-2011 12:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you require a NowDoc but don't have support for them on your server -- since your PHP version is less than PHP 5.3.0 -- and you are in need of a workaround, I'd suggest using PHP's __halt_compiler() which is basically a knock-off of Perl's __DATA__ token if you are familiar with it.<br />
<br />
Give this a run to see my suggestion in action:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//set $nowDoc to a string containing a code snippet for the user to read<br />
</span><span class="default">$nowDoc </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">__COMPILER_HALT_OFFSET__</span><span class="keyword">);<br />
</span><span class="default">$nowDoc</span><span class="keyword">=</span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$nowDoc</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
<br />
echo &lt;&lt;&lt;EOF<br />
</span><span class="string">&lt;!doctype html&gt;<br />
&lt;html&gt;<br />
&lt;head&gt;<br />
&lt;meta http-equiv="content-type" content="text/html; CHARSET=gb2312" /&gt;<br />
&lt;title&gt;NowDoc support for PHP &amp;lt; 5.3.0&lt;/title&gt;<br />
&lt;meta name="author" content="Ultimater at gmail dot com" /&gt;<br />
&lt;meta name="about-this-page"<br />
content="Note that I built this code explicitly for the<br />
php.net documenation for demonstrative purposes." /&gt;<br />
&lt;style type="text/css"&gt;<br />
body{text-align:center;}<br />
table.border{background:#e0eaee;margin:1px auto;padding:1px;}<br />
table.border td{padding:5px;border:1px solid #8880ff;text-align:left;<br />
background-color:#eee;}<br />
code ::selection{background:#5f5color:white;}<br />
code ::-moz-selection{background:#5f5;color:white;}<br />
a{color:#33a;text-decoration:none;}<br />
a:hover{color:rgb(3,128,252);}<br />
&lt;/style&gt;<br />
&lt;/head&gt;<br />
&lt;body&gt;<br />
&lt;h1 style="margin:1px auto;"&gt;<br />
&lt;a<br />
href="<a href="http://php.net/manual/en/language.types.string.php#example-77" rel="nofollow" target="_blank">http://php.net/manual/en/language.types.string.php#example-77</a>"&gt;<br />
Example #8 Simple syntax example<br />
&lt;/a&gt;&lt;/h1&gt;<br />
&lt;table class="border"&gt;&lt;tr&gt;&lt;td&gt;<br />
</span><span class="default">$nowDoc</span><span class="string"><br />
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;<br />
</span><span class="keyword">EOF;<br />
<br />
__halt_compiler()<br />
</span><span class="comment">//Example code snippet we want displayed on the webpage<br />
//note that the compiler isn't actually stopped until the semicolon<br />
</span><span class="keyword">;&lt;?</span><span class="default">php<br />
$juices </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">, </span><span class="string">"koolaid1" </span><span class="keyword">=&gt; </span><span class="string">"purple"</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"He drank some </span><span class="default">$juices</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string"> juice."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="string">"He drank some </span><span class="default">$juices</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string"> juice."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="string">"He drank some juice made of </span><span class="default">$juice</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string">s."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// Won't work<br />
</span><span class="keyword">echo </span><span class="string">"He drank some </span><span class="default">$juices</span><span class="keyword">[</span><span class="default">koolaid1</span><span class="keyword">]</span><span class="string"> juice."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
class </span><span class="default">people </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$john </span><span class="keyword">= </span><span class="string">"John Smith"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$jane </span><span class="keyword">= </span><span class="string">"Jane Smith"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$robert </span><span class="keyword">= </span><span class="string">"Robert Paulsen"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$smith </span><span class="keyword">= </span><span class="string">"Smith"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$people </span><span class="keyword">= new </span><span class="default">people</span><span class="keyword">();<br />
<br />
echo </span><span class="string">"</span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">john</span><span class="string"> drank some </span><span class="default">$juices</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string"> juice."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">john</span><span class="string"> then said hello to </span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">jane</span><span class="string">."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">john</span><span class="string">'s wife greeted </span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">robert</span><span class="string">."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">robert</span><span class="string"> greeted the two </span><span class="default">$people</span><span class="keyword">-&gt;</span><span class="default">smiths</span><span class="string">."</span><span class="keyword">; </span><span class="comment">// Won't work<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102709""></a>
  <div class="note">
   <strong class="user">dee jay simple 0 0 7 at  ge mahl  dot  com</strong>
   <a href="#102709" class="date">01-Mar-2011 09:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I recently discovered the joys of using heredoc with sprintf and positions. Useful if you want some code to iterate, you can repeat placeholders.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">getNumber</span><span class="keyword">(</span><span class="default">$num </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">20</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$foo </span><span class="keyword">+ </span><span class="default">$num</span><span class="keyword">);
<br />
}
<br />
function </span><span class="default">getString</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= array(</span><span class="string">"California"</span><span class="keyword">,</span><span class="string">"Oregon"</span><span class="keyword">,</span><span class="string">"Washington"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$foo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
}
<br />
function </span><span class="default">getDiv</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">getNumber</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$div </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">( </span><span class="string">"&lt;div&gt;%s&lt;/div&gt;"</span><span class="keyword">, </span><span class="default">getNumber</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(-</span><span class="default">5</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">)) );
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$div</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">$string </span><span class="keyword">= &lt;&lt;&lt;THESTRING
<br />
</span><span class="string">I like the state of %1\$s &lt;br /&gt;
<br />
I picked: %2\$d as a number, &lt;br /&gt;
<br />
I also picked %2\$d as a number again &lt;br /&gt;
<br />
%3\$s&lt;br /&gt;
<br />
%3\$s&lt;br /&gt;
<br />
%3\$s&lt;br /&gt;
<br />
%3\$s&lt;br /&gt;
<br />
%3\$s&lt;br /&gt;
<br />
</span><span class="keyword">THESTRING;
<br />

<br />
</span><span class="default">$returnText </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(&nbsp; </span><span class="default">$string</span><span class="keyword">, </span><span class="default">getString</span><span class="keyword">(),</span><span class="default">getNumber</span><span class="keyword">(),</span><span class="default">getDiv</span><span class="keyword">()&nbsp; );
<br />

<br />
echo </span><span class="default">$returnText</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Expected output of the above code:
<br />

<br />
I like the state of Oregon
<br />
I picked: 15 as a number,
<br />
I also picked 15 as a number again
<br />
5
<br />

<br />
5
<br />

<br />
5
<br />

<br />
5
<br />

<br />
5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98140""></a>
  <div class="note">
   <strong class="user">saamde at gmail dot com</strong>
   <a href="#98140" class="date">28-May-2010 12:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Watch out for the "unexpected T_SL" error.&nbsp; This appears to occur when there is white space just after "&lt;&lt;&lt;EOT" and since it's white space it's real hard to spot the error in your code.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95184""></a>
  <div class="note">
   <strong class="user">&amp;#34;Sascha Ziemann&amp;#34;</strong>
   <a href="#95184" class="date">17-Dec-2009 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Empty strings seem to be no real strings, because they behave different to strings containing data. Here is an example.<br />
<br />
It is possible to change a character at a specific position using the square bracket notation:<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">'0'</span><span class="keyword">;<br />
</span><span class="default">$str</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">'a'</span><span class="keyword">;<br />
echo </span><span class="default">$str</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// =&gt; 'a'<br />
</span><span class="default">?&gt;<br />
</span><br />
It is also possible to change a character with does not exist, if the index is "behind" the end of the string:<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">'0'</span><span class="keyword">;<br />
</span><span class="default">$str</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'a'</span><span class="keyword">;<br />
echo </span><span class="default">$str</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// =&gt; 0a<br />
</span><span class="default">?&gt;<br />
</span><br />
But if you do that on an empty string, the string gets silently converted into an array:<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
</span><span class="default">$str</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">'a'</span><span class="keyword">;<br />
echo </span><span class="default">$str</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// =&gt; Array<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94159""></a>
  <div class="note">
   <strong class="user">shd at earthling dot net</strong>
   <a href="#94159" class="date">20-Oct-2009 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want a parsed variable surrounded by curly braces, just double the curly braces:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; $foo </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;
<br />
&nbsp; echo </span><span class="string">"{</span><span class="keyword">{</span><span class="default">$foo</span><span class="keyword">}</span><span class="string">}"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
will just show {bar}. The { is special only if followed by the $ sign and matches one }. In this case, that applies only to the inner braces. The outer ones are not escaped and pass through directly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93576""></a>
  <div class="note">
   <strong class="user">deminy at deminy dot net</strong>
   <a href="#93576" class="date">17-Sep-2009 06:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although current documentation says 'A string literal can be specified in four different ways: ...', actually there is a fifth way to specify a (binary) string: <br />
<br />
<span class="default">&lt;?php $binary </span><span class="keyword">= </span><span class="string">b'This is a binary string'</span><span class="keyword">; </span><span class="default">?&gt;<br />
</span><br />
The above statement declares a binary string using the 'b' prefix, which is available since PHP 5.2.1. However, it will only have effect as of PHP 6.0.0, as noted on <a href="http://www.php.net/manual/en/function.is-binary.php ." rel="nofollow" target="_blank">http://www.php.net/manual/en/function.is-binary.php .</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93325""></a>
  <div class="note">
   <strong class="user">Liesbeth</strong>
   <a href="#93325" class="date">03-Sep-2009 10:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to emulate a nowdoc in PHP &lt; 5.3, try using HTML mode and output capturing. This way '$' or '\n' in your string won't be a problem anymore (but unfortunately, '&lt;?' will be).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Start of script<br />
<br />
</span><span class="default">ob_start</span><span class="keyword">(); </span><span class="default">?&gt;<br />
</span>&nbsp; A text with 'quotes' <br />
&nbsp;&nbsp;&nbsp; and $$$dollars$$$.<br />
<span class="default">&lt;?php $input </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="default">ob_end_clean</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Do what you want with $input<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">. </span><span class="default">$input </span><span class="keyword">. </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91628""></a>
  <div class="note">
   <strong class="user">headden at karelia dot ru</strong>
   <a href="#91628" class="date">20-Jun-2009 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an easy hack to allow double-quoted strings and heredocs to contain arbitrary expressions in curly braces syntax, including constants and other function calls:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Hack declaration<br />
</span><span class="keyword">function </span><span class="default">_expr</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) { return </span><span class="default">$v</span><span class="keyword">; }<br />
</span><span class="default">$_expr </span><span class="keyword">= </span><span class="string">'_expr'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Our playground<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'qwe'</span><span class="keyword">, </span><span class="string">'asd'</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'zxc'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
<br />
</span><span class="default">$a</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">;<br />
</span><span class="default">$b</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;<br />
<br />
function </span><span class="default">c</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) { return </span><span class="default">$a</span><span class="keyword">+</span><span class="default">$b</span><span class="keyword">; }<br />
<br />
</span><span class="comment">// Usage<br />
</span><span class="keyword">echo </span><span class="string">"pre </span><span class="keyword">{</span><span class="default">$_expr</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">)}</span><span class="string"> post\n"</span><span class="keyword">; </span><span class="comment">// outputs 'pre 3 post'<br />
</span><span class="keyword">echo </span><span class="string">"pre </span><span class="keyword">{</span><span class="default">$_expr</span><span class="keyword">(</span><span class="default">qwe</span><span class="keyword">)}</span><span class="string"> post\n"</span><span class="keyword">; </span><span class="comment">// outputs 'pre asd post'<br />
</span><span class="keyword">echo </span><span class="string">"pre </span><span class="keyword">{</span><span class="default">$_expr</span><span class="keyword">(</span><span class="default">c</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)+</span><span class="default">zxc</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">)}</span><span class="string"> post\n"</span><span class="keyword">; </span><span class="comment">// outputs 'pre 17 post'<br />
<br />
// General syntax is {$_expr(...)}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87390""></a>
  <div class="note">
   <strong class="user">cvolny at gmail dot com</strong>
   <a href="#87390" class="date">03-Dec-2008 08:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I commented on a php bug feature request for a string expansion function and figured I should post somewhere it might be useful:<br />
<br />
using regex, pretty straightforward:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">stringExpand</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, array </span><span class="default">$vars</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// loop over $vars map<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$vars </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// use preg_replace to match ${`$name`} or $`$name`<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'/\$\{?%s\}?/'</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">), </span><span class="default">$value</span><span class="keyword">,<br />
</span><span class="default">$subject</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// return variable expanded string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$subject</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
using eval() and not limiting access to only certain variables (entire current symbol table including [super]globals):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">stringExpandDangerous</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, array </span><span class="default">$vars </span><span class="keyword">= array(), </span><span class="default">$random </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// extract $vars into current symbol table<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$delim</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if requested to be random (default), generate delim, otherwise use predefined (trivially faster)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$random</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$delim </span><span class="keyword">= </span><span class="string">'___' </span><span class="keyword">. </span><span class="default">chr</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="string">'___'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$delim </span><span class="keyword">= </span><span class="string">'__ASDFZXCV1324ZXCV__'</span><span class="keyword">;&nbsp; </span><span class="comment">// button mashing...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // built the eval code<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$statement </span><span class="keyword">= </span><span class="string">"return &lt;&lt;&lt;</span><span class="default">$delim</span><span class="string">\n\n" </span><span class="keyword">. </span><span class="default">$subject </span><span class="keyword">. </span><span class="string">"\n</span><span class="default">$delim</span><span class="string">;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// execute statement, saving output to $result variable<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= eval(</span><span class="default">$statement</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if eval() returned FALSE, throw a custom exception<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$result </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">EvalException</span><span class="keyword">(</span><span class="default">$statement</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return variable expanded string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope that helps someone, but I do caution against using the eval() route even if it is tempting.&nbsp; I don't know if there's ever a truely safe way to use eval() on the web, I'd rather not use it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87035""></a>
  <div class="note">
   <strong class="user">Obeliks</strong>
   <a href="#87035" class="date">16-Nov-2008 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Expectedly <span class="default">&lt;?php $string</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] </span><span class="default">?&gt;</span> and <span class="default">&lt;?php substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) </span><span class="default">?&gt;</span> will yield the same result... normally!
<br />

<br />
However, when you turn on the&nbsp; Function Overloading Feature (<a href="http://php.net/manual/en/mbstring.overload.php" rel="nofollow" target="_blank">http://php.net/manual/en/mbstring.overload.php</a>), this might not be true!
<br />

<br />
If you use this Overloading Feature with 3rd party software, you should check for usage of the String access operator, otherwise you might be in for some nasty surprises.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86365""></a>
  <div class="note">
   <strong class="user">Salil Kothadia</strong>
   <a href="#86365" class="date">15-Oct-2008 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An interesting finding about Heredoc "syntax error, unexpected $end".<br />
I got this error because I did not use the php close tag "?&gt;" and I had no code after the heredoc code.<br />
<br />
foo1.php code gives "syntax error, unexpected $end".<br />
But in foo2.php and foo3.php, when you add a php close tag or when you have some more code after heredoc it works fine.<br />
<br />
Example Code:<br />
foo1.php<br />
1. <span class="default">&lt;?php<br />
2. $str </span><span class="keyword">= &lt;&lt;&lt;EOD<br />
</span><span class="string">3. Example of string<br />
4. spanning multiple lines<br />
5. using heredoc syntax.<br />
6. EOD;<br />
7. <br />
<br />
foo2.php<br />
1. &lt;?php<br />
2. </span><span class="default">$str</span><span class="string"> = &lt;&lt;&lt;EOD<br />
3. Example of string<br />
4. spanning multiple lines<br />
5. using heredoc syntax.<br />
6. EOD;<br />
7. <br />
8. echo </span><span class="default">$str</span><span class="string">;<br />
9.<br />
<br />
foo3.php<br />
1. &lt;?php<br />
2. </span><span class="default">$str</span><span class="string"> = &lt;&lt;&lt;EOD<br />
3. Example of string<br />
4. spanning multiple lines<br />
5. using heredoc syntax.<br />
6. EOD;<br />
7. ?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86044""></a>
  <div class="note">
   <strong class="user">steve at mrclay dot org</strong>
   <a href="#86044" class="date">30-Sep-2008 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple function to create human-readably escaped double-quoted strings for use in source code or when debugging strings with newlines/tabs/etc.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">doubleQuote</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$l </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$o </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$o </span><span class="keyword">&lt; </span><span class="default">31 </span><span class="keyword">|| </span><span class="default">$o </span><span class="keyword">&gt; </span><span class="default">126</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">$o</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">9</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\t'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">10</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\n'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">11</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\v'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">12</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\f'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">13</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\r'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\x' </span><span class="keyword">. </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">$o</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">36</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\$'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">34</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\"'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">92</span><span class="keyword">: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="string">'\\\\'</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default: </span><span class="default">$ret </span><span class="keyword">.= </span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret </span><span class="keyword">. </span><span class="string">'"'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85668""></a>
  <div class="note">
   <strong class="user">chAlx at findme dot if dot u dot need</strong>
   <a href="#85668" class="date">11-Sep-2008 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To save Your mind don't read previous comments about dates&nbsp; ;)<br />
<br />
When both strings can be converted to the numerics (in ("$a" &gt; "$b") test) then resulted numerics are used, else FULL strings are compared char-by-char:<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="string">'1.22' </span><span class="keyword">&gt; </span><span class="string">'01.23'</span><span class="keyword">); </span><span class="comment">// bool(false)<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="string">'1.22.00' </span><span class="keyword">&gt; </span><span class="string">'01.23.00'</span><span class="keyword">); </span><span class="comment">// bool(true)<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="string">'1-22-00' </span><span class="keyword">&gt; </span><span class="string">'01-23-00'</span><span class="keyword">); </span><span class="comment">// bool(true)<br />
</span><span class="default">var_dump</span><span class="keyword">((float)</span><span class="string">'1.22.00' </span><span class="keyword">&gt; (float)</span><span class="string">'01.23.00'</span><span class="keyword">); </span><span class="comment">// bool(false)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85477""></a>
  <div class="note">
   <strong class="user">harmor</strong>
   <a href="#85477" class="date">02-Sep-2008 12:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So you want to get the last character of a string using "String access and modification by character"?&nbsp; Well negative indexes are not allowed so $str[-1] will return an empty string.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Tested using: PHP 5.2.5<br />
<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">'This is a test.'</span><span class="keyword">;<br />
<br />
</span><span class="default">$last </span><span class="keyword">= </span><span class="default">$str</span><span class="keyword">[-</span><span class="default">1</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//string(0) ""<br />
</span><span class="default">$realLast </span><span class="keyword">= </span><span class="default">$str</span><span class="keyword">[</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];&nbsp; </span><span class="comment">//string(1) "."<br />
</span><span class="default">$substr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//string(1) "."<br />
<br />
</span><span class="keyword">echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$last</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$realLast</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$substr</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81457""></a>
  <div class="note">
   <strong class="user">Evan K</strong>
   <a href="#81457" class="date">28-Feb-2008 10:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I encountered the odd situation of having a string containing unexpanded escape sequences that I wanted to expand, but also contained dollar signs that would be interpolated as variables.&nbsp; "$5.25\n", for example, where I want to convert \n to a newline, but don't want attempted interpolation of $5.<br />
<br />
Some muddling through docs and many obscenties later, I produced the following, which expands escape sequences in an existing string with NO interpolation.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// where we do all our magic<br />
</span><span class="keyword">function </span><span class="default">expand_escape</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace_callback</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\\\([nrtvf]|[0-7]{1,3}|[0-9A-Fa-f]{1,2})?/'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'$matches'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'return ($matches[0] == "\\\\") ? "" : eval( sprintf(\'return "%s";\', $matches[0]) );'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// a string to test, and show the before and after<br />
</span><span class="default">$before </span><span class="keyword">= </span><span class="string">'Quantity:\t500\nPrice:\t$5.25 each'</span><span class="keyword">;<br />
</span><span class="default">$after </span><span class="keyword">= </span><span class="default">expand_escape</span><span class="keyword">(</span><span class="default">$before</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$before</span><span class="keyword">, </span><span class="default">$after</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* Outputs:<br />
string(34) "Quantity:\t500\nPrice:\t$5.25 each"<br />
string(31) "Quantity:&nbsp; &nbsp; 500<br />
Price:&nbsp; &nbsp; $5.25 each"<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78067""></a>
  <div class="note">
   <strong class="user">rkfranklin+php at gmail dot com</strong>
   <a href="#78067" class="date">26-Sep-2007 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use a variable in an array index within a double quoted string you have to realize that when you put the curly braces around the array, everything inside the curly braces gets evaluated as if it were outside a string.&nbsp; Here are some examples:<br />
<br />
<span class="default">&lt;?php<br />
$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">Person0</span><span class="keyword">] = </span><span class="default">Bob</span><span class="keyword">;<br />
</span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">Person1</span><span class="keyword">] = </span><span class="default">George</span><span class="keyword">;<br />
<br />
</span><span class="comment">// prints Bob (the ++ is used to emphasize that the expression inside the {} is really being evaluated.)<br />
</span><span class="keyword">echo </span><span class="string">"</span><span class="keyword">{</span><span class="default">$myArray</span><span class="keyword">[</span><span class="string">'Person'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">++]}</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// these print George<br />
</span><span class="keyword">echo </span><span class="string">"</span><span class="keyword">{</span><span class="default">$myArray</span><span class="keyword">[</span><span class="string">'Person'</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">]}</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="keyword">{</span><span class="default">$myArray</span><span class="keyword">[</span><span class="string">"Person</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">]}</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// These don't work<br />
</span><span class="keyword">echo </span><span class="string">"</span><span class="keyword">{</span><span class="default">$myArray</span><span class="keyword">[</span><span class="string">'Person$i'</span><span class="keyword">]}</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="keyword">{</span><span class="default">$myArray</span><span class="keyword">[</span><span class="string">'Person'</span><span class="default">$i</span><span class="keyword">]}</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// These both throw fatal errors<br />
// echo "$myArray[Person$i]&lt;br&gt;";<br />
//echo "$myArray[Person{$i}]&lt;br&gt;";<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75478""></a>
  <div class="note">
   <strong class="user">Richard Neill</strong>
   <a href="#75478" class="date">01-Jun-2007 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unlike bash, we can't do <br />
&nbsp; echo "\a"&nbsp; &nbsp; &nbsp;&nbsp; #beep!<br />
<br />
Of course, that would be rather meaningless for PHP/web, but it's useful for PHP-CLI. The solution is simple:&nbsp; echo "\x07"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74744""></a>
  <div class="note">
   <strong class="user">og at gams dot at</strong>
   <a href="#74744" class="date">26-Apr-2007 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
easy transparent solution for using constants in the heredoc format:<br />
DEFINE('TEST','TEST STRING');<br />
<br />
$const = get_defined_constants();<br />
<br />
echo &lt;&lt;&lt;END<br />
{$const['TEST']}<br />
END;<br />
<br />
Result:<br />
TEST STRING</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74710""></a>
  <div class="note">
   <strong class="user">penda ekoka</strong>
   <a href="#74710" class="date">24-Apr-2007 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
error control operator (@) with heredoc syntax:<br />
<br />
the error control operator is pretty handy for supressing minimal errors or omissions. For example an email form that request some basic non mandatory information to your users. Some may complete the form, other may not. Lets say you don't want to tweak PHP for error levels and you just wish to create some basic template that will be emailed to the admin with the user information submitted. You manage to collect the user input in an array called $form:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// creating your mailer<br />
</span><span class="default">$mailer </span><span class="keyword">= new </span><span class="default">SomeMailerLib</span><span class="keyword">();<br />
</span><span class="default">$mailer</span><span class="keyword">-&gt;</span><span class="default">from </span><span class="keyword">= </span><span class="string">' System &lt;mail@yourwebsite.com&gt;'</span><span class="keyword">;<br />
</span><span class="default">$mailer</span><span class="keyword">-&gt;</span><span class="default">to </span><span class="keyword">= </span><span class="string">'admin@yourwebsite.com'</span><span class="keyword">;<br />
</span><span class="default">$mailer</span><span class="keyword">-&gt;</span><span class="default">subject </span><span class="keyword">= </span><span class="string">'New user request'</span><span class="keyword">;<br />
</span><span class="comment">// you put the error control operator before the heredoc operator to suppress notices and warnings about unset indices like this<br />
</span><span class="default">$mailer</span><span class="keyword">-&gt;</span><span class="default">body </span><span class="keyword">= @&lt;&lt;&lt;FORM<br />
</span><span class="string">Firstname = </span><span class="keyword">{</span><span class="default">$form</span><span class="keyword">[</span><span class="string">'firstname'</span><span class="keyword">]}</span><span class="string"><br />
Lastname = </span><span class="keyword">{</span><span class="default">$form</span><span class="keyword">[</span><span class="string">'lastname'</span><span class="keyword">]}</span><span class="string"><br />
Email = </span><span class="keyword">{</span><span class="default">$form</span><span class="keyword">[</span><span class="string">'email'</span><span class="keyword">]}</span><span class="string"><br />
Telephone = </span><span class="keyword">{</span><span class="default">$form</span><span class="keyword">[</span><span class="string">'telephone'</span><span class="keyword">]}</span><span class="string"><br />
Address = </span><span class="keyword">{</span><span class="default">$form</span><span class="keyword">[</span><span class="string">'address'</span><span class="keyword">]}</span><span class="string"><br />
</span><span class="keyword">FORM;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73524""></a>
  <div class="note">
   <strong class="user">bryant at zionprogramming dot com</strong>
   <a href="#73524" class="date">27-Feb-2007 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of (at least) PHP 5.2, you can no longer convert an object to a string unless it has a __toString method. Converting an object without this method now gives the error:<br />
<br />
PHP Catchable fatal error:&nbsp; Object of class &lt;classname&gt; could not be converted to string in &lt;file&gt; on line &lt;line&gt;<br />
<br />
Try this code to get the same results as before:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if (!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">method_exists</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="string">'__toString'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= (string)</span><span class="default">$value</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">'Object'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73400""></a>
  <div class="note">
   <strong class="user">fmouse at fmp dot com</strong>
   <a href="#73400" class="date">21-Feb-2007 07:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It may be obvious to some, but it's convenient to note that variables _will_ be expanded inside of single quotes if these occur inside of a double-quoted string.&nbsp; This can be handy in constructing exec calls with complex data to be passed to other programs.&nbsp; e.g.:<br />
<br />
$foo = "green";<br />
echo "the grass is $foo";<br />
the grass is green<br />
<br />
echo 'the grass is $foo';<br />
the grass is $foo<br />
<br />
echo "the grass is '$foo'";<br />
the grass is 'green'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63707""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#63707" class="date">28-Mar-2006 09:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may use heredoc syntax to comment out large blocks of code, as follows:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">&lt;&lt;&lt;_EOC<br />
</span><span class="string">&nbsp; &nbsp; // end-of-line comment will be masked... so will regular PHP:<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="default">$test</span><span class="string"> == 'foo' ? 'bar' : 'baz'); <br />
&nbsp;&nbsp;&nbsp; /* c-style comment will be masked, as will other heredocs (not using the same marker) */<br />
&nbsp;&nbsp;&nbsp; echo &lt;&lt;&lt;EOHTML<br />
This is text you'll never see!&nbsp; &nbsp; &nbsp; &nbsp; <br />
EOHTML;<br />
&nbsp;&nbsp;&nbsp; function defintion(</span><span class="default">$params</span><span class="string">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo 'foo';<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; class definition extends nothing&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; function definition(</span><span class="default">$param</span><span class="string">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo 'do nothing';<br />
&nbsp;&nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; how about syntax errors?; = gone, I bet.<br />
</span><span class="keyword">_EOC;<br />
</span><span class="default">?&gt;<br />
</span><br />
Useful for debugging when C-style just won't do.&nbsp; Also useful if you wish to embed Perl-like Plain Old Documentation; extraction between POD markers is left as an exercise for the reader.<br />
<br />
Note there is a performance penalty for this method, as PHP must still parse and variable substitute the string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59248""></a>
  <div class="note">
   <strong class="user">webmaster at rephunter dot net</strong>
   <a href="#59248" class="date">30-Nov-2005 05:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use caution when you need white space at the end of a heredoc. Not only is the mandatory final newline before the terminating symbol stripped, but an immediately preceding newline or space character is also stripped.<br />
<br />
For example, in the following, the final space character (indicated by \s -- that is, the "\s" is not literally in the text, but is only used to indicate the space character) is stripped:<br />
<br />
$string = &lt;&lt;&lt;EOT<br />
this is a string with a terminating space\s<br />
EOT;<br />
<br />
In the following, there will only be a single newline at the end of the string, even though two are shown in the text:<br />
<br />
$string = &lt;&lt;&lt;EOT<br />
this is a string that must be<br />
followed by a single newline<br />
<br />
EOT;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58353""></a>
  <div class="note">
   <strong class="user">DELETETHIS dot php at dfackrell dot mailshell dot com</strong>
   <a href="#58353" class="date">01-Nov-2005 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just some quick observations on variable interpolation:<br />
<br />
Because PHP looks for {? to start a complex variable expression in a double-quoted string, you can call object methods, but not class methods or unbound functions.<br />
<br />
This works:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">a </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">b</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"World"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$c </span><span class="keyword">= new </span><span class="default">a</span><span class="keyword">;<br />
echo </span><span class="string">"Hello </span><span class="keyword">{</span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">b</span><span class="keyword">()}</span><span class="string">.\n"<br />
</span><span class="default">?&gt;<br />
</span><br />
While this does not:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">b</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"World"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"Hello {b()}\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Also, it appears that you can almost without limitation perform other processing within the argument list, but not outside it.&nbsp; For example:<br />
<br />
&lt;?<br />
$true = true;<br />
define("HW", "Hello World");<br />
echo "{$true &amp;&amp; HW}";<br />
?&gt;<br />
<br />
gives: Parse error: parse error, unexpected T_BOOLEAN_AND, expecting '}' in - on line 3<br />
<br />
There may still be some way to kludge the syntax to allow constants and unbound function calls inside a double-quoted string, but it isn't readily apparent to me at the moment, and I'm not sure I'd prefer the workaround over breaking out of the string at this point.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46914""></a>
  <div class="note">
   <strong class="user">lelon at lelon dot net</strong>
   <a href="#46914" class="date">27-Oct-2004 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use the complex syntax to put the value of both object properties AND object methods inside a string.&nbsp; For example...<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Test </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$one </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">two</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$test </span><span class="keyword">= new </span><span class="default">Test</span><span class="keyword">();<br />
echo </span><span class="string">"foo </span><span class="keyword">{</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">one</span><span class="keyword">}</span><span class="string"> bar </span><span class="keyword">{</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">two</span><span class="keyword">()}</span><span class="string">"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>Will output "foo 1 bar 2".<br />
<br />
However, you cannot do this for all values in your namespace.&nbsp; Class constants and static properties/methods will not work because the complex syntax looks for the '$'.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Test </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">ONE </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"foo {Test::ONE} bar"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>This will output "foo {Test::one} bar".&nbsp; Constants and static properties require you to break up the string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44458""></a>
  <div class="note">
   <strong class="user">Jonathan Lozinski</strong>
   <a href="#44458" class="date">06-Aug-2004 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note on the heredoc stuff.
<br />

<br />
If you're editing with VI/VIM and possible other syntax highlighting editors, then using certain words is the way forward.&nbsp; if you use &lt;&lt;&lt;HTML for example, then the text will be hightlighted for HTML!!
<br />

<br />
I just found this out and used sed to alter all EOF to HTML.
<br />

<br />
JAVASCRIPT also works, and possibly others.&nbsp; The only thing about &lt;&lt;&lt;JAVASCRIPT is that you can't add the &lt;script&gt; tags..,&nbsp; so use HTML instead, which will correctly highlight all JavaScript too..
<br />

<br />
You can also use EOHTML, EOSQL, and EOJAVASCRIPT.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41986""></a>
  <div class="note">
   <strong class="user">www.feisar.de</strong>
   <a href="#41986" class="date">28-Apr-2004 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
watch out when comparing strings that are numbers. this example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$x1 </span><span class="keyword">= </span><span class="string">'111111111111111111'</span><span class="keyword">;<br />
</span><span class="default">$x2 </span><span class="keyword">= </span><span class="string">'111111111111111112'</span><span class="keyword">;<br />
<br />
echo (</span><span class="default">$x1 </span><span class="keyword">== </span><span class="default">$x2</span><span class="keyword">) ? </span><span class="string">"true\n" </span><span class="keyword">: </span><span class="string">"false\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
will output "true", although the strings are different. With large integer-strings, it seems that PHP compares only the integer values, not the strings. Even strval() will not work here.<br />
<br />
To be on the safe side, use:<br />
<br />
$x1 === $x2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41470""></a>
  <div class="note">
   <strong class="user">atnak at chejz dot com</strong>
   <a href="#41470" class="date">12-Apr-2004 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a possible gotcha related to oddness involved with accessing strings by character past the end of the string:
<br />

<br />
$string = 'a';
<br />

<br />
var_dump($string[2]);&nbsp; // string(0) ""
<br />
var_dump($string[7]);&nbsp; // string(0) ""
<br />
$string[7] === '';&nbsp; // TRUE
<br />

<br />
It appears that anything past the end of the string gives an empty string..&nbsp; However, when E_NOTICE is on, the above examples will throw the message:
<br />

<br />
Notice:&nbsp; Uninitialized string offset:&nbsp; N in FILE on line LINE
<br />

<br />
This message cannot be specifically masked with @$string[7], as is possible when $string itself is unset.
<br />

<br />
isset($string[7]);&nbsp; // FALSE
<br />
$string[7] === NULL;&nbsp; // FALSE
<br />

<br />
Even though it seems like a not-NULL value of type string, it is still considered unset.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
