<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>对数组进行排序</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="array.constants.html">? 预定义常量</a></li>
      <li style="float: right;"><a href="ref.array.html">数组 函数 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.array.html">数组</a></li>
    <li>对数组进行排序</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="array.sorting" class="chapter">
 <h1>对数组进行排序</h1>

 <p class="para">
  PHP 有一些用来排序数组的函数，
  这个文档会把它们列出来。
 </p>
 <p class="para">
  主要区别有：
 </p>
 <p class="para">
  <ul class="simplelist">
   <li class="member">
    有些函数基于 <span class="type"><a href="language.types.array.html" class="type array">array</a></span> 的键来排序，
    而其他的基于值来排序的：<em>$array[&#039;key&#039;] = &#039;value&#039;;</em>。
   </li>
   <li class="member">
    排序之后键和值之间的关联关系是否能够保持，
    是指排序之后数组的键可能
    会被重置为数字型的（0,1,2 ...）。
   </li>
   <li class="member">
    排序的顺序有：字母表顺序， 由低到高（升序），
    由高到低（降序），数字排序，自然排序，随机顺序或者用户自定义排序。
   </li>
   <li class="member">
    注意：下列的所有排序函数都是直接作用于数组本身，
    而不是返回一个新的有序的数组。
   </li>
   <li class="member">
    以下函数对于数组中相等的元素，它们在排序后的顺序是未定义的。
    （也即相等元素之间的顺序是不稳定的）。
   </li>
  </ul>
 </p>
 <p class="para">
  <table class="doctable table">
   <caption><strong>排序函数属性</strong></caption>
   
    <thead>
     <tr>
      <th>函数名称</th>
      <th>排序依据</th>
      <th>数组索引键保持</th>
      <th>排序的顺序</th>
      <th>相关函数</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><span class="function"><a href="function.array-multisort.html" class="function">array_multisort()</a></span></td>
      <td>值</td>
      <td>键值关联的保持，数字类型的不保持</td>
      <td>第一个数组或者由选项指定</td>
      <td><span class="function"><a href="function.array-walk.html" class="function">array_walk()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.asort.html" class="function">asort()</a></span></td>
      <td>值</td>
      <td>是</td>
      <td>由低到高</td>
      <td><span class="function"><a href="function.arsort.html" class="function">arsort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.arsort.html" class="function">arsort()</a></span></td>
      <td>值</td>
      <td>是</td>
      <td>由高到低</td>
      <td><span class="function"><a href="function.asort.html" class="function">asort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.krsort.html" class="function">krsort()</a></span></td>
      <td>键</td>
      <td>是</td>
      <td>由高到低</td>
      <td><span class="function"><a href="function.ksort.html" class="function">ksort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.ksort.html" class="function">ksort()</a></span></td>
      <td>键</td>
      <td>是</td>
      <td>由低到高</td>
      <td><span class="function"><a href="function.asort.html" class="function">asort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.natcasesort.html" class="function">natcasesort()</a></span></td>
      <td>值</td>
      <td>是</td>
      <td>自然排序，大小写不敏感</td>
      <td><span class="function"><a href="function.natsort.html" class="function">natsort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.natsort.html" class="function">natsort()</a></span></td>
      <td>值</td>
      <td>是</td>
      <td>自然排序</td>
      <td><span class="function"><a href="function.natcasesort.html" class="function">natcasesort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.rsort.html" class="function">rsort()</a></span></td>
      <td>值</td>
      <td>否</td>
      <td>由高到低</td>
      <td><span class="function"><a href="function.sort.html" class="function">sort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.shuffle.html" class="function">shuffle()</a></span></td>
      <td>值</td>
      <td>否</td>
      <td>随机</td>
      <td><span class="function"><a href="function.array-rand.html" class="function">array_rand()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.sort.html" class="function">sort()</a></span></td>
      <td>值</td>
      <td>否</td>
      <td>由高到低</td>
      <td><span class="function"><a href="function.rsort.html" class="function">rsort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.uasort.html" class="function">uasort()</a></span></td>
      <td>值</td>
      <td>是</td>
      <td>由用户定义</td>
      <td><span class="function"><a href="function.uksort.html" class="function">uksort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.uksort.html" class="function">uksort()</a></span></td>
      <td>键</td>
      <td>是</td>
      <td>由用户定义</td>
      <td><span class="function"><a href="function.uasort.html" class="function">uasort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.usort.html" class="function">usort()</a></span></td>
      <td>值</td>
      <td>否</td>
      <td>由用户定义</td>
      <td><span class="function"><a href="function.uasort.html" class="function">uasort()</a></span></td>
     </tr>

    </tbody>
   
  </table>

 </p>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117532""></a>
  <div class="note">
   <strong class="user">monicse09ku at yahoo dot com</strong>
   <a href="#117532" class="date">25-Jun-2015 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// takes an array and desired key value and returns an array<br />
// searches through an array for a given key, if found the key that row is made the first row and the other rows are inserted accordingly.<br />
// the facility of this function is to get the value with a specific key of an array as the first value.<br />
<br />
/////////////////////////////// function starts //////////////////////////////<br />
<br />
function dksort($array, $case){<br />
&nbsp;&nbsp;&nbsp; if(array_key_exists($case,$array)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $a[$case] = $array[$case];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($array as $key=&gt;$val){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($case==$key){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $a[$key] = $array[$key];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $a;<br />
}<br />
<br />
$d = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '22'=&gt;'jdfhgjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '33'=&gt;'jdfhgjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '11'=&gt;'jrtyrjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '55'=&gt;'jrtydairjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '77'=&gt;'jopo',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '99'=&gt;'jrtasajfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '44'=&gt;'jopasdwo',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '88'=&gt;'hdgatyuyuiuy'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
<br />
$c = dksort($d, '55');<br />
print_r($c);<br />
<br />
////////////////////////// function ends ////////////////////////////////////////</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117516""></a>
  <div class="note">
   <strong class="user">Mssler</strong>
   <a href="#117516" class="date">23-Jun-2015 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple example sorting dotted version numbers<br />
<br />
&nbsp;&nbsp; &nbsp; function sortByVersionnumber($a,$b){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $ta=explode(".",$a); $tb=explode(".",$b);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; foreach ($ta as $k =&gt; $v){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($tb[$k])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($ta[$k] &gt; $tb[$k]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif($ta[$k] &lt; $tb[$k]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return 0;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; function vnksort(&amp;$array){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; uksort($array ,"sortByVersionnumber");<br />
&nbsp;&nbsp; &nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112221""></a>
  <div class="note">
   <strong class="user">&amp;#34;Matthew Rice&amp;#34;</strong>
   <a href="#112221" class="date">18-May-2013 05:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While this may seem obvious, user-defined array sorting functions ( uksort(), uasort(), usort() ) will *not* be called if the array does not have *at least two values in it*.<br />
<br />
The following code:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">usortTest</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$test </span><span class="keyword">= array(</span><span class="string">'val1'</span><span class="keyword">);<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="string">"usortTest"</span><span class="keyword">);<br />
<br />
</span><span class="default">$test2 </span><span class="keyword">= array(</span><span class="string">'val2'</span><span class="keyword">, </span><span class="string">'val3'</span><span class="keyword">);<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">, </span><span class="string">"usortTest"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output: <br />
<br />
string(4) "val3"<br />
string(4) "val2"<br />
<br />
The first array doesn't get sent to the function.<br />
<br />
Please, under no circumstance, place any logic that modifies values, or applies non-sorting business logic in these functions as they will not always be executed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102888""></a>
  <div class="note">
   <strong class="user">oculiz at gmail dot com</strong>
   <a href="#102888" class="date">12-Mar-2011 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to do a case case-insensitive sort by key would simply be:<br />
<br />
<span class="default">&lt;?php<br />
uksort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'strcasecmp'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Since strcasecmp is already predefined in php it saves you the trouble to actually write the comparison function yourself.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97047""></a>
  <div class="note">
   <strong class="user">Dirk</strong>
   <a href="#97047" class="date">29-Mar-2010 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to perform any of these sort functions on an array containing two or more equivalent values, you can get the equivalents to fall next to each other within the overall ordering (similar to how MySQL's ORDER BY works...) instead of breaking the sort() function, by using ksort() as a second parameter to arbitrarily distinguish any equivalent values by their unique keys:<br />
<br />
<span class="default">&lt;?php<br />
<br />
sort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Seems like this effect should be built in.&nbsp; At least the workaround is so short...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
