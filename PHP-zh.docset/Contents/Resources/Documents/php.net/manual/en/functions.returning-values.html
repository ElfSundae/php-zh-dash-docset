<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回值</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="functions.arguments.html">? 函数的参数</a></li>
      <li style="float: right;"><a href="functions.variable-functions.html">可变函数 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.functions.html">函数</a></li>
    <li>返回值</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="functions.returning-values" class="sect1">
   <h2 class="title">返回值</h2>

   <p class="para">
    值通过使用可选的返回语句返回。可以返回包括数组和对象的任意类型。返回语句会立即中止函数的运行，并且将控制权交回调用该函数的代码行。更多信息见
    <span class="function"><a href="function.return.html" class="function">return</a></span>。
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     如果省略了 <span class="function"><a href="function.return.html" class="function">return</a></span>，则返回值为 <strong><code>NULL</code></strong>。
    </p>
   </p></blockquote>
   
   
   <div class="sect2">
     <h3 class="title">return 的使用</h3>
   <p class="para">
    <div class="example" id="example-185">
     <p><strong>Example #1 <span class="function"><a href="function.return.html" class="function">return</a></span> 的使用</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">square</span><span style="color: #007700">(</span><span style="color: #0000BB">$num</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$num&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">;<br />}<br />echo&nbsp;</span><span style="color: #0000BB">square</span><span style="color: #007700">(</span><span style="color: #0000BB">4</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;outputs&nbsp;'16'.<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     </div>
   </p>

   <p class="para">
    函数不能返回多个值，但可以通过返回一个数组来得到类似的效果。
   </p>
   <p class="para">
    <div class="example" id="example-186">
     <p><strong>Example #2 返回一个数组以得到多个返回值</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">small_numbers</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array&nbsp;(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br />}<br />list&nbsp;(</span><span style="color: #0000BB">$zero</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$one</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$two</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">small_numbers</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     </div>
   </p>
   <p class="para">
    从函数返回一个引用，必须在函数声明和指派返回值给一个变量时都使用引用运算符 &amp;：
   </p>
   <p class="para">
    <div class="example" id="example-187">
     <p><strong>Example #3 从函数返回一个引用</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;&amp;</span><span style="color: #0000BB">returns_reference</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$someref</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$newref&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">returns_reference</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     </div>
   </p>
   <p class="simpara">
    有关引用的更多信息, 请查看<a href="language.references.html" class="link">引用的解释</a>。
   </p>
   </div> 
   
   <div class="sect2" id="functions.returning-values.type-declaration">
   <h3 class="title">Return type declarations</h3>

   <p class="para">
    PHP 7 adds support for return type declarations. Similarly to
    <a href="functions.arguments.html#functions.arguments.type-declaration" class="link">argument type declarations</a>,
    return type declarations specify the type of the value that will be
    returned from a function. The same
    <a href="functions.arguments.html#functions.arguments.type-declaration.types" class="link">types</a>
    are available for return type declarations as are available for argument
    type declarations.
   </p>

   <p class="para">
    <a href="functions.arguments.html#functions.arguments.type-declaration.strict" class="link">Strict typing</a>
    also has an effect on return type declarations. In the default weak mode,
    returned values will be coerced to the correct type if they are not
    already of that type. In strong mode, the returned value must be of the
    correct type, otherwise a <strong class="classname">TypeError</strong> will be thrown.
   </p>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     When overriding a parent method, the child&#039;s method must match any return
     type declaration on the parent. If the parent doesn&#039;t define a return
     type, then the child method may do so.
    </p>
   </p></blockquote>

   <div class="sect3" id="functions.returning-values.type-declaration.examples">
    <h4 class="title">范例</h4>

    <div class="example" id="example-188">
     <p><strong>Example #4 Basic return type declaration</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">float&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Note&nbsp;that&nbsp;a&nbsp;float&nbsp;will&nbsp;be&nbsp;returned.<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>以上例程会输出：</p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
float(3)
</pre></div>
      </div>
     </div>

     <div class="example" id="example-189">
      <p><strong>Example #5 Strict mode in action</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">declare(</span><span style="color: #0000BB">strict_types</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">int&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">sum</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2.5</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>以上例程会输出：</p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
int(3)

Fatal error: Uncaught TypeError: Return value of sum() must be of the type integer, float returned in - on line 5 in -:5
Stack trace:
#0 -(9): sum(1, 2.5)
#1 {main}
  thrown in - on line 5
</pre></div>
      </div>
     </div>

     <div class="example" id="example-190">
      <p><strong>Example #6 Returning an object</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">C&nbsp;</span><span style="color: #007700">{}<br /><br />function&nbsp;</span><span style="color: #0000BB">getC</span><span style="color: #007700">():&nbsp;</span><span style="color: #0000BB">C&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;</span><span style="color: #0000BB">C</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">getC</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>以上例程会输出：</p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
object(C)#1 (0) {
}
</pre></div>
      </div>
     </div>
    </div>
   </div> 
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="120206""></a>
  <div class="note">
   <strong class="user">ortreum</strong>
   <a href="#120206" class="date">22-Nov-2016 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I like this method of concatinating methods by returning $this. It makes my code more readable. If the returned value is not an object it will fail and you find mistakes easier.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Dummy </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$result</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">result </span><span class="keyword">=<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">-&gt;</span><span class="default">setStuff</span><span class="keyword">(</span><span class="string">'abc'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">generateResult</span><span class="keyword">()<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">setStuff</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// do something<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">generateResult</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return [</span><span class="string">'the result'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getResult</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119186""></a>
  <div class="note">
   <strong class="user">Vidmantas Maskoliunas</strong>
   <a href="#119186" class="date">17-Apr-2016 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: the function does not have "alternative syntax" as if/endif, while/endwhile, and colon (:) here is used to define returning type and not to mark where the block statement begins.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118416""></a>
  <div class="note">
   <strong class="user">Nathan Salter</strong>
   <a href="#118416" class="date">03-Dec-2015 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a quick clarification on whether variables are passed by reference or not. Variables are always passed using a pointer, and if the variable is modified, it is copied and re-assigned. For example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">byPointer</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$x </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">; </span><span class="comment">// Does not modify or create a copy of $x<br />
</span><span class="keyword">}<br />
<br />
function </span><span class="default">copied</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++; </span><span class="comment">// At this point, creates a copy of $x to be used in local scope<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">Obj </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">performAction</span><span class="keyword">() {}<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$y</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">objPointer</span><span class="keyword">(</span><span class="default">Obj $x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">performAction</span><span class="keyword">(); </span><span class="comment">//works on $x<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="string">'150'</span><span class="keyword">; </span><span class="comment">//works on $x<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= new </span><span class="default">Obj</span><span class="keyword">(); </span><span class="comment">// Does not modify $x outside of function<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="string">'250'</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">objReference</span><span class="keyword">(</span><span class="default">Obj </span><span class="keyword">&amp;</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">performAction</span><span class="keyword">(); </span><span class="comment">//works on $x<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="string">'150'</span><span class="keyword">; </span><span class="comment">//works on $x<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= new </span><span class="default">Obj</span><span class="keyword">(); </span><span class="comment">// Modifies original $x outside of function<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="string">'250'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">Obj</span><span class="keyword">();<br />
</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="string">'10'</span><span class="keyword">;<br />
<br />
</span><span class="default">objPointer</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"Post Pointer: </span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="string">'10'</span><span class="keyword">;<br />
</span><span class="default">objReference</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"Post Reference: </span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">}</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This will output:<br />
Post Pointer: 150<br />
Post Reference: 250<br />
<br />
So make sure when writing functions that if you want to pass by reference you actually mean by reference, and not using standard PHP pointers</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117906""></a>
  <div class="note">
   <strong class="user">ryan dot jentzsch at gmail dot com</strong>
   <a href="#117906" class="date">30-Aug-2015 03:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 7 return types if specified can not return a null.<br />
For example:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">declare(</span><span class="default">strict_types</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">);<br />
<br />
function </span><span class="default">add2ints</span><span class="keyword">(</span><span class="default">int $x</span><span class="keyword">, </span><span class="default">int $y</span><span class="keyword">):</span><span class="default">int<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$z </span><span class="keyword">= </span><span class="default">$x </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$z</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$z</span><span class="keyword">;<br />
}<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">add2ints</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
echo </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) ? </span><span class="string">'Null' </span><span class="keyword">: </span><span class="default">$a</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">add2ints</span><span class="keyword">(-</span><span class="default">2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">) ? </span><span class="string">'Null' </span><span class="keyword">: </span><span class="default">$b</span><span class="keyword">;<br />
exit();<br />
<br />
</span><span class="default">Output</span><span class="keyword">:<br />
</span><span class="default">7<br />
Process finished with </span><span class="keyword">exit </span><span class="default">code 139</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99660""></a>
  <div class="note">
   <strong class="user">rstaveley at seseit dot com</strong>
   <a href="#99660" class="date">29-Aug-2010 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Developers with a C background may expect pass by reference semantics for arrays. It may be surprising that&nbsp; pass by value is used for arrays just like scalars. Objects are implicitly passed by reference.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment"># (1) Objects are always passed by reference and returned by reference<br />
<br />
</span><span class="keyword">class </span><span class="default">Obj </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">obj_inc_x</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">x</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$obj</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">Obj</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$obj2 </span><span class="keyword">= </span><span class="default">obj_inc_x</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br />
</span><span class="default">obj_inc_x</span><span class="keyword">(</span><span class="default">$obj2</span><span class="keyword">);<br />
<br />
print </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$obj2</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment"># (2) Scalars are not passed by reference or returned as such<br />
<br />
</span><span class="keyword">function </span><span class="default">scalar_inc_x</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">scalar_inc_x</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);<br />
</span><span class="default">scalar_inc_x</span><span class="keyword">(</span><span class="default">$x2</span><span class="keyword">);<br />
<br />
print </span><span class="default">$x </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$x2 </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment"># (3) You have to force pass by reference and return by reference on scalars<br />
<br />
</span><span class="keyword">function &amp;</span><span class="default">scalar_ref_inc_x</span><span class="keyword">(&amp;</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$x </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$x2 </span><span class="keyword">=&amp; </span><span class="default">scalar_ref_inc_x</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment"># Need reference here as well as the function sig<br />
</span><span class="default">scalar_ref_inc_x</span><span class="keyword">(</span><span class="default">$x2</span><span class="keyword">);<br />
<br />
print </span><span class="default">$x </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$x2 </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment"># (4) Arrays use pass by value sematics just like scalars<br />
<br />
</span><span class="keyword">function </span><span class="default">array_inc_x</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">{</span><span class="string">'x'</span><span class="keyword">}++;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array();<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">array_inc_x</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">array_inc_x</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br />
<br />
print </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">] . </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$array2</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">] . </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment"># (5) You have to force pass by reference and return by reference on arrays<br />
<br />
</span><span class="keyword">function &amp;</span><span class="default">array_ref_inc_x</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">{</span><span class="string">'x'</span><span class="keyword">}++;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array();<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$array2 </span><span class="keyword">=&amp; </span><span class="default">array_ref_inc_x</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment"># Need reference here as well as the function sig<br />
</span><span class="default">array_ref_inc_x</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">);<br />
<br />
print </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">] . </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$array2</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">] . </span><span class="string">"\n"</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98839""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#98839" class="date">10-Jul-2010 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of at least PHP 5.3, a function or class method returning an object acts like an object.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">test</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Yay!"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">get_obj</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; return new </span><span class="default">A</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">get_obj</span><span class="keyword">()-&gt;</span><span class="default">test</span><span class="keyword">();&nbsp; </span><span class="comment">// "Yay!"<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Sorry, still doesn't work with arrays.&nbsp; Ie <span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">get_array</span><span class="keyword">()[</span><span class="default">1</span><span class="keyword">]; </span><span class="default">?&gt;</span> fails.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82116""></a>
  <div class="note">
   <strong class="user">bgalloway at citycarshare dot org</strong>
   <a href="#82116" class="date">28-Mar-2008 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful about using "do this thing or die()" logic in your return lines.&nbsp; It doesn't work as you'd expect:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">myfunc1</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="string">'thingy' </span><span class="keyword">or die(</span><span class="string">'otherthingy'</span><span class="keyword">));<br />
}<br />
function </span><span class="default">myfunc2</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'thingy' </span><span class="keyword">or die(</span><span class="string">'otherthingy'</span><span class="keyword">);<br />
}<br />
function </span><span class="default">myfunc3</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="string">'thingy'</span><span class="keyword">) or die(</span><span class="string">'otherthingy'</span><span class="keyword">);<br />
}<br />
function </span><span class="default">myfunc4</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'thingy' </span><span class="keyword">or </span><span class="string">'otherthingy'</span><span class="keyword">;<br />
}<br />
function </span><span class="default">myfunc5</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="string">'thingy' </span><span class="keyword">or </span><span class="string">'otherthingy'</span><span class="keyword">; return </span><span class="default">$x</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">myfunc1</span><span class="keyword">(). </span><span class="string">"\n"</span><span class="keyword">. </span><span class="default">myfunc2</span><span class="keyword">(). </span><span class="string">"\n"</span><span class="keyword">. </span><span class="default">myfunc3</span><span class="keyword">(). </span><span class="string">"\n"</span><span class="keyword">. </span><span class="default">myfunc4</span><span class="keyword">(). </span><span class="string">"\n"</span><span class="keyword">. </span><span class="default">myfunc5</span><span class="keyword">(). </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Only myfunc5() returns 'thingy' - the rest return 1.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34686""></a>
  <div class="note">
   <strong class="user">nick at itomic.com</strong>
   <a href="#34686" class="date">04-Aug-2003 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Functions which return references, may return a NULL value. This is inconsistent with the fact that function parameters passed by reference can't be passed as NULL (or in fact anything which isnt a variable).<br />
<br />
i.e.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function &amp;</span><span class="default">testRet</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
}<br />
<br />
if (</span><span class="default">testRet</span><span class="keyword">() === </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"NULL"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
parses fine and echoes NULL</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28506""></a>
  <div class="note">
   <strong class="user">ian at NO_SPAM dot verteron dot net</strong>
   <a href="#28506" class="date">15-Jan-2003 01:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In reference to the poster above, an additional (better?) way to return multiple values from a function is to use list(). For example:<br />
<br />
function fn($a, $b)<br />
{<br />
&nbsp;&nbsp; # complex stuff<br />
<br />
&nbsp;&nbsp; return array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; $a * $b,<br />
&nbsp;&nbsp; &nbsp;&nbsp; $a + $b,<br />
&nbsp;&nbsp; );<br />
}<br />
<br />
list($product, $sum) = fn(3, 4);<br />
<br />
echo $product; # prints 12<br />
echo $sum; # prints 7</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
