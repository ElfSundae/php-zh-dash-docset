<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Returns the current row of a result set as an object</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqli-result.fetch-fields.html">? mysqli_result::fetch_fields</a></li>
      <li style="float: right;"><a href="mysqli-result.fetch-row.html">mysqli_result::fetch_row ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mysqli-result.html">mysqli_result</a></li>
    <li>Returns the current row of a result set as an object</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqli-result.fetch-object" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqli_result::fetch_object</h1>
  <h1 class="refname">mysqli_fetch_object</h1>
  <p class="verinfo">(PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">mysqli_result::fetch_object</span> -- <span class="refname">mysqli_fetch_object</span> &mdash; <span class="dc-title">Returns the current row of a result set as an object</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mysqli-result.fetch-object-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="methodsynopsis dc-description">
   <span class="type">object</span> <span class="methodname"><strong>mysqli_result::fetch_object</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$class_name</code><span class="initializer"> = &quot;stdClass&quot;</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$params</code></span>
  ]] )</div>

  <p class="para rdfs-comment">过程化风格</p>
  <div class="methodsynopsis dc-description">
   <span class="type">object</span> <span class="methodname"><strong>mysqli_fetch_object</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.mysqli-result.html" class="type mysqli_result">mysqli_result</a></span> <code class="parameter">$result</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$class_name</code><span class="initializer"> = &quot;stdClass&quot;</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$params</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   The <span class="function"><strong>mysqli_fetch_object()</strong></span> will return the current row
   result set as an object where the attributes of the object represent the
   names of the fields found within the result set.
  </p>
  <p class="para">
    Note that <span class="function"><strong>mysqli_fetch_object()</strong></span> sets the properties
    of the object before calling the object constructor.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mysqli-result.fetch-object-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    <dt>
<code class="parameter">
result</code></dt>
<dd>
<p class="para">仅以过程化样式：由
<span class="function"><a href="mysqli.query.html" class="function">mysqli_query()</a></span>，<span class="function"><a href="mysqli.store-result.html" class="function">mysqli_store_result()</a></span> 或
<span class="function"><a href="mysqli.use-result.html" class="function">mysqli_use_result()</a></span>返回的结果集标识。</p></dd>

    
     <dt>
<code class="parameter">class_name</code></dt>

     <dd>

      <p class="para">
       The name of the class to instantiate, set the properties of and return.
       If not specified, a <strong class="classname">stdClass</strong> object is returned.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">params</code></dt>

     <dd>

      <p class="para">
       An optional <span class="type"><a href="language.types.array.html" class="type array">array</a></span> of parameters to pass to the constructor
       for <code class="parameter">class_name</code> objects.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mysqli-result.fetch-object-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns an object with string properties that corresponds to the fetched
   row or <strong><code>NULL</code></strong> if there are no more rows in resultset.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数返回的字段名<em class="emphasis">大小写敏感</em>。</span></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数将 NULL 字段设置为 PHP <strong><code>NULL</code></strong> 值。</span></p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-mysqli-result.fetch-object-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-1858">
   <p><strong>Example #1 面向对象风格</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"world"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;check&nbsp;connection&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Connect&nbsp;failed:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit();<br />}<br />&nbsp;<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;Name,&nbsp;CountryCode&nbsp;FROM&nbsp;City&nbsp;ORDER&nbsp;by&nbsp;ID&nbsp;DESC&nbsp;LIMIT&nbsp;50,5"</span><span style="color: #007700">;<br /><br />if&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">))&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;fetch&nbsp;object&nbsp;array&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while&nbsp;(</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch_object</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">CountryCode</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;free&nbsp;result&nbsp;set&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;close&nbsp;connection&nbsp;*/<br /></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-1859">
   <p><strong>Example #2 过程化风格</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"world"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;check&nbsp;connection&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Connect&nbsp;failed:&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;exit();<br />}<br /><br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SELECT&nbsp;Name,&nbsp;CountryCode&nbsp;FROM&nbsp;City&nbsp;ORDER&nbsp;by&nbsp;ID&nbsp;DESC&nbsp;LIMIT&nbsp;50,5"</span><span style="color: #007700">;<br /><br />if&nbsp;(</span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">))&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;fetch&nbsp;associative&nbsp;array&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">while&nbsp;(</span><span style="color: #0000BB">$obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_fetch_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"%s&nbsp;(%s)\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">CountryCode</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;free&nbsp;result&nbsp;set&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mysqli_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;close&nbsp;connection&nbsp;*/<br /></span><span style="color: #0000BB">mysqli_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Pueblo (USA)
Arvada (USA)
Cape Coral (USA)
Green Bay (USA)
Santa Clara (USA)
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-mysqli-result.fetch-object-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mysqli-result.fetch-array.html" class="function" rel="rdfs-seeAlso">mysqli_fetch_array()</a> - Fetch a result row as an associative, a numeric array, or both</span></li>
    <li class="member"><span class="function"><a href="mysqli-result.fetch-assoc.html" class="function" rel="rdfs-seeAlso">mysqli_fetch_assoc()</a> - Fetch a result row as an associative array</span></li>
    <li class="member"><span class="function"><a href="mysqli-result.fetch-row.html" class="function" rel="rdfs-seeAlso">mysqli_fetch_row()</a> - Get a result row as an enumerated array</span></li>
    <li class="member"><span class="function"><a href="mysqli.query.html" class="function" rel="rdfs-seeAlso">mysqli_query()</a> - 对数据库执行一次查询</span></li>
    <li class="member"><span class="function"><a href="mysqli-result.data-seek.html" class="function" rel="rdfs-seeAlso">mysqli_data_seek()</a> - Adjusts the result pointer to an arbitrary row in the result</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="120166""></a>
  <div class="note">
   <strong class="user">fedge-no at hotmail dot calm</strong>
   <a href="#120166" class="date">15-Nov-2016 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I checked the bug database and as long as your PHP installation is up to date, the order of setting properties and calling the constructor should now follow the order specified in the documentation. There was a little while that a patch had been introduced where it was happening the other way around but that has been fixed now.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119531""></a>
  <div class="note">
   <strong class="user">macole at paypal dot com</strong>
   <a href="#119531" class="date">30-Jun-2016 11:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if you supply a class that has a __set() magic method defined in it, that method will be called for any properties that are not defined in your class.&nbsp; For example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">SomeClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$partner_name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">( </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"__set was called!&nbsp; Name = </span><span class="default">$name</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">( </span><span class="string">'localhost'</span><span class="keyword">, </span><span class="string">'Username'</span><span class="keyword">, </span><span class="string">'Password'</span><span class="keyword">, </span><span class="string">'DbName' </span><span class="keyword">);<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">'SELECT id, partner_name, partner_type FROM submissions' </span><span class="keyword">);<br />
</span><span class="default">$object </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_object</span><span class="keyword">( </span><span class="string">'SomeClass' </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Produces the following output:<br />
<br />
__set was called!&nbsp; Name = partner_type</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119298""></a>
  <div class="note">
   <strong class="user">neo22s at gmail dot com</strong>
   <a href="#119298" class="date">08-May-2016 05:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since 5.6.21 and PHP 7.0.6<br />
<br />
mysqli_fetch_object() sets the properties of the object AFTER calling the object constructor. Not BEFORE as was in previous versions.<br />
<br />
So behaviour has changed. Seems a bug but not sure if was done intentionally.<br />
<br />
https://bugs.php.net/bug.php?id=72151</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118852""></a>
  <div class="note">
   <strong class="user">object-array at gmail dot com</strong>
   <a href="#118852" class="date">17-Feb-2016 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please mind the difference between objects and arrays in PHP&gt;=5: arrays are by value while objects are by reference.<br />
<br />
&lt;?<br />
$o = mysqli_fetch_object($res);<br />
$o1 = $o;<br />
$o1-&gt;value = 10;<br />
<br />
$a = mysqli_fetch_array($res);<br />
$a1 = $a;<br />
$a1['value'] = 10;<br />
<br />
echo $o-&gt;value; // 10<br />
echo $a['value']; // (original value from db)<br />
?&gt;<br />
<br />
Should same behaviour be intended, the object needs to be cloned:<br />
<br />
&lt;?<br />
$o1 = clone $o;<br />
?&gt;<br />
<br />
More about object cloning:<br />
<a href="http://php.net/manual/en/language.oop5.cloning.php" rel="nofollow" target="_blank">http://php.net/manual/en/language.oop5.cloning.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114722""></a>
  <div class="note">
   <strong class="user">me at philkershaw dot me</strong>
   <a href="#114722" class="date">29-Mar-2014 02:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As a best practice, if you intend to use a defined class when using fetching_object(). Put the data obtaining code within a static method of the defined class. Otherwise, wherever you include the file (if not using an autoloader) the data connection will occur whether you want it to or not.<br />
<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">User<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$name</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">getUser</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$conn </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(</span><span class="string">'localhost'</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">, </span><span class="string">'password'</span><span class="keyword">, </span><span class="string">'database'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$conn</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"SELECT * FROM users WHERE id = </span><span class="keyword">{</span><span class="default">$id</span><span class="keyword">}</span><span class="string"> LIMIT 1"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_object</span><span class="keyword">(</span><span class="string">'User'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Call the static method to obtain an instance of the User class with your data applied to it.<br />
<br />
<span class="default">&lt;?php<br />
$user </span><span class="keyword">= </span><span class="default">User</span><span class="keyword">::</span><span class="default">getUser</span><span class="keyword">(</span><span class="string">'31'</span><span class="keyword">); <br />
echo </span><span class="default">$user</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">; </span><span class="comment">// echo's 'Phil'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109186""></a>
  <div class="note">
   <strong class="user">Driek</strong>
   <a href="#109186" class="date">27-Jun-2012 02:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As indicated in the user comments of the mysql_fetch_object, it is important to realize that class fields get values assigned to them BEFORE the constructor is called.<br />
For example;<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Employee<br />
</span><span class="keyword">{<br />
&nbsp; private </span><span class="default">$id</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// some code for creating a database connection... i.e. mysqli object<br />
</span><span class="keyword">....<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$con</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"select id, name from employees"</span><span class="keyword">);<br />
</span><span class="default">$anEmployee </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_object</span><span class="keyword">(</span><span class="string">"Employee"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will result in the ID being 0 because it is overridden by the constructor. Therefore, it is useful to check if the class field is already set.<br />
I.e.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Employee<br />
</span><span class="keyword">{<br />
&nbsp; private </span><span class="default">$id</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Also note that the fields which will be assigned by fetch_object are case sensitive. If your table has the field "ID", it will result in the class field $ID being set. A simple work-around is to use aliases. I.e. "SELECT *, ID as id FROM myTable"<br />
I hope this helps some people.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107280""></a>
  <div class="note">
   <strong class="user">Alex</strong>
   <a href="#107280" class="date">27-Jan-2012 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Make sure to specify the full namespace for the "string $class_name" parameter and not a partial one, as it won't find it. For example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">namespace </span><span class="default">Root</span><span class="keyword">(</span><span class="default">backslash</span><span class="keyword">)</span><span class="default">FirstLevel<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">Test</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysqli_fetch_object</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="string">'SecondLevel\\MyClass'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
... will not work but this will:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">namespace </span><span class="default">Root</span><span class="keyword">(</span><span class="default">backslash</span><span class="keyword">)</span><span class="default">FirstLevel<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">Test</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">mysqli_fetch_object</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="string">'Root\\FirstLevel\\SecondLevel\\MyClass'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92784""></a>
  <div class="note">
   <strong class="user">benpptung at tacol dot biz</strong>
   <a href="#92784" class="date">09-Aug-2009 05:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I don't know why no one talk about this.
<br />
fetch_object is very powerful since you can instantiate an Object which has the methods you wanna have.
<br />

<br />
You can try like this..
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">PowerfulVO </span><span class="keyword">extends </span><span class="default">AbstractWhatEver </span><span class="keyword">{
<br />

<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$field1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$field2</span><span class="keyword">; </span><span class="comment">// note : private is ok
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">method</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="comment">// method in this class
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}
<br />
}
<br />

<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$sql </span><span class="keyword">= </span><span class="string">"SELECT * FROM table ..."
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$mysqli </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(........);
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$vo </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_object</span><span class="keyword">(</span><span class="string">'PowerfulVO'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Note : if the field is not defined in the class, fetch_object will add this field for you as public.
<br />

<br />
The method is very powerful, especially if you want to use a VO design pattern or class mapping feature with Flex Remoting Object( Of course, you need to have ZendAMF or AMFPHP ..framework)
<br />

<br />
Hope this help and open new possibilities for you</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85163""></a>
  <div class="note">
   <strong class="user">peterbelm at g[oogle]mail dot com</strong>
   <a href="#85163" class="date">18-Aug-2008 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your SQL code selects columns with empty names like so:<br />
<br />
SELECT id as ``...<br />
<br />
You will get a fatal error "Cannot access empty property", this took me a while to track down!<br />
<br />
Obviously your SQL really shouldn't do that, and should be fixed but I'm going to submit a feature request to ask for a better error message for that.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
