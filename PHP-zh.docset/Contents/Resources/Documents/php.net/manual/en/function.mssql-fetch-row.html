<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Get row as enumerated array</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mssql-fetch-object.html">? mssql_fetch_object</a></li>
      <li style="float: right;"><a href="function.mssql-field-length.html">mssql_field_length ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mssql.html">Mssql 函数</a></li>
    <li>Get row as enumerated array</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mssql-fetch-row" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mssql_fetch_row</h1>
  <p class="verinfo">(PHP 4, PHP 5, PECL odbtp &gt;= 1.1.1)</p><p class="refpurpose"><span class="refname">mssql_fetch_row</span> &mdash; <span class="dc-title">Get row as enumerated array</span></p>

 </div>
 
 <div id="function.mssql-fetch-row-refsynopsisdiv">
  <div class="warning"><strong class="warning">Warning</strong>
   
<p class="para">
 This function was <em class="emphasis">REMOVED</em> in PHP 7.0.0.
</p>
<p class="para">
 Alternatives to this function include:
</p>

   <ul class="simplelist">
    <li class="member"><span class="function"><a href="pdostatement.fetch.html" class="function">PDOStatement::fetch()</a></span></li>
    <li class="member"><span class="function"><a href="function.sqlsrv-fetch-array.html" class="function">sqlsrv_fetch_array()</a></span></li>
    <li class="member"><span class="function"><a href="function.odbc-fetch-row.html" class="function">odbc_fetch_row()</a></span></li>
   </ul>
  </div>
 </div>

 <div class="refsect1 description" id="refsect1-function.mssql-fetch-row-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>mssql_fetch_row</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>mssql_fetch_row()</strong></span> fetches one row of data from
   the result associated with the specified result identifier.  The
   row is returned as an array.  Each result column is stored in an
   array offset, starting at offset 0.
  </p>
  <p class="para">
   Subsequent call to <span class="function"><strong>mssql_fetch_row()</strong></span> would
   return the next row in the result set, or <strong><code>FALSE</code></strong> if there are no
   more rows.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mssql-fetch-row-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">result</code></dt>

     <dd>

      <p class="para">
       The result resource that is being evaluated. This result comes from a
       call to <span class="function"><a href="function.mssql-query.html" class="function">mssql_query()</a></span>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mssql-fetch-row-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns an array that corresponds to the fetched row, or <strong><code>FALSE</code></strong> if there
   are no more rows.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mssql-fetch-row-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-1691">
    <p><strong>Example #1 <span class="function"><strong>mssql_fetch_row()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Connect&nbsp;to&nbsp;MSSQL&nbsp;and&nbsp;select&nbsp;the&nbsp;database<br /></span><span style="color: #0000BB">$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mssql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'MANGO\SQLEXPRESS'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sa'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'phpfi'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">mssql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">'php'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Query&nbsp;to&nbsp;execute<br /></span><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mssql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;[id],&nbsp;[quote]&nbsp;FROM&nbsp;[quotes]&nbsp;WHERE&nbsp;[id]&nbsp;=&nbsp;\'42\''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Did&nbsp;the&nbsp;query&nbsp;fail?<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$query</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'MSSQL&nbsp;error:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mssql_get_last_message</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Fetch&nbsp;the&nbsp;row<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mssql_fetch_row</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Print&nbsp;the&nbsp;'quote'<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Quote&nbsp;#'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">':&nbsp;"'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'"'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Quote #42: &quot;The answer to everything...&quot;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mssql-fetch-row-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数将 NULL 字段设置为 PHP <strong><code>NULL</code></strong> 值。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mssql-fetch-row-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mssql-fetch-array.html" class="function" rel="rdfs-seeAlso">mssql_fetch_array()</a> - Fetch a result row as an associative array, a numeric array, or both</span></li>
    <li class="member"><span class="function"><a href="function.mssql-fetch-object.html" class="function" rel="rdfs-seeAlso">mssql_fetch_object()</a> - Fetch row as object</span></li>
    <li class="member"><span class="function"><a href="function.mssql-data-seek.html" class="function" rel="rdfs-seeAlso">mssql_data_seek()</a> - Moves internal row pointer</span></li>
    <li class="member"><span class="function"><a href="function.mssql-result.html" class="function" rel="rdfs-seeAlso">mssql_result()</a> - Get result data</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="38041""></a>
  <div class="note">
   <strong class="user">zombie(at)artattack(dot)to</strong>
   <a href="#38041" class="date">05-Dec-2003 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that when you use the MSSQL fetch_* functions you need to manually reset the $result 's internal pointer when doinging a while loop. <br />
<br />
i.e.the below seems to only print out the first set. I don't remember this being the case with mysql, but it makes sense that it would do the same.<br />
<br />
while ($or_date_info = mssql_fetch_assoc($result)){<br />
&nbsp;echo '1st pass&lt;BR&gt;';&nbsp;&nbsp; <br />
&nbsp;print_r($or_date_info);<br />
}<br />
while ($or_date_info = mssql_fetch_assoc($result)){<br />
&nbsp; echo '2nd pass&lt;BR&gt;';&nbsp; <br />
&nbsp; print_r($or_date_info);<br />
}<br />
<br />
Blaine Garrett<br />
<a href="http://artattack.to?zombie" rel="nofollow" target="_blank">http://artattack.to?zombie</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20996""></a>
  <div class="note">
   <strong class="user">siivv at yahoo dot com</strong>
   <a href="#20996" class="date">25-Apr-2002 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
jus do this instead.. no for loop necessary<br />
<br />
while($line = mssql_fetch_row($result)){<br />
print "$line[0],$line[1]";&nbsp; // etc.<br />
}<br />
<br />
no need to have a whole extra variable $i tossed in</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18712""></a>
  <div class="note">
   <strong class="user">will_ &lt;sql at mookandblanchard dot com&gt;</strong>
   <a href="#18712" class="date">01-Feb-2002 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It took me way too long to notice the MySQL error in the note above (way tooo late and not enough sleep).&nbsp; Here's what I hacked up:<br />
<br />
<span class="default">&lt;?php<br />
$hostname </span><span class="keyword">= </span><span class="string">"localhost"</span><span class="keyword">;<br />
</span><span class="default">$username </span><span class="keyword">= </span><span class="string">"username"</span><span class="keyword">;<br />
</span><span class="default">$password </span><span class="keyword">= </span><span class="string">"password"</span><span class="keyword">;<br />
</span><span class="default">$dbName </span><span class="keyword">= </span><span class="string">"database"</span><span class="keyword">;<br />
<br />
</span><span class="default">MSSQL_CONNECT</span><span class="keyword">(</span><span class="default">$hostname</span><span class="keyword">,</span><span class="default">$username</span><span class="keyword">,</span><span class="default">$password</span><span class="keyword">) or DIE(</span><span class="string">"DATABASE FAILED TO RESPOND."</span><span class="keyword">);<br />
</span><span class="default">mssql_select_db</span><span class="keyword">(</span><span class="default">$dbName</span><span class="keyword">) or DIE(</span><span class="string">"Table unavailable"</span><span class="keyword">);<br />
<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT * FROM dbo.table"</span><span class="keyword">;<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mssql_query</span><span class="keyword">( </span><span class="default">$query </span><span class="keyword">);<br />
<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">mssql_num_rows</span><span class="keyword">( </span><span class="default">$result </span><span class="keyword">); ++</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">mssql_fetch_row</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print( </span><span class="string">"</span><span class="default">$line</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string"> - </span><span class="default">$line</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">\n"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks,<br />
<br />
will_&nbsp; @ irc.openprojects.net#php</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
