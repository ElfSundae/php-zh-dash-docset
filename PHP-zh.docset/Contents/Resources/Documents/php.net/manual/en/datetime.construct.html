<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Returns new DateTime object</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="datetime.add.html">? DateTime::add</a></li>
      <li style="float: right;"><a href="datetime.createfromformat.html">DateTime::createFromFormat ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.datetime.html">DateTime</a></li>
    <li>Returns new DateTime object</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="datetime.construct" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::__construct</h1>
  <h1 class="refname">date_create</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0)</p><p class="refpurpose"><span class="refname">DateTime::__construct</span> -- <span class="refname">date_create</span> &mdash; <span class="dc-title">Returns new DateTime object</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.construct-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>DateTime::__construct</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code><span class="initializer"> = &quot;now&quot;</span></span>
   [, <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <code class="parameter">$timezone</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
  ]] )</div>

  <p class="para rdfs-comment">过程化风格</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><a href="function.date-create.html" class="methodname">date_create</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code><span class="initializer"> = &quot;now&quot;</span></span>
   [, <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <code class="parameter">$timezone</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Returns new DateTime object.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.construct-parameters">
  <h3 class="title">参数</h3>
  <dl>

   
    <dt>
<code class="parameter">time</code></dt>

    <dd>

     <p class="para">日期/时间字符串。正确格式的说明详见 <a href="datetime.formats.html" class="link">日期与时间格式</a>。</p>
     <p class="para">
      Enter <strong><code>NULL</code></strong> here to obtain the current time when using
      the <code class="parameter">$timezone</code> parameter.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">timezone</code></dt>

    <dd>

     <p class="para">
      A <a href="class.datetimezone.html" class="classname">DateTimeZone</a> object representing the
      timezone of <code class="parameter">$time</code>.
     </p>
     <p class="para">
      If <code class="parameter">$timezone</code> is omitted,
      the current timezone will be used.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       The <code class="parameter">$timezone</code> parameter
       and the current timezone are ignored when the
       <code class="parameter">$time</code> parameter either
       is a UNIX timestamp (e.g. <em>@946684800</em>)
       or specifies a timezone
       (e.g. <em>2010-01-28T15:00:00+02:00</em>).
      </p>
     </p></blockquote>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.construct-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns a new DateTime instance.
   过程化风格在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-datetime.construct-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   Emits <a href="class.exception.html" class="classname">Exception</a> in case of an error.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-datetime.construct-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
        If <code class="parameter">time</code> contains an invalid
        <a href="datetime.formats.html" class="link">date/time format</a>, then an
        exception is now thrown. Previously an error was emitted.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.construct-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-2264">
   <p><strong>Example #1 <span class="function"><strong>DateTime::__construct()</strong></span> example</strong></p>
   <div class="example-contents"><p>面向对象风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />}<br /><br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>过程化风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$date</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$e&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_get_last_errors</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'errors'</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$error</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />}<br /><br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2000-01-01
</pre></div>
   </div>
  </div>
  <div class="example" id="example-2265">
   <p><strong>Example #2 Intricacies of <span class="function"><strong>DateTime::__construct()</strong></span></strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Specified&nbsp;date/time&nbsp;in&nbsp;your&nbsp;computer's&nbsp;time&nbsp;zone.<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:sP'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Specified&nbsp;date/time&nbsp;in&nbsp;the&nbsp;specified&nbsp;time&nbsp;zone.<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pacific/Nauru'</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:sP'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Current&nbsp;date/time&nbsp;in&nbsp;your&nbsp;computer's&nbsp;time&nbsp;zone.<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:sP'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Current&nbsp;date/time&nbsp;in&nbsp;the&nbsp;specified&nbsp;time&nbsp;zone.<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pacific/Nauru'</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:sP'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Using&nbsp;a&nbsp;UNIX&nbsp;timestamp.&nbsp;&nbsp;Notice&nbsp;the&nbsp;result&nbsp;is&nbsp;in&nbsp;the&nbsp;UTC&nbsp;time&nbsp;zone.<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'@946684800'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:sP'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Non-existent&nbsp;values&nbsp;roll&nbsp;over.<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-02-30'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:sP'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程的输出类似于：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2000-01-01 00:00:00-05:00
2000-01-01 00:00:00+12:00
2010-04-24 10:24:16-04:00
2010-04-25 02:24:16+12:00
2000-01-01 00:00:00+00:00
2000-03-01 00:00:00-05:00
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.construct-seealso">
  <h3 class="title">参见</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="datetime.createfromformat.html" class="function" rel="rdfs-seeAlso">DateTime::createFromFormat()</a> - Returns new DateTime object formatted according to the specified format</span></li>
   <li class="member"><span class="function"><a href="datetimezone.construct.html" class="function" rel="rdfs-seeAlso">DateTimeZone::__construct()</a> - Creates new DateTimeZone object</span></li>
   <li class="member"><a href="datetime.formats.html" class="link">Date and Time Formats</a></li>
   <li class="member"><a href="datetime.configuration.html#ini.date.timezone" class="link">date.timezone</a> ini setting</li>
   <li class="member"><span class="function"><a href="function.date-default-timezone-set.html" class="function" rel="rdfs-seeAlso">date_default_timezone_set()</a> - 设定用于一个脚本中所有日期时间函数的默认时区</span></li>
   <li class="member"><span class="function"><a href="datetime.getlasterrors.html" class="function" rel="rdfs-seeAlso">DateTime::getLastErrors()</a> - Returns the warnings and errors</span></li>
   <li class="member"><span class="function"><a href="function.checkdate.html" class="function" rel="rdfs-seeAlso">checkdate()</a> - 验证一个格里高里日期</span></li>
  </ul>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116708""></a>
  <div class="note">
   <strong class="user">Rabenschwinge</strong>
   <a href="#116708" class="date">13-Feb-2015 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Impossible times due to daylight savings are handled by this function in a way similar to impossible dates, with the difference that this is not an error (i.e. a consequent call to DateTime::getLastError() yields nothing).<br />
<br />
For example:<br />
In the timezone "Europe/Berlin" on Sunday, March 30 2014 there was no 02:30 am, because that our is being skipped due to daylight savings on that day.<br />
<br />
<span class="default">&lt;?php<br />
$tz </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">"Europe/Berlin"</span><span class="keyword">);<br />
</span><span class="default">$impossible_time </span><span class="keyword">= </span><span class="string">"2014-03-30T02:30:00"</span><span class="keyword">;<br />
</span><span class="default">$date </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$impossible_time</span><span class="keyword">, </span><span class="default">$tz</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">getLastErrors</span><span class="keyword">());<br />
echo </span><span class="string">"The impossible time '</span><span class="default">$impossible_time</span><span class="string">' is interpreted as: " </span><span class="keyword">. </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">ISO8601</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/*<br />
Yields:<br />
array(4) {<br />
&nbsp; 'warning_count' =&gt;<br />
&nbsp; int(0)<br />
&nbsp; 'warnings' =&gt;<br />
&nbsp; array(0) {<br />
&nbsp; }<br />
&nbsp; 'error_count' =&gt;<br />
&nbsp; int(0)<br />
&nbsp; 'errors' =&gt;<br />
&nbsp; array(0) {<br />
&nbsp; }<br />
}<br />
The impossible time '2014-03-30T02:30:00' is interpreted as: 2014-03-30T03:30:00+0200<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
That is similar to how, for example, Febuary 29, 2014 would be handled, which would be interpreted as March 1, 2014. The difference is, that with the date that would be an error, with the time it is not.<br />
<br />
Ambigous times due to daylight savings are handled as the second possibility. For example the time 2:30 am occurred twice on October 26, 2014 in the timezone "Europe/Berlin".<br />
<br />
<span class="default">&lt;?php<br />
$tz </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">"Europe/Berlin"</span><span class="keyword">);<br />
</span><span class="default">$ambiguous_time </span><span class="keyword">= </span><span class="string">"2014-10-26T02:30:00"</span><span class="keyword">;<br />
</span><span class="default">$date </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$ambiguous_time</span><span class="keyword">, </span><span class="default">$tz</span><span class="keyword">);<br />
echo </span><span class="string">"The ambiguous time '</span><span class="default">$ambiguous_time</span><span class="string">' is interpreted as: " </span><span class="keyword">. </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">ISO8601</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/*<br />
Yields:<br />
The ambiguous time '2014-10-26T02:30:00' is interpreted as: 2014-10-26T02:30:00+0100<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
Note that "2014-10-26T02:30:00+0200", one hour earlier, would be a correct answer as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116618""></a>
  <div class="note">
   <strong class="user">Wes Hyse</strong>
   <a href="#116618" class="date">30-Jan-2015 05:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is worth noting:<br />
<br />
If you have not setup a default timezone, an Exception (or error if PHP &lt; 5.3.0) will be thrown even when the $time parameter of the constructor includes a timezone or is a UNIX timestamp.<br />
<br />
At least for me, this was unexpected considering that the $timezone parameter is ignored in the cases when "the $time parameter either is a UNIX timestamp (e.g. @946684800) or specifies a timezone (e.g. 2010-01-28T15:00:00+02:00)."</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116480""></a>
  <div class="note">
   <strong class="user">tzvi at somesite dot com</strong>
   <a href="#116480" class="date">09-Jan-2015 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If time cannot be parsed an exception of type Exception is thrown which can be caught, however an E_WARNING is emitted as well. This might be confusing if you are converting warnings to exceptions in your error or shutdown handler.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">try {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'some invalid date format'</span><span class="keyword">);<br />
}<br />
catch (</span><span class="default">Exception $ex</span><span class="keyword">) {}<br />
</span><span class="default">$warning </span><span class="keyword">= </span><span class="default">error_get_last</span><span class="keyword">(); </span><span class="comment">// will contain warning info<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116225""></a>
  <div class="note">
   <strong class="user">rn at alpha9marketing dot com</strong>
   <a href="#116225" class="date">25-Nov-2014 09:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the DateTime ctor also accepts boolean false and empty strings, and treats them the same as NULL (i.e. result is current date and time). This may lead to unexpected results if you forward function return values without explicitly checking them first.<br />
<br />
Empty arrays and boolean true trigger PHP warnings OTOH.<br />
<br />
(checked with PHP 5.5.18)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114902""></a>
  <div class="note">
   <strong class="user">Dimitar Stoichev</strong>
   <a href="#114902" class="date">23-Apr-2014 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful working with MySQL dates representing point of transition to Daylight Saving Time.<br />
The constructor of DateTime will convert timezone abbreviation to DST but not the time.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$timeZone </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'Europe/Sofia'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$transitionToDst </span><span class="keyword">= </span><span class="string">'2014-03-30 03:00:00'</span><span class="keyword">;<br />
<br />
</span><span class="default">$date </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$transitionToDst</span><span class="keyword">, </span><span class="default">$timeZone</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Outputs: Sun Mar 30, 2014 3:00:00 EEST<br />
// Correct: Sun Mar 30, 2014 4:00:00 EEST <br />
</span><span class="keyword">echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'D M j, Y G:i:s T'</span><span class="keyword">) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Explicitly setting timezone or adding one second fixes this<br />
</span><span class="default">$cloneForAdding </span><span class="keyword">= clone </span><span class="default">$date</span><span class="keyword">;<br />
<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">setTimezone</span><span class="keyword">(</span><span class="default">$timeZone</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Outputs: Sun Mar 30, 2014 4:00:00 EEST <br />
</span><span class="keyword">echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'D M j, Y G:i:s T'</span><span class="keyword">) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$cloneForAdding</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT1S'</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Outputs: Sun Mar 30, 2014 4:00:01 EEST<br />
</span><span class="keyword">echo </span><span class="default">$cloneForAdding</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'D M j, Y G:i:s T'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113342""></a>
  <div class="note">
   <strong class="user">RussellG</strong>
   <a href="#113342" class="date">30-Sep-2013 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although this function throws an exception on invalid $time values (empty strings, for example), the exception can't be caught because it's a fatal exception. Use functions such as checkdate() and strtotime() to validate the string first. Example #1 should be changed to remove the try/catch block, since it's misleading.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106979""></a>
  <div class="note">
   <strong class="user">cHao</strong>
   <a href="#106979" class="date">22-Dec-2011 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There's a reason for ignoring the time zone when you pass a timestamp to __construct.&nbsp; That is, UNIX timestamps are by definition based on UTC.&nbsp; @1234567890 represents the same date/time regardless of time zone.&nbsp; So there's no need for a time zone at all.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104111""></a>
  <div class="note">
   <strong class="user">joel dot kallman at gmail dot com</strong>
   <a href="#104111" class="date">24-May-2011 03:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A definite "gotcha" (while documented) that exists in the __construct is that it ignores your timezone if the $time is a timestamp.&nbsp; While this may not make sense, the object does provide you with methods to work around it.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// New Timezone Object
<br />
</span><span class="default">$timezone </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'America/New_York'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// New DateTime Object
<br />
</span><span class="default">$date </span><span class="keyword">=&nbsp; new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'@1306123200'</span><span class="keyword">, </span><span class="default">$timezone</span><span class="keyword">);&nbsp; &nbsp; 
<br />

<br />
</span><span class="comment">// You would expect the date to be 2011-05-23 00:00:00
<br />
// But it actually outputs 2011-05-23 04:00:00
<br />
</span><span class="keyword">echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// You can still set the timezone though like so...&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">setTimezone</span><span class="keyword">(</span><span class="default">$timezone</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// This will now output 2011-05-23 00:00:00
<br />
</span><span class="keyword">echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97724""></a>
  <div class="note">
   <strong class="user">Tim Strehle</strong>
   <a href="#97724" class="date">05-May-2010 12:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"The $timezone parameter and the current timezone are ignored when the $time parameter [...] is a UNIX timestamp."
<br />

<br />
Watch out - this means that these two are NOT equivalent, they result in different timezones (unless your current timezone is GMT):
<br />

<br />
<span class="default">&lt;?php
<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(); </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">setTimestamp</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">);
<br />
echo </span><span class="default">$o</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'O'</span><span class="keyword">);
<br />
</span><span class="comment">// +0200
<br />

<br />
</span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'@' </span><span class="keyword">. </span><span class="default">$t</span><span class="keyword">);
<br />
echo </span><span class="default">$o</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'O'</span><span class="keyword">);
<br />
</span><span class="comment">// +0000
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95611""></a>
  <div class="note">
   <strong class="user">kendsnyder at gmail dot com</strong>
   <a href="#95611" class="date">12-Jan-2010 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Also forgot to mention, that MySQL "zeroed" dates do not throw an error but produce a non-sensical date:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"0000-00-00"</span><span class="keyword">);<br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "-0001-11-30"<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Another good reason to write your own class that extends from DateTime.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95610""></a>
  <div class="note">
   <strong class="user">kendsnyder at gmail dot com</strong>
   <a href="#95610" class="date">12-Jan-2010 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The theoretical limits of the date range seem to be "-9999-01-01" through "9999-12-31" (PHP 5.2.9 on Windows Vista 64):<br />
<br />
<span class="default">&lt;?php<br />
<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"9999-12-31"</span><span class="keyword">); <br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "9999-12-31"<br />
<br />
</span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"0000-12-31"</span><span class="keyword">); <br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "0000-12-31"<br />
<br />
</span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"-9999-12-31"</span><span class="keyword">); <br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "-9999-12-31"<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Dates above 10000 and below -10000 do not throw errors but produce weird results:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"10019-01-01"</span><span class="keyword">); <br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "2009-01-01"<br />
<br />
</span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"10009-01-01"</span><span class="keyword">); <br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "2009-01-01"<br />
<br />
</span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"-10019-01-01"</span><span class="keyword">); <br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">); </span><span class="comment">// "2009-01-01"<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
