<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>获取cURL版本信息</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.curl-unescape.html">? curl_unescape</a></li>
      <li style="float: right;"><a href="book.event.html">Event ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.curl.html">cURL 函数</a></li>
    <li>获取cURL版本信息</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.curl-version" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">curl_version</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.2, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">curl_version</span> &mdash; <span class="dc-title">获取cURL版本信息</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.curl-version-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>curl_version</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$age</code><span class="initializer"> = CURLVERSION_NOW</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   返回关于cURL的版本信息。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.curl-version-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">age</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.curl-version-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回一个相关的数组包含如下元素：
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Indice</th>
       <th>值描述</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>version_number</td>
       <td>cURL 24位版本号</td>
      </tr>

      <tr>
       <td>version</td>
       <td>cURL 版本号，字符串形式</td>
      </tr>

      <tr>
       <td>ssl_version_number</td>
       <td>OpenSSL 24 位版本号</td>
      </tr>

      <tr>
       <td>ssl_version</td>
       <td>OpenSSL 版本号，字符串形式</td>
      </tr>

      <tr>
       <td>libz_version</td>
       <td>zlib 版本号，字符串形式</td>
      </tr>

      <tr>
       <td>host</td>
       <td>关于编译cURL主机的信息</td>
      </tr>

      <tr>
       <td>age</td>
       <td class="empty">&nbsp;</td>
      </tr>

      <tr>
       <td>features</td>
       <td>一个<em>CURL_VERSION_XXX</em>常量的位掩码</td>
      </tr>

      <tr>
       <td>protocols</td>
       <td>一个cURL支持的协议名字的数组</td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.curl-version-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4632">
    <p><strong>Example #1 <span class="function"><strong>curl_version()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     这个范例将会检查当前cURL版本使用<span class="function"><strong>curl_version()</strong></span>返回的&#039;features&#039;位掩码中哪些特性是可用的。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;获取cURL版本数组<br /></span><span style="color: #0000BB">$version&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">curl_version</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;在cURL编译版本中使用位域来检查某些特性<br /></span><span style="color: #0000BB">$bitfields&nbsp;</span><span style="color: #007700">=&nbsp;Array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'CURL_VERSION_IPV6'</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'CURL_VERSION_KERBEROS4'</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'CURL_VERSION_SSL'</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'CURL_VERSION_LIBZ'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);<br /><br /><br />foreach(</span><span style="color: #0000BB">$bitfields&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$feature</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$feature&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$version</span><span style="color: #007700">[</span><span style="color: #DD0000">'features'</span><span style="color: #007700">]&nbsp;&amp;&nbsp;</span><span style="color: #0000BB">constant</span><span style="color: #007700">(</span><span style="color: #0000BB">$feature</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #DD0000">'&nbsp;matches'&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">'&nbsp;does&nbsp;not&nbsp;match'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117733""></a>
  <div class="note">
   <strong class="user">nimasdj [AT] yahoo [DOT] com</strong>
   <a href="#117733" class="date">30-Jul-2015 07:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to check if your curl supports ssl, it is not good idea to go with curl_version()['ssl_version'], <br />
e.g. <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">stripos</span><span class="keyword">(</span><span class="default">curl_version</span><span class="keyword">()[</span><span class="string">'ssl_version'</span><span class="keyword">], </span><span class="string">"openssl"</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) { <br />
</span><span class="default">?&gt;<br />
</span>as curl says here <a href="http://curl.haxx.se/docs/faq.html#Does_curl_work_build_with_other it may use other ssl library than OpenSSL (which does not have anything to do with that separated openssl extension, curl has its own openssl library" rel="nofollow" target="_blank">http://curl.haxx.se/docs/faq.html#Does_curl_work_build_with_other it may use other ssl library than OpenSSL (which does not have anything to do with that separated openssl extension, curl has its own openssl library</a>) so as described here <a href="http://curl.haxx.se/libcurl/c/curl_version_info.html it is better to go with CURL_VERSION_SSL bitmask check rather than curl_version(" rel="nofollow" target="_blank">http://curl.haxx.se/libcurl/c/curl_version_info.html it is better to go with CURL_VERSION_SSL bitmask check rather than curl_version(</a>)['ssl_version']. Note that not all of those constants stated on official cURL website are available in php, but only these four constants:<br />
<br />
[CURL_VERSION_IPV6] =&gt; 1<br />
[CURL_VERSION_KERBEROS4] =&gt; 2<br />
[CURL_VERSION_SSL] =&gt; 4<br />
[CURL_VERSION_LIBZ] =&gt; 8<br />
<br />
I tested this on Windows by disabling "openssl" extension in php.ini and noticed curl has nothing to do with that separated openssl extension but it has its own openssl, in other word, disabling openssl extension does not affect on curl_version()['ssl_version']. So if you want to check if curl has support for ssl, you should not rely on existence of that separated openssl extension and above I explained you should not rely on curl_version()['ssl_version'] neither. The only reliable way is CURL_VERSION_SSL bitmask checking:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">curl_version</span><span class="keyword">()[</span><span class="string">'features'</span><span class="keyword">] &amp; </span><span class="default">CURL_VERSION_SSL</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"SSL is not supported with this cURL installation."</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
