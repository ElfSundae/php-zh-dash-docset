<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>安装</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="opcache.requirements.html">? 需求</a></li>
      <li style="float: right;"><a href="opcache.configuration.html">运行时配置 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="opcache.setup.html">安装／配置</a></li>
    <li>安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="opcache.installation" class="sect1">
 <h2 class="title">安装</h2>

 <p class="para">
  安装 OPcache 的过程根据所用的 PHP 版本有所不同。
  请参考以下小节中适用的内容。
 </p>

 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <p class="para">
   如果需要将 <a href="http://xdebug.org/" class="link external" title="Link : http://xdebug.org/">&raquo;&nbsp;Xdebug</a> 扩展和 OPcache 一起使用，必须在 Xdebug 扩展之前加载
   OPcache 扩展。
  </p>
 </p></blockquote>

 <div class="sect2" id="opcache.installation.bundled">
  <h3 class="title">PHP 5.5.0 及后续版本</h3>
  <p class="para">
   OPcache 只能编译为共享扩展。
   如果你使用 <strong class="option configure">--disable-all</strong>
 参数
   禁用了默认扩展的构建，
   那么必须使用 <strong class="option configure">--enable-opcache</strong>
 
   选项来开启 OPcache。
  </p>
  
  <p class="para">
   编译之后，就可以使用
   <a href="ini.core.html#ini.zend-extension" class="link">zend_extension</a>
   指令来将 OPcache 扩展加载到 PHP 中。在非 Windows 平台使用
   <em>zend_extension=/full/path/to/opcache.so</em>，
   Windows 平台使用
   <em>zend_extension=C:\path\to\php_opcache.dll</em>。
  </p>
 </div>

 <div class="sect2" id="opcache.installation.pecl">
  <h3 class="title">PHP 5.2, 5.3 和 5.4 版本</h3>

  <p class="para">
   此 <a href="http://pecl.php.net/" class="link external" title="Link : http://pecl.php.net/">&raquo;&nbsp;PECL</a> 扩展未与
PHP 捆绑。
  </p>

  <p class="para">
   安装此 PECL 扩展相关的信息可在手册中标题为
<a href="install.pecl.html" class="link">PECL
扩展的安装</a>章节中找到。更多信息如新的发行版本、下载、源文件、
维护人员信息及变更日志等，都在此处：
   <a href="http://pecl.php.net/package/ZendOpcache" class="link external" title="Link : http://pecl.php.net/package/ZendOpcache">&raquo;&nbsp;http://pecl.php.net/package/ZendOpcache</a>.
  </p>

  <p class="para">
   <acronym title="PHP Extension and Application Repository">PECL</acronym> 扩展的
<acronym title="Dynamic Link Library">DLL</acronym> 当前不可用。参见
<a href="install.windows.building.html" class="link">在 Windows 上构建</a>章节。
  </p>
 </div>

 <div class="sect2" id="opcache.installation.recommended">
  <h3 class="title">推荐的 php.ini 设置</h3>

  <p class="para">
   使用下列推荐设置来获得较好的
   性能：
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
opcache.memory_consumption=128
opcache.interned_strings_buffer=8
opcache.max_accelerated_files=4000
opcache.revalidate_freq=60
opcache.fast_shutdown=1
opcache.enable_cli=1
</pre></div>
   </div>

  </div>

  <p class="para">
   你也可以禁用
   <a href="opcache.configuration.html#ini.opcache.save-comments" class="link">opcache.save_comments</a>
   并且启用
   <a href="opcache.configuration.html#ini.opcache.enable-file-override" class="link">opcache.enable_file_override</a>。
   需要提醒的是，在生产环境中使用上述配置之前，必须经过严格测试。
   因为上述配置存在一个已知问题，它会引发一些框架和应用的异常，
   尤其是在存在文档使用了备注注解的时候。
  </p>

  <p class="para">
   <a href="opcache.configuration.html" class="link">这里</a>是 OPcache 
   可用的配置指令完整列表。
  </p>
 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116306""></a>
  <div class="note">
   <strong class="user">Alex Stanciu</strong>
   <a href="#116306" class="date">10-Dec-2014 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case anyone has segfaults when using Xdebug with OpCache (even after updates, Xdebug after OpCache or other desperate strategies).<br />
1. Disable OpCache from beeing loaded<br />
2. Install/Enable APCu<br />
Should be ok for a development box. On the production box you should use OpCache without Xdebug (as Xdebug slows down PHP ~3x - on our apps at least).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115115""></a>
  <div class="note">
   <strong class="user">matthias at himalayasystems dot be</strong>
   <a href="#115115" class="date">28-May-2014 04:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a problem with installing on php 5.4 through pecl<br />
<br />
I used <br />
pecl install ZendOpache-beta<br />
To force the install of the beta version<br />
<br />
When restarting, php could not find opcache.so <br />
Use the absolute path when assigning zend_extension.<br />
So change zend_extension=opache.so<br />
to<br />
zend_extension=/usr/lib64/php/modules/opcache.so</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114567""></a>
  <div class="note">
   <strong class="user">NoiseEee</strong>
   <a href="#114567" class="date">07-Mar-2014 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While the "suggested" opcache settings for php.ini might be appropriate for a production server, you're going to want to change several while you're developing, or you're not going to see any changes to your code. Get familiar with what they mean before blindly pasting that into php.ini and assuming things are going to work well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113510""></a>
  <div class="note">
   <strong class="user">dosercz</strong>
   <a href="#113510" class="date">22-Oct-2013 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For me works (on windows) only filename without path (default extensions dir path is used)<br />
zend_extension=php_opcache.dll</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
