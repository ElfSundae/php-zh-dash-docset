<html><!-- Mirrored from php.net/manual/en/session.security.ini.php by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 02 Nov 2016 09:39:48 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Securing Session INI Settings</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="session.security.ini.html">
 <link rel="shorturl" href="session.security.ini.html">
 <link rel="alternate" href="session.security.ini.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="session.security.html">
 <link rel="prev" href="features.session.security.management.html">
 <link rel="next" href="ref.session.html">

 <link rel="alternate" href="session.security.ini.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/session.security.ini.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/session.security.ini.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/session.security.ini.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/session.security.ini.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/ja/session.security.ini.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/kr/session.security.ini.php" hreflang="kr">
 <link rel="alternate" href="http://php.net/manual/ro/session.security.ini.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/session.security.ini.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/session.security.ini.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/session.security.ini.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached0152.css?t=1421837618&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached15be.css?t=1421837618&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached2534.css?t=1469127006&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached00eb.css?t=1449787206&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/conferences/index.php#id2016-10-28-1">ConFoo Vancouver &amp; Montreal</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.errors.html">Errors</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.sessions.html">Session Security</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
	<dd><a href="refs.ui.html">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
    <div id="breadcrumbs-inner">
          
              
          <ul>
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.session.html">Session Extensions</a></li>      <li><a href="book.session.html">Sessions</a></li>      <li><a href="session.security.html">Sessions and Security</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div id="session.security.ini" class="sect1">
  <h2 class="title">Securing Session INI Settings</h2>

  <p class="para">
   By securing session related INI settings, you can improve session security.
   Some of important INI settings do not have recommended settings. You
   are responsible to hardening session settings.
  </p>

  <ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.cookie-lifetime" class="link">session.cookie_lifetime</a>=0
     </p>
     <p class="para">
      0 have special meaning. It tells browsers not to store cookie to
      permanent storage. Therefore, when browser is terminated, session
      ID cookie is deleted immediately. If developer set other than 0, it may
      allow other users to use the session ID. Most applications should
      use "0" for this.
     </p>
     <p class="para">
      If auto login feature is required, implement your own secure auto login
      feature. Do not use long life session ID for it.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.use-cookies" class="link">session.use_cookies</a>=On
     </p>
     <p class="para">
      <a href="session.configuration.html#ini.session.use-only-cookies" class="link">session.use_only_cookies</a>=On
     </p>
     <p class="para">
      Although HTTP cookie has some problems, cookie is preferred way to
      manage session ID. Use only cookies for session ID management when
      it is possible. Most applications should use cookie for session
      ID.
     </p>
     <p class="para">
      If <em>session.use_only_cookies</em>=Off,
      session module will use session ID values set by GET/POST/URL is used when
      session ID cookie is not initialized already.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.use-strict-mode" class="link">session.use_strict_mode</a>=On
     </p>
     <p class="para">
      Although, enabling <em>session.use_strict_mode</em> is
      mandatory. It is not enabled by default.
     </p>
     <p class="para">
      This prevents session module to use uninitialized session ID. In
      other word, session module only accepts valid session ID generated
      by session module. It rejects session ID supplied by
      users.
     </p>
     <p class="para">
      Because of cookie spec, attackers are able to set undeletable session ID
      cookies via locally setting cookie database or JavaScript injections.
      <em>session.use_strict_mode</em> can prevent attacker
      initialized session ID being used.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      </p><p class="para">
       Attackers may initialize session ID by their device and may set the
       session ID to victim. They must keep the session ID active to abuse.
       Attackers require additional steps to perform attack with this attack
       scenario. Therefore, <em>session.use_strict_mode</em> works
       as the mitigation.
      </p>
     <p></p></blockquote>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.cookie-httponly" class="link">session.cookie_httponly</a>=On
     </p>
     <p class="para">
      Disallow access to session cookie by JavaScript. This setting
      prevents cookies stolen by JavaScript injection.
     </p>
     <p class="para">
      It is possible to use session ID as CSRF protection key, but this is not
      recommended. For example, HTML source may be saved and sent to
      other users. Developer should not write session ID in web pages for
      better security. Almost all applications must use httponly attribute for
      session ID cookie.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      </p><p class="para">
       CSRF protection token should be renewed periodically just like
       session ID
      </p>
     <p></p></blockquote>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.cookie-secure" class="link">session.cookie_secure</a>=On
     </p>
     <p class="para">
      Allows access to session ID cookie only when protocol is HTTPS. If
      your web site is HTTPS only web site, you must enable this
      setting.
     </p>
     <p class="para">
      HSTS should be considered for HTTPS only web site.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.gc-maxlifetime" class="link">session.gc_maxlifetime</a>=[choose smallest possible]
     </p>
     <p class="para">
      <em>session.gc_maxlifetime</em>
      is setting for deleting obsolete session ID. Reliance on this setting
      is NOT recommend. You should manage session life time by time-stamp
      by yourself.
     </p>
     <p class="para">
      Session GC(garbage collection) is better to be performed by <span class="function"><a href="function.session-gc.html" class="function">session_gc()</a></span>.
      <span class="function"><a href="function.session-gc.html" class="function">session_gc()</a></span> function is better to be executed by task
      managers. e.g. cron on UNIX like systems.
     </p>
     <p class="para">
      GC is performed by probability by default. This setting does not
      guarantee old session deletion.  Although developer cannot rely
      on this setting, setting this to smallest possible value is
      recommended. Adjust <a href="session.configuration.html#ini.session.gc-probability" class="link">session.gc_probability</a>
      and <a href="session.configuration.html#ini.session.gc-divisor" class="link">session.gc_divisor</a> so
      that obsolete sessions are deleted by appropriate frequency. If
      auto login feature is required, implement your own secure auto
      login feature. Never use long life session ID for it.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      </p><p class="para">
       Some session save handler modules do not use this setting for
       probability based expiration . e.g. memcached, memcache.
       Refer to session save handler documentation for details.
      </p>
     <p></p></blockquote>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.use-trans-sid" class="link">session.use_trans_sid</a>=Off
     </p>
     <p class="para">
      Use of transparent session ID management is not prohibited. You
      may use it when it is needed. However, disabling transparent
      session ID management would improve general session ID security by
      removing possibility of session ID injection and session ID leak.
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      </p><p class="para">
       Session ID may leak from bookmarked URL, e-mailed URL, saved HTML
       source.
      </p>
     <p></p></blockquote>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.trans-sid-tags" class="link">session.trans_sid_tags</a>=[limitted tags]
     </p>
     <p class="para">
       (PHP 7.1.0 &gt;=) You should not rewrite unneeded HTML tags. Default
       would be good enough for most usage. Older PHP uses
       <a href="outcontrol.configuration.html#ini.url-rewriter.tags" class="link">url_rewriter.tags</a> for this.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.trans-sid-hosts" class="link">session.trans_sid_hosts</a>=[limitted hosts]
     </p>
     <p class="para">
       (PHP 7.1.0 &gt;=) This INI defines whitelist hosts that allows trans sid
       rewrite. Never add untrusted host. Session module allow only $_SERVER['HTTP_HOST']
       when this setting is empty.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.referer-check" class="link">session.referer_check</a>=[your originating URL]
     </p>
     <p class="para">
      When <a href="session.configuration.html#ini.session.use-trans-sid" class="link">session.use_trans_sid</a>
      is enabled, use of this setting is recommended.
      It reduces risk of session ID injection. If your site is
      http://example.com/, set http://example.com/ to it. Note that when
      HTTPS is used, browser will not send referrer header. Browser may
      not send referrer header by configuration. Therefore, this setting
      is not reliable security measure.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.cache-limiter" class="link">session.cache_limiter</a>=nocache
     </p>
     <p class="para">
      Make sure HTTP contents are not cached for authenticated
      session. Allow caching only when contents is not private.
      Otherwise, contents may be exposed. "private" may be used
      if HTTP content does not include security sensitive data. Note
      that "private" may leave private data cached by shared
      clients. "public" may be used only when HTTP content does not
      contain any private data at all.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.sid-length" class="link">session.sid_length</a>="48"
     </p>
     <p class="para">
      (PHP 7.1.0 &gt;=) Longer session ID results in stronger session
      ID. Developer should consider session ID length 32 chars or more. At
      least 26 chars is required when
      <a href="session.configuration.html#ini.session.sid-bits-per-character" class="link">session.sid_bits_per_character</a>="5".
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.sid-bits-per-character" class="link">session.sid_bits_per_character</a>="6"
     </p>
     <p class="para">
      (PHP 7.1.0 &gt;=) The more bits in a session ID char, session module
      generates stronger session ID for the same session ID length.
     </p>
    </li>

    <li class="listitem">
     <p class="para">
      <a href="session.configuration.html#ini.session.hash-function" class="link">session.hash_function</a>="sha256"
     </p>
     <p class="para">
      (PHP 7.1.0 &lt;) Stronger hash function will generates stronger session
      ID. Although hash collision is unlikely even with MD5 hash, developers
      should use SHA-2 or stronger hash functions for the task. Developers may
      use stronger hashes like sha384 and sha512. Make sure you feed long
      enough <a href="session.configuration.html#ini.session.entropy-length" class="link">entropy</a> for
      the hash function used.
     </p>
    </li>

  </ul>
 </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div>
 <div class="note">There are no user contributed notes for this page.</div></section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/session.security.ini.php by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 02 Nov 2016 09:39:48 GMT -->


</body></html>