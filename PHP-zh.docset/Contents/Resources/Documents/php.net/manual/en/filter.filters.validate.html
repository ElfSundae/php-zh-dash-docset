<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Validate filters</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="filter.filters.html">? Types of filters</a></li>
      <li style="float: right;"><a href="filter.filters.sanitize.html">Sanitize filters ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="filter.filters.html">Types of filters</a></li>
    <li>Validate filters</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="filter.filters.validate" class="section">
  <h2 class="title">Validate filters</h2>
   <p class="para">
    <table class="doctable table">
     <caption><strong>Listing of filters for validation</strong></caption>
     
      <thead>
       <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Options</th>
        <th>Flags</th>
        <th>Description</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td><strong><code>FILTER_VALIDATE_BOOLEAN</code></strong></td>
        <td>&quot;boolean&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
          <strong><code>FILTER_NULL_ON_FAILURE</code></strong>
        </td>
        <td>
         <p class="para">
          Returns <strong><code>TRUE</code></strong> for &quot;1&quot;, &quot;true&quot;, &quot;on&quot; and &quot;yes&quot;.
          Returns <strong><code>FALSE</code></strong> otherwise.
         </p>
         <p class="para">
          If <strong><code>FILTER_NULL_ON_FAILURE</code></strong> is set, <strong><code>FALSE</code></strong> is
          returned only for &quot;0&quot;, &quot;false&quot;, &quot;off&quot;, &quot;no&quot;, and &quot;&quot;, and
          <strong><code>NULL</code></strong> is returned for all non-boolean values.
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_EMAIL</code></strong></td>
        <td>&quot;validate_email&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_EMAIL_UNICODE</code></strong>
        </td>
        <td>
         <p class="para">
          Validates whether the value is a valid e-mail address.
         </p>
         <p class="para">
          In general, this validates e-mail addresses against the syntax in
          RFC 822, with the exceptions that comments and whitespace folding
          and dotless domain names
          are not supported.
         </p>
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_FLOAT</code></strong></td>
        <td>&quot;float&quot;</td>
        <td>
         <code class="parameter">default</code>,
         <code class="parameter">decimal</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_THOUSAND</code></strong>
        </td>
        <td>Validates value as float, and converts to float on success.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_INT</code></strong></td>
        <td>&quot;int&quot;</td>
        <td>
         <code class="parameter">default</code>,
         <code class="parameter">min_range</code>,
         <code class="parameter">max_range</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_ALLOW_OCTAL</code></strong>,
         <strong><code>FILTER_FLAG_ALLOW_HEX</code></strong>
        </td>
        <td>Validates value as integer, optionally from the specified range, and converts to int on success.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_IP</code></strong></td>
        <td>&quot;validate_ip&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_IPV4</code></strong>,
         <strong><code>FILTER_FLAG_IPV6</code></strong>,
         <strong><code>FILTER_FLAG_NO_PRIV_RANGE</code></strong>,
         <strong><code>FILTER_FLAG_NO_RES_RANGE</code></strong>
        </td>
        <td>
         Validates value as IP address, optionally only IPv4 or IPv6 or not
         from private or reserved ranges.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_MAC</code></strong></td>
        <td>&quot;validate_mac_address&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td class="empty">&nbsp;</td>
        <td>Validates value as MAC address.</td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_REGEXP</code></strong></td>
        <td>&quot;validate_regexp&quot;</td>
        <td>
         <code class="parameter">default</code>,
         <code class="parameter">regexp</code>
        </td>
        <td class="empty">&nbsp;</td>
        <td>
         Validates value against <code class="parameter">regexp</code>, a
         <a href="book.pcre.html" class="link">Perl-compatible</a> regular expression.
        </td>
       </tr>

       <tr>
        <td><strong><code>FILTER_VALIDATE_URL</code></strong></td>
        <td>&quot;validate_url&quot;</td>
        <td>
         <code class="parameter">default</code>
        </td>
        <td>
         <strong><code>FILTER_FLAG_SCHEME_REQUIRED</code></strong>,
         <strong><code>FILTER_FLAG_HOST_REQUIRED</code></strong>,
         <strong><code>FILTER_FLAG_PATH_REQUIRED</code></strong>,
         <strong><code>FILTER_FLAG_QUERY_REQUIRED</code></strong>
        </td>
        <td>Validates value as URL (according to <a href="http://www.faqs.org/rfcs/rfc2396" class="link external" title="Link : http://www.faqs.org/rfcs/rfc2396">&raquo;&nbsp;http://www.faqs.org/rfcs/rfc2396</a>), optionally with required components. Beware a valid URL may not specify the HTTP protocol <em>http://</em> so further validation may be required to determine the URL uses an expected protocol, e.g. <em>ssh://</em> or <em>mailto:</em>. Note that the function will only find ASCII URLs to be valid; internationalized domain names (containing non-ASCII characters) will fail.</td>
       </tr>

      </tbody>
     
    </table>

   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <p class="para">
     As of PHP 5.4.11, the numbers +0 and -0 validate as both integers as well
     as floats (using <strong><code>FILTER_VALIDATE_FLOAT</code></strong> and
     <strong><code>FILTER_VALIDATE_INT</code></strong>). Before PHP 5.4.11 they only
     validated as floats (using <strong><code>FILTER_VALIDATE_FLOAT</code></strong>).
    </p>
    <p class="para">
     When <code class="parameter">default</code> is set to option, <code class="parameter">default</code>&#039;s value is used if value is not validated.
    </p>
   </p></blockquote>

  <div class="simplesect">
   <h3 class="title">更新日志</h3>
   <p class="para">
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>版本</th>
        <th>说明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>5.5.0</td>
        <td>
         Added <strong><code>FILTER_VALIDATE_MAC</code></strong>
        </td>
       </tr>

       <tr>
        <td>5.2.1</td>
        <td>
         <strong><code>FILTER_VALIDATE_URL</code></strong> now defaults to
         <strong><code>FILTER_FLAG_SCHEME_REQUIRED</code></strong> and
         <strong><code>FILTER_FLAG_HOST_REQUIRED</code></strong>.
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
  </div>

 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119528""></a>
  <div class="note">
   <strong class="user">kizge</strong>
   <a href="#119528" class="date">30-Jun-2016 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_INT first casts its value to string which produces unexpected result for bool and float (https://bugs.php.net/bug.php?id=72490):<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Prints int(1).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// ...but this prints bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// --------<br />
<br />
// Prints bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">1.1</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// ...but this prints int(0).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">0.0</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// ...but this again is bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="string">'0.0'</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Also bool(false).<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="string">'-0.0'</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Live sample: https://3v4l.org/CZW0W<br />
<br />
The docs are not clear on how exactly this casting affects the result for certain input values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118591""></a>
  <div class="note">
   <strong class="user">sebastian dot piskorski at gmail dot com</strong>
   <a href="#118591" class="date">05-Jan-2016 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL not only doesn't support whitespace folding and comments. It only checks Addr-spec part of email address. Otherwise it should mark such address as valid: 'Test Example &lt;test@example.com&gt;' because it is valid according to RFC 822.<br />
<br />
Also address "test@localhost" should be valid. Which is mentioned in another note.<br />
<br />
You can test it with this code:<br />
<span class="default">&lt;?php<br />
<br />
$emails </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'Test Example &lt;test@example.com&gt;'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'test@localhost'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'test@localhost.com'<br />
</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$emails </span><span class="keyword">as </span><span class="default">$email</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)) ? <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"[+] Email '</span><span class="default">$email</span><span class="string">' is valid\n" </span><span class="keyword">: <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"[-] Email '</span><span class="default">$email</span><span class="string">' is NOT valid\n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Output for PHP 5.3.21 - 7.0.1 :<br />
[-] Email 'Test Example &lt;test@example.com&gt;' is NOT valid<br />
[-] Email 'test@localhost' is NOT valid<br />
[+] Email 'test@localhost.com' is valid</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118383""></a>
  <div class="note">
   <strong class="user">rsnell at usgs dot gov</strong>
   <a href="#118383" class="date">26-Nov-2015 02:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if using FILTER_NULL_ON_FAILURE as a flag with the FILTER_VALIDATE_BOOLEAN id then NULL is no longer returned if the variable name is not set in the external variable array. It will instead return FALSE. In the description is says that when using the FILTER_NULL_ON_FAILURE flag that ' FALSE is returned only for "0", "false", "off", "no", and ""' an makes no mention of this additional state that can also return false. The behavior is mentioned on the filter_input documentation page under Return Values but that is not overly helpful if one is just looking here.<br />
<br />
If FILTER_NULL_ON_FAILURE is not used then NULL is returned when the variable name is not set in the external variable array, TRUE is returned for "1", "true", "on" and "yes" and FALSE is returned for everything else.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118024""></a>
  <div class="note">
   <strong class="user">william at crandell dot ws</strong>
   <a href="#118024" class="date">20-Sep-2015 05:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL on localhost emails will fail except when<br />
used in conjunction with a subdomain such as www.localhost<br />
<br />
FYI Sub domains generally are setup outside of the scope of php configurations.<br />
<br />
Using the following code:<br />
<br />
<span class="default">&lt;?php<br />
$email </span><span class="keyword">= </span><span class="string">"user@localhost"</span><span class="keyword">; <br />
echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));<br />
}else{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns:<br />
PHP Version: 5.5.29 //On MY server<br />
bool(false)<br />
<br />
While the following code:<br />
<br />
<span class="default">&lt;?php<br />
$email </span><span class="keyword">= </span><span class="string">"user@www.localhost"</span><span class="keyword">; </span><span class="comment">//Note the added subdomain www<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));<br />
}else{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns:<br />
PHP Version: 5.5.29 //On MY server<br />
user@www.localhost<br />
string(18) "user@www.localhost"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117950""></a>
  <div class="note">
   <strong class="user">Lech</strong>
   <a href="#117950" class="date">06-Sep-2015 05:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The description for FILTER_VALIDATE_URL seems incorrect/misleading. "Beware a valid URL may not specify the HTTP protocol" implies a valid URL cannot specify the HTTP protocol. I think "Beware a valid URL need not specify..." would be better.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117425""></a>
  <div class="note">
   <strong class="user">Wrinkled Cheese</strong>
   <a href="#117425" class="date">10-Jun-2015 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When validating a URL, as documented, the protocol is not validated.&nbsp; However, it is required to be present.<br />
<br />
For example:<br />
<br />
I don't expect a protocol to be present.&nbsp; To validate expected input I have to add a "protocol" as a prefix, and return true or false, and further validate the input.<br />
<br />
$r = filter_var(''this.doesnt.matter.so.why.is.it.required://'.$host, FILTER_VALIDATE_URL);<br />
return ($r != '' &amp;&amp; $r !== false) ? true : false;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117387""></a>
  <div class="note">
   <strong class="user">Darth Killer</strong>
   <a href="#117387" class="date">02-Jun-2015 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Contrary to what documentation implies, the FILTER_NULL_ON_FAILURE seem to affect any validation filter, not just FILTER_VALIDATE_BOOLEAN. I've been using that since PHP 5.2, and as of PHP 5.6.8 it still works. I have no clue if it's a blug or if it is as intended, in which case the documentation needs to be fixed.<br />
<br />
When the flag is used on a validation filter other than FILTER_VALIDATE_BOOLEAN, as expected the filter will return NULL instead of FALSE upon failure. This is quite useful when filtering a POST form with filter_input_array(), where you don't want to check what field is invalid and what field is missing. Just check if NULL is among the returned elements and you're done.<br />
<br />
<span class="default">&lt;?php<br />
$definition </span><span class="keyword">= array(<br />
&nbsp;&nbsp; </span><span class="string">'login' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'filter' </span><span class="keyword">=&gt; </span><span class="default">FILTER_VALIDATE_STRING</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'flags' </span><span class="keyword">=&gt; </span><span class="default">FILTER_NULL_ON_FAILURE<br />
&nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp; </span><span class="string">'pwd' </span><span class="keyword">=&gt; </span><span class="default">FILTER_UNSAFE_RAW<br />
</span><span class="keyword">);<br />
</span><span class="default">$form_data </span><span class="keyword">= </span><span class="default">filter_input_array</span><span class="keyword">(</span><span class="default">INPUT_POST</span><span class="keyword">, </span><span class="default">$definition</span><span class="keyword">);<br />
if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">$form_data</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)) {<br />
&nbsp;&nbsp; </span><span class="comment">// invalid form<br />
</span><span class="keyword">} else {<br />
&nbsp;&nbsp; </span><span class="comment">// valid form, let's proceed<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, if you want more precise error messages that approach won't work. But it's still good to know, i believe.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117347""></a>
  <div class="note">
   <strong class="user">Luuk</strong>
   <a href="#117347" class="date">25-May-2015 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@2:<br />
$value = " 0 ";<br />
$filtered = filter_var($value, FILTER_VALIDATE_INT);<br />
if($filtered || $filtered === 0)<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
} <br />
<br />
I think next code is better:<br />
<br />
$value = "0";<br />
if(filter_var($value, FILTER_VALIDATE_INT) !== false)<br />
{<br />
&nbsp; .....</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117330""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#117330" class="date">22-May-2015 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_FLOAT, decimal option mean decimal notation['.', ','].</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116961""></a>
  <div class="note">
   <strong class="user">maruerru at gmail dot com</strong>
   <a href="#116961" class="date">27-Mar-2015 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Often I see some code like the following:<br />
$value = "12";<br />
if( filter_var($value, FILTER_VALIDATE_INT) )<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}<br />
<br />
The above works as intended, except when $value is "0". In the above case it will be interpreted as FALSE.<br />
<br />
For the correct behavior,&nbsp; you have not only to check if it is equal (==) to false, but also identic (===) to FALSE:<br />
$value = " 0 ";<br />
if( filter_var($value, FILTER_VALIDATE_INT)&nbsp; === FALSE )<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}<br />
<br />
I hope, I could help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116924""></a>
  <div class="note">
   <strong class="user">bryanwayb at gmail dot com</strong>
   <a href="#116924" class="date">22-Mar-2015 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's good to remember that using filter_var is primarily for filtering input values when doing boolean logic comparisons. Take the following:<br />
<br />
$value = "12";<br />
if(filter_var($value, FILTER_VALIDATE_INT))<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}<br />
<br />
The above works as intended, except when $value = "0". In which case filter_var returns a 0, aka false when used as a boolean.<br />
<br />
For the correct behavior, do a zero check.<br />
<br />
$value = " 0 ";<br />
$filtered = filter_var($value, FILTER_VALIDATE_INT);<br />
if($filtered || $filtered === 0)<br />
{<br />
&nbsp;&nbsp;&nbsp; // validated as an int<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113306""></a>
  <div class="note">
   <strong class="user">Bastien</strong>
   <a href="#113306" class="date">24-Sep-2013 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rejection of so-called partial domains because of "missing" dot is not following section 2.3.5 of RFC 5321.<br />
<br />
It says FQDNs are permitted, and com, org, or va are (well, may be) valids FQDNs. It depends on DNS, not on syntax.<br />
<br />
Some TDLs (although few of them) have MX RRs, the for example "abuse@va" is correct.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111692""></a>
  <div class="note">
   <strong class="user">rowan dot collins at gmail dot com</strong>
   <a href="#111692" class="date">18-Mar-2013 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding "partial" addresses with no . in the domain part, a comment in the source code (in ext/filter/logical_filters.c) justifies this rejection thus:<br />
<br />
&nbsp;&nbsp; &nbsp; * The regex below is based on a regex by Michael Rushton.<br />
&nbsp;&nbsp; &nbsp; * However, it is not identical.&nbsp; I changed it to only consider routeable<br />
&nbsp;&nbsp; &nbsp; * addresses as valid.&nbsp; Michael's regex considers a@b a valid address<br />
&nbsp;&nbsp; &nbsp; * which conflicts with section 2.3.5 of RFC 5321 which states that:<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; Only resolvable, fully-qualified domain names (FQDNs) are permitted<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; when domain names are used in SMTP.&nbsp; In other words, names that can<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; be resolved to MX RRs or address (i.e., A or AAAA) RRs (as discussed<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; in Section 5) are permitted, as are CNAME RRs whose targets can be<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; resolved, in turn, to MX or address RRs.&nbsp; Local nicknames or<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; unqualified names MUST NOT be used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110411""></a>
  <div class="note">
   <strong class="user">boy at relaxnow dot nl</strong>
   <a href="#110411" class="date">19-Oct-2012 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_URL does not work with URNs, examples of valid URIs according to RFC3986 and if they are accepted by FILTER_VALIDATE_URL:
<br />

<br />
[PASS] <a href="ftp://ftp.is.co.za.example.org/rfc/rfc1808.txt" rel="nofollow" target="_blank">ftp://ftp.is.co.za.example.org/rfc/rfc1808.txt</a>
<br />
[PASS] gopher://spinaltap.micro.umn.example.edu/00/Weather/California/Los%20Angeles
<br />
[PASS] <a href="http://www.math.uio.no.example.net/faq/compression-faq/part1.html" rel="nofollow" target="_blank">http://www.math.uio.no.example.net/faq/compression-faq/part1.html</a>
<br />
[PASS] <a href="mailto:mduerst@ifi.unizh.example.gov" rel="nofollow" target="_blank">mailto:mduerst@ifi.unizh.example.gov</a>
<br />
[PASS] news:comp.infosystems.www.servers.unix
<br />
[PASS] telnet://melvyl.ucop.example.edu/
<br />
[PASS] <a href="http://www.ietf.org/rfc/rfc2396.txt" rel="nofollow" target="_blank">http://www.ietf.org/rfc/rfc2396.txt</a>
<br />
[PASS] ldap://[2001:db8::7]/c=GB?objectClass?one
<br />
[PASS] <a href="mailto:John.Doe@example.com" rel="nofollow" target="_blank">mailto:John.Doe@example.com</a>
<br />
[PASS] news:comp.infosystems.www.servers.unix
<br />
[FAIL] tel:+1-816-555-1212
<br />
[PASS] telnet://192.0.2.16:80/
<br />
[FAIL] urn:oasis:names:specification:docbook:dtd:xml:4.1.2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108551""></a>
  <div class="note">
   <strong class="user">bee kay two at em ee dot com</strong>
   <a href="#108551" class="date">06-May-2012 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notably missing is a way to validate text entry as printable,<br />
printable multiline,<br />
or printable and safe (tag free)<br />
<br />
FILTER_VALIDATE_TEXT, which validates no special characters<br />
perhaps with FILTER_FLAG_ALLOW_NEWLINE<br />
and FILTER_FLAG_NOTAG to disallow tag starters</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105619""></a>
  <div class="note">
   <strong class="user">Griff</strong>
   <a href="#105619" class="date">01-Sep-2011 01:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;&lt; FILTER_VALIDATE_EMAIL allows incomplete e-mail addresses to be validated, for examle john@gmail will validate as a proper e-mail address &gt;&gt;<br />
<br />
"Plain" hostnames with no dots are valid in email addresses - <br />
for example, "me@localhost".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103334""></a>
  <div class="note">
   <strong class="user">php at sethsyberg dot com</strong>
   <a href="#103334" class="date">07-Apr-2011 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When validating floats, you must use the Identical/Not identical operators for proper validation of zeros:<br />
<br />
This will not work as expected:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if (!</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is a valid float"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is NOT a valid float"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This will work as expected:<br />
<span class="default">&lt;?php<br />
$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if (</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_FLOAT</span><span class="keyword">)!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is a valid float"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$x</span><span class="string"> is NOT a valid float"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102937""></a>
  <div class="note">
   <strong class="user">chastell at chastell dot net</strong>
   <a href="#102937" class="date">15-Mar-2011 04:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
example@example is a perfectly valid email address - I use chastell@localhost and chastell@devielle (my computer's name) email addresses all the time and they get delivered just fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102398""></a>
  <div class="note">
   <strong class="user">php dot net at piskvor dot org</strong>
   <a href="#102398" class="date">11-Feb-2011 05:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL is discarding valid e-mail addresses containing IDN. Since there are real, live IDNs on the Internet, that means the filtered output is too strict, leading to false negatives.<br />
<br />
Punycode-encoded IDN addresses pass the filter correctly; so before checking for validity, it is necessary to convert the e-mail address to punycode.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101693""></a>
  <div class="note">
   <strong class="user">Clifton</strong>
   <a href="#101693" class="date">05-Jan-2011 05:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FILTER_VALIDATE_EMAIL does NOT allow incomplete e-mail addresses to be validated as mentioned by Tomas.
<br />

<br />
Using the following code:
<br />

<br />
<span class="default">&lt;?php
<br />
$email </span><span class="keyword">= </span><span class="string">"clifton@example"</span><span class="keyword">; </span><span class="comment">//Note the .com missing
<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Returns:
<br />
PHP Version: 5.2.14 //On MY server, may be different depending on which version you have installed.
<br />
bool(false)
<br />

<br />
While the following code:
<br />

<br />
<span class="default">&lt;?php
<br />
$email </span><span class="keyword">= </span><span class="string">"clifton@example.com"</span><span class="keyword">; </span><span class="comment">//Note the .com added
<br />
</span><span class="keyword">echo </span><span class="string">"PHP Version: "</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
if(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)){
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$email</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));
<br />
}else{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">));&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Returns:
<br />
PHP Version: 5.2.14 //On MY server, may be different depending on which version you have installed.
<br />
clifton@example.com
<br />
string(16) "clifton@example.com"
<br />

<br />
This feature is only available for PHP Versions (PHP 5 &gt;= 5.2.0) according to documentation. So make sure your version is correct.
<br />

<br />
Cheers,
<br />
Clifton</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
