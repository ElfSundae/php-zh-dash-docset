<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Creates a password hash</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.password-get-info.html">? password_get_info</a></li>
      <li style="float: right;"><a href="function.password-needs-rehash.html">password_needs_rehash ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.password.html">Password Hashing 函数</a></li>
    <li>Creates a password hash</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.password-hash" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">password_hash</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0)</p><p class="refpurpose"><span class="refname">password_hash</span> &mdash; <span class="dc-title">Creates a password hash</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.password-hash-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>password_hash</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   , <span class="methodparam"><span class="type">integer</span> <code class="parameter">$algo</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>password_hash()</strong></span> creates a new password hash using a strong one-way hashing
   algorithm. <span class="function"><strong>password_hash()</strong></span> is compatible with <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span>.
   Therefore, password hashes created by <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span> can be used with
   <span class="function"><strong>password_hash()</strong></span>.
  </p>
  <p class="simpara">
   The following algorithms are currently supported:
  </p>
  <p class="para">
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <strong><code>PASSWORD_DEFAULT</code></strong> - Use the bcrypt algorithm (default as of PHP 5.5.0).
      Note that this constant is designed to change over time as new and stronger algorithms are added
      to PHP. For that reason, the length of the result from using this identifier can change over
      time. Therefore, it is recommended to store the result in a database column that can expand
      beyond 60 characters (255 characters would be a good choice).
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <strong><code>PASSWORD_BCRYPT</code></strong> - Use the <strong><code>CRYPT_BLOWFISH</code></strong> algorithm to
      create the hash. This will produce a standard <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span> compatible hash using
      the &quot;$2y$&quot; identifier. The result will always be a 60 character string,  或者在失败时返回 <strong><code>FALSE</code></strong>.
     </span>
     <p class="para">
      Supported Options:
     </p>
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <em>salt</em> - to manually provide a salt to use when hashing the password.
        Note that this will override and prevent a salt from being automatically generated.
       </p>
       <p class="para">
        If omitted, a random salt will be generated by <span class="function"><strong>password_hash()</strong></span> for
        each password hashed. This is the intended mode of operation.
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <em>cost</em> - which denotes the algorithmic cost that should be used. 
        Examples of these values can be found on the <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span> page.
       </p>
       <p class="para">
        If omitted, a default value of <em>10</em> will be used. This is a good
        baseline cost, but you may want to consider increasing it depending on your hardware.
       </p>
      </li>
     </ul>
    </li>
   </ul>
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.password-hash-parameters">
  <h3 class="title">参数</h3>
  <dl>

   
    <dt>
<code class="parameter">password</code></dt>

    <dd>

     <p class="para">
      用户的密码。
     </p>
      <div class="caution"><strong class="caution">Caution</strong>
       <p class="para">
        Using the <strong><code>PASSWORD_BCRYPT</code></strong> for the
        <code class="parameter">algo</code> parameter, will result
        in the <code class="parameter">password</code> parameter being truncated to a
        maximum length of 72 characters.
       </p>
      </div>
    </dd>

   
   
    <dt>
<code class="parameter">algo</code></dt>

    <dd>

     <p class="para">
      一个用来在散列密码时指示算法的<a href="password.constants.html" class="link">密码算法常量</a>。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">options</code></dt>

    <dd>

     <p class="para">
      一个包含有选项的关联数组。目前支持两个选项：<em>salt</em>，在散列密码时加的盐（干扰字符串），以及<em>cost</em>，用来指明算法递归的层数。这两个值的例子可在 <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span> 页面找到。
     </p>
     <p class="para">
      If omitted, a random salt will be created and the default cost will be
      used.
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.password-hash-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   Returns the hashed password,  或者在失败时返回 <strong><code>FALSE</code></strong>.
  </p>
  <p class="para">
   The used algorithm, cost and salt are returned as part of the hash. Therefore,
   all information that&#039;s needed to verify the hash is included in it. This allows
   the <span class="function"><a href="function.password-verify.html" class="function">password_verify()</a></span> function to verify the hash without
   needing separate storage for the salt or algorithm information.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.password-hash-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-894">
    <p><strong>Example #1 <span class="function"><strong>password_hash()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;We&nbsp;just&nbsp;want&nbsp;to&nbsp;hash&nbsp;our&nbsp;password&nbsp;using&nbsp;the&nbsp;current&nbsp;DEFAULT&nbsp;algorithm.<br />&nbsp;*&nbsp;This&nbsp;is&nbsp;presently&nbsp;BCRYPT,&nbsp;and&nbsp;will&nbsp;produce&nbsp;a&nbsp;60&nbsp;character&nbsp;result.<br />&nbsp;*<br />&nbsp;*&nbsp;Beware&nbsp;that&nbsp;DEFAULT&nbsp;may&nbsp;change&nbsp;over&nbsp;time,&nbsp;so&nbsp;you&nbsp;would&nbsp;want&nbsp;to&nbsp;prepare<br />&nbsp;*&nbsp;By&nbsp;allowing&nbsp;your&nbsp;storage&nbsp;to&nbsp;expand&nbsp;past&nbsp;60&nbsp;characters&nbsp;(255&nbsp;would&nbsp;be&nbsp;good)<br />&nbsp;*/<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"rasmuslerdorf"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PASSWORD_DEFAULT</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
$2y$10$.vGA1O9wmRjrwAVXD98HNOgsNpDczlqm3Jq7KnEd1rVAGv3Fykk1a
</pre></div>
    </div>
   </div>
  </p> 
  <p class="para">
   <div class="example" id="example-895">
    <p><strong>Example #2 <span class="function"><strong>password_hash()</strong></span> example setting cost manually</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;In&nbsp;this&nbsp;case,&nbsp;we&nbsp;want&nbsp;to&nbsp;increase&nbsp;the&nbsp;default&nbsp;cost&nbsp;for&nbsp;BCRYPT&nbsp;to&nbsp;12.<br />&nbsp;*&nbsp;Note&nbsp;that&nbsp;we&nbsp;also&nbsp;switched&nbsp;to&nbsp;BCRYPT,&nbsp;which&nbsp;will&nbsp;always&nbsp;be&nbsp;60&nbsp;characters.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cost'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,<br />];<br />echo&nbsp;</span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"rasmuslerdorf"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PASSWORD_BCRYPT</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
$2y$12$QjSH496pcT5CEbzjD/vtVeH03tfHKFy36d4J0Ltp3lRtee9HDxY3K
</pre></div>
    </div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-896">
    <p><strong>Example #3 <span class="function"><strong>password_hash()</strong></span> example setting salt manually</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;Note&nbsp;that&nbsp;the&nbsp;salt&nbsp;here&nbsp;is&nbsp;randomly&nbsp;generated.<br />&nbsp;*&nbsp;Never&nbsp;use&nbsp;a&nbsp;static&nbsp;salt&nbsp;or&nbsp;one&nbsp;that&nbsp;is&nbsp;not&nbsp;randomly&nbsp;generated.<br />&nbsp;*<br />&nbsp;*&nbsp;For&nbsp;the&nbsp;VAST&nbsp;majority&nbsp;of&nbsp;use-cases,&nbsp;let&nbsp;password_hash&nbsp;generate&nbsp;the&nbsp;salt&nbsp;randomly&nbsp;for&nbsp;you<br />&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cost'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">11</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'salt'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">mcrypt_create_iv</span><span style="color: #007700">(</span><span style="color: #0000BB">22</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">MCRYPT_DEV_URANDOM</span><span style="color: #007700">),<br />];<br />echo&nbsp;</span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"rasmuslerdorf"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PASSWORD_BCRYPT</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
$2y$11$q5MkhSBtlsJcNEVsYh64a.aCluzHnGog7TQAKVmQwO9C8xb.t89F.
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-897">
    <p><strong>Example #4 <span class="function"><strong>password_hash()</strong></span> example finding a good cost</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;This&nbsp;code&nbsp;will&nbsp;benchmark&nbsp;your&nbsp;server&nbsp;to&nbsp;determine&nbsp;how&nbsp;high&nbsp;of&nbsp;a&nbsp;cost&nbsp;you&nbsp;can<br />&nbsp;*&nbsp;afford.&nbsp;You&nbsp;want&nbsp;to&nbsp;set&nbsp;the&nbsp;highest&nbsp;cost&nbsp;that&nbsp;you&nbsp;can&nbsp;without&nbsp;slowing&nbsp;down<br />&nbsp;*&nbsp;you&nbsp;server&nbsp;too&nbsp;much.&nbsp;8-10&nbsp;is&nbsp;a&nbsp;good&nbsp;baseline,&nbsp;and&nbsp;more&nbsp;is&nbsp;good&nbsp;if&nbsp;your&nbsp;servers<br />&nbsp;*&nbsp;are&nbsp;fast&nbsp;enough.&nbsp;The&nbsp;code&nbsp;below&nbsp;aims&nbsp;for&nbsp;≤&nbsp;50&nbsp;milliseconds&nbsp;stretching&nbsp;time,<br />&nbsp;*&nbsp;which&nbsp;is&nbsp;a&nbsp;good&nbsp;baseline&nbsp;for&nbsp;systems&nbsp;handling&nbsp;interactive&nbsp;logins.<br />&nbsp;*/<br /></span><span style="color: #0000BB">$timeTarget&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0.05</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;50&nbsp;milliseconds&nbsp;<br /><br /></span><span style="color: #0000BB">$cost&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">;<br />do&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cost</span><span style="color: #007700">++;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$start&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PASSWORD_BCRYPT</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">"cost"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$cost</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$end&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />}&nbsp;while&nbsp;((</span><span style="color: #0000BB">$end&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$start</span><span style="color: #007700">)&nbsp;&lt;&nbsp;</span><span style="color: #0000BB">$timeTarget</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"Appropriate&nbsp;Cost&nbsp;Found:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$cost&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Appropriate Cost Found: 10
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.password-hash-notes">
  <h3 class="title">注释</h3>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
    It is strongly recommended that you do not generate your own salt for this function. 
    It will create a secure salt automatically for you if you do not specify one.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    It is recommended that you test this function on your servers, and adjust the cost parameter 
    so that execution of the function takes less than 100 milliseconds on interactive systems. 
    The script in the above example will help you choose a good cost value for your hardware.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    Updates to supported algorithms by this function (or changes to the default one) must follow 
    the following rules:
   </span>
   <p class="para">
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">Any new algorithm must be in core for at least 1 full release of PHP prior to becoming
       default. So if, for example, a new algorithm is added in 5.5.5, it would not be eligible for 
       default until 5.7 (since 5.6 would be the first full release). But if a different algorithm was 
       added in 5.6.0, it would also be eligible for default at 5.7.0.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       The default should only change on a full release (5.6.0, 6.0.0, etc) and not on a revision release. 
       The only exception to this is in an emergency when a critical security flaw is found in the current
       default.
      </span>
     </li>
    </ul>
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.password-hash-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.password-verify.html" class="function" rel="rdfs-seeAlso">password_verify()</a> - Verifies that a password matches a hash</span></li>
    <li class="member"><span class="function"><a href="function.crypt.html" class="function" rel="rdfs-seeAlso">crypt()</a> - 单向字符串散列</span></li>
    <li class="member"><a href="https://github.com/ircmaxell/password_compat" class="link external" title="Link : https://github.com/ircmaxell/password_compat">&raquo;&nbsp;userland implementation</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116732""></a>
  <div class="note">
   <strong class="user">oliveridario89 at gmail dot com</strong>
   <a href="#116732" class="date">21-Feb-2015 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Where the heck is that random salt stored? It assumes a DB (then opaque interaction with DB?? O__O ) or does just store the random salt in a temporary text file (like session data)...? O___________O<br />
<br />
This is not documented, and that warry me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115629""></a>
  <div class="note">
   <strong class="user">Mike Robinson</strong>
   <a href="#115629" class="date">28-Aug-2014 11:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For passwords, you generally want the hash calculation time to be between 250 and 500 ms (maybe more for administrator accounts). Since calculation time is dependent on the capabilities of the server, using the same cost parameter on two different servers may result in vastly different execution times. Here's a quick little function that will help you determine what cost parameter you should be using for your server to make sure you are within this range (note, I am providing a salt to eliminate any latency caused by creating a pseudorandom salt, but this should not be done when hashing passwords):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* @Param int $min_ms Minimum amount of time in milliseconds that it should take<br />
&nbsp;* to calculate the hashes<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">getOptimalBcryptCostParameter</span><span class="keyword">(</span><span class="default">$min_ms </span><span class="keyword">= </span><span class="default">250</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">31</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options </span><span class="keyword">= [ </span><span class="string">'cost' </span><span class="keyword">=&gt; </span><span class="default">$i</span><span class="keyword">, </span><span class="string">'salt' </span><span class="keyword">=&gt; </span><span class="string">'usesomesillystringforsalt' </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$time_start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">password_hash</span><span class="keyword">(</span><span class="string">"rasmuslerdorf"</span><span class="keyword">, </span><span class="default">PASSWORD_BCRYPT</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$time_end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$time_end </span><span class="keyword">- </span><span class="default">$time_start</span><span class="keyword">) * </span><span class="default">1000 </span><span class="keyword">&gt; </span><span class="default">$min_ms</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
echo </span><span class="default">getOptimalBcryptCostParameter</span><span class="keyword">(); </span><span class="comment">// prints 12 in my case<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114410""></a>
  <div class="note">
   <strong class="user">cottton</strong>
   <a href="#114410" class="date">18-Feb-2014 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you thought<br />
"why is the salt included in the hash and is it save when i store it as it is in my db?"<br />
<br />
Answer i found:<br />
The salt just has to be unique. It not meant to be a secret.<br />
<br />
As mentioned in notes and docu before: let password_hash() take care of the salt.<br />
<br />
With the unique salt you force the attacker to crack the hash.<br />
The hash is unique and cannot be found at rainbow tables.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113490""></a>
  <div class="note">
   <strong class="user">Cloxy</strong>
   <a href="#113490" class="date">18-Oct-2013 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can produce the same hash in php 5.3.7+ with crypt() function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$salt </span><span class="keyword">= </span><span class="default">mcrypt_create_iv</span><span class="keyword">(</span><span class="default">22</span><span class="keyword">, </span><span class="default">MCRYPT_DEV_URANDOM</span><span class="keyword">);<br />
</span><span class="default">$salt </span><span class="keyword">= </span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$salt</span><span class="keyword">);<br />
</span><span class="default">$salt </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'+'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$salt</span><span class="keyword">);<br />
</span><span class="default">$hash </span><span class="keyword">= </span><span class="default">crypt</span><span class="keyword">(</span><span class="string">'rasmuslerdorf'</span><span class="keyword">, </span><span class="string">'$2y$10$'</span><span class="keyword">.</span><span class="default">$salt</span><span class="keyword">.</span><span class="string">'$'</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$hash</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113397""></a>
  <div class="note">
   <strong class="user">nicoSWD</strong>
   <a href="#113397" class="date">06-Oct-2013 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I agree with martinstoeckli,<br />
<br />
don't create your own salts unless you really know what you're doing.<br />
<br />
By default, it'll use /dev/urandom to create the salt, which is based on noise from device drivers.<br />
<br />
And on Windows, it uses CryptGenRandom().<br />
<br />
Both have been around for many years, and are considered secure for cryptography (the former probably more than the latter, though).<br />
<br />
Don't try to outsmart these defaults by creating something less secure. Anything that is based on rand(), mt_rand(), uniqid(), or variations of these is *not* good.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112495""></a>
  <div class="note">
   <strong class="user">chris at acsdi dot com</strong>
   <a href="#112495" class="date">22-Jun-2013 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Alan is entirely wrong, please ignore his comment and/or vote it down. This method encodes the algorithm and other parameters into the returned hash.<br />
<br />
Deliberately specifying the algorithm to use should only be done in a carefully considered scenario, and these functions are designed and policies have been decided to ensure wide compatibility.<br />
<br />
The risk of forcing a particular algorithm is that your code will continue to use a weaker algorithm as newer ones are implemented and strengthened.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111620""></a>
  <div class="note">
   <strong class="user">martinstoeckli</strong>
   <a href="#111620" class="date">09-Mar-2013 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In most cases it is best to omit the salt parameter. Without this parameter, the function will generate a cryptographically safe salt, from the random source of the operating system.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110872""></a>
  <div class="note">
   <strong class="user">martinstoeckli</strong>
   <a href="#110872" class="date">18-Dec-2012 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a compatibility pack available for PHP versions 5.3.7 and later, so you don't have to wait on version 5.5 for using this function. It comes in form of a single php file:<br />
https://github.com/ircmaxell/password_compat</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
