<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Returns the error code from last connect call</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqli.commit.html">? mysqli::commit</a></li>
      <li style="float: right;"><a href="mysqli.connect-error.html">mysqli::$connect_error ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mysqli.html">MySQLi</a></li>
    <li>Returns the error code from last connect call</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqli.connect-errno" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqli::$connect_errno</h1>
  <h1 class="refname">mysqli_connect_errno</h1>
  <p class="verinfo">(PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">mysqli::$connect_errno</span> -- <span class="refname">mysqli_connect_errno</span> &mdash; <span class="dc-title">Returns the error code from last connect call</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mysqli.connect-errno-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="fieldsynopsis"><span class="type">int</span> <var class="varname"><a href="mysqli.connect-errno.html">$mysqli-&gt;connect_errno</a></var>;</div>

  <p class="para">过程化风格</p>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>mysqli_connect_errno</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   Returns the last error code number from the last call to 
   <span class="function"><a href="function.mysqli-connect.html" class="function">mysqli_connect()</a></span>.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Client error message numbers are listed in the MySQL 
    <var class="filename">errmsg.h</var> header file, server error message numbers
    are listed in <var class="filename">mysqld_error.h</var>. In the MySQL source
    distribution you can find a complete list of error messages and error
    numbers in the file <var class="filename">Docs/mysqld_error.txt</var>.
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mysqli.connect-errno-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   An error code value for the last call to <span class="function"><a href="function.mysqli-connect.html" class="function">mysqli_connect()</a></span>, if it failed.
   zero means no error occurred.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-mysqli.connect-errno-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-1774">
   <p><strong>Example #1 <var class="varname"><var class="varname">$mysqli->connect_errno</var></var> example</strong></p>
   <div class="example-contents"><p>面向对象风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;@new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'fake_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect_errno</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Connect&nbsp;Error:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect_errno</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>过程化风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$link&nbsp;</span><span style="color: #007700">=&nbsp;@</span><span style="color: #0000BB">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'fake_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$link</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Connect&nbsp;Error:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">());<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Connect Error: 1045
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-mysqli.connect-errno-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mysqli-connect.html" class="function" rel="rdfs-seeAlso">mysqli_connect()</a> - 别名 mysqli::__construct</span></li>
    <li class="member"><span class="function"><a href="mysqli.connect-error.html" class="function" rel="rdfs-seeAlso">mysqli_connect_error()</a> - Returns a string description of the last connect error</span></li>
    <li class="member"><span class="function"><a href="mysqli.errno.html" class="function" rel="rdfs-seeAlso">mysqli_errno()</a> - 返回最近函数调用的错误代码</span></li>
    <li class="member"><span class="function"><a href="mysqli.error.html" class="function" rel="rdfs-seeAlso">mysqli_error()</a> - Returns a string description of the last error</span></li>
    <li class="member"><span class="function"><a href="mysqli.sqlstate.html" class="function" rel="rdfs-seeAlso">mysqli_sqlstate()</a> - Returns the SQLSTATE error from previous MySQL operation</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="118977""></a>
  <div class="note">
   <strong class="user">till at etill dot net</strong>
   <a href="#118977" class="date">11-Mar-2016 06:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of 5.5.9, connect_errno will not show an error if the host or the user (or both) are empty strings, so such cases have to be accounted for separately.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115502""></a>
  <div class="note">
   <strong class="user">Daro AP</strong>
   <a href="#115502" class="date">06-Aug-2014 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
'errmsg.h' and 'mysqld_error.h' files only have the definitions of the error codes. In the MySQL documentation you can find the definition along with the message it displays, which could be more useful since the error constant name isn't always explicit enough.<br />
<br />
Client Error Codes and Messages<br />
<a href="http://dev.mysql.com/doc/refman/5.6/en/error-messages-client.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/refman/5.6/en/error-messages-client.html</a><br />
<br />
Server Error Codes and Messages<br />
<a href="http://dev.mysql.com/doc/refman/5.6/en/error-messages-server.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/refman/5.6/en/error-messages-server.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
