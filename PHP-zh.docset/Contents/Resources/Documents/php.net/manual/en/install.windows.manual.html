<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Manual PHP Installation on Windows</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="install.windows.recommended.html">? Recommended Configuration on Windows systems</a></li>
      <li style="float: right;"><a href="install.windows.troubleshooting.html">Windows 下 PHP 故障排除 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="install.windows.html">Windows 系统下的安装</a></li>
    <li>Manual PHP Installation on Windows</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="install.windows.manual" class="sect1">
  <h2 class="title">Manual PHP Installation on Windows</h2>
  <div class="sect2">
    <h3 class="title">Choose Web Server</h3>
    <p class="para">
      <ul class="itemizedlist">
	<li class="listitem">
	  <p class="para">
    IIS is builtin to Windows.

    On Windows Server, use Server Manager to add the IIS role. Be sure to include the CGI Role Feature.

    On Windows Desktop, use Control Panel&#039;s Add/Remove Programs to add IIS. See: <a href="https://msdn.microsoft.com/en-us/library/ms181052%28v=vs.80%29.aspx?f=255&MSPPError=-2147217396" class="link external" title="Link : https://msdn.microsoft.com/en-us/library/ms181052%28v=vs.80%29.aspx?f=255&MSPPError=-2147217396">&raquo;&nbsp;https://msdn.microsoft.com/en-us/library/ms181052%28v=vs.80%29.aspx?f=255&amp;MSPPError=-2147217396</a>

    For desktop web apps and web-development, you can also use IIS/Express or PHP Desktop
    
    <div class="example" id="example-50">
     <p><strong>Example #1 Command line to configure IIS and PHP</strong></p>
     <div class="example-contents">
<div class="cdata"><pre>
    
    @echo off

    REM download .ZIP file of PHP build from http://windows.php.net/downloads/
    REM
    REM path to directory you decompressed PHP .ZIP file into
set phpdir=c:\php
set phppath=php-5.6.19-nts-Win32-VC11-x86

REM Clear current PHP handlers
%windir%\system32\inetsrv\appcmd clear config /section:system.webServer/fastCGI
%windir%\system32\inetsrv\appcmd set config /section:system.webServer/handlers /-[name=&#039;PHP_via_FastCGI&#039;]

REM Set up the PHP handler
%windir%\system32\inetsrv\appcmd set config /section:system.webServer/fastCGI /+[fullPath=&#039;%phpdir%\%phppath%\php-cgi.exe&#039;]
%windir%\system32\inetsrv\appcmd set config /section:system.webServer/handlers /+[name=&#039;PHP_via_FastCGI&#039;,path=&#039;*.php&#039;,verb=&#039;*&#039;,modules=&#039;FastCgiModule&#039;,scriptProcessor=&#039;%phpdir%\%phppath%\php-cgi.exe&#039;,resourceType=&#039;Unspecified&#039;]
%windir%\system32\inetsrv\appcmd set config /section:system.webServer/handlers /accessPolicy:Read,Script

REM Configure FastCGI Variables
%windir%\system32\inetsrv\appcmd set config -section:system.webServer/fastCgi /[fullPath=&#039;%phpdir%\%phppath%\php-cgi.exe&#039;].instanceMaxRequests:10000
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/fastCgi /+&quot;[fullPath=&#039;%phpdir%\%phppath%\php-cgi.exe&#039;].environmentVariables.[name=&#039;PHP_FCGI_MAX_REQUESTS&#039;,value=&#039;10000&#039;]&quot;
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/fastCgi /+&quot;[fullPath=&#039;%phpdir%\%phppath%\php-cgi.exe&#039;].environmentVariables.[name=&#039;PHPRC&#039;,value=&#039;%phpdir%\%phppath%\php.ini&#039;]&quot;

</pre></div>
     </div>

    </div>
    
    <a href="install.windows.legacy.index.html#install.windows.legacy.iis7" class="link">How to manually configure IIS</a>
  </p>
</li>
<li class="listitem">
  <p class="para">

    There are several builds of Apache2 for Windows.

    We support ApacheLounge, but other options include XAMPP, WampServer and BitNami, which provide automatic installer tools.

    You may use mod_php or mod_fastcgi to load PHP on Apache.

    If you use mod_php, you MUST use a TS build of Apache built with same version of Visual C and same CPU (x86 or x64).

    <a href="install.windows.legacy.index.html#install.windows.legacy.apache2" class="link">How to manually configure Apache2</a>
  </p>
  </li>
  </ul>
  </p>
</div>

<div class="sect2">
  <h3 class="title">Choose Build</h3>
  <p class="para">
    Download PHP production releases from <a href="http://windows.php.net/download/" class="link external" title="Link : http://windows.php.net/download/">&raquo;&nbsp;http://windows.php.net/download/</a>.

    A lot of testing and optimization is already done on the snapshot and qa releases, but you are welcome to help us do more.

    There are 4 types of PHP builds:
    <ul class="itemizedlist">
      <li class="listitem">
	<p class="para">Thread-Safe(TS) - use for single process web serves, like Apache with mod_php</p>
      </li>
      <li class="listitem">
	<p class="para">Non-Thread-Safe(NTS) - use for IIS and other FastCGI web servers (Apache with mod_fastcgi) and recommended for command-line scripts</p>
      </li>
      <li class="listitem">
	<p class="para">x86 - production use of PHP 5.5 or 5.6 or 7.0.</p>
      </li>
      <li class="listitem">
	<p class="para">x64 - production use of PHP 7.0+ unless its a 32-bit only version of Windows. 5.5 and 5.6 x64 are expiremental.</p>
	</li>
    </ul>
  </p>
</div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117914""></a>
  <div class="note">
   <strong class="user">5622477 at qq dot com</strong>
   <a href="#117914" class="date">01-Sep-2015 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
System: windows 10 x64<br />
php: php-5.6.12-Win32-VC11-x86<br />
apache lounge: httpd-2.4.16-win32-VC11<br />
<br />
PHP installing as an Apache handler.<br />
<br />
'extension_dir=&lt;path to extension directory&gt;'<br />
<br />
&nbsp;The path must be absolute (i.e. "C/php/ext"), if you use relative (i.e."./ext") this effect on command line environment, but don't effect in Apache environment.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117551""></a>
  <div class="note">
   <strong class="user">Michael W</strong>
   <a href="#117551" class="date">27-Jun-2015 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
May seem silly, but to follow up on Aditya's helpful tip make sure to download Visual C++ that corresponds to the version of PHP you installed or else you will have failure. <a href="http://www.microsoft.com/en-us/download/details.aspx?id=30679. The link he posted took me to a 64-bit version of the install ( I assume it was 64 bit because my OS is 64 bit" rel="nofollow" target="_blank">http://www.microsoft.com/en-us/download/details.aspx?id=30679. The link he posted took me to a 64-bit version of the install ( I assume it was 64 bit because my OS is 64 bit</a>).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110775""></a>
  <div class="note">
   <strong class="user">Tramb</strong>
   <a href="#110775" class="date">06-Dec-2012 10:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Symptoms:<br />
&nbsp;MySQL is enabled in php.ini, console run of phpinfo() shows that MySQL is enabled, phpinfo() under IIS shows no MySQL.<br />
<br />
Solution: <br />
&nbsp;For 32-bit Windows - copy libmysql.dll to WINDOWS\System32\ directory.<br />
&nbsp;For 64-bit Windows, when IIS is running 32-bit application pool, instead of copying libmysql.dll to WINDOWS\System32\ directory, copy it to WINDOWS\SysWOW64\ directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108307""></a>
  <div class="note">
   <strong class="user">MattH</strong>
   <a href="#108307" class="date">16-Apr-2012 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a quick note that the visual C requirements for PHP under a windows 64 bit environment aren't for the x64 version, but for the x86 version. Tried installing PHP 5.4 on Server 2008 R2 after installing the x64 version and got:<br />
<br />
The application has failed to start because its side-by-side configuration is incorrect. Please see the application event log or use the command-line sxstrace.exe tool for more detail.<br />
<br />
Which is basically saying that it can't find the correct C++ package, so after installing the x86 version this error went away. YMMV.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102625""></a>
  <div class="note">
   <strong class="user">v_moral at hotmail dot com</strong>
   <a href="#102625" class="date">25-Feb-2011 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Problems setting up PHP as an Apache module under Windows?<br />
<br />
To install php+apache+win32+mysql with PHP as an Apache module consider the following hints : <br />
<br />
- download the 'VC6 x86 Thread Safe' zip file from <a href="http://windows.php.net/download/ . " rel="nofollow" target="_blank">http://windows.php.net/download/ . </a><br />
Couldn't make the Non Thread Safe version to work as a loadable module from Apache.<br />
<br />
- if you set extension=php_mysql.dll and still have problems, copy the file&nbsp; libmysql.dll (shipped with php's zip) to your WINDOWS\System32\ directory. <br />
The apache-mysql module fails trying to find this library.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102201""></a>
  <div class="note">
   <strong class="user">pragal86 at gmail dot com</strong>
   <a href="#102201" class="date">02-Feb-2011 12:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
step 1 : clear port 80. ( my computer-&gt;manager -&gt;services and application -&gt;services -&gt;iis -&gt;disable )<br />
<br />
step 2 : install Apache by exe.<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; (check if green color is display near apache otherwise some problem in Apache installation).<br />
<br />
step 3 : Copy php folder and past it into 'c directory' .<br />
<br />
step 4 : Give class path = c:\php;c:\php\ext;<br />
<br />
&nbsp;&nbsp;&nbsp; (mycomputer-&gt;properties-&gt;advance-&gt;environmentalproperties-&gt;path = c:\php;c:\php\ext; ).<br />
<br />
step 5 :&nbsp; Open httpd.conf, that is located in Apache web server installation folder, under conf directory i.e.,<br />
<br />
&nbsp;&nbsp;&nbsp; Apache Installation folder &gt; conf &gt; httpd.conf<br />
<br />
&nbsp;&nbsp;&nbsp; Add these lines....<br />
<br />
&nbsp;&nbsp;&nbsp; LoadModule php5_module "c:/php/php5apache2_2.dll"<br />
<br />
&nbsp;&nbsp;&nbsp; AddType application/x-httpd-php .php <br />
<br />
&nbsp;&nbsp;&nbsp; PHPIniDir "C:/php"<br />
<br />
Step 6: goto php installation directory, there u'll find a file named php-ini-recommended, rename it to, 'php.ini'.<br />
<br />
Step 7: Now time to modify php-ini, file... open the file in notepad, look for extension=php_mysql.dll,<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; uncomment it, i.e., delete ";" thats prefixed...also look for "extension_dir=" append "C:\php\ext" <br />
<br />
&nbsp;&nbsp;&nbsp; incase ur php installation directory is php else "C:\%installation dir%\ext"<br />
<br />
sterp 8 : find directory index in http.conf and add index.php with index.html<br />
<br />
Step 9: Copy libmysql.dll to c:\windows\system32<br />
<br />
step 10 : run mysql exe to install it.<br />
<br />
step 11 : download phpmysql and place that in htdocs and rename it to phpmyadmin.s<br />
<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; check php and apache installation by give 'local host' in address bar in any browser, If 'Its work' is displayed then its installed correctly and<br />
<br />
&nbsp;&nbsp;&nbsp; check the green color in Apache.<br />
<br />
&nbsp;&nbsp;&nbsp; Php and apache installation is done ......:):)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101244""></a>
  <div class="note">
   <strong class="user">jp at pulgadascubicas dot com</strong>
   <a href="#101244" class="date">05-Dec-2010 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Trying to install PHP 5.3.3 VC9 Non-Thread-Safe on Windows 2008 Server running IIS 7.5. <br />
<br />
Followed the instructions carefully but still got a 500 error trying to open the classig phpinfo page. After a lot of searching I discovered that everything worked fine after changing the php.ini directive fastcgi.logging from 0 to 1, contrary to what the directions said. I wonder if it was a typo on the instructions or if something changed after a few versions.<br />
<br />
Hope this saves someone a couple of hours of searching.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91613""></a>
  <div class="note">
   <strong class="user">dkflbk at nm dot ru</strong>
   <a href="#91613" class="date">19-Jun-2009 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a way to install PHP with nginx-server under windows (current version is 0.7.60)
<br />

<br />
Step-1 (install nginx server)
<br />
Just extract nginx-0.7.60.zip in C:\nginx-0.7.60
<br />

<br />
In C:\nginx-0.7.60\conf\nginx.conf uncomment and edit following lines
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; location ~ \.php$ {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; html;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fastcgi_index&nbsp; index.php;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fastcgi_param&nbsp; SCRIPT_FILENAME&nbsp; C:/nginx-0.7.60/html$fastcgi_script_name; #this is the one line for edition
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; include&nbsp; &nbsp; &nbsp; &nbsp; fastcgi_params;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
and run C:\nginx-0.7.60\nginx.exe (the server is started)
<br />

<br />
Step-2 (install PHP5)
<br />
Just extract php in C:\PHP5
<br />

<br />
Create (or modify) php.ini
<br />

<br />
extension_dir="ext/" ;for extensions
<br />

<br />
And run C:\PHP5\php-cgi.exe -b 127.0.0.1:9000</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90356""></a>
  <div class="note">
   <strong class="user">txyoji</strong>
   <a href="#90356" class="date">17-Apr-2009 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php 5.1.6 zip package for windows does not include a module for apache2.2.<br />
<br />
Use apache2.0.x or 1.3.x instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88726""></a>
  <div class="note">
   <strong class="user">dee at example dot com</strong>
   <a href="#88726" class="date">04-Feb-2009 10:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I did a clean install of Apache 2.2 and PHP 5.2.6 due to conflicts with the old httpd.conf file I had and ran into the "Call to undefined function mysql_connect()" error when trying to run a script that connects to MySQL.<br />
<br />
To resolve it I had to copy libmysql.dll from my PHP installation directory to the "bin" folder of my Apache install directory.<br />
<br />
I checked the forums.mysql.com as someone else suggested which lead me to this site with the missing step I needed (<a href="http://www.artfulsoftware.com/php_mysql_win.html" rel="nofollow" target="_blank">http://www.artfulsoftware.com/php_mysql_win.html</a>). I spent a good part of the afternoon trying set this up. Hopefully it helps someone out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88118""></a>
  <div class="note">
   <strong class="user">chhabra_gurpreet at yahoo dot com</strong>
   <a href="#88118" class="date">11-Jan-2009 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi everyone, well i've been trying to configure, install, this setup i.e., Apache, php and mysql, well the prb wat i faced was that most of the installation instructions were quite outdated as they used quite old softwares... well these are the simple steps install and configure this entire setup, hope it will help u....(this is for windows)<br />
Software versions:<br />
Apache - 2.2.11<br />
Mysql -&nbsp; 5.1.30-community<br />
Php - PHP Version 5.2.8<br />
<br />
Step 1: Default installation of Apache<br />
Step 2: Default installation of mysql<br />
Step 3: Download php zip file, extract it to ur C: drive under c:\php<br />
Step 4: Add these paths to ur classpath, "C:\php", "C:\php\ext", incase ur installation directory is php, else watever is the name of ur php installation directory use that instead of php<br />
Step 5: Open httpd.conf, that is located in Apache web server installation folder, under conf directory i.e.,<br />
Apache Installation folder &gt; conf &gt; httpd.conf<br />
Add these lines.... <br />
&gt;LoadModule php5_module "c:/php/php5apache2_2.dll"<br />
&gt;AddType application/x-httpd-php .php <br />
Step 6: goto php installation directory, there u'll find a file named php-ini-recommended, rename it to, php-ini.<br />
Step 7: Now time to modify php-ini, file... open the file in notepad, look for extension=php_mysql.dll, uncomment it, i.e., delete ";" thats prefixed...also look for "extension_dir=" append "C:\php\ext" incase ur php installation directory is php else "C:\%installation dir%\ext"<br />
Step 8: Copy libmysql.dll to c:\windows\system32<br />
<br />
done.......... ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84717""></a>
  <div class="note">
   <strong class="user">philmee95 at gmail dot com</strong>
   <a href="#84717" class="date">27-Jul-2008 11:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
64 bit windows issues. PHP is 32 bit, and w3svc can only run under 32 or 64...not both. You will have to set 32 bit compat mode.<br />
<a href="http://www.iisadmin.co.uk/?p=14" rel="nofollow" target="_blank">http://www.iisadmin.co.uk/?p=14</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81770""></a>
  <div class="note">
   <strong class="user">supportatradiormidotcom</strong>
   <a href="#81770" class="date">13-Mar-2008 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Im running Win 2003 PHP 5 with the isapi.dll thanks to this sipmle tutorial hope it will help someone.Cerdit goes to Peterguy.<br />
<br />
<a href="http://www.peterguy.com/php/install_IIS6.html" rel="nofollow" target="_blank">http://www.peterguy.com/php/install_IIS6.html</a><br />
<br />
Follow the instructions, PHP install made easy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81246""></a>
  <div class="note">
   <strong class="user">bill at onemeg dot com</strong>
   <a href="#81246" class="date">20-Feb-2008 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Your PHP.INI file is not required to be in the C:\WINDOWS folder in XP.&nbsp; The trick is to make sure that the PHP.INI can be found.&nbsp; If you fail to reboot after adding the PHP folder to the path and creating the PHPRC environment variable, the file will likely not be found.&nbsp; If you can't reboot, then try creating the registry entries as described in the following document:<br />
<br />
<a href="http://www.php.net/manual/en/configuration.php " rel="nofollow" target="_blank">http://www.php.net/manual/en/configuration.php </a><br />
<br />
When you execute "phpinfo();" pay special attention to the data returned in "Loaded Configuration File".&nbsp; If it does not show a path and a the PHP.INI file name, the file is not being loaded.&nbsp; The path of C:\WINDOWS in the Configuration File Path section is the default location where PHP looks for the INI file and does not mean that the file must be located there; in fact, the following document suggest that you leave the configuration file in the C:\PHP folder:<br />
<br />
<a href="http://www.php.net/manual/en/install.windows.manual.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/install.windows.manual.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80475""></a>
  <div class="note">
   <strong class="user">ik2008 at sipvantage dot com</strong>
   <a href="#80475" class="date">18-Jan-2008 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In windows XP, the php.ini file must be in c:\windows directory. Or else most of the functions will work except mysql functions. The very first mysql command mysql_connect will fail with the following message "Call to unsupported or undefined function mysql_connect(); "</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76307""></a>
  <div class="note">
   <strong class="user">fgabrieli at gmail dot com</strong>
   <a href="#76307" class="date">10-Jul-2007 05:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Problem:<br />
Error in my_thread_global_end(): 1 threads didn't exit<br />
<br />
It seems that php 5.2.3 libmysql.dll does not work as expected, because Apache shows this error in the logs when we use mysql_*() functions<br />
<br />
Solution:<br />
I found it here:<br />
<a href="http://forums.mysql.com/read.php?10,153077,155121#msg-155121" rel="nofollow" target="_blank">http://forums.mysql.com/read.php?10,153077,155121#msg-155121</a><br />
<br />
which is to replace 'libmysql.dll' file in your PHP installation directory (also in winnt/system32 if you copied it there) with the Dll from PHP 5.2.1 <br />
<br />
You can download the second one from here:<br />
<a href="http://www.php.net/get/php-5.2.1-Win32.zip/from/a/mirror" rel="nofollow" target="_blank">http://www.php.net/get/php-5.2.1-Win32.zip/from/a/mirror</a><br />
<br />
Regards,<br />
Fernando Gabrieli</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76095""></a>
  <div class="note">
   <strong class="user">sam b</strong>
   <a href="#76095" class="date">29-Jun-2007 10:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I ran across the same problem listed below, using IIS6 instead of Apache on Windows Server 2003.<br />
<br />
It seemed that I could run a PHP script on the command line just fine, and lines such as:<br />
&lt;? if(function_exists("mysql_connect")) echo "MySQL is present."; ?&gt;<br />
ran without error, and printed as expected.<br />
<br />
Loading the file via IIS (using Firefox from my Ubuntu workstation), it wouldn't print anything, indicating that the MySQL extension hadn't been loaded.<br />
<br />
Fix: rename/delete all "libmysql.dll" except for the one in "C:\PHP\ext" or equivalent.<br />
<br />
... Same fix as listed below, but I wanted to point out: it's relevant to IIS as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76067""></a>
  <div class="note">
   <strong class="user">adozolj at yahoo dot com</strong>
   <a href="#76067" class="date">28-Jun-2007 06:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I got the 'Fatal Error: call to unindentified function mysql_connect()' and resolved it after many hours of troubleshooting. The problem has to do with the libmysql.dll file residing in multiple directories. It SHOULD only be in the php directory. So, erase the copy in mysql bin and the apache bin and restart apache. I hope this helps someone. if this doesn't help check out forums.mysql.com and search "Call to undefined function mysql_connect". (i got the solution to this problem from here)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76051""></a>
  <div class="note">
   <strong class="user">Shivan at Freenet dot de</strong>
   <a href="#76051" class="date">27-Jun-2007 10:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the same problem on IIS6 with php 5.2.3, that I got a blank page and nothing more, but the phpinfo(); worked.<br />
<br />
The cause wasn't the not-set doc_root, but after enabling "show errors" I got an error message, that my script used more than 8 MB... ;) <br />
<br />
After enlarging memory it worked :))))</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74575""></a>
  <div class="note">
   <strong class="user">dr dot juanc at yahoo dot com</strong>
   <a href="#74575" class="date">18-Apr-2007 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Installing PHP5.2.1 in IIS 6.0 bring me some troubles too.<br />
<br />
First i need to use full tag to make it your php script works and second the IIS didn't want to load the extension in the ext folder. I cheked the configuration a couple of thousand of time and everything seen to be ok.<br />
<br />
I fixed up given read access in the "ext" folder to de "IUSER/PCNAME" user or to everyone/PCNAME user to the same folder. Just in case i did the same in the rest of the folder inside the php folder.<br />
<br />
I wish nobody loose an all day in the same thing, like me.<br />
<br />
excuse my english please</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73994""></a>
  <div class="note">
   <strong class="user">shane</strong>
   <a href="#73994" class="date">20-Mar-2007 11:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IIS Windows 2003 server.<br />
<br />
You have upgraded to PHP5 from PHP4. phpinfo- works fine. You cannot however communicate with mysql (for example) through phpMyAdmin as it throws up an error stating it cannot load the mysqli extension and/or you get the 'bad handshake' warning.<br />
<br />
Solution: update your libmySQL.dll file in your system32 folder. This requires you to stop all internet services on your computer i.e IIS. Full details below.<br />
<br />
#############################<br />
Background: my server is set up as follows:<br />
<br />
php files folder == C:\PHP<br />
I have configured my php.ini file opening up the required extensions etc<br />
I have mapped the necessary extension to IIS<br />
I have configured my website extension(s)<br />
I have mapped&nbsp; my windows path ';C\PHP;C\PHP\ext'<br />
I have registered my ini file<br />
I have tested my phpinfo() and it works<br />
I have installed phpMyAdmin and it refuses to work<br />
I have tried simple mysql connection scripts ...nada<br />
I have checked everything 50 times<br />
I am bald.<br />
<br />
Then I did this:<br />
<br />
##############################<br />
<br />
1) Copy 'libmySQL.dll' from C:\PHP (or the folder where you have loaded php into)<br />
<br />
2) Open 'Windows\system32' folder. Do nothing at the moment, just have this window 'to hand'. <br />
<br />
3)Open IIS manager snap in(control panel - administrative tools - IIS manager)<br />
<br />
Right click server name as shown below:<br />
<br />
- Internet Information Services<br />
&nbsp;&nbsp;&nbsp; - My Computer (local computer) - right click<br />
<br />
Select 'all tasks' then 'Restart IIS...'<br />
Use drop down then select 'stop internet services on XXXXX' and click 'OK'<br />
<br />
4) Return to your 'Windows\system32' folder. Paste 'libmySQL.dll' (it is already in your clipboard from step 1). It will warn you about overwrite the current one. Select YES.<br />
<br />
5) Return to IIS manager. Follow steps as in '3' above except now choose 'Restart Internet Services on XXX' (the default option), click OK. <br />
<br />
#############################<br />
<br />
I hope this works for you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72963""></a>
  <div class="note">
   <strong class="user">hkhasgiwale at gmail dot com</strong>
   <a href="#72963" class="date">06-Feb-2007 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wasted a lot of time trying to figure out the problem of not being able to display my 'test.php' demo script to work, the file lay in my IIS 5 " C:\inetpub\wwwroot" folder.<br />
<br />
The file contents of test.php were: <br />
&lt;?php&gt;<br />
phpinfo();<br />
&lt;?&gt;<br />
<br />
Windows php installer version was 5.2.0<br />
<br />
Problem lay in the minute dumb feature of windows explorer being used t change(rename) text file extension from 'test.txt' to 'test.php'.<br />
The resultant name looked by the IIS was still 'test.php.txt'.<br />
<br />
I used command line to change the filename to 'test.php' and it displayed in my browser.<br />
<br />
<a href="http://localhost/test.php, worked right away." rel="nofollow" target="_blank">http://localhost/test.php, worked right away.</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71497""></a>
  <div class="note">
   <strong class="user">Daniel</strong>
   <a href="#71497" class="date">02-Dec-2006 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Re: Manual Configuration, pathing errors in IIS and ISAPI setup<br />
<br />
Chris @ 11-Oct-2006 and phpmanual at pbb dot dds dot nl @ 07-Oct-2004 are both correct.<br />
<br />
Problem is not with PHP but with IIS (mine is v5.1). <br />
<br />
Installed PHP into C:\Program Files\PHP, and set environment variable PATH to path as stated.<br />
<br />
When selecting the installation of php5isapi.dll via IIS Administrator, IIS would insert the path as:<br />
<br />
"C:\Program Files\PHP\php5isapi.dll" (note the quotes and space in directory name)<br />
<br />
All scripts ran and produced a HTTP 500 error.<br />
<br />
Replaced ISAPI path in IIS with:<br />
<br />
C:\PROGRA~1\PHP\php5isapi.dll (note the removal of the quotes and spaces, and the replacement of the path with 8.3 format names)<br />
<br />
All scripts ran w/o problems.<br />
<br />
Thanks to all! I hope someone can report if a similar problem exists with IIS6/7.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70331""></a>
  <div class="note">
   <strong class="user">Chris</strong>
   <a href="#70331" class="date">12-Oct-2006 04:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
RE:&nbsp; phpmanual at pbb dot dds dot nl&nbsp; @ 07-Oct-2004 11:29<br />
<br />
You are correct.&nbsp; I just had the same issue; I was following the PHP installation instructions and some very helpful WIMP instructions.<br />
<br />
I was trying to keep things tidy by putting my PHP directory in C:\Program Files\PHP.&nbsp; I set the PATH variable, ISAPI filter config and extension in Application Configuration, but was getting the "Specified module could not be found" error.<br />
<br />
Changed the PHP directory to C:\PHP and reconfigured everything, did an iisreset, and it started working immediately.<br />
<br />
Good catch, and thank you!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68328""></a>
  <div class="note">
   <strong class="user">mega-squall at caramail dot com</strong>
   <a href="#68328" class="date">23-Jul-2006 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember to enter FULL PATH in the extension_dir parameter in php.ini ! Using only "./ext/" or any relative path will have your PHP failing to load extensions when called by Apache. That's quite tricky 'cause extensions are working when PHP is used through command line ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65601""></a>
  <div class="note">
   <strong class="user">Jason Greene</strong>
   <a href="#65601" class="date">04-May-2006 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are running websites within an Application Pool (which is now the default for IIS6 under 2K3) you need to make sure that your PHP directory (e.g. C:\PHP) has read permissions for the user assigned to the Application Pool.<br />
<br />
1. In the IIS snap-in, choose Application Pools<br />
2. Right-click on DefaultAppPool (or other, if you have one defined) and choose Properties<br />
3. Click the Identity tab<br />
4. Make a note of the user name set as the security account for this application pool (e.g. "Network Service")<br />
5. Browse to your PHP directory and grant that user read permissions for the entire directory.<br />
<br />
In my case, I had to add permissions for the user "NETWORK SERVICE" to get PHP scripts to work. Otherwise I received 401/403 authorization errors when trying to load them in a remote browser.<br />
<br />
Note also that first tried adding IUSR permissions to the PHP directory, but that had no effect.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64075""></a>
  <div class="note">
   <strong class="user">Ben</strong>
   <a href="#64075" class="date">07-Apr-2006 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the Note Titled "Windows Server 2003 (x64 bits) + IIS 6.0" in step 1 when adding your new .php extension, it will not work unless after you click on the "Home Directory" you make sure that your "Execute permissions:" are set to "Scripts Only".<br />
<br />
By default, on my machine, the permissions were set to "None" not allowing php to run.<br />
<br />
Also, for more security it might be wise to Add the new extension just to your default site instead of the whole Web Sites folder in IIS. This would only apply if you were hosting multiple sites and had a site you didn't want scripts to run on.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61342""></a>
  <div class="note">
   <strong class="user">Windows Server 2003 (x64 bits) + IIS 6.0</strong>
   <a href="#61342" class="date">01-Feb-2006 12:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
1. Add new extension (.php)<br />
<br />
&nbsp;&nbsp;&nbsp; * Expand the local computer in the left pane<br />
&nbsp;&nbsp;&nbsp; * Right-click on "Web Sites" in the left pane, then click "Properties" in the menu that pops up<br />
&nbsp;&nbsp;&nbsp; * Flip top the "Home Directory" tab<br />
&nbsp;&nbsp;&nbsp; * Click "Configuration"<br />
&nbsp;&nbsp;&nbsp; * Flip to the "Mappings" tab<br />
&nbsp;&nbsp;&nbsp; * Click "Add..."<br />
&nbsp;&nbsp;&nbsp; * Enter the full path to php5isapi.dll in the "Executable" textbox (Browse... to find it more easily if you need to)<br />
&nbsp;&nbsp;&nbsp; * Enter ".php" in the "Extension" textbox<br />
&nbsp;&nbsp;&nbsp; * Select radial button "Limit to", enter "GET,POST,HEAD"<br />
&nbsp;&nbsp;&nbsp; * Click "OK" all the way out<br />
<br />
2. Verify php5isapi.dll is allowed<br />
<br />
You must verify that the versions of php5isapi.dll that you want to use are allowed. <br />
<br />
&nbsp;&nbsp; 2.1. In Internet Information Services (IIS) Manager, in the left-hand column, click the Web Services Extensions node and verify php5isapi.dll is allowed and all other Web Service Extensions are prohibited.<br />
&nbsp;&nbsp; 2.2. If the version of php5isapi.dll that you want to use does not appear in the list, follow the instructions to enable it and then repeat this procedure:<br />
<br />
Go into IIS<br />
Below all of the websites is a folder: Web Service Extensions<br />
In blue, to the lower left, is a choice: Add A New Web Service Extension<br />
Add PHP/PHP5ISAPI.dll<br />
Choose To ALLOW it.<br />
<br />
&nbsp;&nbsp; 2.3 If the version of php5isapi.dll you want to use appears on the list but is not allowed, right click the version of php5isapi.dll you want to allow and click Allow.<br />
<br />
3. Configuring IIS for 32-Bit Emulation Mode (THIS IS MOST IMPORTANT!!!!)<br />
<br />
3.1. If you are installing IIS on x64-based editions of Windows Server 2003 or Windows Server 2003 R2, IIS must be configured to run in 32 bit emulation mode. Perform the following procedure on each front-end Web server running an x64-based edition of Windows Server 2003.<br />
Configure Internet Information Services (IIS) for 32-bit mode<br />
<br />
&nbsp;&nbsp; 1. Click Start, and then click Run.<br />
&nbsp;&nbsp; 2. In the Open box, type cmd, and then click OK.<br />
&nbsp;&nbsp; 3. In the command prompt window, navigate to the %drive%:\Inetpub\Adminscripts folder, where %drive% is the drive in which Windows Server 2003 is installed.<br />
&nbsp;&nbsp; 4. In the Adminscripts folder, type the following command:<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; cscript adsutil.vbs set w3svc/AppPools/Enable32bitAppOnWin64 1<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; Note&nbsp; The value "1" for Enable32bitAppOnWin64 specifies 32-bit mode, whereas the value "0" specifies 64-bit mode.<br />
&nbsp;&nbsp; 5. Press ENTER.<br />
&nbsp;&nbsp; 6. Type iisreset and then press ENTER.<br />
&nbsp;&nbsp; 7. Close the command prompt window.<br />
&nbsp;&nbsp; 8. Re-star System.<br />
<br />
Note&nbsp; The Run WWW service in IIS 5.0 isolation mode check box is only selected if you have upgraded to IIS 6.0 on Windows Server 2003 from IIS 5.0 on Windows 2000. New installations of IIS 6.0 use IIS 6.0 worker process isolation mode by default.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60105""></a>
  <div class="note">
   <strong class="user">patatraboum at nospam dot com</strong>
   <a href="#60105" class="date">27-Dec-2005 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IIS + PHP<br />
<br />
- The browser can't find your php code like localhost/dir/dir_code.php from any virtual directory (404 error)<br />
- You are sure the code exists<br />
You may rename it with a .html extension and check if it displays<br />
- Process of your php code like localhost/root_code.php is ok from the root directory<br />
<br />
It may come from the doc_root directive in php.ini whitch should be set to blank :<br />
<br />
doc_root =<br />
<br />
Then restart IIS to reload php.ini</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58452""></a>
  <div class="note">
   <strong class="user">some dude @ some place</strong>
   <a href="#58452" class="date">04-Nov-2005 05:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
on two recent installation attempts on iis6 on win2k3 i followed the php manual and windows configuration steps exactly and php would still not run. <br />
<br />
on the first install i had to give the USER account (not IUSR) read execute permissions to this file, c:\php\sapi\php4isapi.dll. using filemon i saw that it was being accessed and access was denied. <br />
<br />
steps:<br />
- right click on this file &gt; properties &gt; security &gt; add &gt; location (select the server -not domain if listed) &gt; advanced &gt; find now &gt; Users (usually the last item) &gt; click OK<br />
- select Read &amp; Execute &gt; apply<br />
<br />
also a complete computer restart was required in each install</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56885""></a>
  <div class="note">
   <strong class="user">Bill dot Rook at Gmail dot com</strong>
   <a href="#56885" class="date">18-Sep-2005 07:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
doc_root = ".;c:\inetpub\wwwroot" does seem to work with virtual websites. This might be a better option then commenting out the line.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56627""></a>
  <div class="note">
   <strong class="user">Jason</strong>
   <a href="#56627" class="date">10-Sep-2005 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For me atleast, the steps for installing php 5 on IIS 6 on windows 2003 seemed to get buried with the other setups. I found it difficult to quickly look through and make sure I covered every step. So I created a clean step by step tutorial with screenshots:<br />
<a href="http://psdforums.com/article.php?a=9" rel="nofollow" target="_blank">http://psdforums.com/article.php?a=9</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54628""></a>
  <div class="note">
   <strong class="user">atomictaco at atomic-taco dot com</strong>
   <a href="#54628" class="date">10-Jul-2005 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to phpmanual at pbb dot dds dot nl:<br />
<br />
You are absolutly correct.&nbsp; I found this out while trying to install PHP4 with Apache2 on XPPro.&nbsp; Here are 3 general guidelines that I have found to be correct:<br />
<br />
- Path may not have spaces.&nbsp; Change C:\Program Files to C:\Progra~1&nbsp; If you don't understand this, go to start--&gt;run--&gt;command (not cmd).&nbsp; Type cd\ and hit enter.&nbsp; Then type dir.&nbsp; You should see all your directory names there.<br />
<br />
- Paths should not be enclosed by quotes.<br />
<br />
- Use forward slashes (/) and not backslashes (\)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48329""></a>
  <div class="note">
   <strong class="user">cpz at akik-ffm dot de</strong>
   <a href="#48329" class="date">19-Dec-2004 07:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the above, "the web server's directory" means the directory where the server executable lives, for example for the Apache installation on my XP box this is "\program files\apache group\apache2\bin" and NOT just "\program files\apache group\apache2". <br />
<br />
But it's probably best to tell your web server where PHP's ini file is stored, for example via PHPIniDir for Apache's http.conf.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46367""></a>
  <div class="note">
   <strong class="user">chuacheehow at gmail dot com</strong>
   <a href="#46367" class="date">08-Oct-2004 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My experience with IIS 5.1 is that the doc_root directive be commented in order for virtual directories to recognise PHP files (with PHP installed as CGI).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46332""></a>
  <div class="note">
   <strong class="user">phpmanual at pbb dot dds dot nl</strong>
   <a href="#46332" class="date">07-Oct-2004 03:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Okay, I'm a total newbie to this, so my findings may be wrong, but this is what I found out.<br />
<br />
The manual says "do not have spaces in the path (like C:\Program Files\PHP) as some web servers will crash if you do". Indeed, when using this with PHP5 on WinXP, I got the error message "The specified module could not be found."<br />
However, the problem seems not to lie in the SPACE in the pathname, but in the QUOTES that Windows adds when a space is in the pathname! This is what I found:<br />
<br />
"C:\Program Files\php5\php5isapi.dll" -- doesn't work<br />
C:\php5\php5isapi.dll -- works<br />
"C:\php5\php5isapi.dll" -- doesn't work<br />
C:\Progra~1\php5\php5isapi.dll -- works<br />
"C:\Progra~1\php5\php5isapi.dll" -- doesn't work<br />
C:\Program Files\php5\php5isapi.dll -- doesn't work, because it's not accepted by Internet Information Services<br />
<br />
I don't know if this all is a problem with Internet Information Services or with PHP, but it would be nice if it was more documented in the PHP manual.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45197""></a>
  <div class="note">
   <strong class="user">php dot user dot com</strong>
   <a href="#45197" class="date">29-Aug-2004 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After having the same problem as specifed below with "No input file specified". I changed the doc_root as mentioned.<br />
<br />
This is fine if all php scripts are going to be run from the c:\inetpub\wwwroot directory. To enable it for multiple websites where the root directories are all different simply leave the doc_root attribute in the php.ini file blank.<br />
<br />
This is for the isapi version not cgi implementation. It also means you don't have to set IUSR or IWAM access to the PHP root directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
