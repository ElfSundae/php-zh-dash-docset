<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>根据给定的格式解析日期时间字符串</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="datetime.construct.html">? DateTime::__construct</a></li>
      <li style="float: right;"><a href="datetime.createfromimmutable.html">DateTime::createFromImmutable ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.datetime.html">DateTime</a></li>
    <li>根据给定的格式解析日期时间字符串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="datetime.createfromformat" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::createFromFormat</h1>
  <h1 class="refname">date_create_from_format</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">DateTime::createFromFormat</span> -- <span class="refname">date_create_from_format</span> &mdash; <span class="dc-title">根据给定的格式解析日期时间字符串</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.createfromformat-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><strong>DateTime::createFromFormat</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code></span>
   , <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <code class="parameter">$timezone</code> = ?</span>
   ) : <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span></div>

  <p class="para rdfs-comment">过程化风格</p>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><a href="function.date-create-from-format.html" class="methodname">date_create_from_format</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code></span>
   , <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <code class="parameter">$timezone</code> = ?</span>
   ) : <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span></div>

  <p class="para rdfs-comment">
   将 <code class="parameter">time</code> 参数给定的日期时间字符串，
   根据 <code class="parameter">format</code> 参数给定的格式
   解析为一个新的 DateTime 对象。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.createfromformat-parameters">
  <h3 class="title">参数</h3>
  <dl>

   
    <dt>
<code class="parameter">format</code></dt>

    <dd>

     <p class="para">
      在解析日期时间字符串的时候使用的格式 <span class="type">string</span>。
      参加下列的格式清单。
      大部分格式和 <span class="function"><a href="function.date.html" class="function">date()</a></span> 函数中的格式是一致的。
     </p>
     <p class="para">
      <table class="doctable table">
       <caption><strong><code class="parameter">format</code> 
       参数中支持的字符</strong></caption>
       
        <thead>
         <tr>
          <th><code class="parameter">format</code> 中的字符</th>
          <th>解释</th>
          <th>示例</th>
         </tr>

        </thead>

        <tbody class="tbody">
         <tr>
          <td style="text-align: center;"><em class="emphasis">日</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><code class="literal">d</code> 和 <code class="literal">j</code></td>
          <td>一个月中的第几天，2 位数字表示，有前导 0 或者无前导 0</td>
          <td>
           <code class="literal">01</code> 到 <code class="literal">31</code> 或者
           <code class="literal">1</code> 到 <code class="literal">31</code>
          </td>
         </tr>

         <tr>
          <td><code class="literal">D</code> 和 <code class="literal">l</code></td>
          <td>星期几的文字表示</td>
          <td>
           <code class="literal">Mon</code> 到 <code class="literal">Sun</code> 或者
           <code class="literal">Sunday</code> 到 <code class="literal">Saturday</code>
          </td>
         </tr>

         <tr>
          <td><code class="literal">S</code></td>
          <td>2 个字母表示的一个月中的第几天（序数词），
          在进行解析的时候会被忽略</td>
          <td>
           <code class="literal">st</code>，<code class="literal">nd</code>，<code class="literal">rd</code> 或者
           <code class="literal">th</code>。
          </td>
         </tr>

         <tr>
          <td><code class="literal">z</code></td>
          <td>一年中的第几天，从 0 开始</td>
          <td><code class="literal">0</code> 到 <code class="literal">365</code></td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">月</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><code class="literal">F</code> 和 <code class="literal">M</code></td>
          <td>文本表示的月份，例如 January 或者 Sept</td>
          <td>
           <code class="literal">January</code> 到 <code class="literal">December</code> 或者
           <code class="literal">Jan</code> 到 <code class="literal">Dec</code>
          </td>
         </tr>

         <tr>
          <td><code class="literal">m</code> 和 <code class="literal">n</code></td>
          <td>数值表示的月份，有前导 0 或者无前导 0</td>
          <td>
           <code class="literal">01</code> 到 <code class="literal">12</code> or
           <code class="literal">1</code> 到 <code class="literal">12</code>
          </td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">年</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><code class="literal">Y</code></td>
          <td>4 位数字表示的年</td>
          <td>例如：<code class="literal">1999</code> 或 <code class="literal">2003</code></td>
         </tr>

         <tr>
          <td><code class="literal">y</code></td>
          <td>
           2 位数字表示的年，
           可用的范围是 1970 至 2069（不含）
          </td>
          <td>
           例如：
           <code class="literal">99</code> 或 <code class="literal">03</code>
           （表示 <code class="literal">1999</code> 和
           <code class="literal">2003</code>）
          </td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">时间</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><code class="literal">a</code> 和 <code class="literal">A</code></td>
          <td>上午、下午</td>
          <td><code class="literal">am</code> 或 <code class="literal">pm</code></td>
         </tr>

         <tr>
          <td><code class="literal">g</code> and <code class="literal">h</code></td>
          <td>12 小时制的小时，有前导 0 或者无前导 0</td>
          <td>
           <code class="literal">1</code> 到 <code class="literal">12</code> 或者
           <code class="literal">01</code> 到 <code class="literal">12</code>
          </td>
         </tr>

         <tr>
          <td><code class="literal">G</code> 和 <code class="literal">H</code></td>
          <td>24 小时制的小时，有前导 0 或者无前导 0</td>
          <td>
           <code class="literal">0</code> 到 <code class="literal">23</code> 或
           <code class="literal">00</code> 到 <code class="literal">23</code>
          </td>
         </tr>

         <tr>
          <td><code class="literal">i</code></td>
          <td>分钟，有前导 0</td>
          <td><code class="literal">00</code> 到 <code class="literal">59</code></td>
         </tr>

         <tr>
          <td><code class="literal">s</code></td>
          <td>秒，有前导 0</td>
          <td><code class="literal">00</code> 到 <code class="literal">59</code></td>
         </tr>

         <tr>
          <td><code class="literal">u</code></td>
          <td>微秒，最多到 6 位数字</td>
          <td>示例：<code class="literal">45</code>，<code class="literal">654321</code></td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">时区</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td>
           <code class="literal">e</code>，<code class="literal">O</code>,
           <code class="literal">P</code> 和 <code class="literal">T</code>
          </td>
          <td>时区名称，或者是以 UTC 时区为基准的小时偏移量，
           或者是以 UTC 为基准的小时和分钟的偏移量，
           小时和分钟之间用冒号（:）分隔。
           </td>
          <td>示例：<code class="literal">UTC</code>，<code class="literal">GMT</code>，
           <code class="literal">Atlantic/Azores</code> 或 
           <code class="literal">+0200</code> 或 <code class="literal">+02:00</code> 或
           <code class="literal">EST</code>，<code class="literal">MDT</code>
          </td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">完整的日期和时间</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><code class="literal">U</code></td>
          <td>从 Unix Epoch (January 1 1970 00:00:00 GMT) 开始计算的时间，以秒为单位</td>
          <td>示例：<code class="literal">1292177455</code></td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">空白字符和分隔字符</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><code class="literal"> </code> （空格）</td>
          <td>一个空格字符或者一个 tab 字符</td>
          <td>示例：<code class="literal"> </code></td>
         </tr>

         <tr>
          <td><code class="literal">#</code></td>
          <td>
           可以是一下分隔符号中的任意一个： <code class="literal">;</code>，
           <code class="literal">:</code>，<code class="literal">/</code>，<code class="literal">.</code>，
           <code class="literal">,</code>，<code class="literal">-</code>，<code class="literal">(</code> 或
           <code class="literal">)</code>
          </td>
          <td>示例：<code class="literal">/</code></td>
         </tr>

         <tr>
          <td>
           <code class="literal">;</code>，
           <code class="literal">:</code>，<code class="literal">/</code>，<code class="literal">.</code>，
           <code class="literal">,</code>，<code class="literal">-</code>，<code class="literal">(</code> 或
           <code class="literal">)</code>
          </td>
          <td>特殊字符</td>
          <td>示例：<code class="literal">-</code></td>
         </tr>

         <tr>
          <td><code class="literal">?</code></td>
          <td>随机字节</td>
          <td>示例：<code class="literal">^</code> （需要注意的是，
          对于 UTF-8 字符，可能会需要多个 <code class="literal">?</code>。
          这种情况下，请使用 <code class="literal">*</code>）
          </td>
         </tr>

         <tr>
          <td><code class="literal">*</code></td>
          <td>随机字节，直到遇到下一个有效的分隔符号或者数值</td>
          <td>示例：使用 <code class="literal">Y-*-d</code> 格式用来解析 <code class="literal">2009-aWord-08</code> 字符串的时候，
          <code class="literal">*</code> 会匹配
          <code class="literal">aWord</code></td>
         </tr>

         <tr>
          <td><code class="literal">!</code></td>
          <td>
          将所有的字段（年、月、日、时、分、秒、微秒以及时区）重置到 Unix Epoch 时间。</td>
          <td>如果不使用 <code class="literal">!,</code> 格式，
           那么所有的字段会被设置为系统当前的日期和时间。</td>
         </tr>

         <tr>
          <td><code class="literal">|</code></td>
          <td>将尚未被解析的字段，也即格式字符串中未明确指定的字段
           （年、月、日、时、分、秒、微秒以及时区）
           重置到 Unix Epoch 时间。</td>
          <td><code class="literal">Y-m-d|</code> 
           会解析日期时间字符串中的年、月和日，
          但是对于时、分、秒字段会设置为 0.</td>
         </tr>

         <tr>
          <td><code class="literal">+</code></td>
          <td>在格式字符串中使用这个格式表示字符，
          并且所提供的日期时间字符串中包含除了格式字符之外的其他数据的话，不会发出一个错误，而是发出一个警告。</td>
          <td>使用 <span class="methodname"><a href="datetime.getlasterrors.html" class="methodname">DateTime::getLastErrors()</a></span> 方法
           来检测所给定的日期时间字符串中是否包含格式字符串指定的内容之外的数据。</td>
         </tr>

        </tbody>
       
      </table>

     </p>
     <p class="para">
      如果在格式字符串中包含不可识别的字符，
      那么会导致解析失败，并且在返回的结构中附加一个错误信息。
      可以通过 <span class="methodname"><a href="datetime.getlasterrors.html" class="methodname">DateTime::getLastErrors()</a></span>
      来探查解析是否存在错误。
     </p>       
     <p class="para">
      如果需要在格式字符串 <code class="parameter">format</code> 参数中使用
      上述表示格式的字符作为一个普通字符，请对其使用反斜线（<code class="literal">\</code>）进行转义。
     </p>
     <p class="para">
      如果格式字符串参数 <code class="parameter">format</code> 
      中不包含 <code class="literal">!</code> 字符，
      那么没有在 <code class="parameter">format</code> 参数中指明的字段，
      在解析结果中将会被设置为系统当前时间对应的字段值。
     </p>
     <p class="para">
      如果格式字符串参数 <code class="parameter">format</code> 
      包含了 <code class="literal">!</code> 字符，
      那么没有在 <code class="parameter">format</code> 参数中指明的字段，
      以及在 <code class="literal">!</code> 左侧对应的字段，
      在解析结果中将会被设置为 Unix epoch 时间对应的字段。
     </p>
     <p class="para">
      The Unix epoch 为 1970-01-01 00:00:00 UTC。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">time</code></dt>

    <dd>

     <p class="para">
      用来表示日期时间的字符串。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">timezone</code></dt>

    <dd>

     <p class="para">
      <a href="class.datetimezone.html" class="classname">DateTimeZone</a> 对象，
      表示在解析日期时间字符串的时候需要使用的时区。
     </p>
     <p class="para">
      如果忽略 <code class="parameter">timezone</code> 参数，
      并且表示日期时间的字符串 <code class="parameter">time</code> 中也不包含时区信息，
      那么将会使用系统当前时区作为解析结果对象的时区。
     </p>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       如果 <code class="parameter">time</code> 参数
       是 UNIX 时间戳格式（例如：<code class="literal">946684800</code>），
       或者其中已经包含了时区信息（例如：<code class="literal">2010-01-28T15:00:00+02:00</code>），
       那么 <code class="parameter">timezone</code> 
       以及系统当前时区
       都将会被忽略。
      </p>
     </p></blockquote>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.createfromformat-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回一个 DateTime 对象。 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-datetime.createfromformat-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.9</td>
       <td>
        新增 <code class="parameter">format</code> 格式字符串中对于 + 格式字符的支持。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.createfromformat-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-1940">
   <p><strong>Example #1 <span class="function"><strong>DateTime::createFromFormat()</strong></span> 例程</strong></p>
   <div class="example-contents"><p>面向对象风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">'j-M-Y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'15-Feb-2009'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>过程化风格</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create_from_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'j-M-Y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'15-Feb-2009'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2009-02-15
</pre></div>
   </div>
  </div>
  <div class="example" id="example-1941">
   <p><strong>Example #2 <span class="function"><strong>DateTime::createFromFormat()</strong></span> 的复杂用法</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Current&nbsp;time:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2009-02-15'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2009-02-15&nbsp;15:16:17'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Y-m-!d&nbsp;H:i:s'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2009-02-15&nbsp;15:16:17'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'!d'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'15'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程的输出类似于：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Current time: 2010-04-23 10:29:35
Format: Y-m-d; 2009-02-15 10:29:35
Format: Y-m-d H:i:s; 2009-02-15 15:16:17
Format: Y-m-!d H:i:s; 1970-01-15 15:16:17
Format: !d; 1970-01-15 00:00:00
</pre></div>
   </div>
  </div>
  <div class="example" id="example-1942">
   <p><strong>Example #3 格式化字符串中包含了需要进行转义的字符</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">'H\h&nbsp;i\m&nbsp;s\s'</span><span style="color: #007700">,</span><span style="color: #DD0000">'23h&nbsp;15m&nbsp;03s'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'H:i:s'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程的输出类似于：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
23:15:03
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.createfromformat-seealso">
  <h3 class="title">参见</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="datetime.construct.html" class="function" rel="rdfs-seeAlso">DateTime::__construct()</a> - 返回一个新的 DateTime 对象</span></li>
   <li class="member"><span class="function"><a href="datetime.getlasterrors.html" class="function" rel="rdfs-seeAlso">DateTime::getLastErrors()</a> - 获取警告和错误信息</span></li>
   <li class="member"><span class="function"><a href="function.checkdate.html" class="function" rel="rdfs-seeAlso">checkdate()</a> - 验证一个格里高里日期</span></li>
   <li class="member"><span class="function"><a href="function.strptime.html" class="function" rel="rdfs-seeAlso">strptime()</a> - 解析由 strftime 生成的日期／时间</span></li>
  </ul>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124993""></a>
  <div class="note">
   <strong class="user">mcab at acm dot org</strong>
   <a href="#124993" class="date">11-May-2020 03:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using format "z Y" the function may return an incorrect date (as of 7.2.30).<br />
I understand that this bug is being worked on but a simple solution that works now is to supply the year value first. i.e. always specify format "Y z".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124812""></a>
  <div class="note">
   <strong class="user">parmonov98 at yandex dot ru</strong>
   <a href="#124812" class="date">10-Mar-2020 11:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sometimes we want unixtime rather than string date .<br />
to get it from a string date,&nbsp; do this.<br />
$format = 'Y-m-d';<br />
$date = DateTime::createFromFormat($format, '2009-02-15');<br />
$date-&gt;format("U"); // will print unixtime.<br />
<br />
I thought this would be helpful.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124160""></a>
  <div class="note">
   <strong class="user">e dot fortmeyer01 at gmail dot com</strong>
   <a href="#124160" class="date">01-Sep-2019 09:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware:<br />
If the day of the month is not provided, creating a DateTime object will produce different results depending on what the current day of the year is.<br />
This is because the current system date will be used where values are not provided.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">printMonth</span><span class="keyword">(</span><span class="default">$month</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"F"</span><span class="keyword">, </span><span class="string">"April"</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"F"</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// on August 1st<br />
</span><span class="default">printMonth</span><span class="keyword">(</span><span class="string">"April"</span><span class="keyword">);<br />
</span><span class="comment">// outputs April<br />
<br />
// on August 31st<br />
</span><span class="default">printMonth</span><span class="keyword">(</span><span class="string">"April"</span><span class="keyword">);<br />
</span><span class="comment">// outputs May<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123108""></a>
  <div class="note">
   <strong class="user">call4hemant at gmail dot com</strong>
   <a href="#123108" class="date">05-Sep-2018 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php <br />
<br />
</span><span class="comment">// case 1: 13 as month will be converted to month=01 with Year=Year+1<br />
</span><span class="default">$oDateTime1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">( </span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2018-13-10'</span><span class="keyword">);<br />
echo </span><span class="default">$oDateTime1</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">);<br />
</span><span class="comment">// "2019-01-10"&nbsp; <br />
<br />
// case 2: 32 as date will convert date-01 and month=month+1<br />
</span><span class="default">$oDateTime2</span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">( </span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2018-12-32'</span><span class="keyword">);<br />
echo </span><span class="default">$oDateTime2</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">);<br />
</span><span class="comment">// "2019-01-10"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
</span><span class="keyword">echo </span><span class="default">phpversion</span><span class="keyword">(); <br />
</span><span class="comment">// 7.2.7-1+ubuntu16.04.1+deb.sury.org+12019-01-102019-01-01<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122612""></a>
  <div class="note">
   <strong class="user">labs at stronghold dot KILLIT dot media dot eu</strong>
   <a href="#122612" class="date">12-Apr-2018 04:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that several points here are wrong.<br />
When using microseconds:<br />
<br />
- The createFromFormat DOES NOT accept the ".v" modifier, unlike the formatting ones.<br />
<br />
- When you provide microseconds to this function, YOU MUST LEFT PAD THEM to SIX digits with ZEROES.<br />
If you don't, anything below 100000 will be RIGHT PADDED with zeroes.<br />
(So that 999 becomes 9990000, while 1234 becomes 123400. (Also 0510 becomes 051000.)<br />
But at least you can use milliseconds as microseconds. But then again, REMEMBER TO LEFT PAD them to 3 digits if necessary..<br />
<br />
- WHAT?? Go provides SEVEN digits of MICROSECONDS?? Something there must definitely be wrong. Micro is, by definition, one millionth, so anything above 999999 is odd.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122593""></a>
  <div class="note">
   <strong class="user">c dot m dot tatro+php dot net at gmail dot com</strong>
   <a href="#122593" class="date">06-Apr-2018 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that using this method when calling an invalid date still generates a date. For instance<br />
<br />
DateTime::createFromFormat('Y F j', '2016 February 40');<br />
<br />
generates a date like such: 2016-03-11</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122472""></a>
  <div class="note">
   <strong class="user">Salman A</strong>
   <a href="#122472" class="date">05-Mar-2018 11:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Seems like setting the hours to any value resets the remaining time portion (minute, second and milliseconds) to zero:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 2018-03-05 16:19:35.000000 &lt;- now<br />
</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="string">"2000-01-01"&nbsp; &nbsp; &nbsp; </span><span class="keyword">); </span><span class="comment">// 2000-01-01 16:19:35.000000<br />
</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"2000-01-01 00"&nbsp;&nbsp; </span><span class="keyword">); </span><span class="comment">// 2000-01-01 00:00:00.000000<br />
</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"2000-01-01 01"&nbsp;&nbsp; </span><span class="keyword">); </span><span class="comment">// 2000-01-01 01:00:00.000000<br />
</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i"</span><span class="keyword">, </span><span class="string">"2000-01-01 01:30"</span><span class="keyword">); </span><span class="comment">// 2000-01-01 01:30:00.000000<br />
</span><span class="default">?&gt;<br />
</span><br />
This is different from how missing year, month and dates are handled:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 2018-03-05 16:19:35.000000 &lt;- now<br />
</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m H:i"</span><span class="keyword">, </span><span class="string">"2000-01 01:30"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; </span><span class="comment">// 2000-01-05 01:30:00.000000<br />
</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-d H:i"</span><span class="keyword">, </span><span class="string">"2000-01 01:30"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; </span><span class="comment">// 2000-03-01 01:30:00.000000<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121431""></a>
  <div class="note">
   <strong class="user">Fabian</strong>
   <a href="#121431" class="date">25-Jul-2017 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Parsing RFC3339 strings can be very tricky when their are microseconds in the date string.<br />
<br />
Since PHP 7 there is the undocumented constant DateTime::RFC3339_EXTENDED (value: Y-m-d\TH:i:s.vP), which can be used to output an RFC3339 string with microseconds:<br />
<br />
<span class="default">&lt;?php<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">RFC3339_EXTENDED</span><span class="keyword">)); </span><span class="comment">// 2017-07-25T13:47:12.000+00:00<br />
</span><span class="default">?&gt;<br />
</span><br />
But the same constant can't be used for parsing an RFC3339 string with microseconds, instead do:<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d\TH:i:s.uP"</span><span class="keyword">, </span><span class="string">"2017-07-25T15:25:16.123456+02:00"</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
But "u" can only parse microseconds up to 6 digits, but some language (like Go) return more than 6 digits for the microseconds, e.g.: "2017-07-25T15:50:42.456430712+02:00" (when turning time.Time to JSON with json.Marshal()). Currently there is no other solution than using a separate parsing library to get correct dates.<br />
<br />
Note: the difference between "v" and "u" is just 3 digits vs. 6 digits.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120552""></a>
  <div class="note">
   <strong class="user">thflori</strong>
   <a href="#120552" class="date">30-Jan-2017 08:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
createFromFormat('U') has a strange behaviour: it ignores the datetimezone and the resulting DateTime object will always have GMT+0000 timezone.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$dt </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">(), new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'CET'</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s (T)'</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s (T)'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The problem is microtime() and time() returning the timestamp in current timezone.&nbsp; Instead of using time you can use 'now' but to get a DateTimeObject with microseconds you have to write it this way to be sure to get the correct datetime:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$dt </span><span class="keyword">= \</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U.u'</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">))-&gt;</span><span class="default">setTimezone</span><span class="keyword">(new \</span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'T'</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120475""></a>
  <div class="note">
   <strong class="user">joereynolds952 at gmail dot com</strong>
   <a href="#120475" class="date">17-Jan-2017 11:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note that it is possible to call createFromFormat non statically.<br />
<br />
<span class="default">&lt;?php<br />
$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$today</span><span class="keyword">-&gt;</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2016-11-04'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Is perfectly valid.<br />
<br />
We had to do this once we started using PHPMD which would complain about static methods.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120343""></a>
  <div class="note">
   <strong class="user">vijaycs85 at gmail dot com</strong>
   <a href="#120343" class="date">16-Dec-2016 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is no option to specify date format 'c' (e.g. 2004-02-12T15:19:21+00:00) directly. work around is to use Y-m-d\TH:i:sT</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120046""></a>
  <div class="note">
   <strong class="user">rasmus at mindplay dot dk</strong>
   <a href="#120046" class="date">14-Oct-2016 12:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note a weird and surprising inconsistency in `DateTime::createFromFormat()` and `DateTimeImmutable::createFromFormat()` when the format is `"U"` and these factory-functions are called with a Unix timestamp - in this case, the timezone argument is not only ignored (as per the documentation) but also *NOT APPLIED* the constructed object!<br />
<br />
In other words, the timezone argument has no effect in this case, at all, which I found pretty surprising. Of course the timezone argument cannot be used in this case to parse the value, since it's a timezone-neutral Unix timestamp, but I was definitely expecting the factory-function to apply the specified timezone to the created object - this is especially surprising when it comes to `DateTimeImmutable`, since this behavior of the factory-function makes it impossible to create an instance from a timestamp and initialize the timezone with a single call; you will need a subsequent call to `setTimezone()` discarding the original object.<br />
<br />
Very strange and confusing design :-*</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119362""></a>
  <div class="note">
   <strong class="user">lsloan-php dot net at umich dot edu</strong>
   <a href="#119362" class="date">20-May-2016 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Reportedly, microtime() may return a timestamp number without a fractional part if the microseconds are exactly zero.&nbsp; I.e., "1463772747" instead of the expected "1463772747.000000".&nbsp; number_format() can create a correct string representation of the microsecond timestamp every time, which can be useful for creating DateTime objects when used with DateTime::createFromFormat():<br />
<br />
<span class="default">&lt;?php<br />
$now </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U.u'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">), </span><span class="default">6</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s.u'</span><span class="keyword">)); </span><span class="comment">// E.g., string(26) "2016-05-20 19:36:26.900794"</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119225""></a>
  <div class="note">
   <strong class="user">tuxedobob</strong>
   <a href="#119225" class="date">21-Apr-2016 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're here because you're trying to create a date from a week number, you want to be using setISODate, as I discovered here:<br />
<br />
<a href="http://www.lornajane.net/posts/2011/getting-dates-from-week-numbers-in-php" rel="nofollow" target="_blank">http://www.lornajane.net/posts/2011/getting-dates-from-week-numbers-in-php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118358""></a>
  <div class="note">
   <strong class="user">Albie at aveit dot org</strong>
   <a href="#118358" class="date">22-Nov-2015 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to safely compare equality of a DateTime object without explicitly providing the time portion make use of the ! format character.<br />
<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'!Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'!Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="comment">/* <br />
&nbsp;$date1 and $date2 will both be set to a timestamp of "2012-10-17 00:00:00"<br />
&nbsp;var_dump($date1 == $date2); //will be true<br />
&nbsp;var_dump($date1 &gt; $date2); //will be false<br />
&nbsp;var_dump($date1 &lt; $date2); //will be false<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
If you omit the ! format character without explicitly providing the time portion your timestamp which will include the current system time in the stamp.<br />
<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">== </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&gt;= </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&lt; </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be true<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118341""></a>
  <div class="note">
   <strong class="user">chernomyrdin at gmail dot com</strong>
   <a href="#118341" class="date">19-Nov-2015 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U.u'</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s.u'</span><span class="keyword">)); <br />
</span><span class="default">?&gt;<br />
</span>will print: 2015-11-19 11:37:29.125300 (the current time with microseconds)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117462""></a>
  <div class="note">
   <strong class="user">jplevene</strong>
   <a href="#117462" class="date">12-Jun-2015 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To convert an email header date use the following (important, notice the * at the end)<br />
<br />
$date = DateTime::createFromFormat('D, d M Y H:i:s O *', $email_date);<br />
<br />
Some dates in email headers can be formatted as:<br />
Fri, 12 Jun 2015 13:53:37 +0000 (UTC)<br />
<br />
The "(UTC)" at the end of the date causes an error and will return a result of false unless the * is at the end.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116624""></a>
  <div class="note">
   <strong class="user">SeliusX</strong>
   <a href="#116624" class="date">30-Jan-2015 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Creating timestamps to the day can result in hidden bugs cause hours are taken from now:<br />
<br />
Example:<br />
$newDateTime = DateTime::createFromFormat('Y-m-d', '2014-12-10');<br />
$newDateTime-&gt;format('H') != '00';<br />
<br />
Better use time too or erase the values later on:<br />
$newDateTime = DateTime::createFromFormat('Y-m-d h:i', '2014-12-10 00:00');<br />
or:<br />
$newDateTime = DateTime::createFromFormat(''Y-m-d', '2014-12-10');<br />
$newDateTime-&gt;setTime(0, 0);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116027""></a>
  <div class="note">
   <strong class="user">ELPI</strong>
   <a href="#116027" class="date">31-Oct-2014 10:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It can be confusing creating new DateTime from timestamp when your default timezone (date.timezone) is different from UTC and you are used to date()-function.<br />
<br />
date()-function automatically uses your current timezone setting but DateTime::createFromFormat (or DateTime constructor) does not (it ignores tz-parameter).<br />
<br />
You can get same results as date() by setting the timezone after object creation.<br />
<br />
<span class="default">&lt;?php<br />
$ts </span><span class="keyword">= </span><span class="default">1414706400</span><span class="keyword">;<br />
</span><span class="default">$date1 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d H:i"</span><span class="keyword">, </span><span class="default">$ts</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">, </span><span class="default">$ts</span><span class="keyword">)-&gt;</span><span class="default">setTimeZone</span><span class="keyword">(new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">date_default_timezone_get</span><span class="keyword">()))-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i"</span><span class="keyword">);<br />
</span><span class="comment">//$date1===$date2<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115270""></a>
  <div class="note">
   <strong class="user">nicodoggie at gmail dot com</strong>
   <a href="#115270" class="date">25-Jun-2014 01:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've found that on PHP 5.5.13 (not sure if it happens on other versions) if you enter a month larger than 12 on a format that takes numeric months, the result will be a DateTime object with its month equal to the number modulo 12 instead of returning false.<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2013-22-01'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
results in:<br />
class DateTime#4 (3) {<br />
&nbsp; public $date =&gt;<br />
&nbsp; string(19) "2014-10-01 13:05:05"<br />
&nbsp; public $timezone_type =&gt;<br />
&nbsp; int(3)<br />
&nbsp; public $timezone =&gt;<br />
&nbsp; string(3) "UTC"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114697""></a>
  <div class="note">
   <strong class="user">d dot shankarnarayana at gmail dot com</strong>
   <a href="#114697" class="date">24-Mar-2014 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Say if there is a string with&nbsp; $date = "today is 2014 January 1";&nbsp;&nbsp; and you need to extract "2014 January" using DateTime::createFromFormat().&nbsp; As you can see in the string there is something odd like "today is" .Since that string (today is) does not correspond to a date format, we need to escape that. <br />
<br />
In this case, each and every character on that string has to be escaped as shown below.<br />
<br />
The code.<br />
<br />
<span class="default">&lt;?php<br />
$paragraph </span><span class="keyword">= </span><span class="string">"today is 2014 January 1"</span><span class="keyword">;<br />
</span><span class="default">$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'\t\o\d\a\y \i\s Y F j'</span><span class="keyword">, </span><span class="default">$paragraph</span><span class="keyword">);<br />
echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y F'</span><span class="keyword">); </span><span class="comment">//"prints" 2014 January<br />
<br />
</span><span class="keyword">- </span><span class="default">Shankar Damodaran</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111123""></a>
  <div class="note">
   <strong class="user">mail at marcel-juenemann dot de</strong>
   <a href="#111123" class="date">17-Jan-2013 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the U option does not support negative timestamps (before 1970). You have to use date for that.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110385""></a>
  <div class="note">
   <strong class="user">falundir at gmail dot com</strong>
   <a href="#110385" class="date">17-Oct-2012 12:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be warned that DateTime object created without explicitely providing the time portion will have the current time set instead of 00:00:00.<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">)); </span><span class="comment">//will print 2012-10-17 13:57:34 (the current time)<br />
</span><span class="default">?&gt;<br />
</span><br />
That's also why you can't safely compare equality of such DateTime objects:<br />
<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">== </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&gt;= </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&lt; </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be true<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109881""></a>
  <div class="note">
   <strong class="user">thomas dot ribiere at allgoob dot com</strong>
   <a href="#109881" class="date">30-Aug-2012 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not a bug, but a strange issue today 2012-08-30 :<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="string">"2011-02"</span><span class="keyword">;<br />
echo </span><span class="default">$date</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m"</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will display : <br />
2011-02<br />
2011-03<br />
<br />
It's because there is no 2011-02-30, so datetime will take march insteed of february ...<br />
<br />
To fix it :<br />
<span class="default">&lt;?php <br />
$date </span><span class="keyword">= </span><span class="string">"2011-02"</span><span class="keyword">;<br />
echo </span><span class="default">$date</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">.</span><span class="string">"-01"</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107452""></a>
  <div class="note">
   <strong class="user">kamil dot wegrzynowicz at baobaz dot com</strong>
   <a href="#107452" class="date">10-Feb-2012 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that a pipe ('|') option in formating string works only with PHP version 5.3.7 and newer. We had an issue with it on versions 5.3.2, 5.3.3, 5.3.6. Yet it was fine with 5.3.8 and 5.3.10.
<br />

<br />
By short example:
<br />
<span class="default">&lt;?php
<br />
$timezone </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'UTC'</span><span class="keyword">);
<br />
</span><span class="default">$dateTime </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'dmY|'</span><span class="keyword">, </span><span class="string">'01011972'</span><span class="keyword">, </span><span class="default">$timezone</span><span class="keyword">);
<br />
</span><span class="comment">//$dateTime is FALSE in PHP v &lt;5.3.8
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Instead we used a workaround:
<br />
<span class="default">&lt;?php
<br />
$dateTime </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'dmY'</span><span class="keyword">, </span><span class="string">'01011972'</span><span class="keyword">, </span><span class="default">$timezone</span><span class="keyword">);
<br />
</span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d 00:00:00'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>which works fine.
<br />

<br />
====
<br />

<br />
Modified by admin to correct for version (5.3.7 not 5.3.8)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103158""></a>
  <div class="note">
   <strong class="user">Aurelien Marchand</strong>
   <a href="#103158" class="date">29-Mar-2011 07:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware specifying a timezone in the format as it will take precedence over the DateTimeZone object.<br />
<br />
<span class="default">&lt;?php<br />
$timezone </span><span class="keyword">= </span><span class="string">"UTC"</span><span class="keyword">; </span><span class="comment">// or any other valid name for a timezone<br />
</span><span class="default">$d</span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T"</span><span class="keyword">,</span><span class="string">"2011-11-06 00:00:00 EDT"</span><span class="keyword">,new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">$timezone</span><span class="keyword">));<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T - U"</span><span class="keyword">);<br />
</span><span class="comment">// returns "2011-11-06 00:00:00 EDT - 1320552000"<br />
// specifying $timezone = "Pacific/Honolulu"; would return the same string<br />
</span><span class="default">?&gt;<br />
</span><br />
This gets hairy when you are playing with transition from summer time to winter time! For instance, in Toronto, the time change happens on 2011-11-06. One second after 01:59:59 (EDT), the time becomes 01:00:00 (EST), or 1320559200 in Unix timestamp.<br />
<br />
However, notice the following:<br />
<span class="default">&lt;?php<br />
$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s"</span><span class="keyword">,</span><span class="string">"2011-11-06 01:00:00"</span><span class="keyword">,new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">"EST"</span><span class="keyword">));<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T U"</span><span class="keyword">);<br />
</span><span class="comment">// returns "2011-11-06 01:00:00 EDT 1320555600" instead of "2011-11-06 01:00:00 EST 1320559200"<br />
<br />
// so the correct way is to do:<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T"</span><span class="keyword">,</span><span class="string">"2011-11-06 01:00:00 EST"</span><span class="keyword">,new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">$timezone</span><span class="keyword">)); </span><span class="comment">// set $timezone to any valid string for DateTimeZone, it doesn't matter<br />
</span><span class="keyword">echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T U"</span><span class="keyword">);<br />
</span><span class="comment">// returns "2011-11-06 01:00:00 EST - 1320559200" as wanted<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102910""></a>
  <div class="note">
   <strong class="user">klugg at tlen dot pl</strong>
   <a href="#102910" class="date">14-Mar-2011 09:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In order to use a DateTimeZone, don't enter one of the DateTimeZone::Europe, DateTimeZone::Asia etc. constants, but create a DateTimeZone object with verbal timezone name passed as a string:<br />
<span class="default">&lt;?php<br />
$eventDate </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'m/d/y h:i'</span><span class="keyword">, </span><span class="string">'02/26/11 08:00'</span><span class="keyword">, new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'Europe/Warsaw'</span><span class="keyword">));<br />
echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$eventDate</span><span class="keyword">, </span><span class="string">'Y-m-d'</span><span class="keyword">); </span><span class="comment">//prints "2011-02-26"<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
