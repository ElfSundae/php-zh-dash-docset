<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>使用用户自定义的比较函数对数组中的值进行排序</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.uksort.html">? uksort</a></li>
      <li style="float: right;"><a href="book.classobj.html">类/对象 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>使用用户自定义的比较函数对数组中的值进行排序</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.usort" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">usort</h1>
    <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">usort</span> &mdash; <span class="dc-title">
     使用用户自定义的比较函数对数组中的值进行排序
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.usort-description">
  <h3 class="title">说明</h3>
     <div class="methodsynopsis dc-description">
      <span class="methodname"><strong>usort</strong></span>
       ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   , <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>
      ) : <span class="type">bool</span></div>

    <p class="para rdfs-comment">
     本函数将用用户自定义的比较函数对一个数组中的值进行排序。
     如果要排序的数组需要用一种不寻常的标准进行排序，那么应该使用此函数。
    </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
 <p class="para">
  如果两个成员完全相同，那么它们在排序数组中的相对顺序是未定义的。
 </p>
</p></blockquote>

  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数为 <code class="parameter">array</code>
中的元素赋与新的键名。这将删除原有的键名，而不是仅仅将键名重新排序。</span></p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.usort-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       输入的数组
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       在第一个参数小于，等于或大于第二个参数时，该比较函数必须相应地返回一个小于，等于或大于 0 的整数。
      </p>
      <div class="methodsynopsis dc-description"><span class="methodname"><span class="replaceable">callback</span></span> ( <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$a</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$b</code></span> ) : <span class="type">int</span></div>

       <div class="caution"><strong class="caution">Caution</strong>
       <p class="para">
        Returning <em class="emphasis">non-integer</em> values from the comparison
        function, such as <span class="type">float</span>, will result in an internal cast to
        <span class="type">int</span> of the callback&#039;s return value. So values such as
        0.99 and 0.1 will both be cast to an integer value of 0, which will
        compare such values as equal.
       </p>
      </div>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.usort-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.usort-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-4869">
    <p><strong>Example #1 <span class="function"><strong>usort()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;?&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cmp"</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
0: 1
1: 2
2: 3
3: 5
4: 6
</pre></div>
    </div>
   </div>
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    很明显在这个小例子中用 <span class="function"><a href="function.sort.html" class="function">sort()</a></span> 函数更合适。
   </p>
  </p></blockquote>
  <p class="para">
   <div class="example" id="example-4870">
    <p><strong>Example #2 
     使用多维数组的 <span class="function"><strong>usort()</strong></span> 例子
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">strcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]);<br />}<br /><br /></span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"lemons"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"apples"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"grapes"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cmp"</span><span style="color: #007700">);<br /><br />while&nbsp;(list(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]</span><span style="color: #DD0000">:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">[</span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     当排序多维数组时，<var class="varname">$a</var> 和 <var class="varname">$b</var> 包含到数组第一个索引的引用。
    </p></div>
    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
$fruits[0]: apples
$fruits[1]: grapes
$fruits[2]: lemons
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4871">
    <p><strong>Example #3 
     <span class="function"><strong>usort()</strong></span> example using a member function of an object
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">TestObj&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;This&nbsp;is&nbsp;the&nbsp;static&nbsp;comparing&nbsp;function:&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">static&nbsp;function&nbsp;</span><span style="color: #0000BB">cmp_obj</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$al&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$bl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$al&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$bl</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(</span><span style="color: #0000BB">$al&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">$bl</span><span style="color: #007700">)&nbsp;?&nbsp;+</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">:&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #DD0000">"c"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #DD0000">"b"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">TestObj</span><span style="color: #007700">(</span><span style="color: #DD0000">"d"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"TestObj"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cmp_obj"</span><span style="color: #007700">));<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
b
c
d
</pre></div>
    </div>
   </div>
    <div class="example" id="example-4872">
    <p><strong>Example #4 
     <span class="function"><strong>usort()</strong></span> example using a <a href="functions.anonymous.html" class="link">closure</a>
     to sort a multi-dimensional array
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'key_a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'z'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'key_b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'c'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'key_a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'x'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'key_b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;array(</span><span style="color: #DD0000">'key_a'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'key_b'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">);<br /><br />function&nbsp;</span><span style="color: #0000BB">build_sorter</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;function&nbsp;(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;use&nbsp;(</span><span style="color: #0000BB">$key</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">strnatcmp</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;};<br />}<br /><br /></span><span style="color: #0000BB">usort</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">build_sorter</span><span style="color: #007700">(</span><span style="color: #DD0000">'key_b'</span><span style="color: #007700">));<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">[</span><span style="color: #DD0000">'key_a'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">',&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">[</span><span style="color: #DD0000">'key_b'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
y, a
x, b
z, c
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.usort-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.uasort.html" class="function" rel="rdfs-seeAlso">uasort()</a> - 使用用户自定义的比较函数对数组中的值进行排序并保持索引关联</span></li>
    <li class="member"><a href="array.sorting.html" class="link">数组排序函数对比</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126198""></a>
  <div class="note">
   <strong class="user">jab_creations at yahoo dot com</strong>
   <a href="#126198" class="date">25-Jun-2021 03:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The usort function should not be used for associative arrays where the base keys need to retain their names, otherwise this:<br />
<br />
$a = array('example' =&gt; 'hello');<br />
<br />
Will be converted to:<br />
<br />
$a = array(0 =&gt; 'hello');<br />
<br />
To retain key names in associative arrays you can simply replace usort with uasort; for me it was a drop-in replacement without having to change anything else.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123923""></a>
  <div class="note">
   <strong class="user">gus dot antoniassi at gmail dot com</strong>
   <a href="#123923" class="date">10-Jun-2019 01:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple way to sort based on a "priority list":<br />
<br />
<span class="default">&lt;?php<br />
<br />
$order </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">];<br />
</span><span class="default">$arr </span><span class="keyword">=&nbsp;&nbsp; [<br />
&nbsp;&nbsp;&nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">0 </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1 </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">2 </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [ </span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">3 </span><span class="keyword">],<br />
];<br />
<br />
</span><span class="default">uasort</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use (</span><span class="default">$order</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">], </span><span class="default">$order</span><span class="keyword">) &lt;=&gt; </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">], </span><span class="default">$order</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; }<br />
);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This will return:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
Note that if you have a value in $arr that is not on the $order list, you will need additional checks since the array_search function returns FALSE for undefined indexes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123532""></a>
  <div class="note">
   <strong class="user">chris at candm dot org dot uk</strong>
   <a href="#123532" class="date">19-Jan-2019 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case anyone is interested, comparative timings over 100000000 runs<br />
Based on comparing integers (500 and 501)<br />
Spaceship:4<br />
()?: operator:10<br />
Subtraction:2<br />
<br />
Based on comparing floats (500.1 and 501.3) (caveats noted)<br />
Spaceship:5<br />
()?: operator:9<br />
Subtraction:3<br />
<br />
Based on comparing strings ("five" and "four")<br />
Spaceship:7<br />
()?: operator:17<br />
(Subtraction obviously not available)<br />
<br />
Note: a dummy run was done with an empty loop and the elapsed time for this was subtracted from each of the above times so that they reflect ONLY the time to do the comparisons. As for significance. unless you are doing very large numbers of comparisons where spaceships are the order of the day, the difference is insignificant.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121635""></a>
  <div class="note">
   <strong class="user">user dot boba at gmail dot com</strong>
   <a href="#121635" class="date">13-Sep-2017 05:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP7 spaceship operator very helpful in sorting function callback<br />
<br />
<a href="http://php.net/manual/en/migration70.new-features.php#migration70.new-features.spaceship-op" rel="nofollow" target="_blank">http://php.net/manual/en/migration70.new-features.php#migration70.new-features.spaceship-op</a><br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// PHP &lt; 7 example<br />
</span><span class="keyword">function </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// PHP7 example<br />
</span><span class="keyword">function </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$a </span><span class="keyword">&lt;=&gt; </span><span class="default">$b</span><span class="keyword">;<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121037""></a>
  <div class="note">
   <strong class="user">121616591 at qq dot com</strong>
   <a href="#121037" class="date">02-May-2017 09:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also sort multi-dimensional array for multiple values like as<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">6</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">'id'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">'sex'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="string">'d'</span><span class="keyword">),<br />
);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">arrayOrderBy</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'age asc,sex asc,name desc'</span><span class="keyword">));<br />
<br />
function </span><span class="default">arrayOrderBy</span><span class="keyword">(array &amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$order </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$order</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$orders </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$order</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use(</span><span class="default">$orders</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$orders </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$field</span><span class="keyword">, </span><span class="default">$sort</span><span class="keyword">) = </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'trim'</span><span class="keyword">, </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!(isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">, </span><span class="string">'desc'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$tmp</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]) &amp;&amp; </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">] - </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; a<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; d<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; c<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [age] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [sex] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; b<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120470""></a>
  <div class="note">
   <strong class="user">inigo dot grimbergen at gmail dot com</strong>
   <a href="#120470" class="date">14-Jan-2017 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to sort with numeric and empty values&nbsp; and have the smallest on top:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; usort</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$a </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">&amp;&amp; </span><span class="default">$b </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">) return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$a </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">&amp;&amp; </span><span class="default">$b </span><span class="keyword">== </span><span class="default">null </span><span class="keyword">) return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a </span><span class="keyword">&gt; </span><span class="default">$b </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; });<br />
</span><span class="default">?&gt;<br />
</span>returns<br />
1<br />
2<br />
3<br />
null<br />
null<br />
null</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120344""></a>
  <div class="note">
   <strong class="user">grzeniufication at gmail dot com</strong>
   <a href="#120344" class="date">16-Dec-2016 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just wanted to show off the beauty of PHPs spaceship operator in this use case.<br />
<br />
<span class="default">&lt;?php </span><span class="comment">// tested on PHP 7.1<br />
</span><span class="default">$a </span><span class="keyword">= [</span><span class="default">2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">];<br />
</span><span class="default">$asc </span><span class="keyword">= </span><span class="default">$desc </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">;<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$asc</span><span class="keyword">, function (</span><span class="default">int $a</span><span class="keyword">, </span><span class="default">int $b</span><span class="keyword">) { return (</span><span class="default">$a </span><span class="keyword">&lt;=&gt; </span><span class="default">$b</span><span class="keyword">); });<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$desc</span><span class="keyword">, function (</span><span class="default">int $a</span><span class="keyword">, </span><span class="default">int $b</span><span class="keyword">) { return -(</span><span class="default">$a </span><span class="keyword">&lt;=&gt; </span><span class="default">$b</span><span class="keyword">); });<br />
</span><span class="default">print_r</span><span class="keyword">([ </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$asc</span><span class="keyword">, </span><span class="default">$desc </span><span class="keyword">]);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Getting ahead of myself but... If arrow function syntax was possible:<br />
&nbsp;* usort($asc, (int $a, int $b) =&gt; ($a &lt;=&gt; $b));<br />
&nbsp;* usort($desc, (int $a, int $b) =&gt; -($a &lt;=&gt; $b));<br />
&nbsp;*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118871""></a>
  <div class="note">
   <strong class="user">Nsisodia91 at gmail dot com</strong>
   <a href="#118871" class="date">19-Feb-2016 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also sort multi-dimensional array for multiple values like as<br />
<br />
<span class="default">&lt;?php <br />
$arr </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Sally"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"sal"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"0"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"0"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"David"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"dav07"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"0"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"1"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Zen"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"zen"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"1"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"0"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Jackson"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"jack"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"1"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"1"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name"</span><span class="keyword">=&gt; </span><span class="string">"Rohit"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"nick_name"</span><span class="keyword">=&gt; </span><span class="string">"rod"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"availability"</span><span class="keyword">=&gt; </span><span class="string">"0"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"is_fav"</span><span class="keyword">=&gt; </span><span class="string">"0"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
<br />
];<br />
<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,function(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'is_fav'</span><span class="keyword">] - </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'is_fav'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">.= </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'availability'</span><span class="keyword">] - </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'availability'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">.= </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'nick_name'</span><span class="keyword">],</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'nick_name'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$c</span><span class="keyword">;<br />
});<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Jackson<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nick_name] =&gt; jack<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [availability] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [is_fav] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; David<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nick_name] =&gt; dav07<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [availability] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [is_fav] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Zen<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nick_name] =&gt; zen<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [availability] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [is_fav] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Rohit<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nick_name] =&gt; rod<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [availability] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [is_fav] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [name] =&gt; Sally<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [nick_name] =&gt; sal<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [availability] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [is_fav] =&gt; 0<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117659""></a>
  <div class="note">
   <strong class="user">me at evertpot dot com</strong>
   <a href="#117659" class="date">16-Jul-2015 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I see many people here (including the official examples) write their callbacks rather clumsily like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$a </span><span class="keyword">=== </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; } elseif (</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;&nbsp; <br />
&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Or if they are a bit more clever:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
<br />
&nbsp; if (</span><span class="default">$a </span><span class="keyword">=== </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$b </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
But this can by simplified further to:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$a </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116264""></a>
  <div class="note">
   <strong class="user">bob at thecaverlys dot net</strong>
   <a href="#116264" class="date">03-Dec-2014 03:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Below is a variation on Example #4 that implements a multi-key natural sort on an associative array and can be called in such a way as to allow reversing the sort order and/or making the comparison case insensitive on a key by key basis.<br />
<br />
Test code is included in the file - run it from the command line with: php sortUtils.php<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; &nbsp; sortUtils.php<br />
*/<br />
<br />
/**<br />
&nbsp;*&nbsp; &nbsp; mknatsort() - Multi-Key Natural Sort for associative arrays<br />
&nbsp;*<br />
&nbsp;*&nbsp; &nbsp; Uses the usort() function to perform a natural sort on a multi-dimensional<br />
&nbsp;*&nbsp; &nbsp; array on multiple keys. Optionally specifying the sort order for each key<br />
&nbsp;*&nbsp; &nbsp; and/or ignoring the case for each key value.<br />
&nbsp;*<br />
&nbsp;*&nbsp; &nbsp; @param array $data_array The array to be sorted.<br />
&nbsp;*&nbsp; &nbsp; @param mixed $keys The list of keys to be sorted by. This may be a single<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; key or an array of keys<br />
&nbsp;*&nbsp; &nbsp; @param boolean $reverse Specify whether or not to reverse the sort order. If<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; there are multiple keys then $reverse may be an array of booleans - one<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; per key.<br />
&nbsp;*&nbsp; &nbsp; @param boolean $ignorecase Specify whether or not to ignore the case when<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; comparing key values.reverse the sort order. If there are multiple keys<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; then $ignorecase may be an array of booleans - one per key.<br />
*/<br />
</span><span class="keyword">function </span><span class="default">mknatsort </span><span class="keyword">( &amp;</span><span class="default">$data_array</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">=</span><span class="default">false </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// make sure $keys is an array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">)) </span><span class="default">$keys </span><span class="keyword">= array(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$data_array</span><span class="keyword">, </span><span class="default">sortcompare</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">) );<br />
}<br />
<br />
function </span><span class="default">sortcompare</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return function (</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use (</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">, </span><span class="default">$ignorecase</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cnt</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check each key in the order specified<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach ( </span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check the value for ignorecase and do natural compare accordingly<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ignore </span><span class="keyword">= </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ignorecase</span><span class="keyword">) ? </span><span class="default">$ignorecase</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">] : </span><span class="default">$ignorecase</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$ignore </span><span class="keyword">? </span><span class="default">strnatcasecmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) : </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check the value for reverse and reverse the sort order accordingly<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$revcmp </span><span class="keyword">= </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$reverse</span><span class="keyword">) ? </span><span class="default">$reverse</span><span class="keyword">[</span><span class="default">$cnt</span><span class="keyword">] : </span><span class="default">$reverse</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$revcmp </span><span class="keyword">? (</span><span class="default">$result </span><span class="keyword">* -</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the first key that results in a non-zero comparison determines<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // the order of the elements<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$result </span><span class="keyword">!= </span><span class="default">0 </span><span class="keyword">) break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cnt</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
} </span><span class="comment">// end sortcompare()<br />
<br />
// test code that will be skipped if this is included in the web environment<br />
// test with: php sortUtils.php from the command line<br />
</span><span class="default">$sapi_type </span><span class="keyword">= </span><span class="default">php_sapi_name</span><span class="keyword">();<br />
if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$sapi_type</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">) == </span><span class="string">'cli'</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// the following shows several examples of usage and the resulting output.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'This looks good.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:20 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Senior Account Manager'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'This looks good, please approve.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:19 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Account Manager'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'This looks good.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'Jane Smith'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:19 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Senior Account Manager'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'Returned'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'There is not enough informartion.&nbsp; Please add the following.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:15 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Account Manager'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">[] = array(</span><span class="string">'Status'</span><span class="keyword">=&gt;</span><span class="string">'In Progress'</span><span class="keyword">, </span><span class="string">'comment'</span><span class="keyword">=&gt;</span><span class="string">'I am currently reviewing this.'</span><span class="keyword">, </span><span class="string">'user_name'</span><span class="keyword">=&gt;</span><span class="string">'John Doe'</span><span class="keyword">, </span><span class="string">'date_modified'</span><span class="keyword">=&gt;</span><span class="string">'06/13/2014 11:14 AM'</span><span class="keyword">, </span><span class="string">'role'</span><span class="keyword">=&gt;</span><span class="string">'Account Manager'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Original array: "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Sorted on date_modified: "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mknatsort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, array(</span><span class="string">'date_modified'</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Sorted on role(reversed) &amp; date_modified: "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mknatsort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, array(</span><span class="string">'role'</span><span class="keyword">,</span><span class="string">'date_modified'</span><span class="keyword">),array(</span><span class="default">true</span><span class="keyword">,</span><span class="default">false</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Sorted on role &amp; date_modified(reversed): "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mknatsort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, array(</span><span class="string">'role'</span><span class="keyword">,</span><span class="string">'date_modified'</span><span class="keyword">),array(</span><span class="default">false</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113851""></a>
  <div class="note">
   <strong class="user">Gerald Schneider</strong>
   <a href="#113851" class="date">09-Dec-2013 07:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
usort returns null when the sorting function is not (yet) defined. The function has to be defined before usort is called, afterwards doesn't work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111883""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#111883" class="date">08-Apr-2013 10:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As the documentation says, the comparison function needs to return an integer that is either "less than, equal to, or greater than zero". There is no requirement to restrict the value returned to -1, 0, 1.<br />
<br />
<span class="default">&lt;?php<br />
usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">integer_property </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">integer_property</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">integer_property </span><span class="keyword">&lt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">integer_property</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
});<br />
</span><span class="default">?&gt;<br />
</span><br />
can be simplified to<br />
<br />
<span class="default">&lt;?php<br />
usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">integer_property </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">integer_property</span><span class="keyword">;<br />
});<br />
</span><span class="default">?&gt;<br />
</span><br />
This of course applies to any comparison function that calculates an integer "score" for each of its arguments to decide which is "greater".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109329""></a>
  <div class="note">
   <strong class="user">Jian Wu</strong>
   <a href="#109329" class="date">06-Jul-2012 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The usort function actually moves $b up when the callback function returns both 0 and 1.&nbsp; If you want to preserve the original order in the array, return 1 when $a == $b instead of 0.&nbsp; Try this code below to see how usort alters the order of the original array when all values are the same.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">TestObj </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$name</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$id</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">TestObj</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$id</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">cmp_obj</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$al </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bl </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$al </span><span class="keyword">== </span><span class="default">$bl</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// return 1 if you don't want $b to go in front of $a
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$al </span><span class="keyword">&gt; </span><span class="default">$bl</span><span class="keyword">) ? +</span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$a</span><span class="keyword">[] = new </span><span class="default">TestObj</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$a</span><span class="keyword">[] = new </span><span class="default">TestObj</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);
<br />
</span><span class="default">$a</span><span class="keyword">[] = new </span><span class="default">TestObj</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);
<br />

<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, array(</span><span class="string">"TestObj"</span><span class="keyword">, </span><span class="string">"cmp_obj"</span><span class="keyword">));
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108116""></a>
  <div class="note">
   <strong class="user">zuallauz at gmail dot com</strong>
   <a href="#108116" class="date">29-Mar-2012 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When trying to do some custom sorting with objects and an anonymous function it wasn't entirely clear how this usort function works. I think it probably uses a quicksort in the background. Basically it actually moves the $b variable up or down in respect to the $a variable. It does NOT move the $a variable inside the callback function. This is key to getting your logic right in the comparisons.<br />
<br />
If you return -1 that moves the $b variable down the array, return 1 moves $b up the array and return 0 keeps $b in the same place. <br />
<br />
To test I cut down my code to sorting a simple array from highest priority to lowest.<br />
<br />
<span class="default">&lt;?php<br />
$priorities </span><span class="keyword">= array(</span><span class="default">5</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$priorities</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"a (</span><span class="default">$a</span><span class="string">) is same priority as b (</span><span class="default">$b</span><span class="string">), keeping the same\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$a </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"a (</span><span class="default">$a</span><span class="string">) is higher priority than b (</span><span class="default">$b</span><span class="string">), moving b down array\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"b (</span><span class="default">$b</span><span class="string">) is higher priority than a (</span><span class="default">$a</span><span class="string">), moving b up array\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
});<br />
<br />
echo </span><span class="string">"Sorted priorities:\n"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$priorities</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
b (8) is higher priority than a (3), moving b up array<br />
b (5) is higher priority than a (3), moving b up array<br />
b (7) is higher priority than a (3), moving b up array<br />
a (3) is same priority as b (3), keeping the same<br />
a (8) is higher priority than b (3), moving b down array<br />
b (8) is higher priority than a (7), moving b up array<br />
b (8) is higher priority than a (5), moving b up array<br />
b (8) is higher priority than a (3), moving b up array<br />
a (5) is higher priority than b (3), moving b down array<br />
a (7) is higher priority than b (5), moving b down array<br />
<br />
Sorted priorities:<br />
array(5) {<br />
&nbsp; [0]=&gt; int(8)<br />
&nbsp; [1]=&gt; int(7)<br />
&nbsp; [2]=&gt; int(5)<br />
&nbsp; [3]=&gt; int(3)<br />
&nbsp; [4]=&gt; int(3)<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107372""></a>
  <div class="note">
   <strong class="user">andi_mclean at ntlworld dot com</strong>
   <a href="#107372" class="date">04-Feb-2012 03:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a sort method that would sort strings but take note of any numbers and would compare them as number. I also want to ignore any non alphanumerical characters.<br />
<br />
Eg.<br />
Slot 1 Example<br />
Slot 10 Example<br />
Slot 2 Example<br />
<br />
Should infact be<br />
Slot 1 Example<br />
Slot 2 Example<br />
Slot 10 Example<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sort_with_numbers</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">), </span><span class="default">count</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$index </span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$index </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; ++</span><span class="default">$index</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a1 </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[^A-Za-z0-9]"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b1 </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[^A-Za-z0-9]"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$equal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">) &amp;&amp; </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$b1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$equal </span><span class="keyword">= </span><span class="default">$a1 </span><span class="keyword">- </span><span class="default">$b1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$equal </span><span class="keyword">= </span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$b1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$equal </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$equal </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) - </span><span class="default">count</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106761""></a>
  <div class="note">
   <strong class="user">admin at gosenz dot com</strong>
   <a href="#106761" class="date">04-Dec-2011 08:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sort multi-dimentional arrays in class with usort<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">ArraySort<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$arr </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">doSort</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cmp </span><span class="keyword">= function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Do Some Comparation<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">, </span><span class="default">$cmp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">arr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105764""></a>
  <div class="note">
   <strong class="user">Gok6tm</strong>
   <a href="#105764" class="date">13-Sep-2011 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this is a new multisort function for sorting on multiple subfield like it will be in sql : 'ORDER BY field1, field2'
<br />
number of sort field is undefined
<br />
<span class="default">&lt;?php
<br />

<br />
$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);
<br />
</span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);
<br />
</span><span class="default">$array</span><span class="keyword">[] = array(</span><span class="string">'soc' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//usage
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">multiSort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'soc'</span><span class="keyword">, </span><span class="string">'code'</span><span class="keyword">));
<br />

<br />
function </span><span class="default">multiSort</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//get args of the function
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$c </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//get the array to sort
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//sort with an anoymous function using args
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use(</span><span class="default">$args</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cmp </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$cmp </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cmp </span><span class="keyword">= </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[ </span><span class="default">$args</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">] ], </span><span class="default">$b</span><span class="keyword">[ </span><span class="default">$args</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">] ]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$cmp</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; });
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br />

<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
output:
<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 2
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 2
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 2
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 5
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 3
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 1
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [soc] =&gt; 3
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [code] =&gt; 2
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104873""></a>
  <div class="note">
   <strong class="user">Lea Hayes</strong>
   <a href="#104873" class="date">12-Jul-2011 05:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Sort array of objects by field.
<br />
&nbsp;*
<br />
&nbsp;* @param array $objects Array of objects to sort.
<br />
&nbsp;* @param string $on Name of field.
<br />
&nbsp;* @param string $order (ASC|DESC)
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">sort_on_field</span><span class="keyword">(&amp;</span><span class="default">$objects</span><span class="keyword">, </span><span class="default">$on</span><span class="keyword">, </span><span class="default">$order </span><span class="keyword">= </span><span class="string">'ASC'</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$comparer </span><span class="keyword">= (</span><span class="default">$order </span><span class="keyword">=== </span><span class="string">'DESC'</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="string">"return -strcmp(\$a-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">,\$b-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">);"
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: </span><span class="string">"return strcmp(\$a-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">,\$b-&gt;</span><span class="keyword">{</span><span class="default">$on</span><span class="keyword">}</span><span class="string">);"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="default">$comparer</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104649""></a>
  <div class="note">
   <strong class="user">bcsj</strong>
   <a href="#104649" class="date">28-Jun-2011 11:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorting a multidimensional array by a subkey seem to be one of the bigger challenges when using usort. At least if one want the key to be dynamic. For anyone interested this code seemed to work rather well for me:<br />
<br />
<span class="default">&lt;?php<br />
<br />
usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,array(new </span><span class="default">cmp</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">), </span><span class="string">"cmp__"</span><span class="keyword">));<br />
<br />
class </span><span class="default">cmp </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">cmp__</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ((</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97750""></a>
  <div class="note">
   <strong class="user">xaguilars at gmail dot com</strong>
   <a href="#97750" class="date">06-May-2010 04:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'd like to share with the community my function for sorting an array of arrays or objects containing associative data. This could be used, for example, with a MySQL result.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sort_by</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">, &amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$sorting</span><span class="keyword">=</span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">$case_insensitive</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) &amp;&amp; (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) &amp;&amp; ( ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$field</span><span class="keyword">]) ) || ( </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]-&gt;</span><span class="default">$field</span><span class="keyword">) ) ) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$case_insensitive</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">) </span><span class="default">$strcmp_fn </span><span class="keyword">= </span><span class="string">"strnatcasecmp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$strcmp_fn </span><span class="keyword">= </span><span class="string">"strnatcmp"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$sorting</span><span class="keyword">==</span><span class="default">SORT_ASC</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fn </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="string">'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_object($a) &amp;&amp; is_object($b)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($a-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">', $b-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(is_array($a) &amp;&amp; is_array($b)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($a["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"], $b["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else return 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fn </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="string">'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_object($a) &amp;&amp; is_object($b)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($b-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">', $a-&gt;'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else if(is_array($a) &amp;&amp; is_array($b)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return '</span><span class="keyword">.</span><span class="default">$strcmp_fn</span><span class="keyword">.</span><span class="string">'($b["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"], $a["'</span><span class="keyword">.</span><span class="default">$field</span><span class="keyword">.</span><span class="string">'"]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else return 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$fn</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93194""></a>
  <div class="note">
   <strong class="user">Will Shaver</strong>
   <a href="#93194" class="date">27-Aug-2009 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An even better implementation of osort [than my original, posted on 24-AUG-09 (since deleted)], allowing for multiple properties and directions.&nbsp; With php 5.3.0 sorting by properties of an object becomes MUCH simpler.&nbsp; Note that this uses anonymous functions / closures. Might find reviewing the php docs on that useful.&nbsp; Look below for examples for previous version of php.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">osort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$props</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$props</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$props </span><span class="keyword">= array(</span><span class="default">$props </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) use (</span><span class="default">$props</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$props </span><span class="keyword">as </span><span class="default">$prop </span><span class="keyword">=&gt; </span><span class="default">$ascending</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">!= </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$prop</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ascending</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">&gt; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">&gt; </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$prop </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">; </span><span class="comment">//if all props equal&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">});&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Usage:
<br />

<br />
<span class="default">&lt;?php
<br />
osort</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">, array(</span><span class="string">"Color" </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">, </span><span class="string">"Size" </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">));
<br />
</span><span class="comment">//or
<br />
</span><span class="default">osort</span><span class="keyword">(</span><span class="default">$items</span><span class="keyword">, </span><span class="string">"Color"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89977""></a>
  <div class="note">
   <strong class="user">gmail.com - nmcquay</strong>
   <a href="#89977" class="date">31-Mar-2009 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a wrapper for usort that lets you use something similar to an SQL ORDER BY clause. It can sort arrays of associative arrays and arrays of objects and I think it would work with some hybrid case.
<br />

<br />
Example of how the function works:
<br />

<br />
<span class="default">&lt;?php
<br />
$testAry </span><span class="keyword">= array(
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">)
<br />
);
<br />

<br />
</span><span class="default">Utility</span><span class="keyword">::</span><span class="default">orderBy</span><span class="keyword">(</span><span class="default">$testAry</span><span class="keyword">, </span><span class="string">'a ASC, b DESC'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//Result:
<br />
</span><span class="default">$testAry </span><span class="keyword">= array(
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">),
<br />
&nbsp; array(</span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">)
<br />
);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
To sort an array of objects you would do something like:
<br />
Utility::orderBy($objectAry, 'getCreationDate() DESC, getSubOrder() ASC');
<br />

<br />
This would sort an array of objects that have methods getCreationDate() and getSubOrder().
<br />

<br />
Here is the function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">Utility </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*
<br />
&nbsp;&nbsp;&nbsp; * @param array $ary the array we want to sort
<br />
&nbsp;&nbsp;&nbsp; * @param string $clause a string specifying how to sort the array similar to SQL ORDER BY clause
<br />
&nbsp;&nbsp;&nbsp; * @param bool $ascending that default sorts fall back to when no direction is specified
<br />
&nbsp;&nbsp;&nbsp; * @return null
<br />
&nbsp;&nbsp;&nbsp; */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">orderBy</span><span class="keyword">(&amp;</span><span class="default">$ary</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">, </span><span class="default">$ascending </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$clause </span><span class="keyword">= </span><span class="default">str_ireplace</span><span class="keyword">(</span><span class="string">'order by'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$clause </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s+/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="default">$clause</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dirMap </span><span class="keyword">= array(</span><span class="string">'desc' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'asc' </span><span class="keyword">=&gt; -</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$def </span><span class="keyword">= </span><span class="default">$ascending </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keyAry </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dirAry </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keyAry</span><span class="keyword">[] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dirAry</span><span class="keyword">[] = </span><span class="default">$dirMap</span><span class="keyword">[</span><span class="default">$dir</span><span class="keyword">] ? </span><span class="default">$dirMap</span><span class="keyword">[</span><span class="default">$dir</span><span class="keyword">] : </span><span class="default">$def</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dirAry</span><span class="keyword">[] = </span><span class="default">$def</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fnBody </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$keyAry</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$keyAry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">$dirAry</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= -</span><span class="default">1 </span><span class="keyword">* </span><span class="default">$t</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aStr </span><span class="keyword">= </span><span class="string">'$a[\''</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">'\']'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bStr </span><span class="keyword">= </span><span class="string">'$b[\''</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">.</span><span class="string">'\']'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aStr </span><span class="keyword">= </span><span class="string">'$a-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bStr </span><span class="keyword">= </span><span class="string">'$b-&gt;'</span><span class="keyword">.</span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$fnBody </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"if(</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> == </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) { return 0; }\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"return (</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> &lt; </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) ? </span><span class="keyword">{</span><span class="default">$t</span><span class="keyword">}</span><span class="string"> : </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">}</span><span class="string">;\n"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fnBody </span><span class="keyword">= </span><span class="string">"if(</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> == </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) {\n" </span><span class="keyword">. </span><span class="default">$fnBody</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"}\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fnBody </span><span class="keyword">.= </span><span class="string">"return (</span><span class="keyword">{</span><span class="default">$aStr</span><span class="keyword">}</span><span class="string"> &lt; </span><span class="keyword">{</span><span class="default">$bStr</span><span class="keyword">}</span><span class="string">) ? </span><span class="keyword">{</span><span class="default">$t</span><span class="keyword">}</span><span class="string"> : </span><span class="keyword">{</span><span class="default">$f</span><span class="keyword">}</span><span class="string">;\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$fnBody</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortFn </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="default">$fnBody</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$ary</span><span class="keyword">, </span><span class="default">$sortFn</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89919""></a>
  <div class="note">
   <strong class="user">luke dot semerau at gmail dot com</strong>
   <a href="#89919" class="date">28-Mar-2009 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to use usort with a key in the calling method, I wrote this as a utility:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">usort_comparison</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$usorter </span><span class="keyword">= &amp;new </span><span class="default">Usort</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return array(</span><span class="default">$usorter</span><span class="keyword">, </span><span class="string">"sort"</span><span class="keyword">);<br />
}<br />
<br />
class </span><span class="default">Usort </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">obj </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">method </span><span class="keyword">= </span><span class="default">$method</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">sort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">obj</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">method</span><span class="keyword">), array(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">require_once(</span><span class="string">"util/usort.php"</span><span class="keyword">);<br />
<br />
class </span><span class="default">Foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$items </span><span class="keyword">= array(</span><span class="default">FooBar</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">), </span><span class="default">FooBar</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">sorter</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-</span><span class="default">items</span><span class="keyword">, </span><span class="default">usort_comparison</span><span class="keyword">(</span><span class="string">"Foo"</span><span class="keyword">, </span><span class="string">"_cmp"</span><span class="keyword">, </span><span class="string">"item"</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">_cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
class </span><span class="default">FooBar </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">item </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
~ simple example... but in the way I need to use it was the key was used in a switch statement to choose the different member of the object to compare against dynamically (as in, sort by x or y or z)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87884""></a>
  <div class="note">
   <strong class="user">jalil at measat dot org</strong>
   <a href="#87884" class="date">28-Dec-2008 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/*---------------------------------------------------------
<br />
* my own home made easy object sort, which
<br />
* i cannot find anywhere on the net
<br />
* at all, tut. i can find only complicated ones,
<br />
* which brings me a headache.
<br />
*
<br />
* You can enhance it to return all sorts of error
<br />
* conditions if you wish,
<br />
* i need nothing but a false return upon failure to sort,
<br />
* so that is the only error i have here
<br />
*
<br />
* Example usage:
<br />
*
<br />
* INPUT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &nbsp;&nbsp; $objects_array
<br />
// an array of objects for sorting
<br />

<br />
* PARAMETERS&nbsp; &nbsp; -&nbsp; &nbsp; &nbsp;&nbsp; property
<br />
// the property of the object to be sorted
<br />

<br />
* OUTPUT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&nbsp; &nbsp; &nbsp;&nbsp; $engine
<br />
// an engine object created by new,
<br />
// with your arrays of objects sorted according to your
<br />
// selected property
<br />
//( the sorting is done upon sort object creation )
<br />
*
<br />
* Code Examples
<br />
*
<br />
* $engine = new objSorter($objects_array);
<br />
// sorts on FIRST property -&nbsp; default
<br />

<br />
* $engine = new objSorter($objects_array,'property');
<br />
// sort on ANY specific property
<br />
*--------------------------------------------------------*/
<br />

<br />
</span><span class="keyword">class </span><span class="default">objSorter 
<br />
</span><span class="keyword">{
<br />
var </span><span class="default">$property</span><span class="keyword">;
<br />
var </span><span class="default">$sorted</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="default">$property</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sample&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$objects_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vars&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$sample</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$property</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$sample</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">)) 
<br />
</span><span class="comment">// make sure requested property is correct for the object
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">{&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">property </span><span class="keyword">= </span><span class="default">$property</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">'_compare'</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sorted&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$property</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)&nbsp; &nbsp;&nbsp; = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$sample</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">property&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$property</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">'_compare'</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sorted&nbsp; &nbsp; </span><span class="keyword">= (</span><span class="default">$objects_array</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">_compare</span><span class="keyword">(</span><span class="default">$apple</span><span class="keyword">, </span><span class="default">$orange</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$property&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">property</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$apple</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">== </span><span class="default">$orange</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$apple</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">&lt; </span><span class="default">$orange</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
} </span><span class="comment">// end class
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
USAGE EXAMPLE
<br />
DUMP ORIGINAL
<br />
user Object ( [name] =&gt; Yunihe Jopoba [age] =&gt; 27 [richness] =&gt; a?? 899,970 )
<br />
user Object ( [name] =&gt; Janirevi Fakejorumoa [age] =&gt; 19 [richness] =&gt; a?? 219,078 )
<br />
user Object ( [name] =&gt; Korejowi Mezede [age] =&gt; 95 [richness] =&gt; a?? 3,272 )
<br />
user Object ( [name] =&gt; Nugoaivu Jongyi [age] =&gt; 84 [richness] =&gt; a?? 94,853 )
<br />
user Object ( [name] =&gt; Cepomase Buaesukoyua [age] =&gt; 32 [richness] =&gt; a?? 677,180 )
<br />
user Object ( [name] =&gt; Vejosehona Auva [age] =&gt; 20 [richness] =&gt; a?? 144,540 )
<br />
user Object ( [name] =&gt; Fewame Wojuvuzo [age] =&gt; 69 [richness] =&gt; a?? 198,231 )
<br />
user Object ( [name] =&gt; Risuku Zagedobu [age] =&gt; 48 [richness] =&gt; a?? 763,860 )
<br />
user Object ( [name] =&gt; Fazurada Aayu [age] =&gt; 16 [richness] =&gt; a?? 302,352 )
<br />

<br />
SORTED by age
<br />

<br />
<span class="default">&lt;?php
<br />
$objects&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="string">'age'</span><span class="keyword">);
<br />
if (</span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">)
<br />
{
<br />
</span><span class="default">$objects_array&nbsp; </span><span class="keyword">= </span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">;
<br />
foreach (</span><span class="default">$objects_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$object</span><span class="keyword">) { </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
user Object ( [name] =&gt; Fazurada Aayu [age] =&gt; 16 [richness] =&gt; a?? 302,352 )
<br />
user Object ( [name] =&gt; Janirevi Fakejorumoa [age] =&gt; 19 [richness] =&gt; a?? 219,078 )
<br />
user Object ( [name] =&gt; Vejosehona Auva [age] =&gt; 20 [richness] =&gt; a?? 144,540 )
<br />
user Object ( [name] =&gt; Yunihe Jopoba [age] =&gt; 27 [richness] =&gt; a?? 899,970 )
<br />
user Object ( [name] =&gt; Cepomase Buaesukoyua [age] =&gt; 32 [richness] =&gt; a?? 677,180 )
<br />
user Object ( [name] =&gt; Risuku Zagedobu [age] =&gt; 48 [richness] =&gt; a?? 763,860 )
<br />
user Object ( [name] =&gt; Fewame Wojuvuzo [age] =&gt; 69 [richness] =&gt; a?? 198,231 )
<br />
user Object ( [name] =&gt; Nugoaivu Jongyi [age] =&gt; 84 [richness] =&gt; a?? 94,853 )
<br />
user Object ( [name] =&gt; Korejowi Mezede [age] =&gt; 95 [richness] =&gt; a?? 3,272 )
<br />

<br />
SORTED by richness
<br />

<br />
<span class="default">&lt;?php
<br />
$objects&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="string">'richness'</span><span class="keyword">);
<br />
if (</span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">)
<br />
{
<br />
</span><span class="default">$objects_array&nbsp; </span><span class="keyword">= </span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">;
<br />
foreach (</span><span class="default">$objects_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$object</span><span class="keyword">) { </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
user Object ( [name] =&gt; Vejosehona Auva [age] =&gt; 20 [richness] =&gt; a?? 144,540 )
<br />
user Object ( [name] =&gt; Fewame Wojuvuzo [age] =&gt; 69 [richness] =&gt; a?? 198,231 )
<br />
user Object ( [name] =&gt; Janirevi Fakejorumoa [age] =&gt; 19 [richness] =&gt; a?? 219,078 )
<br />
user Object ( [name] =&gt; Korejowi Mezede [age] =&gt; 95 [richness] =&gt; a?? 3,272 )
<br />
user Object ( [name] =&gt; Fazurada Aayu [age] =&gt; 16 [richness] =&gt; a?? 302,352 )
<br />
user Object ( [name] =&gt; Cepomase Buaesukoyua [age] =&gt; 32 [richness] =&gt; a?? 677,180 )
<br />
user Object ( [name] =&gt; Risuku Zagedobu [age] =&gt; 48 [richness] =&gt; a?? 763,860 )
<br />
user Object ( [name] =&gt; Yunihe Jopoba [age] =&gt; 27 [richness] =&gt; a?? 899,970 )
<br />
user Object ( [name] =&gt; Nugoaivu Jongyi [age] =&gt; 84 [richness] =&gt; a?? 94,853 )
<br />

<br />
Simulated wrong property request ( dumb property )
<br />

<br />
<span class="default">&lt;?php
<br />
$objects&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">ObjSorter</span><span class="keyword">(</span><span class="default">$objects_array</span><span class="keyword">,</span><span class="string">'dumb property'</span><span class="keyword">);
<br />
if (</span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">)
<br />
{
<br />
</span><span class="default">$objects_array&nbsp; </span><span class="keyword">= </span><span class="default">$objects</span><span class="keyword">-&gt;</span><span class="default">sorted</span><span class="keyword">;
<br />
foreach (</span><span class="default">$objects_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$object</span><span class="keyword">) { </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">; }
<br />
}
<br />
else echo </span><span class="string">'DUMB ERROR'</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
DUMB ERROR</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83989""></a>
  <div class="note">
   <strong class="user">drorasta</strong>
   <a href="#83989" class="date">22-Jun-2008 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's how you can usort() a multidimensional array (like in example #2 above) within a class:
<br />

<br />
<span class="default">&lt;?php usort</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">, array(</span><span class="string">"className"</span><span class="keyword">, </span><span class="string">"cmp"</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78984""></a>
  <div class="note">
   <strong class="user">Sid_M</strong>
   <a href="#78984" class="date">05-Nov-2007 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The sample function for having the sort function be a class method has a comment identifying the sorting function as static, however the function does not have the static keyword. In PHP 5 (at least as configured on my server), usort will fail, identifying the method as non-static. Preceding the function keyword with the static keyword fixed the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70423""></a>
  <div class="note">
   <strong class="user">svenxy AT nospam gmx net</strong>
   <a href="#70423" class="date">16-Oct-2006 01:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This will sort subnets correctly:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$zones </span><span class="keyword">= <br />
array(</span><span class="string">'192.168.11'</span><span class="keyword">,<br />
</span><span class="string">'192.169.12'</span><span class="keyword">,<br />
</span><span class="string">'192.168.13'</span><span class="keyword">,<br />
</span><span class="string">'192.167.14'</span><span class="keyword">,<br />
</span><span class="string">'192.168.15'</span><span class="keyword">,<br />
</span><span class="string">'122.168.16'</span><span class="keyword">,<br />
</span><span class="string">'192.168.17'<br />
</span><span class="keyword">);<br />
<br />
function </span><span class="default">sort_subnets </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a_arr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b_arr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">) as </span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$a_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &lt; </span><span class="default">$b_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif ( </span><span class="default">$a_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] &gt; </span><span class="default">$b_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$zones</span><span class="keyword">, </span><span class="string">'sort_subnets'</span><span class="keyword">);<br />
print </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$zones</span><span class="keyword">);<br />
print </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64034""></a>
  <div class="note">
   <strong class="user">stephen in koto</strong>
   <a href="#64034" class="date">05-Apr-2006 10:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For using usort inside a method in an object, where the callback sort method is in the same object, this works:
<br />

<br />
<span class="default">&lt;?php usort</span><span class="keyword">(</span><span class="default">$arr_to_sort</span><span class="keyword">, array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"sort_terms_by_criteria"</span><span class="keyword">)); </span><span class="default">?&gt;
<br />
</span>
<br />
If you wish to keep elements in their original or reverse order if they are the same length, just don't return zero for items that compare the same. Return a 1 or -1, as appropriate.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60777""></a>
  <div class="note">
   <strong class="user">sydney at totoche dot org</strong>
   <a href="#60777" class="date">16-Jan-2006 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instead of doing&nbsp; :
<br />

<br />
<span class="default">&lt;?php $strc </span><span class="keyword">= </span><span class="default">strcmp</span><span class="keyword">( </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">]), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">]) ); </span><span class="default">?&gt;
<br />
</span>
<br />
you could do this : 
<br />

<br />
<span class="default">&lt;?php $strc </span><span class="keyword">= </span><span class="default">strcasecmp</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$f</span><span class="keyword">] ); </span><span class="default">?&gt;
<br />
</span>
<br />
which is more efficient and is does case insensitive comparison according to the current locale.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54957""></a>
  <div class="note">
   <strong class="user">Jeremy Swinborne</strong>
   <a href="#54957" class="date">20-Jul-2005 01:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I query a DB I usually put my record set inside of a multi-dimentional array.&nbsp; I finally wrote a program that will allow you to sort your record set by column after you put it in an array.
<br />

<br />
<span class="default">&lt;?php
<br />
$test </span><span class="keyword">= array();
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">'jeremy'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'email'</span><span class="keyword">] = </span><span class="string">'lala@example.com'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'phone'</span><span class="keyword">] = </span><span class="string">'123-123-1234'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'trick'</span><span class="keyword">] = </span><span class="string">'mezopia'</span><span class="keyword">;
<br />

<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">'Amanda'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'email'</span><span class="keyword">] = </span><span class="string">'hot@example.com'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'phone'</span><span class="keyword">] = </span><span class="string">'123-123-1235'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'trick'</span><span class="keyword">] = </span><span class="string">'youarecool'</span><span class="keyword">;
<br />

<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">'john'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'email'</span><span class="keyword">] = </span><span class="string">'wowee@example.com'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'phone'</span><span class="keyword">] = </span><span class="string">'123-123-3333'</span><span class="keyword">;
<br />
</span><span class="default">$test</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'trick'</span><span class="keyword">] = </span><span class="string">'goneinanhour'</span><span class="keyword">;
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">columnSort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">));
<br />

<br />
function </span><span class="default">columnSort</span><span class="keyword">(</span><span class="default">$unsorted</span><span class="keyword">, </span><span class="default">$column</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sorted </span><span class="keyword">= </span><span class="default">$unsorted</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$sorted</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="default">$column</span><span class="keyword">] &gt; </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">][</span><span class="default">$column</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sorted</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54901""></a>
  <div class="note">
   <strong class="user">dmhouse at gmail dot com</strong>
   <a href="#54901" class="date">19-Jul-2005 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The easiest way to compare two integers is just to take the second away from the first. For example, say you wanted to sort by an integer property of an object. Your comparison function would look like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">compare_counts</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">count </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">count</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This works because you don't necessarily have to return -1, 0 or 1, the manual states any integer less than, equal to or greater than 0 is OK.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42535""></a>
  <div class="note">
   <strong class="user">Raveler at telenet dot be</strong>
   <a href="#42535" class="date">20-May-2004 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The array_alternate_multisort function written by robert below doesn't work. There are several bugs in the code and it doesn't work when sorting by multiple keys because the order of the first key isn't taken into account when sorting by the second key and so on. Also, because robert uses strcasecmp the algorithm doesn't work properly with floats or other variable types. Here's the improved version:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">SortArray</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arguments </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$c </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">); </span><span class="default">$c </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">], array(</span><span class="string">"ASC"</span><span class="keyword">, </span><span class="string">"DESC"</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'if ($a["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] != $b["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"]) {'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="string">"ASC"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return ($a["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] &lt; $b["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] ? -1 : 1); }'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return ($a["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] &lt; $b["'</span><span class="keyword">.</span><span class="default">$arguments</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">].</span><span class="string">'"] ? 1 : -1); }'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">.= </span><span class="string">'return 0;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$compare </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$compare</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38827""></a>
  <div class="note">
   <strong class="user">sreid at sea-to-sky dot net</strong>
   <a href="#38827" class="date">07-Jan-2004 08:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As the manual says, "If two members compare as equal, their order in the sorted array is undefined." This means that the sort used is not "stable" and may change the order of elements that compare equal.
<br />

<br />
Sometimes you really do need a stable sort. For example, if you sort a list by one field, then sort it again by another field, but don't want to lose the ordering from the previous field. In that case it is better to use usort with a comparison function that takes both fields into account, but if you can't do that then use the function below. It is a merge sort, which is guaranteed O(n*log(n)) complexity, which means it stays reasonably fast even when you use larger lists (unlike bubblesort and insertion sort, which are O(n^2)). 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">mergesort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$cmp_function </span><span class="keyword">= </span><span class="string">'strcmp'</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Arrays of size &lt; 2 require no action.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) &lt; </span><span class="default">2</span><span class="keyword">) return;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Split the array in half
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$halfway </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array1 </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$halfway</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$halfway</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Recurse to sort the two halves
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mergesort</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$cmp_function</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">mergesort</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">, </span><span class="default">$cmp_function</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// If all of $array1 is &lt;= all of $array2, just append them.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$cmp_function</span><span class="keyword">, </span><span class="default">end</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">), </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &lt; </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Merge the two sorted arrays into a single sorted array
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ptr1 </span><span class="keyword">= </span><span class="default">$ptr2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$ptr1 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">) &amp;&amp; </span><span class="default">$ptr2 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$cmp_function</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$ptr1</span><span class="keyword">], </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$ptr2</span><span class="keyword">]) &lt; </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$ptr1</span><span class="keyword">++];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$ptr2</span><span class="keyword">++];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Merge the remainder
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$ptr1 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">)) </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$ptr1</span><span class="keyword">++];
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$ptr2 </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">)) </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$ptr2</span><span class="keyword">++];
<br />
&nbsp;&nbsp;&nbsp; return;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30766""></a>
  <div class="note">
   <strong class="user">skrebbel at operamail dot com</strong>
   <a href="#30766" class="date">27-Mar-2003 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's another recursive multisort, however a clean and fast one that is class-based (but works as well outside classes) and does not uglify your global namespace at all. note that strnatcmp is used, but one could use something else of course.
<br />

<br />
btw, for arrays in which the rows/columns are 'swapped', use array_multisort().
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">Banana </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$aData</span><span class="keyword">;</span><span class="comment">//the array we want to sort.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">var </span><span class="default">$aSortkeys</span><span class="keyword">;</span><span class="comment">//the order in which we want the array to be sorted.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">_sortcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">strnatcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]],</span><span class="default">$b</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$r</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_sortcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">sort</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aSortkeys</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aData</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"_sortcmp"</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">$B </span><span class="keyword">= new </span><span class="default">Banana</span><span class="keyword">;
<br />
</span><span class="default">$B</span><span class="keyword">-&gt;</span><span class="default">aData </span><span class="keyword">= array(
<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"hank"</span><span class="keyword">, </span><span class="string">"headsize" </span><span class="keyword">=&gt; </span><span class="string">"big"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">32</span><span class="keyword">),
<br />
&nbsp;&nbsp;&nbsp; array(</span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"frank"</span><span class="keyword">, </span><span class="string">"headsize" </span><span class="keyword">=&gt; </span><span class="string">"huge"</span><span class="keyword">, </span><span class="string">"age" </span><span class="keyword">=&gt; </span><span class="default">36</span><span class="keyword">)
<br />
);
<br />
</span><span class="default">$B</span><span class="keyword">-&gt;</span><span class="default">aSortkeys </span><span class="keyword">= array(</span><span class="string">"age"</span><span class="keyword">,</span><span class="string">"name"</span><span class="keyword">);
<br />
</span><span class="default">$B</span><span class="keyword">-&gt;</span><span class="default">sort</span><span class="keyword">();
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>sorry for the ugly indenting, but i couldn't get it any better in this note adder thing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25360""></a>
  <div class="note">
   <strong class="user">mkr at binarywerks dot dk</strong>
   <a href="#25360" class="date">20-Sep-2002 09:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to sort an array according to another array acting as a priority list, you can use this function.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">listcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)
<br />
{
<br />
&nbsp; global </span><span class="default">$order</span><span class="keyword">;
<br />

<br />
&nbsp; foreach(</span><span class="default">$order </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">==</span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$b</span><span class="keyword">==</span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$order</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"first"</span><span class="keyword">;
<br />
</span><span class="default">$order</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br />
</span><span class="default">$order</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"third"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"first"</span><span class="keyword">;
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"third"</span><span class="keyword">;
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="string">"fourth"</span><span class="keyword">;
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] = </span><span class="string">"first"</span><span class="keyword">;
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] = </span><span class="string">"second"</span><span class="keyword">;
<br />

<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">"listcmp"</span><span class="keyword">);
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23305""></a>
  <div class="note">
   <strong class="user">prozac at iguanasoft dot com</strong>
   <a href="#23305" class="date">15-Jul-2002 05:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple example of converting a timestamp date("U") into a date. This sorts by that day and then by string value alphabetically.
<br />

<br />
I hope it saves someone some time... Happy PHP'in!
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//data to sort
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"2025731470"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"2025731450"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"1025731456"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">"page_id"</span><span class="keyword">] = </span><span class="string">"1025731460"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"larry"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"alvin"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"garth"</span><span class="keyword">;
<br />
</span><span class="default">$shared</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">"username"</span><span class="keyword">] = </span><span class="string">"harvy"</span><span class="keyword">;
<br />

<br />
</span><span class="comment">//function to convert timestamp to date
<br />
</span><span class="keyword">function </span><span class="default">convert_timestamp</span><span class="keyword">(</span><span class="default">$timestamp</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$limit</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$limiting</span><span class="keyword">=</span><span class="default">$timestamp</span><span class="keyword">-</span><span class="default">$limit</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">date </span><span class="keyword">(</span><span class="string">"Ymd"</span><span class="keyword">, </span><span class="default">mktime </span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$limiting</span><span class="keyword">));
<br />
}
<br />
</span><span class="comment">//comparison function
<br />
</span><span class="keyword">function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l</span><span class="keyword">=</span><span class="default">convert_timestamp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"page_id"</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$k</span><span class="keyword">=</span><span class="default">convert_timestamp</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">"page_id"</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$k</span><span class="keyword">==</span><span class="default">$l</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"username"</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"username"</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="comment">//sort array
<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$shared</span><span class="keyword">, </span><span class="string">"cmp"</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//display sorted info
<br />
</span><span class="keyword">while (list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$shared</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"\$shared[</span><span class="default">$key</span><span class="string">]: "</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"page_id"</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">" username: "</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"username"</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;break_tag&gt;"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will output:
<br />
$shared[0]: 2025731450&nbsp;&nbsp; username: alvin
<br />
$shared[1]: 2025731470&nbsp;&nbsp; username: larry
<br />
$shared[2]: 1025731456&nbsp;&nbsp; username: garth
<br />
$shared[3]: 1025731460&nbsp;&nbsp; username: harvy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22849""></a>
  <div class="note">
   <strong class="user">alex at netflex dot nl</strong>
   <a href="#22849" class="date">02-Jul-2002 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function will sort on more then one values, test and have fun<br />
<br />
&lt;pre&gt;<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">3</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">2</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">8</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">7</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">][</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">3</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"name"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'sort'</span><span class="keyword">] = </span><span class="string">"ASC"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] = </span><span class="default">TRUE</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="string">"id"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$sort_array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] = </span><span class="default">FALSE</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">sortx</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$sort_array</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp; function </span><span class="default">sortx</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$sort </span><span class="keyword">= array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while (list(</span><span class="default">$key</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$sort</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">])&amp;&amp;(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] == </span><span class="default">TRUE</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'if (strtolower($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"])&lt;&gt;strtolower($b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"])) { return (strtolower($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]) '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'if ($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]&lt;&gt;$b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]) { return ($a["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"] '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'sort'</span><span class="keyword">])&amp;&amp;(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'sort'</span><span class="keyword">] == </span><span class="string">"DESC"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'&lt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">'&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">])&amp;&amp;(</span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'case'</span><span class="keyword">] == </span><span class="default">TRUE</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">' strtolower($b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"])) ? 1 : -1; } else'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">' $b["' </span><span class="keyword">. </span><span class="default">$sort</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">'"]) ? 1 : -1; } else'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">.= </span><span class="string">' { return 0; }'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a, $b'</span><span class="keyword">, </span><span class="default">$function</span><span class="keyword">));<br />
&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span>&lt;/pre&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15030""></a>
  <div class="note">
   <strong class="user">josh at wintelcom dot net</strong>
   <a href="#15030" class="date">24-Aug-2001 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This lets you sort an associative multi-dimensional array by multiple key/field names.&nbsp; Much similiar to the SQL clause ORDER BY.&nbsp; Enjoy.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Populate this array with your values...
<br />
&nbsp;&nbsp;&nbsp; // Below is the SQL equivalent of
<br />
&nbsp;&nbsp;&nbsp; // select * from blah ORDER BY date desc, type asc, name asc
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vals </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'date' </span><span class="keyword">=&gt; </span><span class="string">'d'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'type' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'a'
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; while(list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$vals</span><span class="keyword">)) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$val </span><span class="keyword">== </span><span class="string">"d"</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$val </span><span class="keyword">== </span><span class="string">"a"</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">"</span><span class="default">$key</span><span class="string">"</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="14104""></a>
  <div class="note">
   <strong class="user">franky at iname dot com</strong>
   <a href="#14104" class="date">17-Jul-2001 03:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For sort multi-array by specific index
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">cmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)
<br />
{&nbsp;&nbsp; 
<br />
&nbsp;global </span><span class="default">$w_o</span><span class="keyword">;
<br />
&nbsp;if (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">]) return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;return (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$w_o</span><span class="keyword">]) ? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br />
}
<br />
</span><span class="comment"># the index is the second element of 
<br />
# each row
<br />

<br />
</span><span class="default">$w_o </span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$my_arry_info</span><span class="keyword">,</span><span class="string">"cmp"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12047""></a>
  <div class="note">
   <strong class="user">bo at erichsen dot com</strong>
   <a href="#12047" class="date">20-Mar-2001 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when using usort to refer to a function inside a class i have succesfully used:
<br />

<br />
<span class="default">&lt;?php usort</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">,array(</span><span class="default">$this</span><span class="keyword">,</span><span class="string">"cmp"</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="8587""></a>
  <div class="note">
   <strong class="user">derek at luddite dot net</strong>
   <a href="#8587" class="date">18-Sep-2000 11:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Needed a date sort and I didn't know if one was available so I wrote one. Maybe it'll help someone:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">DateSort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">=</span><span class="string">"-"</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {&nbsp; </span><span class="comment">//Convert into dates and compare
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">list(</span><span class="default">$am</span><span class="keyword">,</span><span class="default">$ad</span><span class="keyword">,</span><span class="default">$ay</span><span class="keyword">)=</span><span class="default">split</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$bm</span><span class="keyword">,</span><span class="default">$bd</span><span class="keyword">,</span><span class="default">$by</span><span class="keyword">)=</span><span class="default">split</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$am</span><span class="keyword">,</span><span class="default">$ad</span><span class="keyword">,</span><span class="default">$ay</span><span class="keyword">) &lt; </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$bm</span><span class="keyword">,</span><span class="default">$bd</span><span class="keyword">,</span><span class="default">$by</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
$d is the delimeter</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
