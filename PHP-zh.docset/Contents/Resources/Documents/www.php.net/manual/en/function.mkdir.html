<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>新建目录</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.lstat.html">? lstat</a></li>
      <li style="float: right;"><a href="function.move-uploaded-file.html">move_uploaded_file ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.filesystem.html">文件系统函数</a></li>
    <li>新建目录</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mkdir" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mkdir</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mkdir</span> &mdash; <span class="dc-title">新建目录</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.mkdir-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mkdir</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$pathname</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = 0777</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">bool</span> <code class="parameter">$recursive</code><span class="initializer"> = <strong><code>false</code></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">resource</span> <code class="parameter">$context</code><span class="initializer"> = ?</span></span><br>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   尝试新建一个由 pathname 指定的目录。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mkdir-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">pathname</code></dt>

     <dd>

      <p class="para">
       目录的路径。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       默认的 mode 是 0777，意味着最大可能的访问权。有关 mode 的更多信息请阅读
   <span class="function"><a href="function.chmod.html" class="function">chmod()</a></span> 页面。
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       <p class="para">
        <code class="parameter">mode</code> 在 Windows 下被忽略。
       </p>
      </p></blockquote>
      <p class="para">
       注意也许想用八进制数指定模式，也就是说该数应以零打头。模式也会被当前的 umask 修改，可以用 <span class="function"><a href="function.umask.html" class="function">umask()</a></span> 来改变。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">recursive</code></dt>

     <dd>

      <p class="para">
       允许递归创建由  
       <code class="parameter">pathname</code> 所指定的多级嵌套目录。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">context</code></dt>

     <dd>

      <p class="para"><a href="stream.contexts.html" class="link">上下文流（context stream）</a>
<span class="type">resource</span>。</p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mkdir-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mkdir-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2185">
    <p><strong>Example #1 <span class="function"><strong>mkdir()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />mkdir</span><span style="color: #007700">(</span><span style="color: #DD0000">"/path/to/my/dir"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0700</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2186">
    <p><strong>Example #2 通过 <code class="parameter">recursive</code> 参数使用 <span class="function"><strong>mkdir()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Desired&nbsp;folder&nbsp;structure<br /></span><span style="color: #0000BB">$structure&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'./depth1/depth2/depth3/'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;To&nbsp;create&nbsp;the&nbsp;nested&nbsp;structure,&nbsp;the&nbsp;$recursive&nbsp;parameter&nbsp;<br />//&nbsp;to&nbsp;mkdir()&nbsp;must&nbsp;be&nbsp;specified.<br /><br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">mkdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$structure</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0777</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Failed&nbsp;to&nbsp;create&nbsp;folders...'</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;...<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.mkdir-errors">
  <h3 class="title">错误／异常</h3>
  <p class="para">
   目录已存在时，产生 <strong><code>E_WARNING</code></strong>错误。
  </p>
  <p class="para">
   如果因为权限问题无法创建目录，导致 <strong><code>E_WARNING</code></strong>错误。
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.mkdir-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-dir.html" class="function" rel="rdfs-seeAlso">is_dir()</a> - 判断给定文件名是否是一个目录</span></li>    
    <li class="member"><span class="function"><a href="function.rmdir.html" class="function" rel="rdfs-seeAlso">rmdir()</a> - 删除目录</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="102823""></a>
  <div class="note">
   <strong class="user">julius - grantzau - c-o-m</strong>
   <a href="#102823" class="date">08-Mar-2011 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember to use clearstatcache()<br />
<br />
... when working with filesystem functions.<br />
<br />
Otherwise, as an example, you can get an error creating a folder (using mkdir) just after deleting it (using rmdir).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96990""></a>
  <div class="note">
   <strong class="user">jack dot sleight at gmail dot com</strong>
   <a href="#96990" class="date">26-Mar-2010 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using the recursive parameter bear in mind that if you're using chmod() after mkdir() to set the mode without it being modified by the value of uchar() you need to call chmod() on all created directories. ie:<br />
<br />
<span class="default">&lt;?php<br />
mkdir</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">chmod</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span> <br />
<br />
May result in "/test1/test2" having a mode of 0777 but "/test1" still having a mode of 0755 from the mkdir() call. You'd need to do:<br />
<br />
<span class="default">&lt;?php<br />
mkdir</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">chmod</span><span class="keyword">(</span><span class="string">'/test1'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br />
</span><span class="default">chmod</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50568""></a>
  <div class="note">
   <strong class="user">Protik Mukherjee</strong>
   <a href="#50568" class="date">03-Mar-2005 09:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
mkdir, file rw, permission related notes for Fedora 3////<br />
If you are using Fedora 3 and are facing permission problems, better check if SElinux is enabled on ur system. It add an additional layer of security and as a result PHP cant write to the folder eventhough it has 777 permissions. It took me almost a week to deal with this!<br />
<br />
If you are not sure google for SElinux or 'disabling SELinux' and it may be the cure! Best of luck!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="1207""></a>
  <div class="note">
   <strong class="user">aulbach at unter dot franken dot de</strong>
   <a href="#1207" class="date">22-Jul-1999 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is an annotation from Stig Bakken:
<br />

<br />
The mode on your directory is affected by your current umask.&nbsp; It will end
<br />
up having (&lt;mkdir-mode&gt; and (not &lt;umask&gt;)).&nbsp; If you want to create one
<br />
that is publicly readable, do something like this:
<br />

<br />
<span class="default">&lt;?php
<br />
$oldumask </span><span class="keyword">= </span><span class="default">umask</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);
<br />
</span><span class="default">mkdir</span><span class="keyword">(</span><span class="string">'mydir'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">); </span><span class="comment">// or even 01777 so you get the sticky bit set
<br />
</span><span class="default">umask</span><span class="keyword">(</span><span class="default">$oldumask</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
