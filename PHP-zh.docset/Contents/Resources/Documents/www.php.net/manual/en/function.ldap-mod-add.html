<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Add attribute values to current attributes</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ldap-mod_add-ext.html">? ldap_mod_add_ext</a></li>
      <li style="float: right;"><a href="function.ldap-mod_del-ext.html">ldap_mod_del_ext ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ldap.html">LDAP 函数</a></li>
    <li>Add attribute values to current attributes</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ldap-mod-add" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ldap_mod_add</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">ldap_mod_add</span> &mdash; <span class="dc-title">Add attribute values to current attributes</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.ldap-mod-add-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ldap_mod_add</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="class.ldap-connection.html" class="type LDAP\Connection">LDAP\Connection</a></span> <code class="parameter">$ldap</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$dn</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">array</span> <code class="parameter">$entry</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">?</span><span class="type"><span class="type">array</span><span class="type"></span></span> <code class="parameter">$controls</code><span class="initializer"> = <strong><code>null</code></strong></span></span><br>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Adds one or more attribute values to the specified <code class="parameter">dn</code>.
   To add a whole new object see <span class="function"><a href="function.ldap-add.html" class="function">ldap_add()</a></span> function.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.ldap-mod-add-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">ldap</code></dt>

     <dd>

      <p class="para">
       通过 <span class="function"><a href="function.ldap-connect.html" class="function">ldap_connect()</a></span> 返回的 <span class="classname"><a href="class.ldap-connection.html" class="classname">LDAP\Connection</a></span> 实例。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">dn</code></dt>

     <dd>

      <p class="para">
       The distinguished name of an LDAP entity.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">entry</code></dt>

     <dd>

      <p class="para">
       An associative array listing the attirbute values to add. If an attribute was not existing yet it will be added. If an attribute is existing you can only add values to it if it supports multiple values.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">controls</code></dt>

     <dd>

      <p class="para">
       Array of <a href="ldap.controls.html" class="link">LDAP Controls</a> to send with the request.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.ldap-mod-add-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>true</code></strong>， 或者在失败时返回 <strong><code>false</code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.ldap-mod-add-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
 <td>8.1.0</td>
 <td>
  现在 <code class="parameter">ldap</code> 参数接受 <span class="classname"><a href="class.ldap-connection.html" class="classname">LDAP\Connection</a></span>
  实例，之前接受 <a href="language.types.resource.html" class="link">资源(resource)</a>。
 </td>
</tr>

      <tr>
<td>8.0.0</td>
<td>
  <code class="parameter">controls</code> is nullable now; previously, it defaulted to <code class="literal">[]</code>.
</td>
</tr>

      <tr>
       <td>7.3.0</td>
       <td>
        Support for <code class="parameter">controls</code> added
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.ldap-mod-add-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.ldap-mod-add-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ldap-mod_add-ext.html" class="function" rel="rdfs-seeAlso">ldap_mod_add_ext()</a> - Add attribute values to current attributes</span></li>
    <li class="member"><span class="function"><a href="function.ldap-mod-del.html" class="function" rel="rdfs-seeAlso">ldap_mod_del()</a> - Delete attribute values from current attributes</span></li>
    <li class="member"><span class="function"><a href="function.ldap-mod-replace.html" class="function" rel="rdfs-seeAlso">ldap_mod_replace()</a> - Replace attribute values with new ones</span></li>
    <li class="member"><span class="function"><a href="function.ldap-modify-batch.html" class="function" rel="rdfs-seeAlso">ldap_modify_batch()</a> - Batch and execute modifications on an LDAP entry</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113619""></a>
  <div class="note">
   <strong class="user">bart-holland at wedefo dot nl</strong>
   <a href="#113619" class="date">06-Nov-2013 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding a user to a group in Apple's OpenDirectory goes as follows: <br />
<br />
<span class="default">&lt;?php<br />
<br />
$dn </span><span class="keyword">= </span><span class="string">"cn=groupname,cn=groups,dc=example,dc=com"</span><span class="keyword">;<br />
</span><span class="default">$entry</span><span class="keyword">[</span><span class="string">'memberuid'</span><span class="keyword">] = </span><span class="string">"username"</span><span class="keyword">;<br />
<br />
</span><span class="default">ldap_mod_add</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">, </span><span class="default">$dn</span><span class="keyword">, </span><span class="default">$entry</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54821""></a>
  <div class="note">
   <strong class="user">theiderich AT laweekly dot com</strong>
   <a href="#54821" class="date">15-Jul-2005 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When adding/editing attributes for a user, the 'memberof' attribute is a special case.&nbsp; The memberOf attribute is not an accessible attribute of the user schema. To add someone to a group, you have to add the user in the group, and not the group in the user. You can do this by accessing the group attribute 'member':<br />
<br />
<span class="default">&lt;?php<br />
<br />
$group_name </span><span class="keyword">= </span><span class="string">"CN=MyGroup,OU=Groups,DC=example,DC=com"</span><span class="keyword">;<br />
</span><span class="default">$group_info</span><span class="keyword">[</span><span class="string">'member'</span><span class="keyword">] = </span><span class="default">$dn</span><span class="keyword">; </span><span class="comment">// User's DN is added to group's 'member' array<br />
</span><span class="default">ldap_mod_add</span><span class="keyword">(</span><span class="default">$connect</span><span class="keyword">,</span><span class="default">$group_name</span><span class="keyword">,</span><span class="default">$group_info</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29852""></a>
  <div class="note">
   <strong class="user">Claudio Lente &lt;nelchael at ig dot com dot br&gt;</strong>
   <a href="#29852" class="date">26-Feb-2003 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using PHP 4.2.3 with IIS 5 and Win2k Server. My confs are:<br />
<br />
$ldap_srvr = 'servername' ;<br />
$ldap_port = 389;<br />
$ldap_con = ldap_connect($ldap_srvr, $ldap_port);<br />
$ldap_rdn&nbsp; = "username";<br />
$ldap_pwd = "__password__"; <br />
<br />
$ldap_vbind = ldap_bind($ldap_con, $ldap_rdn, $ldap_pwd);<br />
<br />
$base_dn= 'CN=username,CN=Users,DC=domain,DC=org,DC=us<br />
' ;<br />
$ldap_filter= 'objectClass=*';<br />
<br />
$info['mail']='username@domain.org.us';<br />
<br />
ldap_mod_add($ldap_con, $base_dn, $info);<br />
ldap_add($ldap_con, $base_dn, $info);<br />
<br />
this generate an error: <br />
- Warning: LDAP: modify operation could not be completed. in <br />
<br />
ldap_modify($ldap_con, $base_dn, $info);<br />
<br />
this function corretly.<br />
<br />
It?s all.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15189""></a>
  <div class="note">
   <strong class="user">JoshuaStarr at aelana dot com</strong>
   <a href="#15189" class="date">30-Aug-2001 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add a new attribute with a single value:
<br />

<br />
$entry[mail] = "newmail@aelana.com";
<br />
$results = ldap_mod_add($ldapConnID, $dn, $entry);
<br />

<br />
To add a new attribute with multiple values:
<br />

<br />
$entry[mail][] = "newmail@aelana.com";
<br />
$entry[mail][] = "altnewmail@aelana.com";
<br />
$results = ldap_mod_add($ldapConnID, $dn, $entry);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
