<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>正则表达式匹配</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ereg-replace.html">? ereg_replace</a></li>
      <li style="float: right;"><a href="function.eregi-replace.html">eregi_replace ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.regex.html">POSIX 正则表达式函数</a></li>
    <li>正则表达式匹配</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ereg" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ereg</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">ereg</span> &mdash; <span class="dc-title">正则表达式匹配</span></p>

 </div>
 <div class="refsect1 unknown-unknown-seealsq" id="refsect1-function.ereg-unknown-unknown-seealsq">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ereg</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$regs</code></span>
  ] ) : <span class="type">int</span></div>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    使用 Perl 兼容正则表达式语法的 <span class="function"><a href="function.preg-match.html" class="function">preg_match()</a></span>
    函数通常是比 <span class="function"><strong>ereg()</strong></span> 更快的替代方案。
   </p>
  </p></blockquote>
  <p class="simpara">
   以区分大小写的方式在 <code class="parameter">string</code>
   中寻找与给定的正则表达式 <code class="parameter">pattern</code> 所匹配的子串。
  </p>
  <p class="simpara">
   如果找到与 <code class="parameter">pattern</code>
   中圆括号内的子模式相匹配的子串并且函数调用给出了第三个参数
   <code class="parameter">regs</code>，则匹配项将被存入
   <code class="parameter">regs</code> 数组中。$regs[1]
   包含第一个左圆括号开始的子串，$regs[2]
   包含第二个子串，以此类推。$regs[0] 包含整个匹配的字符串。
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    直到 PHP 4.1.0 为止，<var class="varname"><var class="varname">$regs</var></var>
    将被填充为正好十个单元，即使实际匹配的子串少于十个。这并不影响
    <span class="function"><strong>ereg()</strong></span> 匹配更多子串的能力。如果没有找到匹配，则
    <em>$regs</em> 不会被 <span class="function"><strong>ereg()</strong></span> 更改。
   </span>
  </p></blockquote>
  <p class="simpara">
   如果在 <code class="parameter">string</code>
   中找到 <code class="parameter">pattern</code> 模式的匹配则返回
   所匹配字符串的长度，如果没有找到匹配或出错则返回 <strong><code>FALSE</code></strong>。如果没有传递入可选参数
   <code class="parameter">regs</code> 或者所匹配的字符串长度为 0，则本函数返回 1。
  </p>
  <p class="para">
   以下代码片断接受 ISO 格式的日期（YYYY-MM-DD）然后以
   DD.MM.YYYY 格式显示：
  </p>
  <p class="para">
   <div class="example" id="example-5932">
    <p><strong>Example #1 <span class="function"><strong>ereg()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">ereg&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">"([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$regs</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$regs</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]</span><span style="color: #DD0000">.</span><span style="color: #0000BB">$regs</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]</span><span style="color: #DD0000">.</span><span style="color: #0000BB">$regs</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Invalid&nbsp;date&nbsp;format:&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   参见 <span class="function"><a href="function.eregi.html" class="function">eregi()</a></span>，<span class="function"><a href="function.ereg-replace.html" class="function">ereg_replace()</a></span>，<span class="function"><a href="function.eregi-replace.html" class="function">eregi_replace()</a></span>，<span class="function"><a href="function.preg-match.html" class="function">preg_match()</a></span>，<span class="function"><a href="function.strpos.html" class="function">strpos()</a></span>
   和 <span class="function"><a href="function.strstr.html" class="function">strstr()</a></span>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="122745""></a>
  <div class="note">
   <strong class="user">todesnudel at operamail dot com</strong>
   <a href="#122745" class="date">18-May-2018 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"If the optional parameter regs was not passed or the length of the matched string is 0, this function returns 1."<br />
<br />
This is very confusing. Reads as ereg() will always return 1 if you don't pass the OPTIONAL parameter. If that was the case, the parameter wouldn't be optional as the function would be completly useless without it. Of course the function ereg() still returns 0 if no match was found.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113765""></a>
  <div class="note">
   <strong class="user">eng dot emad_2010 at yahoo dot com</strong>
   <a href="#113765" class="date">28-Nov-2013 04:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
eregi&nbsp;&nbsp; &amp;&nbsp;&nbsp; preg_match()&nbsp; what difference<br />
<br />
Find page title<br />
------------------<br />
This handy code snippet will find and print the text within the &lt;title&gt; and &lt;/title&gt; tags of a html page.<br />
<br />
Find_ page_ title_by_eregi.php<br />
----------------------------------<br />
<br />
<span class="default">&lt;?php<br />
<br />
$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"<a href="http://www.w3schools.com/default.asp" rel="nofollow" target="_blank">http://www.w3schools.com/default.asp</a>"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">);<br />
while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) ){<br />
</span><span class="default">$page </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$titre </span><span class="keyword">= </span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"&lt;title&gt;(.*)&lt;/title&gt;"</span><span class="keyword">,</span><span class="default">$page</span><span class="keyword">,</span><span class="default">$regs</span><span class="keyword">);<br />
<br />
</span><span class="comment">// reg exp is without /&nbsp; /&nbsp; and flexible<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
</span><span class="comment">//&nbsp; Array ( [0] =&gt; [1] =&gt; W3Schools Online Web Tutorials )<br />
<br />
</span><span class="keyword">echo </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] ;<br />
</span><span class="comment">// W3Schools Online Web Tutorials<br />
<br />
</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
======================================<br />
<br />
&nbsp;<br />
Find_ page_ title _by_preg_match_all.php<br />
-----------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
<br />
$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"<a href="http://www.w3schools.com/default.asp" rel="nofollow" target="_blank">http://www.w3schools.com/default.asp</a>"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">);<br />
while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) ){<br />
</span><span class="default">$page </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/&lt;title&gt;(.*)&lt;\/title&gt;/i"</span><span class="keyword">,</span><span class="default">$page</span><span class="keyword">,</span><span class="default">$regs</span><span class="keyword">);<br />
<br />
</span><span class="comment">//&nbsp; reg exp must with&nbsp; /&nbsp; /&nbsp; and not&nbsp; flexible<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
</span><span class="comment">//&nbsp; Array ( [0] =&gt; Array ( [0] =&gt; ) [1] =&gt; Array ( [0] =&gt; W3Schools Online Web Tutorials ) )<br />
<br />
</span><span class="keyword">echo </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
</span><span class="comment">// W3Schools Online Web Tutorials<br />
<br />
</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90437""></a>
  <div class="note">
   <strong class="user">parsaj at gmail dot com</strong>
   <a href="#90437" class="date">22-Apr-2009 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here a little clear and easy script 
<br />
that I wrote to validate an E-Mail Input.
<br />

<br />
I tried to understand ereg, 
<br />
but the describtion on php.net did not help me, 
<br />
so I made some research and finally (think) 
<br />
that Im sure how to use ereg. 
<br />

<br />
The following function works for me well and allows
<br />
an E-Mail to contain the following characters:
<br />
"A-Z, a-z, 0-9, . , - , _ "
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">validateMail</span><span class="keyword">(</span><span class="default">$mail</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$mail </span><span class="keyword">!== </span><span class="string">""</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[A-Za-z0-9\.|-|_]*
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [@]{1}[A-Za-z0-9\.|-|_]*[.]{1}[a-z]{2,5}$"</span><span class="keyword">, </span><span class="default">$mail</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"wrong Input for E-Mail"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mail </span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$mail</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$mail</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
to make it clear:
<br />
^ means begin here (startpoint of ereg)
<br />
$ means end here (endpoint of ereg)
<br />
* stand for endless characters (I want A-Z, a-z, 0-9 and the other characters to apear from 0 to endless 
<br />
optional you can write {1,5} for 
<br />
min 1 times a character or max 5 times a 
<br />
characters instead of * 
<br />
{1,2} means min 1 time a character and max 2 times a character (optional you can write * intead of {1,2}
<br />
{1} stand for max 1 time a character
<br />
\ means from here special characters (like .-_$ and so on)
<br />
| means OR</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88243""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#88243" class="date">16-Jan-2009 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Recognizing E-mail Addresses<br />
<br />
worth noting: a valid e-mail may contain a + character. <br />
<br />
for example: <br />
if you send e-mail to myemail+something@gmail.com, gmail reroutes it to the account myemail@gmail.com. This is a useful feature, and it is very frustrating when websites that take your e-mail don't allow you to do this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87156""></a>
  <div class="note">
   <strong class="user">hreisin at gmail dot com</strong>
   <a href="#87156" class="date">21-Nov-2008 01:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
for those looking for email adress PHP validation,<br />
isemail is a javascrit function that checks the following conditions for the email string:<br />
<br />
&nbsp;&nbsp; ? only one @ sign permitted<br />
&nbsp;&nbsp; ? domain extension separator (.) must come after the @ symbol<br />
&nbsp;&nbsp; ? must be at least 2 characters (letters) after the domain extension separator (.)<br />
&nbsp;&nbsp; ? rejects all illegal characters including spaces.<br />
&nbsp;&nbsp; ? Allows only numbers, letters, the underscore (_) and the dash (-) character as valid input<br />
&nbsp;&nbsp; &nbsp; (excluding the mandatory "@" and "." symbols).<br />
&nbsp;&nbsp; ? Minimum of 6 characters<br />
<br />
The following pattern satisfy all-in-one for the ereg function:<br />
$pattern = "^([A-Za-z0-9\.|-|_]{1,60})([@])";<br />
$pattern .="([A-Za-z0-9\.|-|_]{1,60})(\.)([A-Za-z]{2,3})$";<br />
<br />
ereg($pattern,$email)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84565""></a>
  <div class="note">
   <strong class="user">pascalaschwandenPLEASENOSPAM at gmail dot com</strong>
   <a href="#84565" class="date">18-Jul-2008 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a series of useful regular expressions.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">isValid</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">) {
<br />
&nbsp;</span><span class="default">$valid </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;switch (</span><span class="default">$type</span><span class="keyword">) {
<br />
&nbsp; case </span><span class="string">"IP"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'^([0-9]{1,3}\.){3}[0-9]{1,3}$'</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"URL"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[a-zA-Z0-9\-\.]+\.(com|org|net|mil|edu)$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"SSN"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[0-9]{3}[- ][0-9]{2}[- ][0-9]{4}|[0-9]{9}$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"CC"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^([0-9]{4}[- ]){3}[0-9]{4}|[0-9]{16}$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"ISBN"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[0-9]{9}[[0-9]|X|x]$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"Date"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^([0-9][0-2]|[0-9])\/([0-2][0-9]|3[01]|[0-9])\/[0-9]{4}|([0-9][0-2]|[0-9])-([0-2][0-9]|3[01]|[0-9])-[0-9]{4}$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"Zip"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[0-9]{5}(-[0-9]{4})?$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="string">"Phone"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^((\([0-9]{3}\) ?)|([0-9]{3}-))?[0-9]{3}-[0-9]{4}$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"HexColor"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'^#?([a-f]|[A-F]|[0-9]){3}(([a-f]|[A-F]|[0-9]){3})?$'</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp; case </span><span class="default">"User"</span><span class="keyword">:
<br />
&nbsp;&nbsp; if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[a-zA-Z0-9_]{3,16}$"</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; break;
<br />
&nbsp;}
<br />
&nbsp;return </span><span class="default">$valid</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">#Example:
<br />
</span><span class="default">$phone </span><span class="keyword">= </span><span class="string">"789-1234"</span><span class="keyword">;
<br />
if (</span><span class="default">isValid</span><span class="keyword">(</span><span class="string">"Phone"</span><span class="keyword">,</span><span class="default">$phone</span><span class="keyword">)) {
<br />
&nbsp;echo </span><span class="string">"Valid Phone Number"</span><span class="keyword">;
<br />
} else {
<br />
&nbsp;echo </span><span class="string">"Invalid Phone Number"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84560""></a>
  <div class="note">
   <strong class="user">Jeff K.</strong>
   <a href="#84560" class="date">18-Jul-2008 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In reply to Francis, <br />
<br />
Your regular expression:<br />
$pattern = "^(\()?([0-9]{3})(\))?( )?([0-9]{3})( )?(\-)?( )?([0-9]{4})$";<br />
<br />
I actually used this to validate a phone number. The one discrepancy I found is with patterns such as 503-555-1212, 503-5551212, [503]5551212, and every other pattern that does not have single whitespace or a dash as a delimiter, ereg() will return false when given your expression.<br />
<br />
Based on your pattern, I came up with a more general and concise version making use of the dot meta-character:<br />
$pattern = "^.?[0-9]{3}.?.?[0-9]{3}.?[0-9]{4}$";<br />
<br />
When passed to ereg(), it will return "true" so long as there is 10 digits, regardless of the delimiter chosen by the user.<br />
<br />
[503] 5551212 //true<br />
5035551212 //true<br />
503+555 1212//true<br />
<br />
$pattern = "^(\()?([0-9]{3})(\))?( )?([0-9]{3})( )?(\-)?( )?([0-9]{4})$";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83389""></a>
  <div class="note">
   <strong class="user">Jeremy M at unitydc dot co dot uk</strong>
   <a href="#83389" class="date">23-May-2008 05:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
UK postcode validation.<br />
<br />
We've used the expression put forward by tomas and jaik,<br />
but we found that it fails on Coventry (CV) postcodes.<br />
<br />
Here is an alternative that works for these postcodes and<br />
also adds support for the Overseas Territories like Tristan da Cunha.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">IsPostcode</span><span class="keyword">(</span><span class="default">$postcode</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$postcode </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$postcode</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"((GIR 0AA)|(TDCU 1ZZ)|(ASCN 1ZZ)|(BIQQ 1ZZ)|(BBND 1ZZ)"<br />
</span><span class="keyword">.</span><span class="string">"|(FIQQ 1ZZ)|(PCRN 1ZZ)|(STHL 1ZZ)|(SIQQ 1ZZ)|(TKCA 1ZZ)"<br />
</span><span class="keyword">.</span><span class="string">"|[A-PR-UWYZ]([0-9]{1,2}|([A-HK-Y][0-9]"<br />
</span><span class="keyword">.</span><span class="string">"|[A-HK-Y][0-9]([0-9]|[ABEHMNPRV-Y]))"<br />
</span><span class="keyword">.</span><span class="string">"|[0-9][A-HJKS-UW]) [0-9][ABD-HJLNP-UW-Z]{2})"</span><span class="keyword">, </span><span class="default">$postcode</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$postcode</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82250""></a>
  <div class="note">
   <strong class="user">John Thur</strong>
   <a href="#82250" class="date">02-Apr-2008 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">fractionstr2decimal</span><span class="keyword">(</span><span class="default">$fs</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$fs</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$fs</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">ereg </span><span class="keyword">(</span><span class="string">"([0-9]{1,6}[ ])?([0-9]{1,6})\/([0-9]{0,6}[1-9][0-9]{0,6})"</span><span class="keyword">, </span><span class="default">$fs</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* ({1-6 digits}space&nbsp; optional) {1-6 digits}/(1-13 digits with at least one digit not 0 )*/<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]/</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">NULL</span><span class="keyword">); </span><span class="comment">/* Invalid Fraction */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
echo </span><span class="default">fractionstr2decimal</span><span class="keyword">(</span><span class="string">"1024 5/132"</span><span class="keyword">).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">/* 1024.0378787879&nbsp; */<br />
</span><span class="keyword">echo </span><span class="default">fractionstr2decimal</span><span class="keyword">(</span><span class="string">"23"</span><span class="keyword">).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* 23 */<br />
<br />
</span><span class="default">$i</span><span class="keyword">=</span><span class="default">fractionstr2decimal</span><span class="keyword">(</span><span class="string">"1 2/3"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br&gt;</span><span class="default">$i</span><span class="string">"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* 1.66666666666667 */<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">and </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">1 </span><span class="keyword">) echo </span><span class="string">"&lt;1&lt;br&gt;"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*&nbsp; */<br />
</span><span class="default">$i</span><span class="keyword">=</span><span class="default">fractionstr2decimal</span><span class="keyword">(</span><span class="string">"2/3"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br&gt;</span><span class="default">$i</span><span class="string">"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/*&nbsp; 0.66666666666667 */<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">and </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">1 </span><span class="keyword">) echo </span><span class="string">"&lt;1&lt;br&gt;"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*&nbsp; &lt;1 */<br />
</span><span class="default">$i</span><span class="keyword">=</span><span class="default">fractionstr2decimal</span><span class="keyword">(</span><span class="string">"2/0"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br&gt;</span><span class="default">$i</span><span class="string">"</span><span class="keyword">;<br />
if (</span><span class="default">$i </span><span class="keyword">and </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">1 </span><span class="keyword">) echo </span><span class="string">"&lt;1&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81424""></a>
  <div class="note">
   <strong class="user">E. Stuart Hicks</strong>
   <a href="#81424" class="date">27-Feb-2008 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's important to note for certain regular expression that your $regs[] array will only contain as many values as you have sets of parenthesis in your regexp. (plus 1, of course)&nbsp; For example, the regexp below was designed to locate tags enclosed in &lt;&gt; characters inside a string:<br />
<br />
<span class="default">&lt;?php ereg</span><span class="keyword">(</span><span class="string">"^([^&lt;]*)(&lt;[^&gt;]+&gt;[^&lt;]*)*$"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$tags</span><span class="keyword">) </span><span class="default">?&gt;<br />
</span><br />
This will *not* create an arbitrarily long array in $tags for the number of tags that it finds.&nbsp; Given the string "This &lt;has&gt; a &lt;couple&gt; of &lt;tags&gt; in it", you'll see:<br />
<br />
0 : This &lt;has&gt; a &lt;couple&gt; of &lt;tags&gt; in it<br />
1 : This <br />
2 : &lt;tags&gt; in it<br />
<br />
Since the same parenthesized section of the regexp is matching all tags found, it overwrites the same section of the array.&nbsp; If you try increasing the number of parenthesis, it just creates duplicates of the same result.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80815""></a>
  <div class="note">
   <strong class="user">Will</strong>
   <a href="#80815" class="date">01-Feb-2008 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is undocumented behaviour for this command!<br />
<br />
You cannot check for strings of 1-256 characters or longer.<br />
<br />
For example, this will evaluate to true:<br />
<br />
ereg("^[a-zA-Z0-9' ]{1,255}$","ghfhg");<br />
<br />
But this will give the error:<br />
PHP Warning:&nbsp; ereg(): REG_BADBR<br />
<br />
ereg("^[a-zA-Z0-9' ]{1,256}$","ghfhg");<br />
<br />
PHP version (on Windows XP):<br />
<br />
PHP 5.2.5 (cli) (built: Nov&nbsp; 8 2007 23:18:51)<br />
Copyright (c) 1997-2007 The PHP Group<br />
Zend Engine v2.2.0, Copyright (c) 1998-2007 Zend Technologies</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80685""></a>
  <div class="note">
   <strong class="user">savage</strong>
   <a href="#80685" class="date">28-Jan-2008 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a fix for days over 31 and shorter version<br />
^(([1]{1}[0-2]{1}|[0]{0,1}[1-9]{1})[\-]{1}([0-2]{0,1}\d{1|<br />
[3]{1,1}[0-1]{1})[\-]{1}[1-2]{1}\d{3}|([0-2]{0,1}\d{1}|<br />
[3]{1,1}[0-1]{1})[\-]{1}([1]{1}[0-2]{1}|[0]{0,1}[1-9]{1})<br />
[\-]{1}[1-2]{1}\d{3}|[1-2]{1}\d{3}[\-]{1}([1]{1}[0-2]{1}|<br />
[0]{0,1}[1-9]{1})[\-]{1}([0-2]{0,1}\d{1}|[3]{1,1}[0-1]{1}))$</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80654""></a>
  <div class="note">
   <strong class="user">savage at gmail dot com</strong>
   <a href="#80654" class="date">27-Jan-2008 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a date regexp that I made to allow different combinations of month, day, and year. it's rather long but it works.<br />
<br />
(^([0-3]{0,1})([1-9]{1,1})([\-]{1,1})(([1]{1,1})([0-2]{1,1})|<br />
([0]{0,1})([1-9]{1,1}))([\-]{1,1})([1-2]{1,1})(\d{3})$)|<br />
(^(([1]{1,1})([0-2]{1,1})|([0]{0,1})([1-9]{1,1}))([\-]{1,1})<br />
([0-3]{0,1})([1-9]{1,1})([\-]{1,1})([1-2]{1,1})(\d{3})$)|<br />
(^([1-2]{1,1})(\d{3})([\-]{1,1})(([1]{1,1})([0-2]{1,1})|<br />
([0]{0,1})([1-9]{1,1}))([\-]{1,1})([0-3]{0,1})([1-9]{1,1})$)<br />
<br />
yyyy-mm-dd, mm-dd-yyyy, dd-mm-yyyy<br />
2007-02-05<br />
12-25-2007<br />
25-02-2007<br />
2-5-2007<br />
25-2-2007<br />
2007-9-23<br />
09-06-2007<br />
09-23-2007<br />
The above will check valid<br />
<br />
Anything not in one of the combinations of dd,mm,yyyy formats above will fail.<br />
<br />
these will also fail<br />
2007-32-12<br />
13-22-2007<br />
0-1-2007<br />
1-0-2007<br />
<br />
Any sugestions on making it smaller and more efficients would be appreciated.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76356""></a>
  <div class="note">
   <strong class="user">notbald at gmail spam away com</strong>
   <a href="#76356" class="date">11-Jul-2007 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Save yourself some headache and time, don't use the \d (digits) \w (alphanumeric) and \s (whitespace) short forms. Not only do they make the code less readable, they don't seem to work with ereg.<br />
<br />
Use [0-9], [A-Za-z0-9], [ \n\r\t] instead.<br />
<br />
Since the regex example in this article is a bit on the complex side, I'll throw in a simpler regex example:<br />
<br />
Say you want to validate valid variable names:<br />
<br />
<span class="default">&lt;?php<br />
$regex_valid_variable_name </span><span class="keyword">= </span><span class="string">'^[A-Za-z_][A-Za-z0-9_]*$'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// ^ in this context means that the regex is anchored<br />
// to the beginning of the string.<br />
//<br />
// A single [xxx] means that a single letter must mach<br />
// the criteria within<br />
//<br />
// The [xxx]* means that [xxx] can mach from zero to<br />
// unlimited times.<br />
//<br />
// The $ is another anchor, except it is for the end of <br />
// the sting.<br />
<br />
// Valid names: "_", "hello1", "a_variable"<br />
// Invalid names: "4number", "five-to", "one two", " space "<br />
<br />
//Test it out:<br />
</span><span class="default">$regx </span><span class="keyword">= </span><span class="default">$regx_valid_variable_name</span><span class="keyword">;<br />
</span><span class="default">$valid </span><span class="keyword">= array ( </span><span class="string">'_'</span><span class="keyword">, </span><span class="string">'hello1'</span><span class="keyword">, </span><span class="string">'a_variable' </span><span class="keyword">);<br />
</span><span class="default">$invalid </span><span class="keyword">= array ( </span><span class="string">'4number'</span><span class="keyword">, </span><span class="string">'five-to'</span><span class="keyword">, </span><span class="string">'one two'</span><span class="keyword">, </span><span class="string">' space '</span><span class="keyword">);<br />
foreach(</span><span class="default">$valid </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Valid '</span><span class="keyword">.(</span><span class="default">ereg</span><span class="keyword">(</span><span class="default">$regx</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">) ? </span><span class="string">'yes' </span><span class="keyword">: </span><span class="string">'&lt;b&gt;no&lt;/b&gt;'</span><span class="keyword">) . </span><span class="string">": </span><span class="default">$v</span><span class="string">&lt;br /&gt;\n"</span><span class="keyword">;<br />
<br />
foreach(</span><span class="default">$invalid </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Invalid '</span><span class="keyword">.(!</span><span class="default">ereg</span><span class="keyword">(</span><span class="default">$regx</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">) ? </span><span class="string">'yes' </span><span class="keyword">: </span><span class="string">'&lt;b&gt;no&lt;/b&gt;'</span><span class="keyword">) . </span><span class="string">": </span><span class="default">$v</span><span class="string">&lt;br /&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69322""></a>
  <div class="note">
   <strong class="user">jaik at fluidcreativity dot co dot uk</strong>
   <a href="#69322" class="date">31-Aug-2006 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a fixed version of the UK postcode check function by tomas at phusis dot co dot uk. There was a bug on line 2 of the reg expression where a closing square-bracket was doubled-up ("]]" which should've been "]").<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">IsPostcode</span><span class="keyword">(</span><span class="default">$postcode</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$postcode </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">32</span><span class="keyword">),</span><span class="string">''</span><span class="keyword">,</span><span class="default">$postcode</span><span class="keyword">));<br />
&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^(GIR0AA)|(TDCU1ZZ)|((([A-PR-UWYZ][0-9][0-9]?)|"<br />
</span><span class="keyword">.</span><span class="string">"(([A-PR-UWYZ][A-HK-Y][0-9][0-9]?)|"<br />
</span><span class="keyword">.</span><span class="string">"(([A-PR-UWYZ][0-9][A-HJKSTUW])|"<br />
</span><span class="keyword">.</span><span class="string">"([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))))"<br />
</span><span class="keyword">.</span><span class="string">"[0-9][ABD-HJLNP-UW-Z]{2})$"</span><span class="keyword">, </span><span class="default">$postcode</span><span class="keyword">))<br />
&nbsp;&nbsp; return </span><span class="default">$postcode</span><span class="keyword">;<br />
&nbsp; else<br />
&nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69006""></a>
  <div class="note">
   <strong class="user">theppg_001 at hotmail dot com</strong>
   <a href="#69006" class="date">19-Aug-2006 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ok well someone else posted this but if didn't work so I made my own.<br />
I used this to check file names that are to be created on a server.<br />
File names that start with a-Z or 0-9 and contain a-Z, 0-9, underscore(_), dash(-), and dot(.) will be accepted.<br />
File names beginning with anything but a-Z or 0-9 will be rejected.<br />
File names&nbsp; containing anything other than above mentioned will also be rejected.<br />
<br />
Here it is.<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"(^[a-zA-Z0-9]+([a-zA-Z\_0-9\.-]*))$" </span><span class="keyword">, </span><span class="default">$filename</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67266""></a>
  <div class="note">
   <strong class="user">tomas at phusis dot co dot uk</strong>
   <a href="#67266" class="date">06-Jun-2006 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I could not find a definitive and 100% working function that validates the UK postcodes, so was forced to write one myself.<br />
The authoritative source of information is <br />
<br />
<a href="http://www.govtalk.gov.uk/gdsc/html/frames/PostCode.htm" rel="nofollow" target="_blank">http://www.govtalk.gov.uk/gdsc/html/frames/PostCode.htm</a><br />
<br />
which I amended with the new postcode for Tristan da Cunha.<br />
<br />
Here is the ugly beast (don't wanna see regexp's ever again):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">IsPostcode</span><span class="keyword">(</span><span class="default">$postcode</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$postcode </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">32</span><span class="keyword">),</span><span class="string">''</span><span class="keyword">,</span><span class="default">$postcode</span><span class="keyword">));<br />
&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^(GIR0AA)|(TDCU1ZZ)|((([A-PR-UWYZ][0-9][0-9]?)|"<br />
</span><span class="keyword">.</span><span class="string">"(([A-PR-UWYZ][A-HK-Y]][0-9][0-9]?)|"<br />
</span><span class="keyword">.</span><span class="string">"(([A-PR-UWYZ][0-9][A-HJKSTUW])|"<br />
</span><span class="keyword">.</span><span class="string">"([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))))"<br />
</span><span class="keyword">.</span><span class="string">"[0-9][ABD-HJLNP-UW-Z]{2})$"</span><span class="keyword">, </span><span class="default">$postcode</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$postcode</span><span class="keyword">;<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63369""></a>
  <div class="note">
   <strong class="user">info at orgied dot com</strong>
   <a href="#63369" class="date">21-Mar-2006 06:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function i've created to return an array of each substring searched in a string.<br />
<br />
&lt;?<br />
function Return_Substrings($text, $sopener, $scloser)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $noresult = substr_count($text, $sopener);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ncresult = substr_count($text, $scloser);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($noresult &lt; $ncresult)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $nresult = $noresult;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $nresult = $ncresult;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($noresult);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($ncresult);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i=0;$i&lt;$nresult;$i++) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pos = strpos($text, $sopener) + strlen($sopener);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $text = substr($text, $pos, strlen($text));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pos = strpos($text, $scloser);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = substr($text, 0, $pos);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $text = substr($text, $pos + strlen($scloser), strlen($text));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
?&gt;<br />
<br />
Example : <br />
<br />
&lt;?<br />
&nbsp;&nbsp;&nbsp; $string = "&lt;b&gt;bonjour&lt;/b&gt; à tous, &lt;b&gt;comment&lt;/b&gt; allez-vous ?";<br />
<br />
&nbsp;&nbsp;&nbsp; $result = Return_Substrings($string, "&lt;b&gt;", "&lt;/b&gt;");<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63157""></a>
  <div class="note">
   <strong class="user">psonice (aat) gmail.com</strong>
   <a href="#63157" class="date">14-Mar-2006 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted a more strict check for UK postcodes, and decided to do it by stripping all whitespace then using ereg:<br />
<br />
<span class="default">&lt;?php<br />
$pcode</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$in_post_code</span><span class="keyword">);<br />
if (!</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'^[a-zA-Z]{1,2}[0-9]{1,2}[a-zA-Z]{0,1}[0-9]{1}[a-zA-Z]{2}$'</span><span class="keyword">, </span><span class="default">$pcode</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Probably could be improved, as I've just started, but it matches everything listed on the post office spec.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59755""></a>
  <div class="note">
   <strong class="user">ar_cat at shaw dot ca</strong>
   <a href="#59755" class="date">14-Dec-2005 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had problem using is_numeric() to verify if user inputs is a number (including optional floating sign and decimals).&nbsp; Instead I found this expression from <a href="http://www.regular-expressions.info/floatingpoint.html and modified it for a bit." rel="nofollow" target="_blank">http://www.regular-expressions.info/floatingpoint.html and modified it for a bit.</a><br />
<br />
^[+-]?[0-9]*\.?[0-9]+$<br />
<br />
/*<br />
3.55&nbsp; &nbsp; &nbsp; true<br />
-3.55&nbsp; &nbsp;&nbsp; true<br />
+3.55&nbsp; &nbsp; true<br />
2456.90&nbsp; true<br />
34skd&nbsp; &nbsp; false<br />
23.&nbsp; &nbsp; &nbsp; false<br />
2dt6&nbsp; &nbsp; &nbsp; false<br />
*/<br />
<br />
Note: mine doesn't have the exponent part; for matching number with exponents, visit the site above :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58770""></a>
  <div class="note">
   <strong class="user">net_navard at yahoo dot com</strong>
   <a href="#58770" class="date">15-Nov-2005 07:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello <br />
<br />
I think this is not clear:<br />
<br />
"the matches will be stored in the elements of the array regs. $regs[1] will contain the substring which starts at the first left parenthesis; $regs[2] will contain the substring starting at the second, and so on. $regs[0] will contain a copy of the complete string matched. "<br />
<br />
Beacause By "substring," it means the string contained within the parenthesis.<br />
<br />
But in that statement it isn't so clearly<br />
<br />
With regards<br />
<br />
Amir Hossein Estakhrian</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57839""></a>
  <div class="note">
   <strong class="user">Jason Smart knarlin at yahoo dot com dot au</strong>
   <a href="#57839" class="date">16-Oct-2005 01:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A common mistake seems to be trying to escape characters within a bracket<br />
expression. Unlike the preg functions, backslash is always taken literally<br />
within a bracket expression using the ereg functions. See<br />
<a href="http://php.planetmirror.com/manual/en/function.eregi.php#57824" rel="nofollow" target="_blank">http://php.planetmirror.com/manual/en/function.eregi.php#57824</a><br />
for more details.<br />
<br />
Some of the posts here can be re-written to be much simpler.<br />
<br />
16-Feb-2005 10:02<br />
attempts to allow square brackets in a string with<br />
^[a-zA-Z0-9 [.[.] [.].] ]{1,}$<br />
Although this appears to work a less confusing means is<br />
^[]a-zA-Z0-9[]{1,}$<br />
The ] has to be the first character (after a possible ^) but the [ can be<br />
anywhere as long as it is not in the middle of a range of course.<br />
<br />
09-Apr-2005 11:52<br />
Says that ereg("hi[:space:]*bob", $string)<br />
doesnt work in php 4 and to use preg_match() instead.<br />
<br />
The above quoted use is incorrect it should be<br />
<span class="default">&lt;?php ereg</span><span class="keyword">(</span><span class="string">"hi[[:space:]]*bob"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
I tested this with the following in php 4.3.3 and it works fine<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//The hex codes are space, tab, line feed, vertical tab, form feed, carriage return<br />
&nbsp;</span><span class="default">$whitespace </span><span class="keyword">= </span><span class="string">"\x20\x09\x0a\x0b\x0C\x0d"</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$teststring </span><span class="keyword">= </span><span class="string">"hi"</span><span class="keyword">.</span><span class="default">$whitespace</span><span class="keyword">.</span><span class="string">"bob"</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$result </span><span class="keyword">= </span><span class="default">ereg </span><span class="keyword">(</span><span class="string">"hi[[:space:]]*bob"</span><span class="keyword">, </span><span class="default">$teststring</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
echo (</span><span class="string">'Matches '</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">.</span><span class="string">' characters'</span><span class="keyword">);<br />
</span><span class="comment">//Prints Matches 11 characters<br />
</span><span class="default">?&gt;<br />
</span><br />
23-May-2005 08:22<br />
Says that ereg("^[' A-Za-Z]+$", $cardName); will not work.<br />
<br />
The fault with the above is the range a-Z the capital Z comes before small a<br />
and so this will fail. The following works fine<br />
<span class="default">&lt;?php<br />
$cardname </span><span class="keyword">= </span><span class="string">"John 'Doe'"</span><span class="keyword">;<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[' A-Za-z]+$"</span><span class="keyword">, </span><span class="default">$cardname</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
echo (</span><span class="string">'Matches '</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">.</span><span class="string">' characters'</span><span class="keyword">);<br />
</span><span class="comment">//Prints Matches 10 characters<br />
</span><span class="default">?&gt;<br />
</span><br />
09-Sep-2005 11:01<br />
Tries to escape with \ in a bracket expression<br />
You cannot with ereg functions (preg you can) so<br />
ereg("^([-a-zA-Z0-9_\.\!@#\$&amp;\*\+\=\|])*$" , $var)<br />
should be<br />
<span class="default">&lt;?php ereg</span><span class="keyword">(</span><span class="string">"^([-a-zA-Z0-9_.!@#$&amp;*+=|])*$"</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54066""></a>
  <div class="note">
   <strong class="user">Joel Weierman</strong>
   <a href="#54066" class="date">22-Jun-2005 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While this is relatively simple example, I was unable find a clean method of doing this anywhere else, so I thought I would post it here. <br />
<br />
As part of a file upload package, I wanted to prevent the uploading of double byte character filenames and other special ASCII characters that may not work well on a Windows and/or Linux system. Here is the statement I ended up using which seems to have done the trick. <br />
<br />
ereg("[^a-zA-Z0-9._-]", $file_name)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52284""></a>
  <div class="note">
   <strong class="user">php at REMOVEMEkennel17 dot co dot uk</strong>
   <a href="#52284" class="date">26-Apr-2005 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After a lot of hard work I managed to create the following regular expression, which matches any HTML tag pair (i.e. opening and closing tag), as specified by tagname:<br />
<br />
^(.*)(&lt;[ \n\r\t]*tagname(&gt;|[^&gt;]*&gt;))(.*)(&lt;[ \n\r\t]*/[ \n\r\t]*tagname(&gt;|[^&gt;]*&gt;))(.*)$<br />
<br />
The expression is deliberately very forgiving of bad HTML - I wanted to match anything that could be reasonably accepted by a forgiving browser, rather than make it standards compliant. Whitespace is allowed between the tagname and the opening and closing tag symbols, and also between the / and the tagname for the closing tag.<br />
<br />
For my own use, I have wrapped it in a function call, which you may find useful.&nbsp; Here it is with a few notes. I hope somebody finds it useful.<br />
<br />
- Mark Clements<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="keyword">function </span><span class="default">ereg_MatchedHTMLTags</span><span class="keyword">(</span><span class="default">$tagname</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"^(.*)(&lt;[ \\n\\r\\t]*</span><span class="default">$tagname</span><span class="string">(&gt;|[^&gt;]*&gt;))(.*)(&lt;[ \\n\\r\\t]*/[ \\n\\r\\t]*</span><span class="default">$tagname</span><span class="string">(&gt;|[^&gt;]*&gt;))(.*)$"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Use with eregi to ensure case-insensitive match.<br />
//&nbsp; &nbsp; &nbsp; &nbsp; e.g. to split an HTML page based on body tag: <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eregi(ereg_MatchedHTMLTags('body'), $Source, $Matches) <br />
<br />
// The following values will be held in $Matches<br />
//(marked values are unintended byproducts of the expression)<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *[0] - the entire string ($Source).<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] - everything before the opening tag<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [2] - the opening tag, including all contents (i.e. everything between &lt; and &gt;)<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *[3] - the opening tag from end of the tag name, <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.g. '&lt;body bgcolor="#000000"&gt;' gives ' bgcolor="#000000"&gt;'<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [4] - the tag contents (everything between the opening and closing tag)<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [5] - the complete closing tag.<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *[6] - the closing tag from the end of the tag name<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.g. '&lt;/body invalid text&gt;' gives ' invalid text&gt;'<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [7] - everything after the closing tag.<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
