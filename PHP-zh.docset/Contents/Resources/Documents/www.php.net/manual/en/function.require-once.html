<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>require_once</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.include.html">? include</a></li>
      <li style="float: right;"><a href="function.include-once.html">include_once ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">流程控制</a></li>
    <li>require_once</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.require-once" class="sect1">
 <h2 class="title">require_once</h2>
 <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p>
 <p class="para">
  <code class="literal">require_once</code> 表达式和 <span class="function"><a href="function.require.html" class="function">require</a></span>
  表达式完全相同，唯一区别是 PHP 会检查该文件是否已经被包含过，如果是则不会再次包含。
 </p>
 <p class="para">
  参见 <span class="function"><a href="function.include-once.html" class="function">include_once</a></span> 的文档来理解
  <code class="literal">_once</code> 的含义，并理解与没有 <code class="literal">_once</code> 时候有什么不同。
 </p>
  
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="127107""></a>
  <div class="note">
   <strong class="user">bobray99 at softville dot com</strong>
   <a href="#127107" class="date">17-May-2022 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when using include_once and require_once for files that return a value:<br />
<br />
fiddle2.php<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">return </span><span class="string">"Some String"</span><span class="keyword">;<br />
<br />
</span><span class="default">fiddle</span><span class="keyword">.</span><span class="default">php<br />
</span><span class="keyword">&lt;?</span><span class="default">php<br />
$s </span><span class="keyword">= require_once(</span><span class="string">'fiddle2.php'</span><span class="keyword">);<br />
echo </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">;<br />
</span><span class="default">$s </span><span class="keyword">= require_once(</span><span class="string">'fiddle2.php'</span><span class="keyword">);<br />
echo </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* output&nbsp; <br />
&nbsp;Some String<br />
1 <br />
*/<br />
<br />
</span><span class="default">The second time </span><span class="keyword">require_once </span><span class="default">occurs</span><span class="keyword">, </span><span class="default">it returns 1 because the file has already been included</span><span class="keyword">.</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125992""></a>
  <div class="note">
   <strong class="user">boda0128318 at gmail dot com</strong>
   <a href="#125992" class="date">08-Apr-2021 04:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
1 - "require" and "require_once"&nbsp; throw a fatal error if the file is not <br />
&nbsp;&nbsp; &nbsp; &nbsp; existing&nbsp; and stop the script execution<br />
<br />
2 - "include" and "include_once" throw a warning and the execution <br />
&nbsp;&nbsp; &nbsp; &nbsp; continues <br />
<br />
3 - "require_once" and "include_once" as their names suggests , <br />
&nbsp;&nbsp; &nbsp;&nbsp; they will not include the file if the file was already included with <br />
&nbsp;&nbsp; &nbsp;&nbsp; "require", "require_once", "include" or "include_once"<br />
<br />
try the following code: <br />
<br />
create a file called "index.php" <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">require </span><span class="string">"first.php"</span><span class="keyword">;&nbsp; </span><span class="comment">// this will include the file<br />
<br />
</span><span class="keyword">include_once </span><span class="string">"first.php"</span><span class="keyword">;&nbsp; </span><span class="comment">// this will not as it was included using "require"<br />
<br />
</span><span class="keyword">require_once </span><span class="string">"first.php"</span><span class="keyword">;&nbsp; </span><span class="comment">// this will not as it was included using "require"<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
and another file that is called "first.php" and write the following header<br />
<br />
-------------------------------<br />
<br />
&lt;h1&gt;Hello every one&lt;/h1&gt;<br />
<br />
--------------------------------<br />
<br />
i hope this will help you</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117921""></a>
  <div class="note">
   <strong class="user">powtac at gmx dot de</strong>
   <a href="#117921" class="date">02-Sep-2015 01:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"require_once" and "require" are language constructs and not functions. Therefore they should be written without "()" brackets!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104265""></a>
  <div class="note">
   <strong class="user">bimal at sanjaal dot com</strong>
   <a href="#104265" class="date">04-Jun-2011 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your code is running on multiple servers with different environments (locations from where your scripts run) the following idea may be useful to you:
<br />

<br />
a. Do not give absolute path to include files on your server.
<br />
b. Dynamically calculate the full path (absolute path)
<br />

<br />
Hints:
<br />
Use a combination of dirname(__FILE__) and subsequent calls to itself until you reach to the home of your '/index.php'. Then, attach this variable (that contains the path) to your included files.
<br />

<br />
One of my typical example is:
<br />

<br />
<span class="default">&lt;?php
<br />
define</span><span class="keyword">(</span><span class="string">'__ROOT__'</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)));
<br />
require_once(</span><span class="default">__ROOT__</span><span class="keyword">.</span><span class="string">'/config.php'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
instead of:
<br />
<span class="default">&lt;?php </span><span class="keyword">require_once(</span><span class="string">'/var/www/public_html/config.php'</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
After this, if you copy paste your codes to another servers, it will still run, without requiring any further re-configurations.
<br />

<br />
[EDIT BY danbrown AT php DOT net: Contains a typofix (missing ')') provided by 'JoeB' on 09-JUN-2011.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
