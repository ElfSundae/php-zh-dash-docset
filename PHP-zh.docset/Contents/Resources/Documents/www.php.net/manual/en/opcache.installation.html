<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>安装</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="opcache.requirements.html">? 需求</a></li>
      <li style="float: right;"><a href="opcache.configuration.html">运行时配置 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="opcache.setup.html">安装/配置</a></li>
    <li>安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="opcache.installation" class="sect1">
 <h2 class="title">安装</h2>

 <p class="para">
  OPcache 只能编译为共享扩展。
  如果你使用 <strong class="option configure">--disable-all</strong> 参数
  禁用了默认扩展的构建，
  那么必须使用 <strong class="option configure">--enable-opcache</strong> 
  选项来开启 OPcache。
 </p>
 
 <p class="para">
  编译之后，就可以使用
  <a href="ini.core.html#ini.zend-extension" class="link">zend_extension</a>
  指令来将 OPcache 扩展加载到 PHP 中。在非 Windows 平台使用
  <code class="literal">zend_extension=/full/path/to/opcache.so</code>，
  Windows 平台使用
  <code class="literal">zend_extension=C:\path\to\php_opcache.dll</code>。
 </p>

 <blockquote class="note"><p><strong class="note">Note</strong>: 
  <p class="para">
   如果想将 <a href="http://xdebug.org/" class="link external" title="Link : http://xdebug.org/">&raquo;&nbsp;Xdebug</a> 与 OPcache 一起使用，必须在
   Xdebug 之前加载 OPcache。
  </p>
 </p></blockquote>

 <div class="sect2" id="opcache.installation.recommended">
  <h3 class="title">推荐的 php.ini 设置</h3>

  <p class="para">
   使用下列推荐设置来获得较好的
   性能：
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
opcache.memory_consumption=128
opcache.interned_strings_buffer=8
opcache.max_accelerated_files=4000
opcache.revalidate_freq=60
opcache.fast_shutdown=1
opcache.enable_cli=1
</pre></div>
   </div>

  </div>

  <p class="para">
   你也可以禁用
   <a href="opcache.configuration.html#ini.opcache.save-comments" class="link">opcache.save_comments</a>
   并且启用
   <a href="opcache.configuration.html#ini.opcache.enable-file-override" class="link">opcache.enable_file_override</a>。
   需要提醒的是，在生产环境中使用上述配置之前，必须经过严格测试。
   因为上述配置存在一个已知问题，它会引发一些框架和应用的异常，
   尤其是在存在文档使用了备注注解的时候。
  </p>

  <p class="para">
   在 Windows 上，应该启用 <a href="opcache.configuration.html#ini.opcache.file-cache-fallback" class="link">opcache.file_cache_fallback</a>，以及应该将
   <a href="opcache.configuration.html#ini.opcache.file-cache" class="link">opcache.file_cache</a>
   设置为存在且可写的目录。
  </p>

  <p class="para">
   <a href="opcache.configuration.html" class="link">这里</a>是 OPcache 
   可用的配置指令完整列表。
  </p>
 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125877""></a>
  <div class="note">
   <strong class="user">stchr</strong>
   <a href="#125877" class="date">03-Mar-2021 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that opcache.fast_shutdown was removed in PHP 7.2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125193""></a>
  <div class="note">
   <strong class="user">ijf8090 at gmail dot com</strong>
   <a href="#125193" class="date">16-Jul-2020 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
find the location of your php.ini file by typing<br />
php -i | grep php.ini<br />
<br />
Restart your web server to activate your changes<br />
in my case <br />
sudo /usr/sbin/apachectl restart</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114567""></a>
  <div class="note">
   <strong class="user">NoiseEee</strong>
   <a href="#114567" class="date">06-Mar-2014 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While the "suggested" opcache settings for php.ini might be appropriate for a production server, you're going to want to change several while you're developing, or you're not going to see any changes to your code. Get familiar with what they mean before blindly pasting that into php.ini and assuming things are going to work well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
