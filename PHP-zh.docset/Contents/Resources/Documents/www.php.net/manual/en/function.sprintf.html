<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回格式化字符串</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.soundex.html">? soundex</a></li>
      <li style="float: right;"><a href="function.sscanf.html">sscanf ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>返回格式化字符串</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.sprintf" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sprintf</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">sprintf</span> &mdash; <span class="dc-title">返回格式化字符串</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.sprintf-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>sprintf</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">...$values</code></span>): <span class="type">string</span></div>

  <p class="para rdfs-comment">
   返回一个根据格式化字符串 <code class="parameter">format</code> 生成的字符串。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sprintf-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    

 <dt>
<code class="parameter">format</code></dt>

 <dd>

  <p class="para">
   The format string is composed of zero or more directives:
   ordinary characters (excluding <code class="literal">%</code>) that are
   copied directly to the result and <em class="emphasis">conversion
   specifications</em>, each of which results in fetching its
   own parameter.
  </p>

  <p class="para">
   A conversion specification follows this prototype:
   <code class="literal">%[argnum$][flags][width][.precision]specifier</code>.
  </p>

  <p class="formalpara">
   <h5 class="title">Argnum</h5>
   <p class="para">
    An integer followed by a dollar sign <code class="literal">$</code>,
    to specify which number argument to treat in the conversion.
   </p>
  </p>
  
  <p class="para">
   <table class="doctable table">
    <caption><strong>Flags</strong></caption>
    
     <thead>
      <tr>
       <th>Flag</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td><code class="literal">-</code></td>
       <td>
        Left-justify within the given field width;
        Right justification is the default
       </td>
      </tr>

      <tr>
       <td><code class="literal">+</code></td>
       <td>
        Prefix positive numbers with a plus sign
        <code class="literal">+</code>; Default only negative
        are prefixed with a negative sign.
       </td>
      </tr>

      <tr>
       <td><code class="literal"> </code>(space)</td>
       <td>
        Pads the result with spaces.
        This is the default.
       </td>
      </tr>

      <tr>
       <td><code class="literal">0</code></td>
       <td>
        Only left-pads numbers with zeros.
        With <code class="literal">s</code> specifiers this can
        also right-pad with zeros.
       </td>
      </tr>

      <tr>
       <td><code class="literal">&#039;</code>(char)</td>
       <td>
        Pads the result with the character (char).
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>

  <p class="formalpara">
   <h5 class="title">Width</h5>
   <p class="para">
    An integer that says how many characters (minimum)
    this conversion should result in.
   </p>
  </p>

  <p class="formalpara">
   <h5 class="title">Precision</h5>
   <p class="para">
    A period <code class="literal">.</code> followed by an integer
    who&#039;s meaning depends on the specifier:
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       For <code class="literal">e</code>, <code class="literal">E</code>,
       <code class="literal">f</code> and <code class="literal">F</code>
       specifiers: this is the number of digits to be printed
       after the decimal point (by default, this is 6).
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       For <code class="literal">g</code>, <code class="literal">G</code>,
       <code class="literal">h</code> and <code class="literal">H</code>
       specifiers: this is the maximum number of significant
       digits to be printed.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       For <code class="literal">s</code> specifier: it acts as a cutoff point,
       setting a maximum character limit to the string.
      </span>
     </li>
    </ul>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <span class="simpara">
      If the period is specified without an explicit value for precision,
      0 is assumed.
     </span>
    </p></blockquote>
   </p>
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    Attempting to use a position specifier greater than
    <strong><code>PHP_INT_MAX</code></strong> will generate warnings.
   </span>
  </p></blockquote>

  <p class="para">
   <table class="doctable table">
    <caption><strong>Specifiers</strong></caption>
    
     <thead>
      <tr>
       <th>Specifier</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td><code class="literal">%</code></td>
       <td>
        A literal percent character. No argument is required.
       </td>
      </tr>

      <tr>
       <td><code class="literal">b</code></td>
       <td>
        The argument is treated as an integer and presented
        as a binary number.
       </td>
      </tr>

      <tr>
       <td><code class="literal">c</code></td>
       <td>
        The argument is treated as an integer and presented
        as the character with that ASCII.
       </td>
      </tr>

      <tr>
       <td><code class="literal">d</code></td>
       <td>
        The argument is treated as an integer and presented
        as a (signed) decimal number.
       </td>
      </tr>

      <tr>
       <td><code class="literal">e</code></td>
       <td>
        The argument is treated as scientific notation (e.g. 1.2e+2).
       </td>
      </tr>

      <tr>
       <td><code class="literal">E</code></td>
       <td>
        Like the <code class="literal">e</code> specifier but uses
        uppercase letter (e.g. 1.2E+2).
       </td>
      </tr>

      <tr>
       <td><code class="literal">f</code></td>
       <td>
        The argument is treated as a float and presented
        as a floating-point number (locale aware).
       </td>
      </tr>

      <tr>
       <td><code class="literal">F</code></td>
       <td>
        The argument is treated as a float and presented
        as a floating-point number (non-locale aware).
       </td>
      </tr>

      <tr>
       <td><code class="literal">g</code></td>
       <td>
        <p class="para">
         General format.
        </p>
        <p class="para">
         Let P equal the precision if nonzero, 6 if the precision is omitted,
         or 1 if the precision is zero.
         Then, if a conversion with style E would have an exponent of X:
        </p>
        <p class="para">
         If P &gt; X ≥ ?4, the conversion is with style f and precision P ? (X + 1).
         Otherwise, the conversion is with style e and precision P ? 1.
        </p>
       </td>
      </tr>

      <tr>
       <td><code class="literal">G</code></td>
       <td>
        Like the <code class="literal">g</code> specifier but uses
        <code class="literal">E</code> and <code class="literal">f</code>.
       </td>
      </tr>

      <tr>
        <td><code class="literal">h</code></td>
        <td>
         Like the <code class="literal">g</code> specifier but uses <code class="literal">F</code>.
         Available as of PHP 8.0.0.
        </td>
       </tr>

       <tr>
        <td><code class="literal">H</code></td>
        <td>
         Like the <code class="literal">g</code> specifier but uses
         <code class="literal">E</code> and <code class="literal">F</code>. Available as of PHP 8.0.0.
        </td>
      </tr>

      <tr>
       <td><code class="literal">o</code></td>
       <td>
        The argument is treated as an integer and presented
        as an octal number.
       </td>
      </tr>

      <tr>
       <td><code class="literal">s</code></td>
       <td>
        The argument is treated and presented as a string.
       </td>
      </tr>

      <tr>
       <td><code class="literal">u</code></td>
       <td>
        The argument is treated as an integer and presented
        as an unsigned decimal number.
       </td>
      </tr>

      <tr>
       <td><code class="literal">x</code></td>
       <td>
        The argument is treated as an integer and presented
        as a hexadecimal number (with lowercase letters).
       </td>
      </tr>

      <tr>
       <td><code class="literal">X</code></td>
       <td>
        The argument is treated as an integer and presented
        as a hexadecimal number (with uppercase letters).
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>

  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    The <code class="literal">c</code> type specifier ignores padding and width
   </p>
  </div>

  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    Attempting to use a combination of the string and width specifiers with character sets that require more than one byte per character may result in unexpected results
   </p>
  </div>

  <p class="para">
   Variables will be co-erced to a suitable type for the specifier:
   <table class="doctable table">
    <caption><strong>Type Handling</strong></caption>
    
     <thead>
      <tr>
       <th>Type</th>
       <th>Specifiers</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td><span class="type">string</span></td>
       <td><code class="literal">s</code></td>
      </tr>

      <tr>
       <td><span class="type">int</span></td>
       <td>
        <code class="literal">d</code>,
        <code class="literal">u</code>,
        <code class="literal">c</code>,
        <code class="literal">o</code>,
        <code class="literal">x</code>,
        <code class="literal">X</code>,
        <code class="literal">b</code>
       </td>
      </tr>

      <tr>
       <td><span class="type">float</span></td>
       <td>
        <code class="literal">e</code>,
        <code class="literal">E</code>,
        <code class="literal">f</code>,
        <code class="literal">F</code>,
        <code class="literal">g</code>,
        <code class="literal">G</code>,
        <code class="literal">h</code>,
        <code class="literal">H</code>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </dd>



    
     <dt>
<code class="parameter">values</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.sprintf-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回一个根据格式化字符串 <code class="parameter">format</code> 生成的字符串。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.sprintf-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       此函数失败时不再返回 <strong><code>false</code></strong> 。
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.sprintf-examples">
  <h3 class="title">范例</h3>
  <div class="example" id="example-4719">
   <p><strong>Example #1 参数替换</strong></p>
   <div class="example-contents"><p>
    支持按顺序用参数替换格式字符串里的占位符。
   </p></div>
   <div class="example-contents">
    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$num&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$location&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'tree'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'There&nbsp;are&nbsp;%d&nbsp;monkeys&nbsp;in&nbsp;the&nbsp;%s'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
There are 5 monkeys in the tree
</pre></div>
   </div>
   <div class="example-contents"><p>
    假设，我们想把它国际化，在一个单独的文件中创建格式字符串，我们将它重写为：
   </p></div>
   <div class="example-contents">
    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%s&nbsp;contains&nbsp;%d&nbsp;monkeys'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    我们现在有一个问题。
    格式字符串中占位符的顺序与代码中参数的顺序不匹配。
    我们希望保持代码原样，并在格式字符串中简单地指出占位符引用的参数。
    我们可以这样写格式化字符串：
   </p></div>
   <div class="example-contents">
    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%2$s&nbsp;contains&nbsp;%1$d&nbsp;monkeys'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    另外一个好处是占位符可以重复使用，而无需在代码中添加更多参数。
   </p></div>
   <div class="example-contents">
    <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%2$s&nbsp;contains&nbsp;%1$d&nbsp;monkeys.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;That\'s&nbsp;a&nbsp;nice&nbsp;%2$s&nbsp;full&nbsp;of&nbsp;%1$d&nbsp;monkeys.'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    当使用参数替换时，<code class="literal">n$</code>
    <em class="emphasis">位置指示符</em> 必须紧跟在百分号（<code class="literal">%</code>）之后，在任何其他指示符之前，如下所示。
   </p></div>
  </div>

  <div class="example" id="example-4720">
   <p><strong>Example #2 指定填充字符</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%'.9d\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%'.09d\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">123</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
......123
000000123
</pre></div>
   </div>
  </div>
  <div class="example" id="example-4721">
   <p><strong>Example #3 位置说明符与其他说明符</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;%2$s&nbsp;contains&nbsp;%1$04d&nbsp;monkeys'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$num</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$location</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
The tree contains 0005 monkeys
</pre></div>
   </div>
  </div>
  <div class="example" id="example-4722">
   <p><strong>Example #4 <span class="function"><strong>sprintf()</strong></span>: 零填充整数</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$isodate&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%04d-%02d-%02d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-4723">
   <p><strong>Example #5 <span class="function"><strong>sprintf()</strong></span>: 货币格式</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$money1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">68.75</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$money2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">54.35</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$money&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$money1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$money2</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$money</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$formatted&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%01.2f"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$money</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$formatted</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
123.1
123.10
</pre></div>
   </div>
  </div>
  <div class="example" id="example-4724">
   <p><strong>Example #6 <span class="function"><strong>sprintf()</strong></span>: 科学记数法</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">362525200</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.3e"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$number</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>以上例程会输出：</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
3.625e+8
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sprintf-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.printf.html" class="function" rel="rdfs-seeAlso">printf()</a> - 输出格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.fprintf.html" class="function" rel="rdfs-seeAlso">fprintf()</a> - 将格式化后的字符串写入到流</span></li>
    <li class="member"><span class="function"><a href="function.vprintf.html" class="function" rel="rdfs-seeAlso">vprintf()</a> - 输出格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.vsprintf.html" class="function" rel="rdfs-seeAlso">vsprintf()</a> - 返回格式化字符串</span></li>
    <li class="member"><span class="function"><a href="function.vfprintf.html" class="function" rel="rdfs-seeAlso">vfprintf()</a> - 将格式化字符串写入流</span></li>
    <li class="member"><span class="function"><a href="function.sscanf.html" class="function" rel="rdfs-seeAlso">sscanf()</a> - 根据指定格式解析输入的字符</span></li>
    <li class="member"><span class="function"><a href="function.fscanf.html" class="function" rel="rdfs-seeAlso">fscanf()</a> - 从文件中格式化输入</span></li>
    <li class="member"><span class="function"><a href="function.number-format.html" class="function" rel="rdfs-seeAlso">number_format()</a> - 以千位分隔符方式格式化一个数字</span></li>
    <li class="member"><span class="function"><a href="function.date.html" class="function" rel="rdfs-seeAlso">date()</a> - 格式化一个本地时间／日期</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126889""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#126889" class="date">01-Mar-2022 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the format string is enclosed in double-quotes (""), you need to escape the dollar sign after argnum with a backslash character (\), like this %1\$s, so that the PHP doesn't try to interpret them as variable. Using a backslash like this is called an escape sequence.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Sample string<br />
</span><span class="default">$number </span><span class="keyword">= </span><span class="default">499</span><span class="keyword">;<br />
</span><span class="default">$format </span><span class="keyword">= </span><span class="string">"The number without decimal points: %1\$d, and the number with two decimal points: %1\$.2f"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Formatting and print the string<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="126427""></a>
  <div class="note">
   <strong class="user">2838132019 at qq dot com</strong>
   <a href="#126427" class="date">17-Sep-2021 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
echo sprintf("%.2f", "123456789012345.82");&nbsp; <br />
// result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.85");<br />
// result: 123456789012345.84<br />
<br />
echo sprintf("%.2f", "123456789012345.87");<br />
//result:&nbsp; 123456789012345.88<br />
<br />
echo sprintf("%.2f", "123456789012345.820"); <br />
//result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.821");&nbsp; <br />
//result: 123456789012345.83<br />
<br />
echo sprintf("%.2f", "123456789012345.828");&nbsp; <br />
//result: 123456789012345.83<br />
<br />
echo sprintf("%.2f", "123456789012345.8209"); <br />
//result : 123456789012345.83<br />
<br />
echo sprintf("%.2f", "1234567890123456.82"); <br />
//result: 1234567890123456.75<br />
<br />
echo sprintf("%.2f", "123456789012345.82002"); <br />
//result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.820001"); <br />
//result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.820101");<br />
//result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.820201");<br />
//result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.820301");<br />
//result: 123456789012345.81<br />
<br />
echo sprintf("%.2f", "123456789012345.820401");<br />
//result: 123456789012345.83</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124828""></a>
  <div class="note">
   <strong class="user">Mirek Z...</strong>
   <a href="#124828" class="date">15-Mar-2020 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've performed a simple speed test. sprintf against PHP string concatenation operator. Test was performed on PHP 7.3 for 1 million interations.<br />
<br />
I run this several times and what I've noted that string concatenation took about 2.9 seconds, sprintf took 4.3 seconds.<br />
I was thinking about what is faster, what is better to do when we're going to format our string (for example, the message to the user or for log purposes) containing some variables values. Is it better to concatenate string with variables using operator (dot ".") or to use sprintf. The answer is: when you do not plan to implement any multilanguage mechanisms and feel good with hardcoding some texts, the "dot" is almost 1.5 times faster!<br />
<br />
Here's the code:<br />
<br />
echo 'Start' . PHP_EOL;<br />
$vS_text = 'some text';<br />
$vS = '';<br />
$vf = microtime(true);<br />
for ($vI = 0; $vI &lt; 1000000; $vI++) {<br />
&nbsp;&nbsp;&nbsp; $vS = 'Start ' . $vI . ' ' . $vS_text . ' ' . $vf . ' end';<br />
}<br />
$vf = microtime(true) - $vf;<br />
echo 'Concat:' . $vf . PHP_EOL;<br />
$vS = '';<br />
$vf = microtime(true);<br />
for ($vI = 0; $vI &lt; 1000000; $vI++) {<br />
&nbsp;&nbsp;&nbsp; $vS = sprintf('Start %d %s %f end', $vI, $vS_text, $vf);<br />
}<br />
$vf = microtime(true) - $vf;<br />
echo 'Spritf:' . $vf . PHP_EOL;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124412""></a>
  <div class="note">
   <strong class="user">Anderson</strong>
   <a href="#124412" class="date">18-Nov-2019 09:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The old "monkey" example which helped me a lot has sadly disappeared.<br />
<br />
I'll Re-post it in comment as a memory.<br />
<br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">=&nbsp; </span><span class="default">43951789</span><span class="keyword">;<br />
</span><span class="default">$u </span><span class="keyword">= -</span><span class="default">43951789</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">65</span><span class="keyword">; </span><span class="comment">// ASCII 65 is 'A'<br />
<br />
// notice the double %%, this prints a literal '%' character<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%b = '%b'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// binary representation<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%c = '%c'\n"</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">); </span><span class="comment">// print the ascii character, same as chr() function<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%d = '%d'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// standard integer representation<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%e = '%e'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// scientific notation<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%u = '%u'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// unsigned integer representation of a positive integer<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%u = '%u'\n"</span><span class="keyword">, </span><span class="default">$u</span><span class="keyword">); </span><span class="comment">// unsigned integer representation of a negative integer<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%f = '%f'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// floating point representation<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%o = '%o'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// octal representation<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%s = '%s'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// string representation<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%x = '%x'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// hexadecimal representation (lower-case)<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%X = '%X'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// hexadecimal representation (upper-case)<br />
<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%+d = '%+d'\n"</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">); </span><span class="comment">// sign specifier on a positive integer<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"%%+d = '%+d'\n"</span><span class="keyword">, </span><span class="default">$u</span><span class="keyword">); </span><span class="comment">// sign specifier on a negative integer<br />
<br />
/*<br />
%b = '10100111101010011010101101'<br />
%c = 'A'<br />
%d = '43951789'<br />
%e = '4.395179e+7'<br />
%u = '43951789'<br />
%u = '18446744073665599827'<br />
%f = '43951789.000000'<br />
%o = '247523255'<br />
%s = '43951789'<br />
%x = '29ea6ad'<br />
%X = '29EA6AD'<br />
%+d = '+43951789'<br />
%+d = '-43951789'<br />
*/<br />
<br />
</span><span class="default">$s </span><span class="keyword">= </span><span class="string">'monkey'</span><span class="keyword">;<br />
</span><span class="default">$t </span><span class="keyword">= </span><span class="string">'many monkeys'</span><span class="keyword">;<br />
<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"[%s]\n"</span><span class="keyword">,&nbsp; &nbsp; &nbsp; </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// standard string output<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"[%10s]\n"</span><span class="keyword">,&nbsp; &nbsp; </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// right-justification with spaces<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"[%-10s]\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// left-justification with spaces<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"[%010s]\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// zero-padding works on strings too<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"[%'#10s]\n"</span><span class="keyword">,&nbsp; </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// use the custom padding character '#'<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"[%10.10s]\n"</span><span class="keyword">, </span><span class="default">$t</span><span class="keyword">); </span><span class="comment">// left-justification but with a cutoff of 10 characters<br />
<br />
/*<br />
[monkey]<br />
[&nbsp; &nbsp; monkey]<br />
[monkey&nbsp; &nbsp; ]<br />
[0000monkey]<br />
[####monkey]<br />
[many monke]<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123431""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#123431" class="date">13-Dec-2018 02:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have written a wrapper for sprintf. Add a new %S&nbsp; (upper case s) where the number indicates the number of characters and not bytes.<br />
This is useful for formatting utf-8 strings.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">SacSprintf</span><span class="keyword">( </span><span class="default">$format</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$argv </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">() ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while( </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"^A%[+-]*[.]*([0-9.]*)([a-z])^Ai"</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] == </span><span class="string">'S'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] != </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t1 </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$t1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) + </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) - </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$l1 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t2 </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$t1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$l2 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$t2</span><span class="keyword">) - </span><span class="default">$l1</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">( </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$t2</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">], </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">+= </span><span class="default">$l2</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] += </span><span class="default">$l2</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format</span><span class="keyword">[</span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]] = </span><span class="string">'s'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">+= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">) ;<br />
}<br />
<br />
echo </span><span class="string">"&lt;pre&gt;\n"</span><span class="keyword">;<br />
echo </span><span class="string">"&nbsp; &nbsp; &nbsp; 1234567890123456789012345678901234567890\n"</span><span class="keyword">;<br />
echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"Hola, %-20s is my name\n"</span><span class="keyword">, </span><span class="string">"José Luis jiménez"</span><span class="keyword">);<br />
echo </span><span class="default">SacSprintf</span><span class="keyword">(</span><span class="string">"Hola, %-20S is my name\n"</span><span class="keyword">, </span><span class="string">"José Luis jiménez"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;/pre&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The output will be:<br />
&nbsp;&nbsp; &nbsp;&nbsp; 1234567890123456789012345678901234567890<br />
Hola, José Luis jiménez&nbsp; is my name<br />
Hola, José Luis jiménez&nbsp; &nbsp; is my name</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120670""></a>
  <div class="note">
   <strong class="user">Nathan Alan</strong>
   <a href="#120670" class="date">19-Feb-2017 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just wanted to add that to get the remaining text from the string, you need to add the following as a variable in your scanf<br />
<br />
%[ -~]<br />
<br />
Example:<br />
<br />
sscanf($sql, "[%d,%d]%[ -~]", $sheet_id, $column, $remaining_sql);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120407""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#120407" class="date">03-Jan-2017 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be cafeful while trying to refactor longer strings with repeated placeholders like <br />
<br />
&nbsp;&nbsp;&nbsp; sprintf("Hi %s. Your name is %s", $name, $name);<br />
<br />
to use argument numbering:<br />
<br />
&nbsp;&nbsp; sprintf("Hi %1$s. Your name is %1$s", $name);<br />
<br />
This will nuke you at **runtime**, because of `$s` thing being handled as variable. If you got no $s for substitution, notice will be thrown. <br />
<br />
The solution is to use single quotes to prevent variable substitution in string:<br />
<br />
&nbsp;&nbsp; sprintf('Hi %1$s. Your name is %1$s', $name);<br />
<br />
If you need variable substitution, then you'd need to split your string to keep it in single quotes:<br />
<br />
&nbsp;&nbsp; sprintf("Hi " . '%1$s' . ". Your {$variable} is " . '%1$s', $name);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118191""></a>
  <div class="note">
   <strong class="user">Sam Bull</strong>
   <a href="#118191" class="date">23-Oct-2015 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fix for sprintfn function for named arguments (<a href="http://php.net/manual/en/function.sprintf.php#94608" rel="nofollow" target="_blank">http://php.net/manual/en/function.sprintf.php#94608</a>):<br />
<br />
Change the first line from:<br />
&nbsp; $arg_nums = array_slice(array_flip(array_keys(array(0 =&gt; 0) + $args)), 1);<br />
to:<br />
&nbsp; $arg_nums = array_keys($args);<br />
&nbsp; array_unshift($arg_nums, 0);<br />
&nbsp; $arg_nums = array_flip(array_slice($arg_nums, 1, NULL, true));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117054""></a>
  <div class="note">
   <strong class="user">nmmm at nmmm dot nu</strong>
   <a href="#117054" class="date">08-Apr-2015 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php printf and sprintf not seems to support star "*" formatting.<br />
<br />
here is an example:<br />
<br />
printf("%*d\n",3,5);<br />
<br />
this will print just "d" instead of "&lt;two spaces&gt;5"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116776""></a>
  <div class="note">
   <strong class="user">kontakt at myseosolution dot de</strong>
   <a href="#116776" class="date">26-Feb-2015 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are already some comments on using sprintf to force leading leading zeros but the examples only include integers. I needed leading zeros on floating point numbers and was surprised that it didn't work as expected.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
sprintf</span><span class="keyword">(</span><span class="string">'%02d'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will result in 01. However, trying the same for a float with precision doesn't work:<br />
<br />
<span class="default">&lt;?php<br />
sprintf</span><span class="keyword">(</span><span class="string">'%02.2f'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Yields 1.00. <br />
<br />
This threw me a little off. To get the desired result, one needs to add the precision (2) and the length of the decimal seperator "." (1). So the correct pattern would be<br />
<br />
<span class="default">&lt;?php<br />
sprintf</span><span class="keyword">(</span><span class="string">'%05.2f'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output: 01.00<br />
<br />
Please see <a href="http://stackoverflow.com/a/28739819/413531 for a more detailed explanation." rel="nofollow" target="_blank">http://stackoverflow.com/a/28739819/413531 for a more detailed explanation.</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115088""></a>
  <div class="note">
   <strong class="user">john at jbwalker dot com</strong>
   <a href="#115088" class="date">24-May-2014 12:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't find what should be a WARNING in the documentation above, that if you have more specifiers than variables to match them sprintf returns NOTHING. This fact, IMHO, should also be noted under return values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114849""></a>
  <div class="note">
   <strong class="user">hdimac at gmail dot com</strong>
   <a href="#114849" class="date">14-Apr-2014 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the examples, is being shown printf, but it should say sprintf, which is the function being explained... just a simple edition mistake.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114002""></a>
  <div class="note">
   <strong class="user">ivan at php dot net</strong>
   <a href="#114002" class="date">28-Dec-2013 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a minor issue in a code of mb_vsprintf function from viktor at textalk dot com.<br />
<br />
In "truncate $arg" section the following line:<br />
&nbsp; $arg = mb_substr($precision,0,$precision,$encoding);<br />
needs to be replaced with:<br />
&nbsp; $arg = mb_substr($arg,0,$precision,$encoding);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111201""></a>
  <div class="note">
   <strong class="user">Alex R. Gibbs</strong>
   <a href="#111201" class="date">25-Jan-2013 08:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
1.&nbsp; A plus sign ('+') means put a '+' before positive numbers while a minus sign ('-') means left justify.&nbsp; The documentation incorrectly states that they are interchangeable.&nbsp; They produce unique results that can be combined:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%+4d|%+4d|\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-4d|%-4d|\n"</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%+-4d|%+-4d|\n"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs:<br />
<br />
|&nbsp; +1|&nbsp; -1|<br />
|1&nbsp;&nbsp; |-1&nbsp; |<br />
|+1&nbsp; |-1&nbsp; |<br />
<br />
2.&nbsp; Padding with a '0' is different than padding with other characters.&nbsp; Zeros will only be added at the front of a number, after any sign.&nbsp; Other characters will be added before the sign, or after the number:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%04d|\n"</span><span class="keyword">,&nbsp;&nbsp; -</span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%':4d|\n"</span><span class="keyword">,&nbsp; -</span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-':4d|\n"</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Specifying both "-" and "0" creates a conflict with unexpected results:<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-04d|\n"</span><span class="keyword">,&nbsp; -</span><span class="default">2</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Padding with other digits behaves like other non-zero characters:<br />
</span><span class="keyword">echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-'14d|\n"</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
echo </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">"|%-'04d|\n"</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs:<br />
<br />
|-002|<br />
|::-2|<br />
|-2::|<br />
|-2&nbsp; |<br />
|-211|<br />
|-2&nbsp; |</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110326""></a>
  <div class="note">
   <strong class="user">ignat dot scheglovskiy at gmail dot com</strong>
   <a href="#110326" class="date">10-Oct-2012 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an example how alignment, padding and precision specifier can be used to print formatted list of items:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$out </span><span class="keyword">= </span><span class="string">"The Books\n"</span><span class="keyword">;<br />
</span><span class="default">$books </span><span class="keyword">= array(</span><span class="string">"Book 1"</span><span class="keyword">, </span><span class="string">"Book 2"</span><span class="keyword">, </span><span class="string">"Book 3"</span><span class="keyword">);<br />
</span><span class="default">$pages </span><span class="keyword">= array(</span><span class="string">"123 pages "</span><span class="keyword">, </span><span class="string">"234 pages"</span><span class="keyword">, </span><span class="string">"345 pages"</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$books</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%'.-20s%'.7.4s\n"</span><span class="keyword">, </span><span class="default">$books</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$pages</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
}<br />
echo </span><span class="default">$out</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Outputs:<br />
// <br />
// The Books<br />
// Book 1.................123 <br />
// Book 2.................234 <br />
// Book 3.................345 <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108947""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#108947" class="date">07-Jun-2012 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use argument numbering, then format specifications with the same number get the same argument; this can save repeating the argument in the function call.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$pattern </span><span class="keyword">= </span><span class="string">'%1$s %1$\'#10s %1$s!'</span><span class="keyword">;<br />
<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="string">"badgers"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105468""></a>
  <div class="note">
   <strong class="user">krzysiek dot 333 at gmail dot com - zryty dot hekko dot pl</strong>
   <a href="#105468" class="date">20-Aug-2011 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Encoding and decoding IP adress to format: 1A2B3C4D (mysql column: char(8) )<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">encode_ip</span><span class="keyword">(</span><span class="default">$dotquad_ip</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ip_sep </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$dotquad_ip</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%02x%02x%02x%02x'</span><span class="keyword">, </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$ip_sep</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
}<br />
<br />
function </span><span class="default">decode_ip</span><span class="keyword">(</span><span class="default">$int_ip</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hexipbang </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">chunk_split</span><span class="keyword">(</span><span class="default">$int_ip</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]). </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) . </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]) . </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$hexipbang</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103755""></a>
  <div class="note">
   <strong class="user">timo dot frenay at gmail dot com</strong>
   <a href="#103755" class="date">02-May-2011 05:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is how to print a floating point number with 16 significant digits regardless of magnitude:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $result </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%%.%dF'</span><span class="keyword">, </span><span class="default">max</span><span class="keyword">(</span><span class="default">15 </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(</span><span class="default">log10</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)), </span><span class="default">0</span><span class="keyword">)), </span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This works more reliably than doing something like sprintf('%.15F', $value) as the latter may cut off significant digits for very small numbers, or prints bogus digits (meaning extra digits beyond what can reliably be represented in a floating point number) for very large numbers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102205""></a>
  <div class="note">
   <strong class="user">carmageddon at gmail dot com</strong>
   <a href="#102205" class="date">02-Feb-2011 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to convert a decimal (integer) number into constant length binary number in lets say 9 bits, use this:<br />
<br />
$binary = sprintf('%08b', $number );<br />
<br />
for example: <br />
<span class="default">&lt;?php<br />
$bin </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%08b'</span><span class="keyword">,</span><span class="default">511 </span><span class="keyword">);<br />
echo </span><span class="default">$bin</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
would output 111111111<br />
And 2 would output 00000010<br />
<br />
I know the leading zeros are useful to me, perhaps they are to someone else too.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99732""></a>
  <div class="note">
   <strong class="user">dwieeb at gmail dot com</strong>
   <a href="#99732" class="date">01-Sep-2010 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you use the default padding specifier (a space) and then print it to HTML, you will notice that HTML does not display the multiple spaces correctly. This is because any sequence of white-space is treated as a single space.<br />
<br />
To overcome this, I wrote a simple function that replaces all the spaces in the string returned by sprintf() with the character entity reference "&amp;nbsp;" to achieve non-breaking space in strings returned by sprintf()<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Here is the function:<br />
</span><span class="keyword">function </span><span class="default">sprintf_nbsp</span><span class="keyword">() {<br />
&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)));<br />
}<br />
<br />
</span><span class="comment">//Usage (exactly like sprintf):<br />
</span><span class="default">$format </span><span class="keyword">= </span><span class="string">'The %d monkeys are attacking the [%10s]!'</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">sprintf_nbsp</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="string">'zoo'</span><span class="keyword">);<br />
echo </span><span class="default">$str</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output:<br />
The 15 monkeys are attacking the [&nbsp; &nbsp; &nbsp;&nbsp; zoo]!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//The variation that prints the string instead of returning it:<br />
</span><span class="keyword">function </span><span class="default">printf_nbsp</span><span class="keyword">() {<br />
&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99714""></a>
  <div class="note">
   <strong class="user">geertdd at gmail dot com</strong>
   <a href="#99714" class="date">01-Sep-2010 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that when using a sign specifier, the number zero is considered positive and a "+" sign will be prepended to it.<br />
<br />
<span class="default">&lt;?php<br />
printf</span><span class="keyword">(</span><span class="string">'%+d'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); </span><span class="comment">// +0<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94608""></a>
  <div class="note">
   <strong class="user">nate at frickenate dot com</strong>
   <a href="#94608" class="date">13-Nov-2009 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a clean, working version of functions to allow using named arguments instead of numeric ones. ex: instead of sprintf('%1$s', 'Joe');, we can use sprintf('%name$s', array('name' =&gt; 'Joe'));. I've provided 2 different versions: the first uses the php-like syntax (ex: %name$s), while the second uses the python syntax (ex: %(name)s).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* version of sprintf for cases where named arguments are desired (php syntax)<br />
&nbsp;*<br />
&nbsp;* with sprintf: sprintf('second: %2$s ; first: %1$s', '1st', '2nd');<br />
&nbsp;*<br />
&nbsp;* with sprintfn: sprintfn('second: %second$s ; first: %first$s', array(<br />
&nbsp;*&nbsp; 'first' =&gt; '1st',<br />
&nbsp;*&nbsp; 'second'=&gt; '2nd'<br />
&nbsp;* ));<br />
&nbsp;*<br />
&nbsp;* @param string $format sprintf format string, with any number of named arguments<br />
&nbsp;* @param array $args array of [ 'arg_name' =&gt; 'arg value', ... ] replacements to be made<br />
&nbsp;* @return string|false result of sprintf call, or bool false on error<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">sprintfn </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, array </span><span class="default">$args </span><span class="keyword">= array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// map of argument names to their corresponding sprintf numeric argument value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arg_nums </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">) + </span><span class="default">$args</span><span class="keyword">)), </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// find the next named argument. each search starts at the end of the previous replacement.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?&lt;=%)([a-zA-Z_]\w*)(?=\$)/'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_pos </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_key </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// programmer did not supply a value for the named argument found in the format string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (! </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$arg_key</span><span class="keyword">, </span><span class="default">$arg_nums</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">user_error</span><span class="keyword">(</span><span class="string">"sprintfn(): Missing argument '</span><span class="keyword">${</span><span class="default">arg_key</span><span class="keyword">}</span><span class="string">'"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// replace the named argument with the corresponding numeric one<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">$arg_nums</span><span class="keyword">[</span><span class="default">$arg_key</span><span class="keyword">], </span><span class="default">$arg_pos</span><span class="keyword">, </span><span class="default">$arg_len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$arg_pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">); </span><span class="comment">// skip to end of replacement for next iteration<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* version of sprintf for cases where named arguments are desired (python syntax)<br />
&nbsp;*<br />
&nbsp;* with sprintf: sprintf('second: %2$s ; first: %1$s', '1st', '2nd');<br />
&nbsp;*<br />
&nbsp;* with sprintfn: sprintfn('second: %(second)s ; first: %(first)s', array(<br />
&nbsp;*&nbsp; 'first' =&gt; '1st',<br />
&nbsp;*&nbsp; 'second'=&gt; '2nd'<br />
&nbsp;* ));<br />
&nbsp;*<br />
&nbsp;* @param string $format sprintf format string, with any number of named arguments<br />
&nbsp;* @param array $args array of [ 'arg_name' =&gt; 'arg value', ... ] replacements to be made<br />
&nbsp;* @return string|false result of sprintf call, or bool false on error<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">sprintfn </span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, array </span><span class="default">$args </span><span class="keyword">= array()) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// map of argument names to their corresponding sprintf numeric argument value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arg_nums </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">) + </span><span class="default">$args</span><span class="keyword">)), </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// find the next named argument. each search starts at the end of the previous replacement.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?&lt;=%)\(([a-zA-Z_]\w*)\)/'</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_pos </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg_key </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// programmer did not supply a value for the named argument found in the format string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (! </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$arg_key</span><span class="keyword">, </span><span class="default">$arg_nums</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">user_error</span><span class="keyword">(</span><span class="string">"sprintfn(): Missing argument '</span><span class="keyword">${</span><span class="default">arg_key</span><span class="keyword">}</span><span class="string">'"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// replace the named argument with the corresponding numeric one<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">$arg_nums</span><span class="keyword">[</span><span class="default">$arg_key</span><span class="keyword">] . </span><span class="string">'$'</span><span class="keyword">, </span><span class="default">$arg_pos</span><span class="keyword">, </span><span class="default">$arg_len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$arg_pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">); </span><span class="comment">// skip to end of replacement for next iteration<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93552""></a>
  <div class="note">
   <strong class="user">Astone</strong>
   <a href="#93552" class="date">15-Sep-2009 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you're using Google translator, you have to 'escape' the 'conversion specifications' by putting &lt;span class="notranslate"&gt;&lt;/span&gt; around them.<br />
<br />
Like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">getGoogleTranslation</span><span class="keyword">(</span><span class="default">$sString</span><span class="keyword">, </span><span class="default">$bEscapeParams </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// "escape" sprintf paramerters<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$bEscapeParams</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sPatern </span><span class="keyword">= </span><span class="string">'/(?:%%|%(?:[0-9]+\$)?[+-]?(?:[ 0]|\'.)?-?[0-9]*(?:\.[0-9]+)?[bcdeufFosxX])/'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sEscapeString </span><span class="keyword">= </span><span class="string">'&lt;span class="notranslate"&gt;$0&lt;/span&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sString </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$sPatern</span><span class="keyword">, </span><span class="default">$sEscapeString</span><span class="keyword">, </span><span class="default">$sString</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Compose data array (English to Dutch)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aData </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'v'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'1.0'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'q'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$sString</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'langpair'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'en|nl'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Initialize connection<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rService </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Connection settings<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="string">'<a href="http://ajax.googleapis.com/ajax/services/language/translate" rel="nofollow" target="_blank">http://ajax.googleapis.com/ajax/services/language/translate</a>'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$aData</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Execute request<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sResponse </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Close connection<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$rService</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Extract text from JSON response<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$oResponse </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$sResponse</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$oResponse</span><span class="keyword">-&gt;</span><span class="default">responseData</span><span class="keyword">-&gt;</span><span class="default">translatedText</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sTranslation </span><span class="keyword">= </span><span class="default">$oResponse</span><span class="keyword">-&gt;</span><span class="default">responseData</span><span class="keyword">-&gt;</span><span class="default">translatedText</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If some error occured, use the original string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sTranslation </span><span class="keyword">= </span><span class="default">$sString</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Replace "notranslate" tags<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$bEscapeParams</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sEscapePatern </span><span class="keyword">= </span><span class="string">'/&lt;span class="notranslate"&gt;([^&lt;]*)&lt;\/span&gt;/'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sTranslation </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$sEscapePatern</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$sTranslation</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return result<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$sTranslation</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks to MelTraX for defining the RegExp!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92157""></a>
  <div class="note">
   <strong class="user">jfgrissom at gmail dot com</strong>
   <a href="#92157" class="date">11-Jul-2009 09:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a nightmare trying to find the two's complement of a 32 bit number.<br />
<br />
I got this from <a href="http://www.webmasterworld.com/forum88/13334.htm (credit where credit is due... =P&nbsp; " rel="nofollow" target="_blank">http://www.webmasterworld.com/forum88/13334.htm (credit where credit is due... =P&nbsp; </a>)<br />
<br />
Quote: ...find out the 2's complement of any number, which is -(pow(2, n) - N) where n is the number of bits and N is the number for which to find out its 2's complement.<br />
<br />
This worked magic for me... previously I was trying to use<br />
<br />
sprintf ("%b",$32BitDecimal);<br />
But it always returned 10000000000000000000000 when the $32BitDecimal value got above 2,000,000,000.<br />
<br />
This -(pow(2, n) - N)<br />
Worked remarkably well and was very accurate.<br />
<br />
Hope this helps someone fighting with two's complement in PHP.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92124""></a>
  <div class="note">
   <strong class="user">John Walker</strong>
   <a href="#92124" class="date">09-Jul-2009 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to other notes below about floating point problems, I noted that %f and %F will apparently output a maximum precision of 6 as a default so you have to specify 1.15f (eg) if you need more.<br />
<br />
In my case, the input (from MySQL) was a string with 15 digits of precision that was displayed with 6. Likely what happens is that the rounding occurs in the conversion to a float before it is displayed. Displaying it as 1.15f (or in my case, %s) shows the correct number.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89020""></a>
  <div class="note">
   <strong class="user">viktor at textalk dot com</strong>
   <a href="#89020" class="date">18-Feb-2009 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A more complete and working version of mb_sprintf and mb_vsprintf. It should work with any "ASCII preserving" encoding such as UTF-8 and all the ISO-8859 charsets. It handles sign, padding, alignment, width and precision. Argument swapping is not handled.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'mb_sprintf'</span><span class="keyword">)) {<br />
&nbsp; function </span><span class="default">mb_sprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$argv </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">() ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">mb_vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">) ;<br />
&nbsp; }<br />
}<br />
if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'mb_vsprintf'</span><span class="keyword">)) {<br />
&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; * Works with all encodings in format and arguments.<br />
&nbsp;&nbsp; * Supported: Sign, padding, alignment, width and precision.<br />
&nbsp;&nbsp; * Not supported: Argument swapping.<br />
&nbsp;&nbsp; */<br />
&nbsp; </span><span class="keyword">function </span><span class="default">mb_vsprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$encoding</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$encoding </span><span class="keyword">= </span><span class="default">mb_internal_encoding</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Use UTF-8 in the format so we can use the u flag in preg_split<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="comment">// build a new format in UTF-8<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$newargv </span><span class="keyword">= array(); </span><span class="comment">// unhandled args in unchanged encoding<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$format </span><span class="keyword">!== </span><span class="string">""</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Split the format in two parts: $pre and $post by the first %-directive<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // We get also the matched groups<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">list (</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$sign</span><span class="keyword">, </span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$align</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">) =<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"!\%(\+?)('.|[0 ]|)(-?)([1-9][0-9]*|)(\.[1-9][0-9]*|)([%a-zA-Z])!u"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$format</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">PREG_SPLIT_DELIM_CAPTURE</span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// didn't match. do nothing. this is the last iteration.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">'%'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// an escaped %<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="string">'%%'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">'s'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_pre </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_post </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// truncate $arg<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$precision </span><span class="keyword">!== </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$precision </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$precision </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">,</span><span class="default">$encoding</span><span class="keyword">) &gt; </span><span class="default">$precision</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arg </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$precision</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$precision</span><span class="keyword">,</span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// define padding<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$size </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arglen </span><span class="keyword">= </span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$arglen </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$filler</span><span class="keyword">===</span><span class="string">''</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$filler </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$align </span><span class="keyword">== </span><span class="string">'-'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_post </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">- </span><span class="default">$arglen</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$padding_pre </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="default">$filler</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">- </span><span class="default">$arglen</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// escape % and pass it forward<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="default">$padding_pre </span><span class="keyword">. </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'%'</span><span class="keyword">, </span><span class="string">'%%'</span><span class="keyword">, </span><span class="default">$arg</span><span class="keyword">) . </span><span class="default">$padding_post</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// another type, pass forward<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">.= </span><span class="string">"%</span><span class="default">$sign$filler$align$size$precision$type</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newargv</span><span class="keyword">[] = </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$argv</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$format </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$post</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Convert new format back from UTF-8 to the original encoding<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$newformat </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$newformat</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">vsprintf</span><span class="keyword">(</span><span class="default">$newformat</span><span class="keyword">, </span><span class="default">$newargv</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88761""></a>
  <div class="note">
   <strong class="user">splogamurugan at gmail dot com</strong>
   <a href="#88761" class="date">06-Feb-2009 05:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$format = 'There are %1$d monkeys in the %s and %s ';<br />
printf($format, 100, 'Chennai', 'Bangalore'); <br />
<br />
Expecting to output<br />
"There are 100 monkeys in the Chennai and bangalore"<br />
<br />
But, this will output <br />
"There are 100 monkeys in the 100 and Chennai"<br />
<br />
Because, the second and Third specifiers takes 1rst and 2nd arguments. Because it is not assigned with any arguments.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88218""></a>
  <div class="note">
   <strong class="user">remy dot damour at -please-no-spam-laposte dot net</strong>
   <a href="#88218" class="date">15-Jan-2009 11:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With printf() and sprintf() functions, escape character is not backslash '\' but rather '%'.<br />
<br />
Ie. to print '%' character you need to escape it with itself:<br />
<span class="default">&lt;?php<br />
printf</span><span class="keyword">(</span><span class="string">'%%%s%%'</span><span class="keyword">, </span><span class="string">'koko'</span><span class="keyword">); </span><span class="comment">#output: '%koko%'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86068""></a>
  <div class="note">
   <strong class="user">php at mikeboers dot com</strong>
   <a href="#86068" class="date">01-Oct-2008 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
And continuing on the same theme of a key-based sprintf...<br />
<br />
I'm roughly (I can see a couple cases where it comes out wierd) copying the syntax of Python's string formatting with a dictionary. The improvement over the several past attempts is that this one still respects all of the formating options, as you can see in my example.<br />
<br />
And the error handling is really crappy (just an echo). I just threw this together so do with it what you will. =]<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sprintf_array</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keysmap </span><span class="keyword">= </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values&nbsp; </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/%\(([a-zA-Z0-9_ -]+)\)/'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$keysmap</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"No key </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">'%' </span><span class="keyword">. (</span><span class="default">$keysmap</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]] + </span><span class="default">1</span><span class="keyword">) . </span><span class="string">'$'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'sprintf'</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">sprintf_array</span><span class="keyword">(</span><span class="string">'4 digit padded number: %(num)04d '</span><span class="keyword">, array(</span><span class="string">'num' </span><span class="keyword">=&gt; </span><span class="default">42</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Cheers!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80344""></a>
  <div class="note">
   <strong class="user">scott dot gardner at mac dot com</strong>
   <a href="#80344" class="date">10-Jan-2008 01:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the last example of Example#6, there is an error regarding the output.<br />
<br />
printf("[%10.10s]\n", $t); // left-justification but with a cutoff of 10 characters<br />
<br />
This outputs right-justified.<br />
<br />
In order to output left-justified:<br />
<br />
printf("[%-10.10s]\n", $t);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53372""></a>
  <div class="note">
   <strong class="user">ian dot w dot davis at gmail dot com</strong>
   <a href="#53372" class="date">30-May-2005 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to elaborate on downright's point about different meanings for %f, it appears the behavior changed significantly as of 4.3.7, rather than just being different on different platforms. Previously, the width specifier gave the number of characters allowed BEFORE the decimal. Now, the width specifier gives the TOTAL number of characters. (This is in line with the semantics of printf() in other languages.) See bugs #28633 and #29286 for more details.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52451""></a>
  <div class="note">
   <strong class="user">Pacogliss</strong>
   <a href="#52451" class="date">02-May-2005 12:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a reminder for beginners : example 6 'printf("[%10s]\n",&nbsp; &nbsp; $s);' only works (that is, shows out the spaces) if you put the html '&lt;pre&gt;&lt;/pre&gt;' tags ( head-scraping time saver ;-).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49254""></a>
  <div class="note">
   <strong class="user">jrpozo at conclase dot net</strong>
   <a href="#49254" class="date">21-Jan-2005 07:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful if you use the %f modifier to round decimal numbers as it (starting from 4.3.10) will no longer produce a float number if you set certain locales, so you can't accumulate the result. For example:<br />
<br />
setlocale(LC_ALL, 'es_ES');<br />
echo(sprintf("%.2f", 13.332) + sprintf("%.2f", 14.446))<br />
<br />
gives 27 instead of 27.78, so use %F instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42224""></a>
  <div class="note">
   <strong class="user">php at sharpdreams dot com</strong>
   <a href="#42224" class="date">08-May-2004 02:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that when using the argument swapping, you MUST number every argument, otherwise sprintf gets confused. This only happens if you use number arguments first, then switch to a non-numbered, and then back to a numbered one.<br />
<br />
<span class="default">&lt;?php<br />
$sql </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">( </span><span class="string">"select * from %1\$s left join %2\$s on( %1\$s.id = %2\$s.midpoint ) where %1\$s.name like '%%%s%%' and %2\$s.tagname is not null"</span><span class="keyword">, </span><span class="string">"table1"</span><span class="keyword">, </span><span class="string">"table2"</span><span class="keyword">, </span><span class="string">"bob" </span><span class="keyword">);<br />
</span><span class="comment">// Wont work:<br />
// Sprintf will complain about not enough arguments.<br />
</span><span class="default">$sql </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">( </span><span class="string">"select * from %1\$s left join %2\$s on( %1\$s.id = %2\$s.midpoint ) where %1\$s.name like '%%%3\$s%%' and %2\$s.tagname is not null"</span><span class="keyword">, </span><span class="string">"table1"</span><span class="keyword">, </span><span class="string">"table2"</span><span class="keyword">, </span><span class="string">"bob" </span><span class="keyword">);<br />
</span><span class="comment">// Will work: note the %3\$s<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25243""></a>
  <div class="note">
   <strong class="user">no dot email dot address at example dot com</strong>
   <a href="#25243" class="date">16-Sep-2002 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using argument swapping in sprintf() with gettext: Let's say you've written the following script:<br />
<br />
<span class="default">&lt;?php<br />
$var </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">gettext</span><span class="keyword">(</span><span class="string">"The %2\$s contains %1\$d monkeys"</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">, </span><span class="string">"cage"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Now you run xgettext in order to generate a .po file. The .po file will then look like this:<br />
<br />
#: file.php:9<br />
#, ycp-format<br />
msgid "The %2\\$s contains %1\\$d monkeys"<br />
msgstr ""<br />
<br />
Notice how an extra backslash has been added by xgettext.<br />
<br />
Once you've translated the string, you must remove all backslashes from the ID string as well as the translation, so the po file will look like this:<br />
<br />
#: file.php:9<br />
#, ycp-format<br />
msgid "The %2$s contains %1$d monkeys"<br />
msgstr "Der er %1$d aber i %2$s"<br />
<br />
Now run msgfmt to generate the .mo file, restart Apache to remove the gettext cache if necessary, and you're off.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25094""></a>
  <div class="note">
   <strong class="user">abiltcliffe at bigfoot.com</strong>
   <a href="#25094" class="date">10-Sep-2002 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To jrust at rustyparts.com, note that if you're using a double-quoted string and *don't* escape the dollar sign with a backslash, $s and $d will be interpreted as variable references. The backslash isn't part of the format specifier itself but you do need to include it when you write the format string (unless you use single quotes).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22881""></a>
  <div class="note">
   <strong class="user">Andrew dot Wright at spamsux dot atnf dot csiro dot au</strong>
   <a href="#22881" class="date">03-Jul-2002 02:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An error in my last example:<br />
$b = sprintf("%30.s", $a);<br />
will only add enough spaces before $a to pad the spaces + strlen($a) to 30 places.<br />
<br />
My method of centering fixed text in a 72 character width space is:<br />
<br />
$a = "Some string here";<br />
$lwidth = 36; // 72/2<br />
$b = sprintf("%".($lwidth + round(strlen($a)/2)).".s", $a);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
