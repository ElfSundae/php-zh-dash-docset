<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>基于区域设置的字符串比较</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strcmp.html">? strcmp</a></li>
      <li style="float: right;"><a href="function.strcspn.html">strcspn ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">字符串 函数</a></li>
    <li>基于区域设置的字符串比较</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strcoll" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strcoll</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">strcoll</span> &mdash; <span class="dc-title">基于区域设置的字符串比较</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strcoll-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>strcoll</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str1</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$str2</code></span>
   ) : <span class="type">int</span></div>

  <p class="para rdfs-comment">
   注意该比较区分大小写。和 <span class="function"><a href="function.strcmp.html" class="function">strcmp()</a></span> 不同，该函数不是二进制安全的。
  </p>
  <p class="para">
   <span class="function"><strong>strcoll()</strong></span> 使用当前区域设置进行比较。如果当前区域为 C 或 POSIX，该函数等同于 <span class="function"><a href="function.strcmp.html" class="function">strcmp()</a></span>。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strcoll-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">str1</code></dt>

     <dd>

      <p class="para">
       第一个字符串。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">str2</code></dt>

     <dd>

      <p class="para">
       第二个字符串。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strcoll-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
     如果 <code class="parameter">str1</code> 小于
   <code class="parameter">str2</code> 返回 &lt; 0；
   如果 <code class="parameter">str1</code>
   大于 <code class="parameter">str2</code>
   返回 &gt; 0；如果两者相等，返回 0。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.strcoll-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.2.3</td>
       <td>
        函数在 Win32 平台可用。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strcoll-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 执行匹配正则表达式</span></li>
    <li class="member"><span class="function"><a href="function.strcmp.html" class="function" rel="rdfs-seeAlso">strcmp()</a> - 二进制安全字符串比较</span></li>
    <li class="member"><span class="function"><a href="function.strcasecmp.html" class="function" rel="rdfs-seeAlso">strcasecmp()</a> - 二进制安全比较字符串（不区分大小写）</span></li>
    <li class="member"><span class="function"><a href="function.substr.html" class="function" rel="rdfs-seeAlso">substr()</a> - 返回字符串的子串</span></li>
    <li class="member"><span class="function"><a href="function.stristr.html" class="function" rel="rdfs-seeAlso">stristr()</a> - strstr 函数的忽略大小写版本</span></li>
    <li class="member"><span class="function"><a href="function.strncasecmp.html" class="function" rel="rdfs-seeAlso">strncasecmp()</a> - 二进制安全比较字符串开头的若干个字符（不区分大小写）</span></li>
    <li class="member"><span class="function"><a href="function.strncmp.html" class="function" rel="rdfs-seeAlso">strncmp()</a> - 二进制安全比较字符串开头的若干个字符</span></li>
    <li class="member"><span class="function"><a href="function.strstr.html" class="function" rel="rdfs-seeAlso">strstr()</a> - 查找字符串的首次出现</span></li>
    <li class="member"><span class="function"><a href="function.setlocale.html" class="function" rel="rdfs-seeAlso">setlocale()</a> - 设置地区信息</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124090""></a>
  <div class="note">
   <strong class="user">mkroese at eljakim dot nl</strong>
   <a href="#124090" class="date">02-Aug-2019 09:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You should not rely on this function to properly compare localized strings.<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="string">"?sterreich"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">"Oesterreich"</span><span class="keyword">;<br />
</span><span class="default">$z </span><span class="keyword">= </span><span class="string">"Zeta"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// (on my mac: C/en_US.UTF-8/C/C/C/C)<br />
</span><span class="keyword">echo </span><span class="default">strcoll</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// 116<br />
</span><span class="keyword">echo </span><span class="default">strcoll</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// -116<br />
</span><span class="keyword">echo </span><span class="default">strcoll</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$z</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// 105<br />
<br />
</span><span class="keyword">echo </span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">"de_DE"</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// de_DE<br />
</span><span class="keyword">echo </span><span class="default">strcoll</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// 135<br />
</span><span class="keyword">echo </span><span class="default">strcoll</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// -135<br />
</span><span class="keyword">echo </span><span class="default">strcoll</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$z</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">; </span><span class="comment">// 124<br />
<br />
</span><span class="default">$collator </span><span class="keyword">= new </span><span class="default">Collator</span><span class="keyword">(</span><span class="string">"de_DE"</span><span class="keyword">);<br />
echo </span><span class="default">$collator</span><span class="keyword">-&gt;</span><span class="default">compare</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">); </span><span class="comment">// 1<br />
</span><span class="keyword">echo </span><span class="default">$collator</span><span class="keyword">-&gt;</span><span class="default">compare</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// -1<br />
</span><span class="keyword">echo </span><span class="default">$collator</span><span class="keyword">-&gt;</span><span class="default">compare</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$z</span><span class="keyword">); </span><span class="comment">// -1<br />
</span><span class="default">?&gt;<br />
</span><br />
Using the Collator (from the intl module) you will get the expected result for e.g. sorting such that the string "?sterreich" will rank higher than "Zeta", but after "Oesterreich".<br />
<br />
strcoll's output will differ per platform, locale and used c library, while the Collator will give more stable results on different platforms.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30575""></a>
  <div class="note">
   <strong class="user">sakkarinlaohawisut15 at hotmail dot com</strong>
   <a href="#30575" class="date">22-Mar-2003 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strcoll()'s behavior is sometimes a little bit confusing. It depends on LC_COLLATE in your locale.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;$a </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$b </span><span class="keyword">= </span><span class="string">'A'</span><span class="keyword">;<br />
<br />
&nbsp;print </span><span class="default">strcmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints 1<br />
<br />
</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);<br />
&nbsp;print </span><span class="string">"C: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints 1<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'de_DE'</span><span class="keyword">);<br />
&nbsp;print </span><span class="string">"de_DE: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints -2<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'de_CH'</span><span class="keyword">);<br />
print </span><span class="string">"de_CH: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints -2<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'en_US'</span><span class="keyword">);<br />
&nbsp;print </span><span class="string">"en_US: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints -2<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is useful e. g. if want to sort an array by using strcoll:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;$a </span><span class="keyword">= array (</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">);<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">usort </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'strcoll'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is like sort($a):<br />
&nbsp;Array<br />
&nbsp;(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; B<br />
&nbsp; [2] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; ?<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; ?<br />
&nbsp;)<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'de_DE'</span><span class="keyword">);<br />
</span><span class="default">usort </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'strcoll'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;<br />
</span> <br />
This is completely different:<br />
&nbsp;Array<br />
&nbsp;(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; ?<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; ?<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; b<br />
&nbsp; [5] =&gt; B<br />
&nbsp;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24730""></a>
  <div class="note">
   
   <a href="#24730" class="date">27-Aug-2002 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that some platforms implement strcmp() and strcasecmp() according to the current locale when strings are not binary equal, so that strcmp() and strcoll() will return the same value! This depends on how the PHP strcmp() function is compiled (i.e. if it uses the platform specific strcmp() found in its standard library!).<br />
In that case, the only difference between strcoll() and strcmp() is that strcoll() may return 0 for distinct strings(i.e. consider strings are equal) while strcmp() will differentiate them if they have distinct binary encoding! This typically occurs on Asian systems.<br />
What you can be sure is that strcmp() will always differentiate strings that are encoded differently, but the relative order may still use the current locale setting for collation order!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
