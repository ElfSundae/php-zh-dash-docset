<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>DateInterval 类</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="datetimezone.listidentifiers.html">? DateTimeZone::listIdentifiers</a></li>
      <li style="float: right;"><a href="dateinterval.construct.html">DateInterval::__construct ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.datetime.html">日期/时间</a></li>
    <li>DateInterval 类</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.dateinterval" class="reference">

 <h1 class="title">DateInterval 类</h1>
 

 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8)</p>


  <div class="section" id="dateinterval.intro">
   <h2 class="title">简介</h2>
   <p class="para">
      表示一个时间周期的类。
   </p>
   <p class="para">
    一个时间周期表示固定量的时间（多少年，月，天，小时等），
    也可以表示一个字符串格式的相对时间，
    当表示相对时间的时候，字符串格式是 <span class="classname"><a href="class.datetime.html" class="classname">DateTime</a></span> 类的构造函数所支持的格式。
   </p>
  </div>


  <div class="section" id="dateinterval.synopsis">
   <h2 class="title">类摘要</h2>


   <div class="classsynopsis">
    <div class="ooclass"></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <span class="modifier">class</span> <strong class="classname">DateInterval</strong>
     </span>
     {</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 属性 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.y">$<var class="varname">y</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.m">$<var class="varname">m</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.d">$<var class="varname">d</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.h">$<var class="varname">h</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.i">$<var class="varname">i</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.s">$<var class="varname">s</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">float</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.f">$<var class="varname">f</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.invert">$<var class="varname">invert</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.days">$<var class="varname">days</var></a></var>;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 方法 */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="dateinterval.construct.html" class="methodname">__construct</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$duration</code></span>)</div>

    
    <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname"><a href="dateinterval.createfromdatestring.html" class="methodname">createFromDateString</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$datetime</code></span>): <span class="type"><span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span>|<span class="type"><span class="type false">false</span></span></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="dateinterval.format.html" class="methodname">format</a></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>): <span class="type">string</span></div>


   }</div>


  </div>
  
  <div class="section" id="dateinterval.props">
   <h2 class="title">属性</h2>
   <dl>
    
     <dt id="dateinterval.props.y"><var class="varname">y</var></dt>

     <dd>

      <p class="para">
       多少年。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.m"><var class="varname">m</var></dt>

     <dd>

      <p class="para">
       多少月。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.d"><var class="varname">d</var></dt>

     <dd>

      <p class="para">
       多少天。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.h"><var class="varname">h</var></dt>

     <dd>

      <p class="para">
       多少小时。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.i"><var class="varname">i</var></dt>

     <dd>

      <p class="para">
       多少分钟。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.s"><var class="varname">s</var></dt>

     <dd>

      <p class="para">
       多少秒。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.f"><var class="varname">f</var></dt>

     <dd>

      <p class="para">
       多少微秒。
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.invert"><var class="varname">invert</var></dt>

     <dd>

      <p class="para">
       <code class="literal">1</code> 表示一个负的时间周期，
       <code class="literal">0</code> 表示一个正的时间周期。
       请参见： <span class="methodname"><a href="dateinterval.format.html" class="methodname">DateInterval::format()</a></span>.
      </p>
     </dd>

    
    
     <dt id="dateinterval.props.days"><var class="varname">days</var></dt>

     <dd>

      <p class="para">
       如果 DateInterval 对象是由
       <span class="function"><a href="datetime.diff.html" class="function">DateTime::diff()</a></span> 函数创建的，
       那么它表示开始日期和结束日期之间包含了多少天。
       否则，<var class="varname">days</var> 属性为 <strong><code>false</code></strong>。
      </p>
      <p class="para">
       在 PHP 5.4.20/5.5.4 之前版本中，此属性不会为 <strong><code>false</code></strong>，
       而是 -99999。
      </p>
     </dd>

    
   </dl>

  </div>

  <div class="section" id="dateinterval.changelog">
   <h2 class="title">更新日志</h2>
   <p class="para">
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>版本</th>
        <th>说明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>7.1.0</td>
        <td>增加 <var class="varname">f</var> 属性。</td>
       </tr>

      </tbody>
     
    </table>

   </p>
  </div>

 </div>

 


















<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="dateinterval.construct.html">DateInterval::__construct</a> &mdash; Creates a new DateInterval object</li><li><a href="dateinterval.createfromdatestring.html">DateInterval::createFromDateString</a> &mdash; Sets up a DateInterval from the relative parts of the string</li><li><a href="dateinterval.format.html">DateInterval::format</a> &mdash; Formats the interval</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126658""></a>
  <div class="note">
   <strong class="user">cb</strong>
   <a href="#126658" class="date">02-Dec-2021 09:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to reverse a date interval use array_reverse and iterator_to_array. I've found using invert to be unreliable.<br />
<br />
<span class="default">&lt;?php<br />
$start_date </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="string">"2021-01-01"</span><span class="keyword">);<br />
</span><span class="default">$end_date&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="string">"2021-01-05"</span><span class="keyword">); </span><span class="comment">// If you want to include this date, add 1 day<br />
<br />
</span><span class="default">$interval </span><span class="keyword">= </span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">'1 day'</span><span class="keyword">);<br />
</span><span class="default">$daterange </span><span class="keyword">= new </span><span class="default">DatePeriod</span><span class="keyword">(</span><span class="default">$start_date</span><span class="keyword">, </span><span class="default">$interval </span><span class="keyword">,</span><span class="default">$end_date</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$daterange </span><span class="keyword">as </span><span class="default">$date1</span><span class="keyword">){<br />
&nbsp;&nbsp; echo </span><span class="default">$date1</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
}<br />
&nbsp; <br />
echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// reverse the array<br />
<br />
</span><span class="default">$daterange </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">iterator_to_array</span><span class="keyword">(</span><span class="default">$daterange</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
foreach(</span><span class="default">$daterange </span><span class="keyword">as </span><span class="default">$date1</span><span class="keyword">){<br />
&nbsp;&nbsp; echo </span><span class="default">$date1</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Gives <br />
2021-01-01<br />
2021-01-02<br />
2021-01-03<br />
2021-01-04<br />
<br />
2021-01-04<br />
2021-01-03<br />
2021-01-02<br />
2021-01-01</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125041""></a>
  <div class="note">
   <strong class="user">KEINOS</strong>
   <a href="#125041" class="date">24-May-2020 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that you CAN NOT get the exact time in seconds from a \DateInterval object.<br />
<br />
The reason is simple. While adding the properties up, you can not determine the days of the month.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getTTL</span><span class="keyword">(\</span><span class="default">DateInterval $ttl</span><span class="keyword">): </span><span class="default">int<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs </span><span class="keyword">= (isset(</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">f</span><span class="keyword">) ? (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">f</span><span class="keyword">): </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; + (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; + (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; + (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; + (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">d </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; + (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">m </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24 </span><span class="keyword">* </span><span class="default">30</span><span class="keyword">) </span><span class="comment">//Feb. is 28 days, 29 in an intercalary year<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ (</span><span class="default">$ttl</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24 </span><span class="keyword">* </span><span class="default">365</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">intval</span><span class="keyword">(</span><span class="default">round</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
So, keep in mind that \DateInterval is something to add-on to time.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getTTL</span><span class="keyword">(\</span><span class="default">DateInterval $ttl</span><span class="keyword">): </span><span class="default">int<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Find seconds from it's current state of time<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs </span><span class="keyword">= \</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">)-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$ttl</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">intval</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124954""></a>
  <div class="note">
   <strong class="user">nateb at gurutechnologies dot net</strong>
   <a href="#124954" class="date">27-Apr-2020 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many people have commented on doing a reverse interval on a date time.&nbsp; I personally find a backwards year to be a little strange to think about and instead opt to work with just intervals.&nbsp; This is the easiest I have found.<br />
<br />
<span class="default">&lt;?php<br />
$one_year </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'P1Y'</span><span class="keyword">);<br />
</span><span class="default">$one_year_ago </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$one_year_ago</span><span class="keyword">-&gt;</span><span class="default">sub</span><span class="keyword">(</span><span class="default">$one_year</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Instead of:<br />
<br />
<span class="default">&lt;?php<br />
$one_year_ago </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">( </span><span class="string">"P1Y" </span><span class="keyword">);<br />
</span><span class="default">$one_year_ago</span><span class="keyword">-&gt;</span><span class="default">invert </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$one_year_ago </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$one_year_ago</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$one_year</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124572""></a>
  <div class="note">
   <strong class="user">youssef dot benhssaien at gmail dot com</strong>
   <a href="#124572" class="date">07-Jan-2020 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that to get the next day (like : +1 day, +1 week, ...)<br />
<span class="default">&lt;?php $date </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="string">'last monday of december last year'</span><span class="keyword">)-&gt;</span><span class="default">add</span><span class="keyword">(\</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">'+1 monday'</span><span class="keyword">)); </span><span class="default">?&gt;</span> <br />
will not return the next monday, but the same monday passed as date_create() parameter.<br />
To get the next monday even pass +2 instead of +1 or next monday :<br />
<span class="default">&lt;?php $date </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="string">'last monday of december last year'</span><span class="keyword">)-&gt;</span><span class="default">add</span><span class="keyword">(\</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">'next monday'</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124568""></a>
  <div class="note">
   <strong class="user">tothsanka at gmail dot com</strong>
   <a href="#124568" class="date">05-Jan-2020 10:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful!<br />
<br />
2020-01-04 10:00:00<br />
2020-01-05 10:00:00<br />
<br />
-&gt;s will return 0, because the second difference is 0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124523""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#124523" class="date">19-Dec-2019 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//create a date<br />
$now = new \DateTime();<br />
<br />
//create a specific date<br />
$someDate = \DateTime::createFromFormat("Y-m-d H:i", "2019-12-19 15:27")<br />
<br />
//Add one day<br />
$someDate-&gt;add(new DateInterval("P1D"));<br />
<br />
//convert to string<br />
echo $someDate-&gt;format("Y-m-d");&nbsp;&nbsp; //2019-12-20</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124355""></a>
  <div class="note">
   <strong class="user">Aurelien Marchand</strong>
   <a href="#124355" class="date">30-Oct-2019 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that the hour field can be negative, especially in the context of switching to/from Daylight savings.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
<br />
$tz </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">"America/New_York"</span><span class="keyword">);<br />
</span><span class="default">$date_1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2019-10-30 15:00:00"</span><span class="keyword">,</span><span class="default">$tz</span><span class="keyword">);<br />
</span><span class="default">$date_2 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2019-11-21 14:30:20"</span><span class="keyword">,</span><span class="default">$tz</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$date_2</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$date_1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"%a:%h:%i:%s"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// returns 21:-1:30:20</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123770""></a>
  <div class="note">
   <strong class="user">ruth45007</strong>
   <a href="#123770" class="date">11-Apr-2019 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just tried the code submitted earlier on php 7.2.16:<br />
<br />
<span class="default">&lt;?php<br />
$d1</span><span class="keyword">=new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2012-07-08 11:14:15.638276"</span><span class="keyword">);<br />
</span><span class="default">$d2</span><span class="keyword">=new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2012-07-08 11:14:15.889342"</span><span class="keyword">);<br />
</span><span class="default">$diff</span><span class="keyword">=</span><span class="default">$d2</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$d1</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$diff </span><span class="keyword">) ;<br />
</span><span class="default">?&gt;<br />
</span><br />
and it now DOES return microsecond differences, in the key 'f':<br />
<br />
<span class="default">&lt;?php<br />
DateInterval Object<br />
</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">y</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">m</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">d</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">h</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">i</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">s</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">f</span><span class="keyword">] =&gt; </span><span class="default">0.251066<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">weekday</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">weekday_behavior</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">first_last_day_of</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">invert</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">days</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">special_type</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">special_amount</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">have_weekday_relative</span><span class="keyword">] =&gt; </span><span class="default">0<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">have_special_relative</span><span class="keyword">] =&gt; </span><span class="default">0<br />
</span><span class="keyword">)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120601""></a>
  <div class="note">
   <strong class="user">trap-phpdocs-06022017 at skvorc dot me</strong>
   <a href="#120601" class="date">06-Feb-2017 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IRT note below: from PHP 7.0+, split seconds get returned, too, and will be under the `f` property.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116316""></a>
  <div class="note">
   <strong class="user">cmygind@tsccorp dot com</strong>
   <a href="#116316" class="date">11-Dec-2014 02:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can create a series of dates starting with the first day of the week for each week, if you wish to populate list box on your web page with this date math. Use the absolute abs( ) function to convert negative numbers generated from dates in the past.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $TwoWeeksAgo </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Ymd"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$TwoWeeksAgo</span><span class="keyword">-&gt;</span><span class="default">sub</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'P'</span><span class="keyword">.</span><span class="default">abs </span><span class="keyword">( (</span><span class="default">7</span><span class="keyword">-</span><span class="default">date</span><span class="keyword">(</span><span class="string">"N"</span><span class="keyword">)-</span><span class="default">14</span><span class="keyword">)).</span><span class="string">'D'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$LastWeek </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Ymd"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$LastWeek</span><span class="keyword">-&gt;</span><span class="default">sub</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'P'</span><span class="keyword">.</span><span class="default">abs </span><span class="keyword">( (</span><span class="default">7</span><span class="keyword">-</span><span class="default">date</span><span class="keyword">(</span><span class="string">"N"</span><span class="keyword">)-</span><span class="default">7</span><span class="keyword">)).</span><span class="string">'D'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThisWeek </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Ymd"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThisWeek</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'P'</span><span class="keyword">.</span><span class="default">abs </span><span class="keyword">( (</span><span class="default">7</span><span class="keyword">-</span><span class="default">date</span><span class="keyword">(</span><span class="string">"N"</span><span class="keyword">))).</span><span class="string">'D'</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Start of This week is '</span><span class="keyword">.</span><span class="default">$ThisWeek</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'l m/d/Y'</span><span class="keyword">).</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Start of Last week is '</span><span class="keyword">.</span><span class="default">$LastWeek</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'l m/d/Y'</span><span class="keyword">).</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Start of 2 weeks ago is '</span><span class="keyword">.</span><span class="default">$TwosWeekAgo</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'l m/d/Y'</span><span class="keyword">).</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114826""></a>
  <div class="note">
   <strong class="user">0bccbf3a at opayq dot com</strong>
   <a href="#114826" class="date">10-Apr-2014 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
invert flag is unreliable. <br />
If you've created interval with \DateInterval::createFromDateString with value like '1 day ago' than actually days counter will be negative, and invert flag will be 0. Also, setting invert to 1 with negative units is not working.<br />
Reliable solution to check if interval is negative is to actually apply it and compare:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private function </span><span class="default">isNegative</span><span class="keyword">(\</span><span class="default">DateInterval $interval</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= new \</span><span class="default">DateTimeImmutable</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newTime </span><span class="keyword">= </span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$interval</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$newTime </span><span class="keyword">&lt; </span><span class="default">$now</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } <br />
</span><span class="default">?&gt;<br />
</span>Also, if you want to compare some units of two intervals you should take abs() of them. Or make whole interval absolute:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private function </span><span class="default">absInterval</span><span class="keyword">(\</span><span class="default">DateInterval $interval</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= new \</span><span class="default">DateTimeImmutable</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new </span><span class="keyword">= </span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$interval</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newInt </span><span class="keyword">= </span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">1 </span><span class="keyword">=== </span><span class="default">$newInt</span><span class="keyword">-&gt;</span><span class="default">invert</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newInt</span><span class="keyword">-&gt;</span><span class="default">invert </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$newInt</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span>P.S.: tested on 5.5.12-dev and 5.5.9</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113927""></a>
  <div class="note">
   <strong class="user">Joan</strong>
   <a href="#113927" class="date">18-Dec-2013 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the doubt after reading this page on how to create negative intervals. So far the only solution is to create the interval and negativize it.<br />
<br />
<span class="default">&lt;?php <br />
$date1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(); <br />
</span><span class="default">$eightynine_days_ago </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">( </span><span class="string">"P89D" </span><span class="keyword">); <br />
</span><span class="default">$eightynine_days_ago</span><span class="keyword">-&gt;</span><span class="default">invert </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//Make it negative. <br />
</span><span class="default">$date1</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">( </span><span class="default">$eightynine_days_ago </span><span class="keyword">); <br />
</span><span class="default">?&gt;</span> <br />
<br />
and then $date1 is now 89 days in the past.<br />
<br />
This information is extracted from another php comment <a href="http://www.php.net/manual/en/dateinterval.construct.php#102976 but this page seems to be the first place where people will look for it." rel="nofollow" target="_blank">http://www.php.net/manual/en/dateinterval.construct.php#102976 but this page seems to be the first place where people will look for it.</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113415""></a>
  <div class="note">
   <strong class="user">theDustin</strong>
   <a href="#113415" class="date">08-Oct-2013 03:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to format a \DateInterval to something like you input (new \DateInterval("P3W2D")) you can use one of this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">MyDateInterval </span><span class="keyword">extends \</span><span class="default">DateInterval<br />
</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * formating string like ISO 8601 (PnYnMnDTnHnMnS)<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">const </span><span class="default">INTERVAL_ISO8601 </span><span class="keyword">= </span><span class="string">'P%yY%mM%dDT%hH%iM%sS'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * formating the interval like ISO 8601 (PnYnMnDTnHnMnS)<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">= </span><span class="string">'P'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">. </span><span class="string">'Y'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">m</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">m </span><span class="keyword">. </span><span class="string">'M'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">d</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">d </span><span class="keyword">. </span><span class="string">'D'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">|| </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">|| </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="string">'T'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">h</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">. </span><span class="string">'H'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">. </span><span class="string">'M'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s </span><span class="keyword">. </span><span class="string">'S'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sReturn</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
example use:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$oDateIntervalValue </span><span class="keyword">= new </span><span class="default">MyDateInterval</span><span class="keyword">(</span><span class="string">'P3M'</span><span class="keyword">);<br />
<br />
</span><span class="default">$sFormatResult </span><span class="keyword">= </span><span class="default">$oDateIntervalValue</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="default">MyDateInterval</span><span class="keyword">::</span><span class="default">INTERVAL_ICALENDAR</span><span class="keyword">); </span><span class="comment">// "P0Y3M0DT0H0M0S"<br />
</span><span class="default">$sToStringResult </span><span class="keyword">= (string) </span><span class="default">$oDateIntervalValue</span><span class="keyword">; </span><span class="comment">// "P3M"<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(new </span><span class="default">MyDateInterval</span><span class="keyword">(</span><span class="default">$sFormatResult</span><span class="keyword">)); </span><span class="comment">// object like $oDateIntervalValue<br />
</span><span class="default">var_dump</span><span class="keyword">(new </span><span class="default">MyDateInterval</span><span class="keyword">(</span><span class="default">$sToStringResult</span><span class="keyword">)); </span><span class="comment">// object like $oDateIntervalValue<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113269""></a>
  <div class="note">
   <strong class="user">till at php dot net</strong>
   <a href="#113269" class="date">19-Sep-2013 02:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that the following code will not throw an exception or return false, or anything:<br />
<br />
<span class="default">&lt;?php<br />
$interval </span><span class="keyword">= new \</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">"this is not a date interval"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Your best way to check if what you created is a "valid" interval, by doing something like the following:<br />
<br />
<span class="default">&lt;?php<br />
$interval </span><span class="keyword">= new \</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">"this is not a date interval"</span><span class="keyword">);<br />
if (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; throw new \</span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">"Wrong interval"</span><span class="keyword">);<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113091""></a>
  <div class="note">
   <strong class="user">Miller</strong>
   <a href="#113091" class="date">28-Aug-2013 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This DateInterval extension allows you to write a formatted timestamp but omit the "zero values" and handle things like listing, plurals, etc.<br />
Example input: '%y year(s)', '%m month(s)', '%d day(s)', '%h hour(s)', '%i minute(s)', '%s second(s)'<br />
Example output: 1 year, 2 months, 16 days, 1 minute, and 15 seconds<br />
Example input: '%y a?o(s)', '%m mes(es)', '%d día(s)', '%h hora(s)', '%i minuto(s)', '%s segundo(s)'<br />
Example output: 1 a?o, 2 meses, 16 días, 1 minuto, y 15 segundos<br />
<br />
&lt;meta charset="UTF-8"&gt;<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
<br />
class </span><span class="default">MyDateInterval </span><span class="keyword">extends </span><span class="default">DateInterval </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pluralCheck </span><span class="keyword">= </span><span class="string">'()'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Must be exactly 2 characters long<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // The first character is the opening brace, the second the closing brace<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Text between these braces will be used if &gt; 1, or replaced with $this-&gt;singularReplacement if = 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$singularReplacement </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Replaces $this-&gt;pluralCheck if = 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // hour(s) -&gt; hour<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$separator </span><span class="keyword">= </span><span class="string">', '</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Delimiter between units<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 3 hours, 2 minutes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$finalSeparator </span><span class="keyword">= </span><span class="string">', and '</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Delimeter between next-to-last unit and last unit<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 3 hours, 2 minutes, and 1 second<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$finalSeparator2 </span><span class="keyword">= </span><span class="string">' and '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Delimeter between units if there are only 2 units<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 3 hours and 2 minutes<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">createFromDateInterval </span><span class="keyword">(</span><span class="default">DateInterval $interval</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">self</span><span class="keyword">(</span><span class="string">'PT0S'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$interval </span><span class="keyword">as </span><span class="default">$property </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$obj</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">formatWithoutZeroes </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Each argument may have only one % parameter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Result does not handle %R or %r -- but you can retrieve that information using $this-&gt;format('%R') and using your own logic<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts </span><span class="keyword">= array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">func_get_args</span><span class="keyword">() as </span><span class="default">$arg</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pre </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">mb_strpos</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="string">'%'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">mb_strpos</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="string">'%'</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">mb_strpos</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">)+</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">parent</span><span class="keyword">::</span><span class="default">format</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$open </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pluralCheck</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">'/'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$close </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pluralCheck</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="string">'/'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">"/</span><span class="default">$open</span><span class="string">(.*)</span><span class="default">$close</span><span class="string">/"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list (</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">) = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">singularReplacement </span><span class="keyword">: </span><span class="string">'$1'</span><span class="keyword">, array (</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$num </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts</span><span class="keyword">[] = </span><span class="default">$pre</span><span class="keyword">.</span><span class="default">$num</span><span class="keyword">.</span><span class="default">$post</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$parts</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$parts </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$part</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$part</span><span class="keyword">.(</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">-</span><span class="default">2 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">separator </span><span class="keyword">: (</span><span class="default">$l </span><span class="keyword">== </span><span class="default">2 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">finalSeparator2 </span><span class="keyword">: (</span><span class="default">$i </span><span class="keyword">== </span><span class="default">$l</span><span class="keyword">-</span><span class="default">2 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">finalSeparator </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">date_default_timezone_set</span><span class="keyword">(</span><span class="string">'America/Phoenix'</span><span class="keyword">);<br />
<br />
</span><span class="default">$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'today'</span><span class="keyword">);<br />
echo </span><span class="string">'Today is '</span><span class="keyword">, </span><span class="default">$today</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F d, Y h:ia'</span><span class="keyword">), </span><span class="string">'.&lt;br&gt;'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Today is August 28, 2013 12:00am.&lt;br&gt;<br />
</span><span class="default">$expiration </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'today +1 year +2 months +16 days +1 minute +15 seconds'</span><span class="keyword">);<br />
echo </span><span class="string">'Expires '</span><span class="keyword">, </span><span class="default">$expiration</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F d, Y h:ia'</span><span class="keyword">), </span><span class="string">'.&lt;br&gt;'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Expires November 13, 2014 12:01am.&lt;br&gt;<br />
<br />
</span><span class="default">$interval </span><span class="keyword">= </span><span class="default">MyDateInterval</span><span class="keyword">::</span><span class="default">createFromDateInterval</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$expiration</span><span class="keyword">));<br />
<br />
echo </span><span class="string">'That is '</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">formatWithoutZeroes</span><span class="keyword">(</span><span class="string">'%y year(s)'</span><span class="keyword">, </span><span class="string">'%m month(s)'</span><span class="keyword">, </span><span class="string">'%d day(s)'</span><span class="keyword">, </span><span class="string">'%h hour(s)'</span><span class="keyword">, </span><span class="string">'%i minute(s)'</span><span class="keyword">, </span><span class="string">'%s second(s)'</span><span class="keyword">), </span><span class="string">' from now.&lt;br&gt;'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// That is 1 year, 2 months, 16 days, 1 minute, and 15 seconds from now.<br />
<br />
</span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">finalSeparator </span><span class="keyword">= </span><span class="string">', y '</span><span class="keyword">;<br />
</span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">finalSeparator2 </span><span class="keyword">= </span><span class="string">' y '</span><span class="keyword">;<br />
echo </span><span class="string">'Que es de '</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">formatWithoutZeroes</span><span class="keyword">(</span><span class="string">'%y a?o(s)'</span><span class="keyword">, </span><span class="string">'%m mes(es)'</span><span class="keyword">, </span><span class="string">'%d día(s)'</span><span class="keyword">, </span><span class="string">'%h hora(s)'</span><span class="keyword">, </span><span class="string">'%i minuto(s)'</span><span class="keyword">, </span><span class="string">'%s segundo(s)'</span><span class="keyword">), </span><span class="string">' a partir de ahora.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Que es de 1 a?o, 2 meses, 16 días, 1 minuto, y 15 segundos a partir de ahora.<br />
&nbsp;&nbsp;&nbsp; // Is that correct? Spanish isn't my strength....<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112872""></a>
  <div class="note">
   <strong class="user">computrius</strong>
   <a href="#112872" class="date">31-Jul-2013 02:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that they "days" property that is populated by \DateTime::diff does not contain a float for the differences in time.<br />
It is rounded down to the nearest whole day.<br />
<br />
&nbsp;&nbsp;&nbsp; $d1 = new \DateTime("2013-07-31 10:29:00");<br />
&nbsp;&nbsp;&nbsp; $d2 = new \DateTime("2013-08-02 5:32:12");<br />
&nbsp;&nbsp;&nbsp; echo $d1-&gt;diff($d2)-&gt;days;<br />
<br />
Output: 1</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110743""></a>
  <div class="note">
   <strong class="user">artur at qrupa dot com</strong>
   <a href="#110743" class="date">30-Nov-2012 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using DateInterval('P3M') on 30th of November you get March instead of Ferbuary.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108970""></a>
  <div class="note">
   <strong class="user">php at keith tyler dot com</strong>
   <a href="#108970" class="date">08-Jun-2012 05:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
DateInterval does not support split seconds (microseconds or milliseconds etc.) when doing a diff between two DateTime objects that contain microseconds.
<br />

<br />
So you cannot do the following, for example:
<br />

<br />
<span class="default">&lt;?php
<br />
$d1</span><span class="keyword">=new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2012-07-08 11:14:15.638276"</span><span class="keyword">);
<br />
</span><span class="default">$d2</span><span class="keyword">=new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2012-07-08 11:14:15.889342"</span><span class="keyword">);
<br />
</span><span class="default">$diff</span><span class="keyword">=</span><span class="default">$d2</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$d1</span><span class="keyword">);
<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$diff </span><span class="keyword">) ;
<br />

<br />
</span><span class="comment">/* returns:
<br />

<br />
DateInterval Object
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [y] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [m] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [d] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [h] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [i] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [s] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [invert] =&gt; 0
<br />
&nbsp;&nbsp;&nbsp; [days] =&gt; 0
<br />
)
<br />

<br />
*/
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You get back 0 when you actually want to get 0.251066 seconds.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102930""></a>
  <div class="note">
   <strong class="user">p dot scheit at ps-webforge dot com</strong>
   <a href="#102930" class="date">15-Mar-2011 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to convert a Timespan given in Seconds into an DateInterval Object you could dot the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$dv </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT'</span><span class="keyword">.</span><span class="default">$timespan</span><span class="keyword">.</span><span class="string">'S'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
but wenn you look at the object, only the $dv-&gt;s property is set. <br />
<br />
As stated in the documentation to DateInterval::format<br />
<br />
The DateInterval::format() method does not recalculate carry over points in time strings nor in date segments. This is expected because it is not possible to overflow values like "32 days" which could be interpreted as anything from "1 month and 4 days" to "1 month and 1 day". <br />
<br />
If you still want to calculate the seconds into hours / days / years, etc do the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$d1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$d2 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$d2</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT'</span><span class="keyword">.</span><span class="default">$timespan</span><span class="keyword">.</span><span class="string">'S'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$iv </span><span class="keyword">= </span><span class="default">$d2</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$d1</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$iv is an DateInterval set with days, years, hours, seconds, etc ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
