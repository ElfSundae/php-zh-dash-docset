<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>常量</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.variables.external.html">? 来自 PHP 之外的变量</a></li>
      <li style="float: right;"><a href="language.constants.syntax.html">语法 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="langref.html">语言参考</a></li>
    <li>常量</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.constants" class="chapter">
  <h1>常量</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="language.constants.syntax.html">语法</a></li><li><a href="language.constants.predefined.html">预定义常量</a></li><li><a href="language.constants.magic.html">魔术常量</a></li></ul>


  <p class="simpara">
   常量是一个简单值的标识符（名字）。如同其名称所暗示的，在脚本执行期间该值不能改变（除了所谓的
   <a href="language.constants.magic.html" class="link">魔术常量</a>，它们其实不是常量）。常量大小写敏感。传统上常量标识符总是大写的。
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    在 PHP 8.0.0 之前，使用 <span class="function"><a href="function.define.html" class="function">define()</a></span> 定义的常量可能不区分大小写。
   </p>
  </p></blockquote>

 <p class="para">
   常量名和其它任何 PHP
   标签遵循同样的命名规则。合法的常量名以字母或下划线开始，后面跟着任何字母，数字或下划线。用正则表达式是这样表达的：
   <code class="code">^[a-zA-Z_\x80-\xff][a-zA-Z0-9_\x80-\xff]*$</code>。
  </p>
  <p class="para">
   还可以使用 <span class="function"><a href="function.define.html" class="function">define()</a></span> 函数来定义包含保留字或非常规名称的常量，这类常量可以通过
   <span class="function"><a href="function.constant.html" class="function">constant()</a></span> 函数来获取名称，但是非常不推荐这种用法。
  </p>
  <div class="tip"><strong class="tip">Tip</strong><p class="simpara">请参见<a href="userlandnaming.html" class="xref">用户空间命名指南</a>。</p></div>  
  <p class="para">
   
   <div class="example" id="example-104">
    <p><strong>Example #1 合法与非法的常量名</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;合法的常量名<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"FOO"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"something"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"FOO2"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"something&nbsp;else"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"FOO_BAR"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"something&nbsp;more"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;非法的常量名<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"2FOO"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"something"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;下面的定义是合法的，但应该避免这样做：(自定义常量不要以__开头)<br />//&nbsp;也许将来有一天&nbsp;PHP&nbsp;会定义一个&nbsp;__FOO__&nbsp;的魔术常量<br />//&nbsp;这样就会与你的代码相冲突<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"__FOO__"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"something"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    在这里，字母指的是 a-z，A-Z，以及从 128 到 255（0x80-0xff）的 ASCII 字符。
   </span>
  </p></blockquote>

  <p class="simpara">
   和 <a href="language.variables.predefined.html" class="link">superglobals</a> 一样，常量的范围是全局的。常量可以从脚本的任何地方被访问，而不考虑作用域。有关作用域的更多信息请阅读手册中的<a href="language.variables.scope.html" class="link">变量范围</a>。
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    从 PHP 7.1.0 开始，类常量可以声明为 protected 或 private 的可见性，
    使其只在其定义的类的层次范围内可用。
   </span>
  </p></blockquote>

 

  

 
 </div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125898""></a>
  <div class="note">
   <strong class="user">mparsa1372 at gmail dot com</strong>
   <a href="#125898" class="date">11-Mar-2021 05:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//Syntax of define constant in php<br />
//define(name, value, case-insensitive);<br />
<br />
//it will print 100 in output<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'BOOK'</span><span class="keyword">,</span><span class="default">100</span><span class="keyword">);<br />
echo </span><span class="default">BOOK</span><span class="keyword">;<br />
<br />
</span><span class="comment">//it will print 200 in output<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'book'</span><span class="keyword">, </span><span class="default">200 </span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
echo </span><span class="default">book</span><span class="keyword">;<br />
<br />
</span><span class="comment">//results of all are the same<br />
</span><span class="keyword">echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">BOOK</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">book</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125120""></a>
  <div class="note">
   <strong class="user">warwick dot jm dot barnes at gmail dot com</strong>
   <a href="#125120" class="date">16-Jun-2020 07:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The documentation says, "You can access constants anywhere in your script without regard to scope", but it's worth keeping in mind that a const declaration must appear in the source file before the place where it's used.<br />
<br />
This doesn't work (using PHP 5.4):<br />
<span class="default">&lt;?php<br />
foo</span><span class="keyword">();<br />
const </span><span class="default">X </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
function </span><span class="default">foo</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Value of X: " </span><span class="keyword">. </span><span class="default">X</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Result: "Value of X: X"<br />
<br />
But this works:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">const </span><span class="default">X </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">foo</span><span class="keyword">();<br />
function </span><span class="default">foo</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Value of X: " </span><span class="keyword">. </span><span class="default">X</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Result: "Value of X: 1"<br />
<br />
This is potentially confusing because you can refer to a function that occurs later in your source file, but not a constant. Even though the const declaration is processed at compile time, it behaves a bit like it's being processed at run time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124670""></a>
  <div class="note">
   <strong class="user">Sumon Mahmud (Abu Taleb)</strong>
   <a href="#124670" class="date">01-Feb-2020 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
define('MYKEY', 'The value is from outside of class');<br />
class Abc{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; const MAX = 10;&nbsp; &nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp;&nbsp; public function __construct(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; define('TEST', 'hello world! '); // using define function in class constructor<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function getOutput(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo TEST . MYKEY . PHP_EOL; // accessing constants from outside of class<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$obj = new Abc();&nbsp; // define function will call<br />
$obj-&gt;getOutput(); // hello world! The value is from outside of class<br />
<br />
echo Abc::MAX . PHP_EOL; // 10 - accessing constant using scope resolution <br />
<br />
echo TEST; // hello world!&nbsp; Because the constants is defined while constructor call</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121732""></a>
  <div class="note">
   <strong class="user">jcastromail at yahoo dot es</strong>
   <a href="#121732" class="date">07-Oct-2017 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Performance of constants.&nbsp; PHP 7.1.10 32 bits (Opcache active, windows 10 i7-64bits) but apparently the trends is the same with the 5.x<br />
<br />
using a constant declared by DEFINE('CNS',value) : 0.63575601577759s<br />
using a constant declared by const CNS=value : 0.61372208595276s<br />
using a variable declared by $v=value : 0.51184010505676s<br />
<br />
In average, the use of DEFINE and CONST is around the same with some sightly&nbsp; better performance of CONST instead of DEFINE. However, using a variable is around 10-50% better than to use a constant.&nbsp; So, for a performance intensive task, constant is not the best option.<br />
<br />
$p1=microtime(true);<br />
$x=0;<br />
for($i=0;$i&lt;50000000;$i++) {<br />
&nbsp;&nbsp;&nbsp; $x+=CNS;<br />
}<br />
$p2=microtime(true);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120578""></a>
  <div class="note">
   <strong class="user">xs2ilyas at gmail dot com</strong>
   <a href="#120578" class="date">03-Feb-2017 05:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When we start a constant name with space, it doesn't produce any error.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; define </span><span class="keyword">(</span><span class="string">" YEAR"</span><span class="keyword">,&nbsp; </span><span class="default">2000</span><span class="keyword">)<br />
&nbsp; echo </span><span class="string">"success"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
output: success<br />
<br />
But when we call this constant, it produce error.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; define </span><span class="keyword">(</span><span class="string">" YEAR"</span><span class="keyword">,&nbsp; </span><span class="default">2000</span><span class="keyword">)<br />
&nbsp; echo </span><span class="default">YEAR</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
output: E_NOTICE :&nbsp; type 8 -- Use of undefined constant YEAR - assumed 'YEAR' -- at line 4 YEAR</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118671""></a>
  <div class="note">
   <strong class="user">gried at NOSPAM dot nsys dot by</strong>
   <a href="#118671" class="date">17-Jan-2016 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lets expand comment of 'storm' about usage of undefined constants. His claim that 'An undefined constant evaluates as true...' is wrong and right at same time. As said further in documentation ' If you use an undefined constant, PHP assumes that you mean the name of the constant itself, just as if you called it as a string...'. So yeah, undefined global constant when accessed directly will be resolved as string equal to name of sought constant (as thought PHP supposes that programmer had forgot apostrophes and autofixes it) and non-zero non-empty string converts to True.<br />
<br />
There are two ways to prevent this:<br />
1. always use function constant('CONST_NAME') to get constant value (BTW it also works for class constants - constant('CLASS_NAME::CONST_NAME') );<br />
2. use only class constants (that are defined inside of class using keyword const) because they are not converted to string when not found but throw exception instead (Fatal error: Undefined class constant).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116749""></a>
  <div class="note">
   <strong class="user">Raheel Khan</strong>
   <a href="#116749" class="date">22-Feb-2015 08:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
class constant are by default public in nature but they cannot be assigned visibility factor and in turn gives syntax error<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">constants </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">MAX_VALUE </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public const </span><span class="default">MIN_VALUE </span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="comment">// This will work<br />
</span><span class="keyword">echo </span><span class="default">constants</span><span class="keyword">::</span><span class="default">MAX_VALUE</span><span class="keyword">;<br />
<br />
</span><span class="comment">// This will return syntax error <br />
</span><span class="keyword">echo </span><span class="default">constants</span><span class="keyword">::</span><span class="default">MIN_VALUE</span><span class="keyword">; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114762""></a>
  <div class="note">
   <strong class="user">php at webflips dot net</strong>
   <a href="#114762" class="date">02-Apr-2014 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is perfectly valid to use a built-in PHP keyword as a constant name - as long as you the constant() function to retrieve it later:<br />
<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">'echo'</span><span class="keyword">, </span><span class="string">'My constant value'</span><span class="keyword">);<br />
<br />
echo </span><span class="default">constant</span><span class="keyword">(</span><span class="string">'echo'</span><span class="keyword">); </span><span class="comment">// outputs 'My constant value'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108717""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#108717" class="date">20-May-2012 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
11/14/2016 - note updated by sobak
<br />
-----
<br />

<br />
CONSTANTS and PHP Class Definitions
<br />

<br />
Using "define('MY_VAR', 'default value')" INSIDE a class definition does not work as expected. You have to use the PHP keyword 'const' and initialize it with a scalar value -- boolean, int, float, string (or array in PHP 5.6+) -- right away.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
define</span><span class="keyword">(</span><span class="string">'MIN_VALUE'</span><span class="keyword">, </span><span class="string">'0.0'</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// RIGHT - Works OUTSIDE of a class definition.
<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'MAX_VALUE'</span><span class="keyword">, </span><span class="string">'1.0'</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// RIGHT - Works OUTSIDE of a class definition.
<br />

<br />
//const MIN_VALUE = 0.0;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; RIGHT - Works both INSIDE and OUTSIDE of a class definition.
<br />
//const MAX_VALUE = 1.0;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; RIGHT - Works both INSIDE and OUTSIDE of a class definition.
<br />

<br />
</span><span class="keyword">class </span><span class="default">Constants
<br />
</span><span class="keyword">{
<br />
&nbsp; </span><span class="comment">//define('MIN_VALUE', '0.0');&nbsp; WRONG - Works OUTSIDE of a class definition.
<br />
&nbsp; //define('MAX_VALUE', '1.0');&nbsp; WRONG - Works OUTSIDE of a class definition.
<br />

<br />
&nbsp; </span><span class="keyword">const </span><span class="default">MIN_VALUE </span><span class="keyword">= </span><span class="default">0.0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">// RIGHT - Works INSIDE of a class definition.
<br />
&nbsp; </span><span class="keyword">const </span><span class="default">MAX_VALUE </span><span class="keyword">= </span><span class="default">1.0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">// RIGHT - Works INSIDE of a class definition.
<br />

<br />
&nbsp; </span><span class="keyword">public static function </span><span class="default">getMinValue</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">MIN_VALUE</span><span class="keyword">;
<br />
&nbsp; }
<br />

<br />
&nbsp; public static function </span><span class="default">getMaxValue</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">MAX_VALUE</span><span class="keyword">;
<br />
&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
#Example 1:
<br />
You can access these constants DIRECTLY like so:
<br />
&nbsp;* type the class name exactly.
<br />
&nbsp;* type two (2) colons.
<br />
&nbsp;* type the const name exactly.
<br />

<br />
#Example 2:
<br />
Because our class definition provides two (2) static functions, you can also access them like so:
<br />
&nbsp;* type the class name exactly.
<br />
&nbsp;* type two (2) colons.
<br />
&nbsp;* type the function name exactly (with the parentheses).
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">#Example 1:
<br />
</span><span class="default">$min </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">MIN_VALUE</span><span class="keyword">;
<br />
</span><span class="default">$max </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">MAX_VALUE</span><span class="keyword">;
<br />

<br />
</span><span class="comment">#Example 2:
<br />
</span><span class="default">$min </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">getMinValue</span><span class="keyword">();
<br />
</span><span class="default">$max </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">getMaxValue</span><span class="keyword">();
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Once class constants are declared AND initialized, they cannot be set to different values -- that is why there are no setMinValue() and setMaxValue() functions in the class definition -- which means they are READ-ONLY and STATIC (shared by all instances of the class).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74836""></a>
  <div class="note">
   <strong class="user">Andreas R.</strong>
   <a href="#74836" class="date">30-Apr-2007 07:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for predefined constants like<br />
* PHP_OS (to show the operating system, PHP was compiled for; php_uname('s') might be more suitable),<br />
* DIRECTORY_SEPARATOR ("\\" on Win, '/' Linux,...)<br />
* PATH_SEPARATOR (';' on Win, ':' on Linux,...)<br />
they are buried in 'Predefined Constants' under 'List of Reserved Words' in the appendix:<br />
<a href="http://www.php.net/manual/en/reserved.constants.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/reserved.constants.php</a><br />
while the latter two are also mentioned in 'Directory Functions'<br />
<a href="http://www.php.net/manual/en/ref.dir.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/ref.dir.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52133""></a>
  <div class="note">
   <strong class="user">hafenator2000 at yahoo dot com</strong>
   <a href="#52133" class="date">21-Apr-2005 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP Modules also define constants.&nbsp; Make sure to avoid constant name collisions.&nbsp; There are two ways to do this that I can think of.<br />
First: in your code make sure that the constant name is not already used.&nbsp; ex. <span class="default">&lt;?php </span><span class="keyword">if (! </span><span class="default">defined</span><span class="keyword">(</span><span class="string">"CONSTANT_NAME"</span><span class="keyword">)) { </span><span class="default">Define</span><span class="keyword">(</span><span class="string">"CONSTANT_NAME"</span><span class="keyword">,</span><span class="string">"Some Value"</span><span class="keyword">); } </span><span class="default">?&gt;</span>&nbsp; This can get messy when you start thinking about collision handling, and the implications of this.<br />
Second: Use some off prepend to all your constant names without exception&nbsp; ex. <span class="default">&lt;?php Define</span><span class="keyword">(</span><span class="string">"SITE_CONSTANT_NAME"</span><span class="keyword">,</span><span class="string">"Some Value"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
Perhaps the developers or documentation maintainers could recommend a good prepend and ask module writers to avoid that prepend in modules.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52008""></a>
  <div class="note">
   <strong class="user">storm</strong>
   <a href="#52008" class="date">18-Apr-2005 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An undefined constant evaluates as true when not used correctly. Say for example you had something like this:<br />
<br />
settings.php<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Debug mode<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">,</span><span class="default">false</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
test.php<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include(</span><span class="string">'settings.php'</span><span class="keyword">);<br />
<br />
if (</span><span class="default">DEBUG</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// echo some sensitive data.<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
If for some reason settings.php doesn't get included and the DEBUG constant is not set, PHP will STILL print the sensitive data. The solution is to evaluate it. Like so:<br />
<br />
settings.php<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Debug mode<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
test.php<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include(</span><span class="string">'settings.php'</span><span class="keyword">);<br />
<br />
if (</span><span class="default">DEBUG </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// echo some sensitive data.<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Now it works correctly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35064""></a>
  <div class="note">
   <strong class="user">ewspencer at industrex dot com</strong>
   <a href="#35064" class="date">18-Aug-2003 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find using the concatenation operator helps disambiguate value assignments with constants. For example, setting constants in a global configuration file:
<br />

<br />
<span class="default">&lt;?php
<br />
define</span><span class="keyword">(</span><span class="string">'LOCATOR'</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"/locator"</span><span class="keyword">);
<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'CLASSES'</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">LOCATOR</span><span class="keyword">.</span><span class="string">"/code/classes"</span><span class="keyword">);
<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'FUNCTIONS'</span><span class="keyword">, </span><span class="default">LOCATOR</span><span class="keyword">.</span><span class="string">"/code/functions"</span><span class="keyword">);
<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'USERDIR'</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">LOCATOR</span><span class="keyword">.</span><span class="string">"/user"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Later, I can use the same convention when invoking a constant's value for static constructs such as require() calls:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">require_once(</span><span class="default">FUNCTIONS</span><span class="keyword">.</span><span class="string">"/database.fnc"</span><span class="keyword">);
<br />
require_once(</span><span class="default">FUNCTIONS</span><span class="keyword">.</span><span class="string">"/randchar.fnc"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
as well as dynamic constructs, typical of value assignment to variables:
<br />

<br />
<span class="default">&lt;?php
<br />
$userid&nbsp; </span><span class="keyword">= </span><span class="default">randchar</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">,</span><span class="string">'anc'</span><span class="keyword">,</span><span class="string">'u'</span><span class="keyword">);
<br />
</span><span class="default">$usermap </span><span class="keyword">= </span><span class="default">USERDIR</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$userid</span><span class="keyword">.</span><span class="string">".png"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The above convention works for me, and helps produce self-documenting code.
<br />

<br />
-- Erich</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19363""></a>
  <div class="note">
   <strong class="user">katana at katana-inc dot com</strong>
   <a href="#19363" class="date">25-Feb-2002 11:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning, constants used within the heredoc syntax (<a href="http://www.php.net/manual/en/language.types.string.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/language.types.string.php</a>) are not interpreted!
<br />

<br />
Editor's Note: This is true. PHP has no way of recognizing the constant from any other string of characters within the heredoc block.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
