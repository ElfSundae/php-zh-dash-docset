<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>The ArrayObject class</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="spl.misc.html">? 各种类及接口</a></li>
      <li style="float: right;"><a href="arrayobject.append.html">ArrayObject::append ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="spl.misc.html">各种类及接口</a></li>
    <li>The ArrayObject class</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.arrayobject" class="reference">
 <h1 class="title">The ArrayObject class</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5, PHP 7, PHP 8)</p>
 

  <div class="section" id="arrayobject.intro">
   <h2 class="title">简介</h2>
   <p class="para">
    This class allows objects to work as arrays.
   </p>
  </div>

 
  <div class="section" id="arrayobject.synopsis">
   <h2 class="title">类摘要</h2>
 

   <div class="classsynopsis"><div class="classsynopsisinfo">
    
     <span class="modifier">class</span> <strong class="classname"><strong class="classname">ArrayObject</strong></strong>
    

    
     <span class="modifier">implements</span>
      <a href="class.iteratoraggregate.html" class="interfacename">IteratorAggregate</a>,

     <a href="class.arrayaccess.html" class="interfacename">ArrayAccess</a>,

     <a href="class.serializable.html" class="interfacename">Serializable</a>,

     <a href="class.countable.html" class="interfacename">Countable</a> {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 常量 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      <var class="fieldsynopsis_varname"><a href="class.arrayobject.html#arrayobject.constants.std-prop-list"><var class="varname">STD_PROP_LIST</var></a></var>;</div>

    <div class="fieldsynopsis"><span class="modifier">public</span>
     <span class="modifier">const</span>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
      <var class="fieldsynopsis_varname"><a href="class.arrayobject.html#arrayobject.constants.array-as-props"><var class="varname">ARRAY_AS_PROPS</var></a></var>;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 方法 */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="arrayobject.construct.html" class="methodname">__construct</a></span>(<span class="methodparam"><span class="type"><span class="type"><a href="language.types.array.html" class="type array">array</a></span>|<span class="type"><a href="language.types.object.html" class="type object">object</a></span></span> <code class="parameter">$array</code><span class="initializer"> = []</span></span>, <span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>, <span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$iteratorClass</code><span class="initializer"> = ArrayIterator::class</span></span>)</div>

    <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.append.html" class="methodname">append</a></span>(<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type"><a href="language.types.void.html" class="type void">void</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.asort.html" class="methodname">asort</a></span>(<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code><a href="array.constants.html#constant.sort-regular">SORT_REGULAR</a></code></strong></span></span>): <span class="type"><a href="language.types.value.html" class="type true">true</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.count.html" class="methodname">count</a></span>(): <span class="type"><a href="language.types.integer.html" class="type int">int</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.exchangearray.html" class="methodname">exchangeArray</a></span>(<span class="methodparam"><span class="type"><span class="type"><a href="language.types.array.html" class="type array">array</a></span>|<span class="type"><a href="language.types.object.html" class="type object">object</a></span></span> <code class="parameter">$array</code></span>): <span class="type"><a href="language.types.array.html" class="type array">array</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.getarraycopy.html" class="methodname">getArrayCopy</a></span>(): <span class="type"><a href="language.types.array.html" class="type array">array</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.getflags.html" class="methodname">getFlags</a></span>(): <span class="type"><a href="language.types.integer.html" class="type int">int</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.getiterator.html" class="methodname">getIterator</a></span>(): <span class="type"><a href="class.iterator.html" class="type Iterator">Iterator</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.getiteratorclass.html" class="methodname">getIteratorClass</a></span>(): <span class="type"><a href="language.types.string.html" class="type string">string</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.ksort.html" class="methodname">ksort</a></span>(<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$flags</code><span class="initializer"> = <strong><code><a href="array.constants.html#constant.sort-regular">SORT_REGULAR</a></code></strong></span></span>): <span class="type"><a href="language.types.value.html" class="type true">true</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.natcasesort.html" class="methodname">natcasesort</a></span>(): <span class="type"><a href="language.types.value.html" class="type true">true</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.natsort.html" class="methodname">natsort</a></span>(): <span class="type"><a href="language.types.value.html" class="type true">true</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.offsetexists.html" class="methodname">offsetExists</a></span>(<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.offsetget.html" class="methodname">offsetGet</a></span>(<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>): <span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.offsetset.html" class="methodname">offsetSet</a></span>(<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>, <span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type"><a href="language.types.void.html" class="type void">void</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.offsetunset.html" class="methodname">offsetUnset</a></span>(<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$key</code></span>): <span class="type"><a href="language.types.void.html" class="type void">void</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.serialize.html" class="methodname">serialize</a></span>(): <span class="type"><a href="language.types.string.html" class="type string">string</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.setflags.html" class="methodname">setFlags</a></span>(<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$flags</code></span>): <span class="type"><a href="language.types.void.html" class="type void">void</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.setiteratorclass.html" class="methodname">setIteratorClass</a></span>(<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$iteratorClass</code></span>): <span class="type"><a href="language.types.void.html" class="type void">void</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.uasort.html" class="methodname">uasort</a></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type"><a href="language.types.value.html" class="type true">true</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.uksort.html" class="methodname">uksort</a></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>): <span class="type"><a href="language.types.value.html" class="type true">true</a></span></div>
<div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname"><a href="arrayobject.unserialize.html" class="methodname">unserialize</a></span>(<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$data</code></span>): <span class="type"><a href="language.types.void.html" class="type void">void</a></span></div>

   }</div>
 
  </div>
 
  <div class="section" id="arrayobject.constants">
   <h2 class="title">预定义常量</h2>
   <div class="section" id="arrayobject.constants.flags">
    <h2 class="title">ArrayObject Flags</h2>
    <dl>

     
      <dt id="arrayobject.constants.std-prop-list"><strong><code><a href="class.arrayobject.html#arrayobject.constants.std-prop-list">ArrayObject::STD_PROP_LIST</a></code></strong></dt>
      <dd>
       <p class="para">
        Properties of the object have their normal functionality when
        accessed as list (<span class="function"><a href="function.var-dump.html" class="function">var_dump()</a></span>, <a href="control-structures.foreach.html" class="link">foreach</a>, etc.).
       </p>
      </dd>
     

     
      <dt id="arrayobject.constants.array-as-props"><strong><code><a href="class.arrayobject.html#arrayobject.constants.array-as-props">ArrayObject::ARRAY_AS_PROPS</a></code></strong></dt>
      <dd>
       <p class="para">
        Entries can be accessed as properties (read and write). The
        <span class="classname"><strong class="classname">ArrayObject</strong></span> class uses its own logic to access
        properties, thus no warning or error is raised when trying to read or
        write dynamic properties.
       </p>
      </dd>
     
    </dl>
   </div>
  </div>
  

 
 </div>
 
 




















































































































 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="arrayobject.append.html">ArrayObject::append</a> &mdash; 追加新的值作为最后一个元素。</li><li><a href="arrayobject.asort.html">ArrayObject::asort</a> &mdash; Sort the entries by value</li><li><a href="arrayobject.construct.html">ArrayObject::__construct</a> &mdash; Construct a new array object</li><li><a href="arrayobject.count.html">ArrayObject::count</a> &mdash; 统计 ArrayObject 内 public 属性的数量</li><li><a href="arrayobject.exchangearray.html">ArrayObject::exchangeArray</a> &mdash; Exchange the array for another one</li><li><a href="arrayobject.getarraycopy.html">ArrayObject::getArrayCopy</a> &mdash; Creates a copy of the ArrayObject</li><li><a href="arrayobject.getflags.html">ArrayObject::getFlags</a> &mdash; Gets the behavior flags</li><li><a href="arrayobject.getiterator.html">ArrayObject::getIterator</a> &mdash; Create a new iterator from an ArrayObject instance</li><li><a href="arrayobject.getiteratorclass.html">ArrayObject::getIteratorClass</a> &mdash; Gets the iterator classname for the ArrayObject</li><li><a href="arrayobject.ksort.html">ArrayObject::ksort</a> &mdash; Sort the entries by key</li><li><a href="arrayobject.natcasesort.html">ArrayObject::natcasesort</a> &mdash; Sort an array using a case insensitive &quot;natural order&quot; algorithm</li><li><a href="arrayobject.natsort.html">ArrayObject::natsort</a> &mdash; Sort entries using a &quot;natural order&quot; algorithm</li><li><a href="arrayobject.offsetexists.html">ArrayObject::offsetExists</a> &mdash; Returns whether the requested index exists</li><li><a href="arrayobject.offsetget.html">ArrayObject::offsetGet</a> &mdash; Returns the value at the specified index</li><li><a href="arrayobject.offsetset.html">ArrayObject::offsetSet</a> &mdash; 为指定索引设定新值</li><li><a href="arrayobject.offsetunset.html">ArrayObject::offsetUnset</a> &mdash; Unsets the value at the specified index</li><li><a href="arrayobject.serialize.html">ArrayObject::serialize</a> &mdash; Serialize an ArrayObject</li><li><a href="arrayobject.setflags.html">ArrayObject::setFlags</a> &mdash; Sets the behavior flags</li><li><a href="arrayobject.setiteratorclass.html">ArrayObject::setIteratorClass</a> &mdash; Sets the iterator classname for the ArrayObject</li><li><a href="arrayobject.uasort.html">ArrayObject::uasort</a> &mdash; Sort the entries with a user-defined comparison function and maintain key association</li><li><a href="arrayobject.uksort.html">ArrayObject::uksort</a> &mdash; Sort the entries by keys using a user-defined comparison function</li><li><a href="arrayobject.unserialize.html">ArrayObject::unserialize</a> &mdash; Unserialize an ArrayObject</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="126811""></a>
  <div class="note">
   <strong class="user">bub at gmail dot com</strong>
   <a href="#126811" class="date">30-Jan-2022 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need the last key of your collection use:<br />
<span class="default">&lt;?php<br />
array_key_last</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getArrayCopy</span><span class="keyword">())<br />
</span><span class="default">?&gt;<br />
</span><br />
In an extending class it could look like:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Collection </span><span class="keyword">extends </span><span class="default">ArrayObject<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">lastKey</span><span class="keyword">(): </span><span class="default">int<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_key_last</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getArrayCopy</span><span class="keyword">());<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you want to use any type safe collection:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">BookCollection </span><span class="keyword">extends </span><span class="default">Collection<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">add</span><span class="keyword">(</span><span class="default">Book $book</span><span class="keyword">) : </span><span class="default">void<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">offsetSet</span><span class="keyword">(</span><span class="default">$book</span><span class="keyword">-&gt;</span><span class="default">id</span><span class="keyword">, </span><span class="default">$book</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// note the return type "Book"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">get</span><span class="keyword">(</span><span class="default">int $bookId</span><span class="keyword">) : </span><span class="default">Book <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">offsetGet</span><span class="keyword">(</span><span class="default">$bookId</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125849""></a>
  <div class="note">
   <strong class="user">hello at rayfung dot hk</strong>
   <a href="#125849" class="date">22-Feb-2021 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use built-in array function with ArrayObject, store the iterator instance and return the value as reference in offsetGet.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Collection </span><span class="keyword">extends </span><span class="default">\ArrayObject </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(array </span><span class="default">$data </span><span class="keyword">= [])<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">\is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) &amp;&amp; !</span><span class="default">\array_key_exists</span><span class="keyword">(</span><span class="string">'ArrayAccess'</span><span class="keyword">, </span><span class="default">class_implements</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= [</span><span class="default">$data</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">iterator </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getIterator</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function &amp;</span><span class="default">offsetGet</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= &amp;</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">iterator</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] ?? </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122712""></a>
  <div class="note">
   <strong class="user">Vuong Nguyen</strong>
   <a href="#122712" class="date">08-May-2018 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can easily realise that ArrayObject can use various functions as they are in ArrayIterator to iterate an object-as-a-array. However, you need to "activate" these function (rewind, valid, next and so on...) by using getIterator() first. Actually this function inherits from Iterator Aggregate interface.<br />
<br />
Take a look at the following basic example. The results are the same:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">];<br />
</span><span class="default">$a </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="default">$iterator </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">getIterator</span><span class="keyword">();<br />
<br />
for(</span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">(); </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">(); </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">()){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()*</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
for(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">()){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()*</span><span class="default">2</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="comment">//Resulst are the same 2468 AND 2468</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122444""></a>
  <div class="note">
   <strong class="user">rudie</strong>
   <a href="#122444" class="date">26-Feb-2018 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want numerical ArrayObject objects to play nice with json_encode(), implement JsonSerializable:<br />
<br />
class JsonSerializableArrayObject extends ArrayObject implements JsonSerializable {<br />
&nbsp;&nbsp;&nbsp; function jsonSerialize() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $this-&gt;getArrayCopy();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
For assoc ArrayObject objects this isn't neccesary, but for numerical arrays it is, otherwise they will be formatted like<br />
<br />
{"0":"jaap","1":"karel"}<br />
<br />
instead of<br />
<br />
["jaap","karel"]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116162""></a>
  <div class="note">
   <strong class="user">Gilles A</strong>
   <a href="#116162" class="date">17-Nov-2014 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Example STD_PROP_LIST and ARRAY_AS_PROP combined<br />
<span class="default">&lt;?php<br />
$ao </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">();<br />
</span><span class="default">$ao </span><span class="keyword">-&gt;</span><span class="default">setFlags</span><span class="keyword">(</span><span class="default">ArrayObject</span><span class="keyword">::</span><span class="default">STD_PROP_LIST</span><span class="keyword">|</span><span class="default">ArrayObject</span><span class="keyword">::</span><span class="default">ARRAY_AS_PROPS</span><span class="keyword">);<br />
<br />
</span><span class="default">$ao</span><span class="keyword">-&gt;</span><span class="default">prop </span><span class="keyword">= </span><span class="string">'prop data'</span><span class="keyword">;<br />
</span><span class="default">$ao</span><span class="keyword">[</span><span class="string">'arr'</span><span class="keyword">] = </span><span class="string">'array data'</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$ao</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
// Result<br />
<br />
ArrayObject Object<br />
(<br />
&nbsp;&nbsp;&nbsp; [storage:ArrayObject:private] =&amp;gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [prop] =&gt; prop data<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [arr] =&gt; array data<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112949""></a>
  <div class="note">
   <strong class="user">rwn dot gallego at gmail dot com</strong>
   <a href="#112949" class="date">11-Aug-2013 09:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a better explanation about the ArrayObject flags (STD_PROP_LIST and ARRAY_AS_PROPS) right here: <br />
<br />
<a href="http://stackoverflow.com/a/16619183/1019305" rel="nofollow" target="_blank">http://stackoverflow.com/a/16619183/1019305</a><br />
<br />
Thanks to JayTaph</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107079""></a>
  <div class="note">
   <strong class="user">php5 dot man at lightning dot hu</strong>
   <a href="#107079" class="date">05-Jan-2012 08:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As you know ArrayObject is not an array so you can't use the built in array functions. Here's a trick around that:<br />
<br />
Extend the ArrayObject class with your own and implement this magic method:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">) || </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">) !== </span><span class="string">'array_'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">BadMethodCallException</span><span class="keyword">(</span><span class="default">__CLASS__</span><span class="keyword">.</span><span class="string">'-&gt;'</span><span class="keyword">.</span><span class="default">$func</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getArrayCopy</span><span class="keyword">()), </span><span class="default">$argv</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Now you can do this with any array_* function:<br />
<span class="default">&lt;?php<br />
$yourObject</span><span class="keyword">-&gt;</span><span class="default">array_keys</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span>- Don't forget to ommit the first parameter - it's automatic!<br />
<br />
Note: You might want to write your own functions if you're working with large sets of data.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105481""></a>
  <div class="note">
   <strong class="user">MarkAndrewSlade at gmail dot com</strong>
   <a href="#105481" class="date">21-Aug-2011 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found the description of STD_PROP_LIST a bit vague, so I put together a simple demonstration to show its behavior:<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
$a </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">(array(), </span><span class="default">ArrayObject</span><span class="keyword">::</span><span class="default">STD_PROP_LIST</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'arr'</span><span class="keyword">] = </span><span class="string">'array data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">prop </span><span class="keyword">= </span><span class="string">'prop data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'arr'</span><span class="keyword">] = </span><span class="string">'array data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">prop </span><span class="keyword">= </span><span class="string">'prop data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="comment">// ArrayObject Object&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
//&nbsp; &nbsp; &nbsp; [prop] =&gt; prop data&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// )&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="comment">// ArrayObject Object&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
//&nbsp; &nbsp; &nbsp; [arr] =&gt; array data&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// )&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103508""></a>
  <div class="note">
   <strong class="user">sfinktah at php dot spamtrak dot org</strong>
   <a href="#103508" class="date">17-Apr-2011 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you plan to derive your own class from ArrayObject, and&nbsp; wish to maintain complete ArrayObject functionality (such as being able to cast to an array), it is necessary to use ArrayObject's own private property "storage".
<br />

<br />
Since that is impossible to do directly, you must use ArrayObject's offset{Set,Get,Exists,Unset} methods to manipulate it indirectly.
<br />

<br />
As a side benefit, this means you inherit all the iteration and other functions in complete working order.
<br />

<br />
This may sound obvious to someone who has never implemented their own ArrayObject class...&nbsp; but it is far from so.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">MyArrayObject </span><span class="keyword">extends </span><span class="default">ArrayObject </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$debugLevel </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static public function </span><span class="default">sdprintf</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (static::</span><span class="default">$debugLevel </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"printf"</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetGet</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetSet</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetExists</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetUnset</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$mao </span><span class="keyword">= new </span><span class="default">MyArrayObject</span><span class="keyword">();
<br />
</span><span class="default">$mao</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">] = </span><span class="string">"bob"</span><span class="keyword">;
<br />
</span><span class="default">$mao</span><span class="keyword">[</span><span class="string">"friend"</span><span class="keyword">] = </span><span class="string">"jane"</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">((array)</span><span class="default">$mao</span><span class="keyword">);
<br />

<br />
</span><span class="comment">/* Output:
<br />
&nbsp;
<br />
offsetSet(name,bob)
<br />
offsetSet(friend,jane)
<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [name] =&gt; bob
<br />
&nbsp;&nbsp;&nbsp; [friend] =&gt; jane
<br />
)&nbsp; &nbsp; &nbsp;&nbsp; */
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
If you wish to use the "Array as Properties" flag, you simply need to include this in your constructor: 
<br />

<br />
<span class="default">&lt;?php parent</span><span class="keyword">::</span><span class="default">setFlags</span><span class="keyword">(</span><span class="default">parent</span><span class="keyword">::</span><span class="default">ARRAY_AS_PROPS</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
This will allow you to do things such as the below example, without overriding __get or __set .
<br />

<br />
<span class="default">&lt;?php
<br />
$mao</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">"Phil"</span><span class="keyword">;
<br />
echo </span><span class="default">$mao</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">/* Outputs "Phil" */
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87964""></a>
  <div class="note">
   <strong class="user">deminy at deminy dot net</strong>
   <a href="#87964" class="date">02-Jan-2009 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generally variable $this can't be used as an array within an object context. For example, following code piece would cause a fatal error:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">TestThis </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">TestThis</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">'aaa'</span><span class="keyword">;<br />
echo </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
But things are different when $this is used in an ArrayObject object. e.g., following code piece are valid:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">TestArrayObject </span><span class="keyword">extends </span><span class="default">ArrayObject </span><span class="keyword">{&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">TestArrayObject</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">'aaa'</span><span class="keyword">;<br />
echo </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
