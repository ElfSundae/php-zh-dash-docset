<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>类型约束</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.oop5.object-comparison.html">? 对象比较</a></li>
      <li style="float: right;"><a href="language.oop5.late-static-bindings.html">后期静态绑定 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.oop5.html">类与对象</a></li>
    <li>类型约束</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.oop5.typehinting" class="sect1">
  <h2 class="title">类型约束</h2>
  <p class="para">
   PHP 5 可以使用类型约束。函数的参数可以指定必须为对象（在函数原型里面指定类的名字），接口，数组（PHP
   5.1 起）或者 <span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span>（PHP 5.4 起）。不过如果使用 <span class="type"><a href="language.types.null.html" class="type NULL">NULL</a></span>
   作为参数的默认值，那么在调用函数的时候依然可以使用 <span class="type"><a href="language.types.null.html" class="type NULL">NULL</a></span> 作为实参。
  </p>
  
  <p class="para">
   如果一个类或接口指定了类型约束，则其所有的子类或实现也都如此。
  </p>
  
  <p class="para">
   类型约束不能用于标量类型如 <span class="type"><a href="language.types.integer.html" class="type int">int</a></span> 或
   <span class="type"><a href="language.types.string.html" class="type string">string</a></span>。<a href="language.oop5.traits.html" class="link">Traits</a> 也不允许。
  </p>

  <div class="example" id="example-240">
   <p><strong>Example #1 类型约束示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//如下面的类<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;测试函数<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;第一个参数必须为&nbsp;OtherClass&nbsp;类的一个对象<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">OtherClass&nbsp;$otherclass</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$otherclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;另一个测试函数<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;第一个参数必须为数组&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">test_array</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$input_array</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$input_array</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;第一个参数必须为递归类型<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">test_interface</span><span style="color: #007700">(</span><span style="color: #0000BB">Traversable&nbsp;$iterator</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$iterator</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/**<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;第一个参数必须为回调类型<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">test_callable</span><span style="color: #007700">(callable&nbsp;</span><span style="color: #0000BB">$callback</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">call_user_func</span><span style="color: #007700">(</span><span style="color: #0000BB">$callback</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;OtherClass&nbsp;类定义<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">OtherClass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;World'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    函数调用的参数与定义的参数类型不一致时，会抛出一个可捕获的致命错误。
   </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;两个类的对象<br /></span><span style="color: #0000BB">$myclass&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$otherclass&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">OtherClass</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;致命错误：第一个参数必须是&nbsp;OtherClass&nbsp;类的一个对象<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #DD0000">'hello'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;致命错误：第一个参数必须为&nbsp;OtherClass&nbsp;类的一个实例<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;致命错误：第一个参数不能为&nbsp;null<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;正确：输出&nbsp;Hello&nbsp;World&nbsp;<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$otherclass</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;致命错误：第一个参数必须为数组<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test_array</span><span style="color: #007700">(</span><span style="color: #DD0000">'a&nbsp;string'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;正确：输出数组<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test_array</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'c'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;正确：输出&nbsp;ArrayObject<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test_interface</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">ArrayObject</span><span style="color: #007700">(array()));<br /><br /></span><span style="color: #FF8000">//&nbsp;正确：输出&nbsp;int(1)<br /></span><span style="color: #0000BB">$myclass</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test_callable</span><span style="color: #007700">(</span><span style="color: #DD0000">'var_dump'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    类型约束不只是用在类的成员函数里，也能使用在函数里：
   </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;如下面的类<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;World'</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;测试函数<br />&nbsp;*&nbsp;第一个参数必须是&nbsp;MyClass&nbsp;类的一个对象<br />&nbsp;*/<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">MyFunction&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">MyClass&nbsp;$foo</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">var</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;正确<br /></span><span style="color: #0000BB">$myclass&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MyClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">MyFunction</span><span style="color: #007700">(</span><span style="color: #0000BB">$myclass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    类型约束允许 NULL 值：
   </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;接受&nbsp;NULL&nbsp;值&nbsp;*/<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">stdClass&nbsp;$obj&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">)&nbsp;{<br /><br />}<br /><br /></span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">NULL</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">test</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">stdClass</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="124041""></a>
  <div class="note">
   <strong class="user">ASchmidt at Anamera dot net</strong>
   <a href="#124041" class="date">15-Jul-2019 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you want to work with classes (not their instances), but Typehinting is only permitted for an object (instance).<br />
<br />
Here is sample code that tests whether the parameter is a valid type (the class/subclass/instance of an expected class):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">declare(</span><span class="default">strict_types</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">);<br />
<br />
class </span><span class="default">MyClass </span><span class="keyword">{};<br />
<br />
function </span><span class="default">myfunc</span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Validate classname.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$class </span><span class="keyword">instanceof </span><span class="default">MyClass </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$class </span><span class="keyword">= </span><span class="default">get_class</span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } elseif ( !</span><span class="default">class_exists</span><span class="keyword">( </span><span class="default">$class </span><span class="keyword">) or !</span><span class="default">is_a</span><span class="keyword">( </span><span class="default">$class</span><span class="keyword">, </span><span class="default">MyClass</span><span class="keyword">::class, </span><span class="default">true </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; throw new \</span><span class="default">TypeError</span><span class="keyword">( </span><span class="string">"</span><span class="default">$class</span><span class="string"> is not of type " </span><span class="keyword">. </span><span class="default">MyClass</span><span class="keyword">::class );&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Proceed with processing of MyClass subclass ...<br />
</span><span class="keyword">}<br />
&nbsp;<br />
</span><span class="default">$myclass </span><span class="keyword">= new </span><span class="default">MyClass</span><span class="keyword">;<br />
</span><span class="default">myfunc</span><span class="keyword">( </span><span class="default">$myclass </span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// valid<br />
</span><span class="default">myfunc</span><span class="keyword">( </span><span class="default">MyClass</span><span class="keyword">::class );&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// valid<br />
</span><span class="default">myfunc</span><span class="keyword">( \</span><span class="default">String</span><span class="keyword">::class );&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not of type MyClass.</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122590""></a>
  <div class="note">
   <strong class="user">dr dot mustafa dot darwish at gmail dot com</strong>
   <a href="#122590" class="date">05-Apr-2018 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This matrix demonstrate passing different variable types with different type hints:<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= [</span><span class="default">10</span><span class="keyword">, </span><span class="default">10.12</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="string">'10USD'</span><span class="keyword">, </span><span class="string">'USD'</span><span class="keyword">];<br />
function </span><span class="default">getValue</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$typeMap </span><span class="keyword">= [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'integer' </span><span class="keyword">=&gt; </span><span class="string">'int'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'int' </span><span class="keyword">=&gt; </span><span class="string">'int'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'float' </span><span class="keyword">=&gt; </span><span class="string">'float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'double' </span><span class="keyword">=&gt; </span><span class="string">'float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'real' </span><span class="keyword">=&gt; </span><span class="string">'float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'string' </span><span class="keyword">=&gt; </span><span class="string">'string'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'boolean' </span><span class="keyword">=&gt; </span><span class="string">'bool'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'bool' </span><span class="keyword">=&gt; </span><span class="string">'bool'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$yType </span><span class="keyword">= </span><span class="default">$typeMap</span><span class="keyword">[</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">)];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xType </span><span class="keyword">= </span><span class="default">$typeMap</span><span class="keyword">[</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)];<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$xType </span><span class="keyword">== </span><span class="string">'string'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="string">"'</span><span class="default">$x</span><span class="string">'"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">$xType </span><span class="keyword">== </span><span class="string">'bool'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$x </span><span class="keyword">? </span><span class="string">'true' </span><span class="keyword">: </span><span class="string">'false'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; try {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="string">"if (!function_exists('test</span><span class="default">$yType</span><span class="string">')) {function test</span><span class="default">$yType</span><span class="string">(</span><span class="default">$yType</span><span class="string"> \$arg){}} test</span><span class="default">$yType</span><span class="string">(</span><span class="default">$x</span><span class="string">);"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } catch (</span><span class="default">Error $e</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">).</span><span class="string">': '</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'Pass'</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span>&lt;table border="1" width="50%"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;thead&gt;<br />
<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;td&gt;&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;td align="center" colspan="<span class="default">&lt;?= count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) </span><span class="default">?&gt;</span>"&gt;&lt;strong&gt;Input value&lt;/strong&gt;&lt;/td&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;td&gt;&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$header</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;<span class="default">&lt;?= gettype</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">), </span><span class="string">' '</span><span class="keyword">, </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">) </span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">endforeach; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/thead&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tbody&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$y</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;td&gt;<span class="default">&lt;?= gettype</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">), </span><span class="string">' '</span><span class="keyword">, </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">) </span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$x</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;<span class="default">&lt;?= getValue</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">endforeach; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">endforeach; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;/tbody&gt;<br />
&lt;/table&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122589""></a>
  <div class="note">
   <strong class="user">dr dot mustafa dot darwish at gmail dot com</strong>
   <a href="#122589" class="date">05-Apr-2018 10:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the following code demonstrate php7 response to various combination of inputs and type hinting in a simple matrix:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= [</span><span class="default">10</span><span class="keyword">, </span><span class="default">10.12</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="string">'10USD'</span><span class="keyword">, </span><span class="string">'USD'</span><span class="keyword">];<br />
function </span><span class="default">getValue</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$typeMap </span><span class="keyword">= [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'integer' </span><span class="keyword">=&gt; </span><span class="string">'int'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'int' </span><span class="keyword">=&gt; </span><span class="string">'int'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'float' </span><span class="keyword">=&gt; </span><span class="string">'float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'double' </span><span class="keyword">=&gt; </span><span class="string">'float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'real' </span><span class="keyword">=&gt; </span><span class="string">'float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'string' </span><span class="keyword">=&gt; </span><span class="string">'string'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'boolean' </span><span class="keyword">=&gt; </span><span class="string">'bool'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'bool' </span><span class="keyword">=&gt; </span><span class="string">'bool'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$yType </span><span class="keyword">= </span><span class="default">$typeMap</span><span class="keyword">[</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">)];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$call </span><span class="keyword">= </span><span class="string">'test($x)'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$yType </span><span class="keyword">== </span><span class="string">'string'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$call </span><span class="keyword">= </span><span class="string">'test(\'$x\')'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$template </span><span class="keyword">= &lt;&lt;&lt;TEMPLATE_FUNCTION<br />
</span><span class="string">&nbsp; if (!function_exists('test')) {function test(</span><span class="default">$yType</span><span class="string"> \$arg){}}<br />
try{<br />
&nbsp;</span><span class="default">$call</span><span class="string">;<br />
} catch (Error \$e) {<br />
&nbsp;&nbsp;&nbsp; return \$e-&gt;getMessage();<br />
}<br />
return 'Pass';<br />
</span><span class="keyword">TEMPLATE_FUNCTION;<br />
&nbsp;&nbsp;&nbsp; return eval(</span><span class="default">$template</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span>&lt;table border="1" width="50%"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;thead&gt;<br />
<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td align="center" colspan="<span class="default">&lt;?= count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) </span><span class="default">?&gt;</span>"&gt;&lt;strong&gt;Input value&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;td&gt;&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$header</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;<span class="default">&lt;?= gettype</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">), </span><span class="string">' '</span><span class="keyword">, </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">) </span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">endforeach; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/thead&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tbody&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;&lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$y</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;td&gt;<span class="default">&lt;?= gettype</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">), </span><span class="string">' '</span><span class="keyword">, </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">) </span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$x</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;td&gt;<span class="default">&lt;?= getValue</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">); </span><span class="default">?&gt;</span>&lt;/td&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">endforeach; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php </span><span class="keyword">endforeach; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;/tbody&gt;<br />
&lt;/table&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120442""></a>
  <div class="note">
   <strong class="user">MiChAeLoKGB</strong>
   <a href="#120442" class="date">10-Jan-2017 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note, that with PHP 7, type hinting is faster than normal implementation.<br />
This has to do with type hinting before PHP 7 allowing only objects and arrays and anything else (scalars) would throw an error.<br />
<br />
I did some using code "doom at doom dot pl" posted 2 years ago <br />
<br />
Here are results from couple of test runs using PHP 7 (200.000 loops)<br />
- teststringNormal took: 0.01799488067627<br />
- teststringOverhead took: 0.012195825576782<br />
<br />
- teststringNormal took: 0.027030944824219<br />
- teststringOverhead took: 0.012197017669678<br />
<br />
- teststringNormal took: 0.017856121063232<br />
- teststringOverhead took: 0.012274980545044<br />
<br />
As you can see, the overhead is faster and much more consistent.<br />
<br />
Here is one run with the is_string check removed from Normal:<br />
- teststringNormal took: 0.010342836380005<br />
- teststringOverhead took: 0.012849092483521</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119208""></a>
  <div class="note">
   <strong class="user">mrice at rcs dot us</strong>
   <a href="#119208" class="date">19-Apr-2016 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In regards to <a href="http://php.net/manual/en/language.oop5.typehinting.php#103729 , when using PHP in Eclipse, the best way to typehint is already available in Eclipse natively. " rel="nofollow" target="_blank">http://php.net/manual/en/language.oop5.typehinting.php#103729 , when using PHP in Eclipse, the best way to typehint is already available in Eclipse natively. </a><br />
<br />
The format is /* @var $variable ObjectName */<br />
<br />
The single /* is important. You can also use namespaces, IE <br />
<br />
/* @var $variable \Some\Namespace */<br />
<br />
In short, there is no reason to create functions that return itself.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117907""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#117907" class="date">30-Aug-2015 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i think this is pretty close.<br />
<br />
$lines=hhb_mustbe('array',file("foofile"));<br />
//either file succeeds, and returns an array, or file returns FALSE which is not an array, which throws an unexpectedValueException.<br />
<br />
$socket=hhb_mustbe('Socket',socket_create(AF_INET,SOCK_STREAM,getprotobyname('tcp')));<br />
//either socket_create succeeds, and returns a Socket, or socket_create returns False, which is not a resource of type Socket, and you get an UnexpectedValueException<br />
<br />
$size=hhb_mustbe('int',filesize(somefile));<br />
//either filesize() returns an integer, or returns FALSE wich is not an int, and you'll get UnexpectedValueException.<br />
<br />
&nbsp;&nbsp;&nbsp; function hhb_mustbe(/*string*/$type,/*mixed*/$variable){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //should it be UnexpectedValueException or InvalidArgumentException?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //going with UnexpectedValueException for now...<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $actual_type=gettype($variable);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($actual_type==='unknown type'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //i dont know how this can happen, but it is documented as a possible return value of gettype...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new Exception('could not determine the type of the variable!');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($actual_type==='object'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!is_a($variable,$type)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dbg=get_class($variable);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new UnexpectedValueException('variable is an object which does NOT implement class: '.$type.'. it is of class: '.$dbg);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $variable;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($actual_type==='resource'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $dbg=get_resource_type($variable);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($dbg!==$type){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new UnexpectedValueException('variable is a resource, which is NOT of type: '.$type.'. it is of type: '.$dbg);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $variable;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //now a few special cases<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($type==='bool'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $parsed_type='boolean';&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if($type==='int'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $parsed_type='integer';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if($type==='float'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $parsed_type='double';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if($type==='null'){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $parsed_type='NULL';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $parsed_type=$type;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($parsed_type!==$actual_type &amp;&amp; $type!==$actual_type){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new UnexpectedValueException('variable is NOT of type: '.$type.'. it is of type: '.$actual_type);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //ok, variable passed all tests.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $variable;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114559""></a>
  <div class="note">
   <strong class="user">doom at doom dot pl</strong>
   <a href="#114559" class="date">06-Mar-2014 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've done some tests of the overhead that class Typehint&nbsp; gives us.<br />
At my PC it goes as follows:<br />
teststringNormal took: 0.041965961456299<br />
teststringOverhead took: 0.48374915122986<br />
It's like 10x longer time (not mention about memory usage), it's just because exception is thrown EVERY SINGLE TIME, along with expensive preg_match() and debug_backtrace() calls.<br />
I think that using class in bigger applications will increase overhead like 100% or more.<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">teststringOverhead</span><span class="keyword">(</span><span class="default">string $string</span><span class="keyword">) { <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;<br />
}<br />
function </span><span class="default">teststringNormal</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">; <br />
}<br />
</span><span class="default">$loopTimes </span><span class="keyword">= </span><span class="default">20000</span><span class="keyword">;<br />
<br />
</span><span class="comment">/////////// test of overhead implementation vs normal<br />
</span><span class="default">$t1 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">$loopTimes</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)&nbsp; </span><span class="default">teststringNormal</span><span class="keyword">(</span><span class="string">"xxx"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br&gt;teststringNormal took: " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$t1</span><span class="keyword">);<br />
<br />
</span><span class="default">$t2 </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">$loopTimes</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)&nbsp; </span><span class="default">teststringOverhead</span><span class="keyword">(</span><span class="string">"xxx"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br&gt;teststringOverhead took: " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$t2</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112033""></a>
  <div class="note">
   <strong class="user">sorin dot badea91 at gmail dot com</strong>
   <a href="#112033" class="date">25-Apr-2013 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've implemented a basic function to ensure argument's type.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Primary types<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">Type<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">SKIP&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">INT&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">STRING&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">BOOLEAN&nbsp; </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">CALLBACK </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">FLOAT&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">RESOURCE </span><span class="keyword">= </span><span class="default">6</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @throws InvalidArgumentException<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">ensureType</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$debugStack </span><span class="keyword">= </span><span class="default">debug_backtrace</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$argv&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'args'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$types&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$argv </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch (</span><span class="default">$types</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">Type</span><span class="keyword">::</span><span class="default">INT</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Argument ' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">' passed to ' </span><span class="keyword">. </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'function'</span><span class="keyword">] . </span><span class="string">'() must be of type int'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">Type</span><span class="keyword">::</span><span class="default">STRING</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Argument ' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">' passed to ' </span><span class="keyword">. </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'function'</span><span class="keyword">] . </span><span class="string">'() must be of type string'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">Type</span><span class="keyword">::</span><span class="default">BOOLEAN</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_bool</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Argument ' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">' passed to ' </span><span class="keyword">. </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'function'</span><span class="keyword">] . </span><span class="string">'() must be of type boolean'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">Type</span><span class="keyword">::</span><span class="default">CALLBACK</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Argument ' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">' passed to ' </span><span class="keyword">. </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'function'</span><span class="keyword">] . </span><span class="string">'() must be a valid callback'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">Type</span><span class="keyword">::</span><span class="default">FLOAT</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_float</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Argument ' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">' passed to ' </span><span class="keyword">. </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'function'</span><span class="keyword">] . </span><span class="string">'() must be of type float'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="default">Type</span><span class="keyword">::</span><span class="default">RESOURCE</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_resource</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">= </span><span class="string">'Argument ' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">' passed to ' </span><span class="keyword">. </span><span class="default">$debugStack</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'function'</span><span class="keyword">] . </span><span class="string">'() must be of type resource'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$message</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">.= </span><span class="string">', instance of ' </span><span class="keyword">. </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) . </span><span class="string">' given'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$message </span><span class="keyword">.= </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) . </span><span class="string">' given'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">InvalidArgumentException</span><span class="keyword">(</span><span class="default">$message</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">dummyFunction</span><span class="keyword">(</span><span class="default">$var1</span><span class="keyword">, </span><span class="default">$var2</span><span class="keyword">, </span><span class="default">$var3</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ensureType</span><span class="keyword">(</span><span class="default">Type</span><span class="keyword">::</span><span class="default">BOOLEAN</span><span class="keyword">, </span><span class="default">Type</span><span class="keyword">::</span><span class="default">INT</span><span class="keyword">, </span><span class="default">Type</span><span class="keyword">::</span><span class="default">STRING</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$object </span><span class="keyword">= new </span><span class="default">ReflectionClass</span><span class="keyword">(</span><span class="string">'ReflectionClass'</span><span class="keyword">);<br />
<br />
</span><span class="default">dummyFunction</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">$object</span><span class="keyword">, </span><span class="string">'Hello there'</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111411""></a>
  <div class="note">
   <strong class="user">michaelrfairhurst at gmail dot com</strong>
   <a href="#111411" class="date">17-Feb-2013 09:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The scalar type hinting solutions are all overthinking it. I provided the optimized regex version, as well as the fastest implementation I've come up with, which just uses strpos. Then I benchmark both against the TypeHint class.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">optimized_strpos</span><span class="keyword">(</span><span class="default">$ErrLevel</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ErrLevel </span><span class="keyword">== </span><span class="default">E_RECOVERABLE_ERROR<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// order this according to what your app uses most<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="string">'must be an instance of string, string'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="string">'must be an instance of integer, integer'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="string">'must be an instance of float, double'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="string">'must be an instance of boolean, boolean'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="string">'must be an instance of resource, resource'</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">optimized_regex</span><span class="keyword">(</span><span class="default">$ErrLevel</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ErrLevel </span><span class="keyword">== </span><span class="default">E_RECOVERABLE_ERROR</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^Argument \d+ passed to (?:\w+::)?\w+\(\) must be an instance of (\w+), (\w+) given/'</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] == </span><span class="string">'double' </span><span class="keyword">? </span><span class="string">'float' </span><span class="keyword">: </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
BENCHMARKING Typehint::handleTypehint()<br />
string type hint.....[function it(string $var) {}]............2.1588530540466 seconds<br />
float type hint......[function it(float $var) {}].............2.1563150882721 seconds<br />
integer type hint....[function it(integer $var) {}]...........2.1579530239105 seconds<br />
boolean type hint....[function it(boolean $var) {}]...........2.1590459346771 seconds<br />
<br />
BENCHMARKING optimized_regex()<br />
string type hint.....[function it(string $var) {}]............0.88872504234314 seconds<br />
float type hint......[function it(float $var) {}].............0.88528990745544 seconds<br />
integer type hint....[function it(integer $var) {}]...........0.89038777351379 seconds<br />
boolean type hint....[function it(boolean $var) {}]...........0.89061188697815 seconds<br />
<br />
BENCHMARKING optimized_strpos()<br />
string type hint.....[function it(string $var) {}]............0.52635812759399 seconds<br />
float type hint......[function it(float $var) {}].............0.74228310585022 seconds<br />
integer type hint....[function it(integer $var) {}]...........0.63721108436584 seconds<br />
boolean type hint....[function it(boolean $var) {}]...........0.8429491519928 seconds</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103729""></a>
  <div class="note">
   <strong class="user">john at cast dot com</strong>
   <a href="#103729" class="date">29-Apr-2011 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i use eclipse ganymede as an IDE and it offers "intellisense" where it can, i.e. when variables are "declared" via type hinting or a "new"-statement . i found using the following pattern helps eclipse along as well:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">MyClass</span><span class="keyword">{
<br />

<br />
&nbsp; public static function </span><span class="default">Cast</span><span class="keyword">(</span><span class="default">MyClass </span><span class="keyword">&amp;</span><span class="default">$object</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$object</span><span class="keyword">;
<br />
&nbsp; }
<br />

<br />
&nbsp; public </span><span class="default">method CallMe</span><span class="keyword">(){
<br />
&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$x</span><span class="keyword">=</span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$someContent</span><span class="keyword">);
<br />
</span><span class="default">$x</span><span class="keyword">=</span><span class="default">MyObject</span><span class="keyword">::</span><span class="default">Cast</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);
<br />
</span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">CallMe</span><span class="keyword">();
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
after calling Cast(), due to the type hinting, eclipse offers me the "CallMe" function in a dropdown when i type "$x-&gt;" in the code afterwards.
<br />

<br />
i found this very practical und included the Cast() function in my code template for new classes. i've been wondering, if there is a drawback i oversaw, but i haven't noticed any negative effects so far... maybe some of you will find this just as handy as i do ;o)
<br />

<br />
p.s. do note: when used in inherited classes a STRICT-notice comes up, because the function definition of the inherited class doesn't match the parent's definition (different type hinting) - but it works great!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100550""></a>
  <div class="note">
   <strong class="user">alejosimon at gmail dot com</strong>
   <a href="#100550" class="date">22-Oct-2010 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For PHP 5.3 version and namespaces support.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">phpErrorHandler</span><span class="keyword">( </span><span class="default">$code</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$line </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">error_reporting</span><span class="keyword">() &amp; </span><span class="default">$code </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$code </span><span class="keyword">== </span><span class="default">E_RECOVERABLE_ERROR </span><span class="keyword">) { </span><span class="comment">// Scalar Type-Hinting patch.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$regexp </span><span class="keyword">= </span><span class="string">'/^Argument (\d)+ passed to (.+) must be an instance of (?&lt;hint&gt;.+), (?&lt;given&gt;.+) given/i' </span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">preg_match</span><span class="keyword">( </span><span class="default">$regexp</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">, </span><span class="default">$match </span><span class="keyword">) ) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$given </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[ </span><span class="string">'given' </span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hint&nbsp; </span><span class="keyword">= </span><span class="default">end</span><span class="keyword">( </span><span class="default">explode</span><span class="keyword">( </span><span class="string">'\\'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">[ </span><span class="string">'hint' </span><span class="keyword">] ) ) ; </span><span class="comment">// namespaces support.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$hint </span><span class="keyword">== </span><span class="default">$given </span><span class="keyword">) return </span><span class="default">true </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">set_error_handler</span><span class="keyword">( </span><span class="string">'phpErrorHandler' </span><span class="keyword">) ;<br />
<br />
</span><span class="comment">/************************************/<br />
<br />
</span><span class="keyword">function </span><span class="default">typeHintTest</span><span class="keyword">( </span><span class="default">integer $arg1 </span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$arg1 </span><span class="keyword">) ;<br />
}<br />
<br />
</span><span class="default">typeHintTest</span><span class="keyword">( </span><span class="default">true </span><span class="keyword">) ; </span><span class="comment">// Error throw because not integer type.<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100543""></a>
  <div class="note">
   <strong class="user">gdecad at NOSPAM dot example dot com</strong>
   <a href="#100543" class="date">22-Oct-2010 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have made a little bench between three method of type hinting for native type (string, integer, ...).<br />
<br />
First method : by test type in function like :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">testTest</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Argument $arg passed to test must be an instance of string, other given'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arg</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Second method : by object representing native type :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">testObject</span><span class="keyword">(</span><span class="default">StringObj $arg</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arg</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Third method : by class TypeHint proposed by Daniel :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">testHint</span><span class="keyword">(</span><span class="default">string $arg</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arg</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
the results are here :<br />
bench for 100000 iterations,&nbsp; in seconds<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; avg&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; min&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; max&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total<br />
test&nbsp; &nbsp; 5.3275489807129E-6&nbsp; &nbsp; 2.8610229492188E-6&nbsp; &nbsp; 0.0033020973205566&nbsp; &nbsp; 0.53275895118713<br />
object&nbsp; &nbsp; 4.9089097976685E-6&nbsp; &nbsp; 3.814697265625E-6&nbsp; &nbsp; 0.0025870800018311&nbsp; &nbsp; 0.49089503288269<br />
hint&nbsp; &nbsp; 3.2338891029358E-5&nbsp; &nbsp; 2.9802322387695E-5&nbsp; &nbsp; 0.0025920867919922&nbsp; &nbsp; 3.2338931560516<br />
<br />
As you can see, the method by object is the best<br />
now you know...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93405""></a>
  <div class="note">
   <strong class="user">dpariyskiy at netatwork dot com</strong>
   <a href="#93405" class="date">08-Sep-2009 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Daniel, thank you for the type hinting class. Very useful.<br />
For anyone having a problem where php isn't setting Daniel's error handler, as was the case for me, try changing initializeHandler function to the following:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public static function </span><span class="default">initializeHandler</span><span class="keyword">() <br />
{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">set_error_handler</span><span class="keyword">(array(</span><span class="string">'Typehint'</span><span class="keyword">,</span><span class="string">'handleTypehint'</span><span class="keyword">)); <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps,<br />
--Dmitriy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88015""></a>
  <div class="note">
   <strong class="user">bantam at banime dot com</strong>
   <a href="#88015" class="date">06-Jan-2009 02:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Daniel's typehint implementation was just what I was looking for but performance in production wasn't going to cut it. Calling a backtrace every time hurts performance. For my implementation I didn't use it, after all, PHP tells us what the data type is in the error message, I don't feel I need to evaluate the argument where I am using typehinting. Here is the cut down version I use in my error handling class:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">typehint</span><span class="keyword">(</span><span class="default">$level</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$level </span><span class="keyword">== </span><span class="default">E_RECOVERABLE_ERROR</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^Argument (\d)+ passed to (?:(\w+)::)?(\w+)\(\) must be an instance of (\w+), (\w+) given/'</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] == </span><span class="default">$match</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Hope this can be of use to somebody.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86592""></a>
  <div class="note">
   <strong class="user">wickedmuso at gmail dot com</strong>
   <a href="#86592" class="date">24-Oct-2008 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One useful thing with Type Hinting that I could not find in the documentation (but tested) is that you can also use an Interface in the hint (versus a Class).&nbsp; This is a very useful tool if you are trying to code to Interfaces rather than Classes (which is common in Test Driven Development and Dependency Injection paradigms).&nbsp; It means your external class can present itself into the method as long as it implements the nominated Interface (obviously).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86216""></a>
  <div class="note">
   <strong class="user">info at thewebsiteguy dot com dot au</strong>
   <a href="#86216" class="date">08-Oct-2008 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find it rather frustrating that PHP has internal data types but doesn't allow optional hinting for it.&nbsp; I REALLY needed it for something, so I found a way around it.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">abstract class </span><span class="default">DataType
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$length</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$precision</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$number</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">number </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">precision </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br />
&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">GetLength</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">IsNumber</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">number</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">GetPrecision</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">precision</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">Integer </span><span class="keyword">extends </span><span class="default">DataType
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">12</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">number </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">= </span><span class="default">$length</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">precision </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">Float </span><span class="keyword">extends </span><span class="default">DataType
<br />
</span><span class="keyword">{
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">12</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">)
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">number </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">= </span><span class="default">$length</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">precision </span><span class="keyword">= </span><span class="default">$precision</span><span class="keyword">;
<br />
&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">String </span><span class="keyword">extends </span><span class="default">DataType
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">255</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__constructor</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">= </span><span class="default">$length</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="comment">//etc etc through the types...
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
then later I can do this...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">final class </span><span class="default">Field
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$Name</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$Mandatory</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$Hidden</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$ListField</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$Value</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$ForeignClass</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$ReadOnly</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$DataType</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">DataType $dataType</span><span class="keyword">, </span><span class="default">$mandatory </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$listField </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$readOnly </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">BaseCBO $foreignClass </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Name </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">DataType </span><span class="keyword">= </span><span class="default">$dataType</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Mandatory </span><span class="keyword">= </span><span class="default">$mandatory</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ListField </span><span class="keyword">= </span><span class="default">$listField</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Value </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ReadOnly </span><span class="keyword">= </span><span class="default">$readOnly</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ForeignClass </span><span class="keyword">= </span><span class="default">$foreignClass</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="comment">// ....
<br />

<br />
</span><span class="keyword">class </span><span class="default">DoSomeStuff
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">DoGenericThings</span><span class="keyword">(</span><span class="default">Field $field</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$field</span><span class="keyword">-&gt;</span><span class="default">DataType </span><span class="keyword">instanceof </span><span class="default">Integer</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// do things for an integer field...
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86074""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#86074" class="date">01-Oct-2008 06:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
TYPE-HINTING and VISIBILITY<br />
<br />
Type-hinting is just one more small piece of PHP that protects our objects when visibility cannot.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Point </span><span class="keyword">{<br />
&nbsp; public </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">;<br />
<br />
&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$xVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$yVal </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">x </span><span class="keyword">= </span><span class="default">$xVal</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">= </span><span class="default">$yVal</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Polyline </span><span class="keyword">{<br />
&nbsp; protected </span><span class="default">$points </span><span class="keyword">= array();<br />
<br />
&nbsp; public function </span><span class="default">addPoint</span><span class="keyword">(</span><span class="default">Point $p</span><span class="keyword">) {&nbsp; </span><span class="comment">// the line we're interested in...<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">points</span><span class="keyword">[] = </span><span class="default">$p</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">$point1 </span><span class="keyword">= new </span><span class="default">Point</span><span class="keyword">(</span><span class="default">15</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">);<br />
</span><span class="default">$polyline </span><span class="keyword">= new </span><span class="default">Polyline</span><span class="keyword">();<br />
</span><span class="default">$polyline</span><span class="keyword">-&gt;</span><span class="default">addPoint</span><span class="keyword">(</span><span class="default">$point1</span><span class="keyword">);<br />
</span><span class="default">$polyline</span><span class="keyword">-&gt;</span><span class="default">addPoint</span><span class="keyword">(new </span><span class="default">Point</span><span class="keyword">(</span><span class="default">55</span><span class="keyword">, </span><span class="default">22</span><span class="keyword">));<br />
</span><span class="default">$polyline</span><span class="keyword">-&gt;</span><span class="default">addPoint</span><span class="keyword">(new </span><span class="default">Point</span><span class="keyword">(</span><span class="default">33</span><span class="keyword">, </span><span class="default">31</span><span class="keyword">));<br />
<br />
</span><span class="default">$polyline</span><span class="keyword">-&gt;</span><span class="default">addPoint</span><span class="keyword">(new </span><span class="default">stdClass</span><span class="keyword">());&nbsp; &nbsp; </span><span class="comment">// PHP will throw an error for us!&nbsp; <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Since our Polyline::addPoint() function has to be public, any outside code can try to pass anything. But, when type-hinting is declared, PHP throws an error when phoney data tries to sneak by.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85613""></a>
  <div class="note">
   <strong class="user">DanielLWood [at] Gmail [dot] Com</strong>
   <a href="#85613" class="date">08-Sep-2008 05:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To follow up on my original post dealing with the type hinting class I provided:<br />
<br />
Kalkamar is absolutely correct, it is slow and is a hack.&nbsp; Everyone who uses it and wants to see this type of syntax native needs to post on the 'php internals' development thread in support.<br />
<br />
Thanks,<br />
<br />
Dan</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85527""></a>
  <div class="note">
   <strong class="user">kalkamar at web dot de</strong>
   <a href="#85527" class="date">04-Sep-2008 02:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I really like the Daniel`s Typehinting-Class, but you please not that it may be relevant for the performance if you use Typehinting for scalar values very often.<br />
<br />
Here is my performance-test:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">notypehinting</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">//checking the type manually instead<br />
</span><span class="keyword">}<br />
<br />
function </span><span class="default">typehinting</span><span class="keyword">(</span><span class="default">string $x</span><span class="keyword">)<br />
{<br />
}<br />
<br />
</span><span class="default">$test</span><span class="keyword">=new </span><span class="default">timer</span><span class="keyword">;<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">10000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
try{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">notypehinting</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">);<br />
}<br />
catch(</span><span class="default">Exception $e</span><span class="keyword">){}<br />
}<br />
echo </span><span class="default">$test</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$test2</span><span class="keyword">=new </span><span class="default">timer</span><span class="keyword">;<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">10000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
try{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">typehinting</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">);<br />
}<br />
catch(</span><span class="default">Exception $e</span><span class="keyword">){}<br />
}<br />
echo </span><span class="default">$test2</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
0.0088460445404053<br />
0.21634602546692<br />
<br />
Result:<br />
typehinting() ist more than 20 times slower than notypehinting()<br />
<br />
You see: typehinting for scalar types (like suggested by Daniel) is not the best thing for the performance if you use it very often.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84436""></a>
  <div class="note">
   <strong class="user">marcus at ignorethis netweblogic dot com</strong>
   <a href="#84436" class="date">14-Jul-2008 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Love the typehint object Daniel. Great effort!
<br />

<br />
However, it still throws catchable fatal errors, which is not what I want, so I added one line to handleTypehint() so it throws an Exception.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">public static function </span><span class="default">handleTypehint</span><span class="keyword">(</span><span class="default">$ErrLevel</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ErrLevel </span><span class="keyword">== </span><span class="default">E_RECOVERABLE_ERROR</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match </span><span class="keyword">( </span><span class="default">TYPEHINT_PCRE</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="default">$ErrMatches </span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list ( </span><span class="default">$ErrMatch</span><span class="keyword">, </span><span class="default">$ThArgIndex</span><span class="keyword">, </span><span class="default">$ThClass</span><span class="keyword">, </span><span class="default">$ThFunction</span><span class="keyword">, </span><span class="default">$ThHint</span><span class="keyword">, </span><span class="default">$ThType </span><span class="keyword">) = </span><span class="default">$ErrMatches</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset ( </span><span class="default">self</span><span class="keyword">::</span><span class="default">$Typehints </span><span class="keyword">[</span><span class="default">$ThHint</span><span class="keyword">] )) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThBacktrace </span><span class="keyword">= </span><span class="default">debug_backtrace </span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThArgValue </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">self</span><span class="keyword">::</span><span class="default">getTypehintedArgument </span><span class="keyword">( </span><span class="default">$ThBacktrace</span><span class="keyword">, </span><span class="default">$ThFunction</span><span class="keyword">, </span><span class="default">$ThArgIndex</span><span class="keyword">, </span><span class="default">$ThArgValue </span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">call_user_func </span><span class="keyword">( </span><span class="default">self</span><span class="keyword">::</span><span class="default">$Typehints </span><span class="keyword">[</span><span class="default">$ThHint</span><span class="keyword">], </span><span class="default">$ThArgValue </span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="default">$ErrMessage</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83442""></a>
  <div class="note">
   <strong class="user">Daniel dot L dot Wood at Gmail dot Com</strong>
   <a href="#83442" class="date">26-May-2008 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
People often ask about scalar/basic typehints.&nbsp; Here is a drop in class that I use in my MVC framework that will enable typehints through the use of a custom error handler.<br />
<br />
Note: You should include this code above all other code in your include headers and if you are the using set_error_handler() function you should be aware that this uses it as well.&nbsp; You may need to chain your set_error_handlers()<br />
<br />
Why?<br />
1) Because people are sick of using the is_* functions to validate parameters.<br />
2) Reduction of redundant coding for defensive coders.<br />
3) Functions/Methods are self defining/documenting as to required input.<br />
<br />
Also..<br />
Follow the discussion for typehints in PHP 6.0 on the PHP Internals boards.<br />
<br />
<span class="default">&lt;?php<br />
<br />
define</span><span class="keyword">(</span><span class="string">'TYPEHINT_PCRE'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">,</span><span class="string">'/^Argument (\d)+ passed to (?:(\w+)::)?(\w+)\(\) must be an instance of (\w+), (\w+) given/'</span><span class="keyword">);<br />
<br />
class </span><span class="default">Typehint<br />
</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; private static </span><span class="default">$Typehints </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'boolean'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'is_bool'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'integer'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'is_int'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'float'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'is_float'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'string'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'is_string'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'resrouce'&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'is_resource'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">__Constrct</span><span class="keyword">() {}<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">initializeHandler</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">set_error_handler</span><span class="keyword">(</span><span class="string">'Typehint::handleTypehint'</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; private static function </span><span class="default">getTypehintedArgument</span><span class="keyword">(</span><span class="default">$ThBackTrace</span><span class="keyword">, </span><span class="default">$ThFunction</span><span class="keyword">, </span><span class="default">$ThArgIndex</span><span class="keyword">, &amp;</span><span class="default">$ThArgValue</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$ThBackTrace </span><span class="keyword">as </span><span class="default">$ThTrace</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Match the function; Note we could do more defensive error checking.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (isset(</span><span class="default">$ThTrace</span><span class="keyword">[</span><span class="string">'function'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$ThTrace</span><span class="keyword">[</span><span class="string">'function'</span><span class="keyword">] == </span><span class="default">$ThFunction</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThArgValue </span><span class="keyword">= </span><span class="default">$ThTrace</span><span class="keyword">[</span><span class="string">'args'</span><span class="keyword">][</span><span class="default">$ThArgIndex </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">handleTypehint</span><span class="keyword">(</span><span class="default">$ErrLevel</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$ErrLevel </span><span class="keyword">== </span><span class="default">E_RECOVERABLE_ERROR</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">TYPEHINT_PCRE</span><span class="keyword">, </span><span class="default">$ErrMessage</span><span class="keyword">, </span><span class="default">$ErrMatches</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$ErrMatch</span><span class="keyword">, </span><span class="default">$ThArgIndex</span><span class="keyword">, </span><span class="default">$ThClass</span><span class="keyword">, </span><span class="default">$ThFunction</span><span class="keyword">, </span><span class="default">$ThHint</span><span class="keyword">, </span><span class="default">$ThType</span><span class="keyword">) = </span><span class="default">$ErrMatches</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$Typehints</span><span class="keyword">[</span><span class="default">$ThHint</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThBacktrace </span><span class="keyword">= </span><span class="default">debug_backtrace</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ThArgValue&nbsp; </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">self</span><span class="keyword">::</span><span class="default">getTypehintedArgument</span><span class="keyword">(</span><span class="default">$ThBacktrace</span><span class="keyword">, </span><span class="default">$ThFunction</span><span class="keyword">, </span><span class="default">$ThArgIndex</span><span class="keyword">, </span><span class="default">$ThArgValue</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$Typehints</span><span class="keyword">[</span><span class="default">$ThHint</span><span class="keyword">], </span><span class="default">$ThArgValue</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">Typehint</span><span class="keyword">::</span><span class="default">initializeHandler</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
An are some examples of the class in use:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">teststring</span><span class="keyword">(</span><span class="default">string $string</span><span class="keyword">) { echo </span><span class="default">$string</span><span class="keyword">; }<br />
function </span><span class="default">testinteger</span><span class="keyword">(</span><span class="default">integer $integer</span><span class="keyword">) { echo </span><span class="default">$integer</span><span class="keyword">; }<br />
function </span><span class="default">testfloat</span><span class="keyword">(</span><span class="default">float $float</span><span class="keyword">) { echo </span><span class="default">$float</span><span class="keyword">; }<br />
<br />
</span><span class="comment">// This will work for class methods as well.<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
You get the picture..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79014""></a>
  <div class="note">
   <strong class="user">jesdisciple @t gmail -dot- com</strong>
   <a href="#79014" class="date">06-Nov-2007 07:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The manual's sample code says:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//...<br />
// Fatal Error: Argument 1 must not be null<br />
</span><span class="default">$myclass</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">);<br />
</span><span class="comment">//...<br />
</span><span class="default">?&gt;<br />
</span><br />
And this is true, unless a default value of NULL is given; in fact, this is the only way to give a default value for object arguments (as a default value must be a constant expression):<br />
<span class="default">&lt;?php<br />
$mine </span><span class="keyword">= new </span><span class="default">MyClass</span><span class="keyword">();<br />
</span><span class="default">$mine</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">NULL</span><span class="keyword">);<br />
class </span><span class="default">MyClass</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">OtherClass $arg </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Apply default value here.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">test</span><span class="keyword">(array </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
class </span><span class="default">OtherClass</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54501""></a>
  <div class="note">
   <strong class="user">mlovett at morpace dot com</strong>
   <a href="#54501" class="date">06-Jul-2005 03:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Type hinting works with interfaces too. In other words, you can specify the name of an interface for a function parameter, and the object passed in must implement that interface, or else type hinting throws an exception.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
