<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>解析由 strftime 生成的日期／时间</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strftime.html">? strftime</a></li>
      <li style="float: right;"><a href="function.strtotime.html">strtotime ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.datetime.html">Date/Time 函数</a></li>
    <li>解析由 strftime 生成的日期／时间</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strptime" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strptime</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7)</p><p class="refpurpose"><span class="refname">strptime</span> &mdash; <span class="dc-title">解析由 <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span> 生成的日期／时间</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.strptime-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>strptime</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$date</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   ) : <span class="type">array</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>strptime()</strong></span> 返回一个将
   <code class="parameter">date</code> 解析后的数组，如果出错返回 <strong><code>FALSE</code></strong>。
  </p>
  <p class="para">
   月份和星期几的名字以及其它与语种有关的字符串对应于
   <span class="function"><a href="function.setlocale.html" class="function">setlocale()</a></span>设定的当前区域（<strong><code>LC_TIME</code></strong>）。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strptime-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">date</code>（<span class="type"><a href="language.types.string.html" class="type string">string</a></span>）</dt>

     <dd>

      <p class="para">
       被解析的字符串（例如从 <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span> 返回的）
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">format</code>（<span class="type"><a href="language.types.string.html" class="type string">string</a></span>）</dt>

     <dd>

      <p class="para">
       <code class="parameter">date</code> 所使用的格式（例如同
       <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span> 中所使用的相同）。
      </p>
      <p class="para">
       更多有关格式选项的信息见 <span class="function"><a href="function.strftime.html" class="function">strftime()</a></span> 页面。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strptime-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回一个数组 或者在失败时返回 <strong><code>FALSE</code></strong>
  </p>

  <p class="para">
   <table class="doctable table">
    <caption><strong>数组中包含以下单元</strong></caption>
    
     <thead>
      <tr>
       <th>键名</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>tm_sec</td>
       <td>当前分钟内的秒数（0-61）</td>
      </tr>

      <tr>
       <td>tm_min</td>
       <td>当前小时内的分钟数（0-59）</td>
      </tr>

      <tr>
       <td>tm_hour</td>
       <td>午夜起的小时数（0-23）</td>
      </tr>

      <tr>
       <td>tm_mday</td>
       <td>月份中的第几天（1-31）</td>
      </tr>

      <tr>
       <td>tm_mon</td>
       <td>自一月起过了几个月（0-11）</td>
      </tr>

      <tr>
       <td>tm_year</td>
       <td>自 1900 年起过了几年</td>
      </tr>

      <tr>
       <td>tm_wday</td>
       <td>自星期天起过了几天（0-6）</td>
      </tr>

      <tr>
       <td>tm_yday</td>
       <td>本年自一月一日起过了多少天（0-365）</td>
      </tr>

      <tr>
       <td>unparsed</td>
       <td><code class="parameter">date</code> 中未能通过指定的
       <code class="parameter">format</code> 识别的部分</td>
      </tr>

     </tbody>
    
   </table>

  </p>

 </div>


 <div class="refsect1 examples" id="refsect1-function.strptime-examples">
  <h3 class="title">范例</h3>
  <p class="para">
   <div class="example" id="example-2767">
    <p><strong>Example #1 <span class="function"><strong>strptime()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'%d/%m/%Y&nbsp;%H:%M:%S'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$strf&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$strf</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">strptime</span><span style="color: #007700">(</span><span style="color: #0000BB">$strf</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
03/10/2004 15:54:19

Array
(
    [tm_sec] =&gt; 19
    [tm_min] =&gt; 54
    [tm_hour] =&gt; 15
    [tm_mday] =&gt; 3
    [tm_mon] =&gt; 9
    [tm_year] =&gt; 104
    [tm_wday] =&gt; 0
    [tm_yday] =&gt; 276
    [unparsed] =&gt;
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


    <div class="refsect1 notes" id="refsect1-function.strptime-notes">
     <h3 class="title">注释</h3>
     <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">此函数未在 Windows 平台下实现。</span></p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       Internally, this function calls the <em>strptime()</em>
       function provided by the system&#039;s C library. This function can exhibit
       noticeably different behaviour across different operating systems. The
       use of <span class="function"><a href="function.date-parse-from-format.html" class="function">date_parse_from_format()</a></span>, which does not
       suffer from these issues, is recommended on PHP 5.3.0 and later.
      </p>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       <em>&quot;tm_sec&quot;</em> includes any leap seconds (currently upto 2
       a year). For more information on leap seconds, see the <a href="http://en.wikipedia.org/wiki/Leap_second" class="link external" title="Link : http://en.wikipedia.org/wiki/Leap_second">&raquo;&nbsp;Wikipedia article
       on leap seconds</a>.
      </p>
     </p></blockquote>
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      <p class="para">
       Prior to PHP 5.2.0, this function could return undefined behaviour. Notably,
       the <em>&quot;tm_sec&quot;</em>, <em>&quot;tm_min&quot;</em> and <em>&quot;tm_hour&quot;</em> 
       entries would return undefined values.
      </p>
     </p></blockquote>
    </div>


  <div class="refsect1 seealso" id="refsect1-function.strptime-seealso">
    <h3 class="title">参见</h3>
    <p class="para">
     <ul class="simplelist">
      <li class="member"><span class="function"><a href="function.checkdate.html" class="function" rel="rdfs-seeAlso">checkdate()</a> - 验证一个格里高里日期</span></li>
      <li class="member"><span class="function"><a href="function.strftime.html" class="function" rel="rdfs-seeAlso">strftime()</a> - 根据区域设置格式化本地时间／日期</span></li>
      <li class="member"><span class="function"><a href="function.date-parse-from-format.html" class="function" rel="rdfs-seeAlso">date_parse_from_format()</a> - Get info about given date formatted according to the specified format</span></li>
      <li class="member"><span class="function"><a href="datetime.createfromformat.html" class="function" rel="rdfs-seeAlso">DateTime::createFromFormat()</a> - 根据给定的格式解析日期时间字符串</span></li>
     </ul>
    </p>
   </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115875""></a>
  <div class="note">
   <strong class="user">peter at removethisplease dot ddcrew dot com</strong>
   <a href="#115875" class="date">07-Oct-2014 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
emanuil's comment / mktime() example is wrong, in that his mktime() line should have $ts['tm_mon'] + 1 because strptime() returns the months zero-based, while mktime() expects it one-based.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114221""></a>
  <div class="note">
   <strong class="user">arnold at nijboer dot it</strong>
   <a href="#114221" class="date">26-Jan-2014 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the example (or the function) has an inconsistancy with other PHP functions.<br />
<br />
the example returns 104 for the year 2004<br />
<br />
while in the strftime function the 2 digit year is 70-100 for 1970-2000<br />
and 1-69 for 2001-2069</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109120""></a>
  <div class="note">
   <strong class="user">emanuil dot tolev at gmail dot com</strong>
   <a href="#109120" class="date">21-Jun-2012 04:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful: the output of strptime() ( <a href="http://www.php.net/manual/en/function.strptime.php " rel="nofollow" target="_blank">http://www.php.net/manual/en/function.strptime.php </a>) cannot always be used with mktime() ( <a href="http://www.php.net/manual/en/function.mktime.php " rel="nofollow" target="_blank">http://www.php.net/manual/en/function.mktime.php </a>)!<br />
<br />
This is not because of what platform you're using or what format strings glibc supports. This is simply because strptime returns years SINCE 1900 (as documented above) and mktime expects a year in the format returned by date('Y') - which is the full 4 digits.<br />
<br />
Therefore, if you parse a date with strptime and want to give it to mktime, you have to pass in ($parsed_time['tm_year'] + 1900) as the year parameter to mktime(), not just $parsed_time['tm_year'].<br />
<br />
This issue arose when I had a date like: 19/06/2012 12:03:34. strtotime() doesn't parse this particular format, so I needed custom parsing. So I ended up with:<br />
1. $ts = $service-&gt;getNeededDateTime();<br />
2. $ts = strptime($ts, '%d/%m/%Y %H:%M:%S');<br />
3. $ts = mktime($ts['tm_hour'], $ts['tm_min'], $ts['tm_sec'],<br />
&nbsp;&nbsp; &nbsp;&nbsp; $ts['tm_mon'], $ts['tm_mday'], ($ts['tm_year'] + 1900));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103598""></a>
  <div class="note">
   <strong class="user">131</strong>
   <a href="#103598" class="date">21-Apr-2011 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another portage for windows (from ex/yks toolkit)
<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//&nbsp; public static 
<br />
</span><span class="keyword">function </span><span class="default">strptime</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$masks </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'%d' </span><span class="keyword">=&gt; </span><span class="string">'(?P&lt;d&gt;[0-9]{2})'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'%m' </span><span class="keyword">=&gt; </span><span class="string">'(?P&lt;m&gt;[0-9]{2})'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'%Y' </span><span class="keyword">=&gt; </span><span class="string">'(?P&lt;Y&gt;[0-9]{4})'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'%H' </span><span class="keyword">=&gt; </span><span class="string">'(?P&lt;H&gt;[0-9]{2})'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'%M' </span><span class="keyword">=&gt; </span><span class="string">'(?P&lt;M&gt;[0-9]{2})'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'%S' </span><span class="keyword">=&gt; </span><span class="string">'(?P&lt;S&gt;[0-9]{2})'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// usw..
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rexep </span><span class="keyword">= </span><span class="string">"#"</span><span class="keyword">.</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">), </span><span class="default">$masks</span><span class="keyword">).</span><span class="string">"#"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$rexep</span><span class="keyword">, </span><span class="default">$date</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"tm_sec"&nbsp; </span><span class="keyword">=&gt; (int) </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'S'</span><span class="keyword">],
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"tm_min"&nbsp; </span><span class="keyword">=&gt; (int) </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'M'</span><span class="keyword">],
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"tm_hour" </span><span class="keyword">=&gt; (int) </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'H'</span><span class="keyword">],
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"tm_mday" </span><span class="keyword">=&gt; (int) </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">],
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"tm_mon"&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'m'</span><span class="keyword">]?</span><span class="default">$out</span><span class="keyword">[</span><span class="string">'m'</span><span class="keyword">]-</span><span class="default">1</span><span class="keyword">:</span><span class="default">0</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">"tm_year" </span><span class="keyword">=&gt; </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'Y'</span><span class="keyword">] &gt; </span><span class="default">1900 </span><span class="keyword">? </span><span class="default">$out</span><span class="keyword">[</span><span class="string">'Y'</span><span class="keyword">] - </span><span class="default">1900 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; );
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89239""></a>
  <div class="note">
   <strong class="user">Quietust</strong>
   <a href="#89239" class="date">27-Feb-2009 08:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On some systems, particularly those of BSD lineage (such as FreeBSD and MacOS X), the tm_wday and tm_yday fields are only initialized if requested explicitly (that is, if the %a/%A/%u/%w and %j formats are specified), while others such as Linux and Solaris will calculate them automatically.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86572""></a>
  <div class="note">
   <strong class="user">Altar 2010</strong>
   <a href="#86572" class="date">24-Oct-2008 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to parse a date or a /time in windows env, i re-write strptime function for windows.<br />
<br />
I use the same param and i return the same think that the original one.<br />
I use sscanf to parde the string.<br />
Only some format can be parsed (%S, %M, %H, %d, %m, %Y)<br />
<br />
See this page (because the function is too big for this notes)<br />
<a href="http://sauron.lionel.free.fr/?page=php_lib_strptime" rel="nofollow" target="_blank">http://sauron.lionel.free.fr/?page=php_lib_strptime</a><br />
<br />
preview :<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Parse a time/date generated with strftime().<br />
&nbsp;*<br />
&nbsp;* This function is the same as the original one defined by PHP (Linux/Unix only),<br />
&nbsp;*&nbsp; but now you can use it on Windows too.<br />
&nbsp;*&nbsp; Limitation : Only this format can be parsed %S, %M, %H, %d, %m, %Y<br />
&nbsp;* <br />
&nbsp;* @author Lionel SAURON<br />
&nbsp;* @version 1.0<br />
&nbsp;* @public<br />
&nbsp;* <br />
&nbsp;* @param $sDate(string)&nbsp; &nbsp; The string to parse (e.g. returned from strftime()).<br />
&nbsp;* @param $sFormat(string)&nbsp; The format used in date&nbsp; (e.g. the same as used in strftime()).<br />
&nbsp;* @return (array)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returns an array with the &lt;code&gt;$sDate&lt;/code&gt; parsed, or &lt;code&gt;false&lt;/code&gt; on error.<br />
&nbsp;*/<br />
</span><span class="keyword">if(</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"strptime"</span><span class="keyword">) == </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">strptime</span><span class="keyword">(</span><span class="default">$sDate</span><span class="keyword">, </span><span class="default">$sFormat</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aResult </span><span class="keyword">= array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_sec'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_min'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_hour'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_mday'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_mon'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_year'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_wday'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'tm_yday'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'unparsed' </span><span class="keyword">=&gt; </span><span class="default">$sDate</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$sFormat </span><span class="keyword">!= </span><span class="string">""</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// ===== Search a %x element, Check the static string before the %x =====<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nIdxFound </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$sFormat</span><span class="keyword">, </span><span class="string">'%'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$nIdxFound </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// There is no more format. Check the last static string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'unparsed'</span><span class="keyword">] = (</span><span class="default">$sFormat </span><span class="keyword">== </span><span class="default">$sDate</span><span class="keyword">) ? </span><span class="string">"" </span><span class="keyword">: </span><span class="default">$sDate</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .....<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .....<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .....<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .....<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// ===== Create the other value of the result array =====<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nParsedDateTimestamp </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_hour'</span><span class="keyword">], </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_min'</span><span class="keyword">], </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_sec'</span><span class="keyword">],<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_mon'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_mday'</span><span class="keyword">], </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_year'</span><span class="keyword">] + </span><span class="default">1900</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Before PHP 5.1 return -1 when error<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if((</span><span class="default">$nParsedDateTimestamp </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ||(</span><span class="default">$nParsedDateTimestamp </span><span class="keyword">=== -</span><span class="default">1</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_wday'</span><span class="keyword">] = (int) </span><span class="default">strftime</span><span class="keyword">(</span><span class="string">"%w"</span><span class="keyword">, </span><span class="default">$nParsedDateTimestamp</span><span class="keyword">); </span><span class="comment">// Days since Sunday (0-6)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aResult</span><span class="keyword">[</span><span class="string">'tm_yday'</span><span class="keyword">] = (</span><span class="default">strftime</span><span class="keyword">(</span><span class="string">"%j"</span><span class="keyword">, </span><span class="default">$nParsedDateTimestamp</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">); </span><span class="comment">// Days since January 1 (0-365)<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$aResult</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// END of function<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="keyword">} </span><span class="comment">// END if(function_exists("strptime") == false)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82004""></a>
  <div class="note">
   <strong class="user">firefox3107 at gmail dot com</strong>
   <a href="#82004" class="date">23-Mar-2008 06:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For Windows user! It's rather the same as strptime!<br />
It uses the previous function: but call strToTime($date, $format) to strToDate($date, $format) because this name is forgiven!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strToDateTime</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!(</span><span class="default">$date </span><span class="keyword">= </span><span class="default">strToDate</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">$format</span><span class="keyword">))) return;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime </span><span class="keyword">= array(</span><span class="string">'sec' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'min' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'hour' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'day' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'mon' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'year' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'timestamp' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$date </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; switch(</span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'d'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'j'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'D'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'j'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">)); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'m'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'n'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'mon'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'M'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'mon'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">)); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'Y'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'year'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'y'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'year'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)+</span><span class="default">2000</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'G'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'g'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'H'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'h'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'hour'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'i'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'min'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'s'</span><span class="keyword">: </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'sec'</span><span class="keyword">] = </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'timestamp'</span><span class="keyword">] = </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'hour'</span><span class="keyword">], </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'min'</span><span class="keyword">], </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'sec'</span><span class="keyword">], </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'mon'</span><span class="keyword">], </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">], </span><span class="default">$dateTime</span><span class="keyword">[</span><span class="string">'year'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$dateTime</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80743""></a>
  <div class="note">
   <strong class="user">P.</strong>
   <a href="#80743" class="date">30-Jan-2008 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If strptime() fails to match all of the format string and therefore an error occurred the function returns NULL.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75775""></a>
  <div class="note">
   <strong class="user">chad 0x40 herballure 0x2e com</strong>
   <a href="#75775" class="date">15-Jun-2007 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The result of strptime() is not affected by the current timezone setting, even though strftime() is. Tested in PHP 5.1.6.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71341""></a>
  <div class="note">
   <strong class="user">svenr at selfhtml dot org</strong>
   <a href="#71341" class="date">23-Nov-2006 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need strptime but are restricted to a php version which does not support it (windows or before PHP 5), note that MySQL since Version 4.1.1 offers (almost?) the same functionality with the STR_TO_DATE function.<br />
<br />
See <a href="http://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68792""></a>
  <div class="note">
   <strong class="user">DT &lt;pwadas at gazeta dot pl&gt;</strong>
   <a href="#68792" class="date">10-Aug-2006 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">//This turns non-standard but often used "datetime" string
<br />
//like '20060810084251' into nice formatted date
<br />
//'Thursday, 10 August 2006 08:42:51 CEST'
<br />
//note, that strptime returns day of year counting from 0, so
<br />
//you need to put 1 as month number to get appropriate
<br />
//month for the daycount. for 2006 strptime for unknown
<br />
//reason returns 106, so I simply add 1900
<br />

<br />
</span><span class="default">$informat </span><span class="keyword">= </span><span class="string">'%Y%m%d%H%M%S'</span><span class="keyword">;
<br />
</span><span class="default">$outformat </span><span class="keyword">=&nbsp; </span><span class="string">'%A, %d %B %Y %T %Z'</span><span class="keyword">;
<br />
</span><span class="default">$ftime </span><span class="keyword">= </span><span class="default">strptime</span><span class="keyword">(</span><span class="string">"20060810084251"</span><span class="keyword">,</span><span class="default">$informat</span><span class="keyword">);
<br />
</span><span class="default">$unxTimestamp </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ftime</span><span class="keyword">[</span><span class="string">'tm_hour'</span><span class="keyword">], 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ftime</span><span class="keyword">[</span><span class="string">'tm_min'</span><span class="keyword">], 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ftime</span><span class="keyword">[</span><span class="string">'tm_sec'</span><span class="keyword">], 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ftime</span><span class="keyword">[</span><span class="string">'tm_yday'</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ftime</span><span class="keyword">[</span><span class="string">'tm_year'</span><span class="keyword">] + </span><span class="default">1900
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);
<br />
</span><span class="comment">//setlocale(LC_TIME,'pl_PL');
<br />
</span><span class="keyword">echo </span><span class="default">strftime</span><span class="keyword">(</span><span class="default">$outformat </span><span class="keyword">, </span><span class="default">$unxTimestamp </span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66048""></a>
  <div class="note">
   <strong class="user">jojyjob at gmail dot com</strong>
   <a href="#66048" class="date">13-May-2006 12:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/***Finding the days of a week ***/<br />
<br />
<span class="default">&lt;?php <br />
<br />
$out </span><span class="keyword">= </span><span class="default">pre</span><span class="keyword">();&nbsp; <br />
</span><span class="default">$outpre</span><span class="keyword">=</span><span class="default">nextweek</span><span class="keyword">();<br />
</span><span class="default">$td</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">);<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$outpre</span><span class="keyword">);<br />
</span><span class="comment">//print_r($result);<br />
</span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$td</span><span class="keyword">);<br />
</span><span class="default">$newarray </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">);<br />
<br />
&nbsp; foreach(</span><span class="default">$newarray </span><span class="keyword">as </span><span class="default">$date1</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$date1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
&nbsp;}<br />
<br />
</span><span class="comment">//print_r($out);<br />
//print_r($newarray);<br />
<br />
</span><span class="keyword">function </span><span class="default">pre</span><span class="keyword">()&nbsp; <br />
{<br />
</span><span class="default">$monP</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$tueP</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$wedP</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$thuP</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">;<br />
</span><span class="default">$friP</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;<br />
</span><span class="default">$satP</span><span class="keyword">=</span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$sunP</span><span class="keyword">=</span><span class="default">6</span><span class="keyword">;<br />
&nbsp; <br />
</span><span class="default">$td</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">);&nbsp;&nbsp; <br />
</span><span class="comment">//echo $td;<br />
</span><span class="default">$tdname</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"l"</span><span class="keyword">);&nbsp; <br />
&nbsp; switch(</span><span class="default">$tdname</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; case </span><span class="string">"Monday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$monP</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Tuesday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$tueP</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Wednesday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$wedP</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Thursday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$thuP</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Friday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$friP</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Saturday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$satP</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Sunday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$sunP</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; break;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"Sorry"</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; }<br />
<br />
&nbsp;<br />
</span><span class="comment">//echo $tdname."&lt;br&gt;";&nbsp;&nbsp; <br />
//echo $rep;<br />
</span><span class="default">$datstart </span><span class="keyword">=</span><span class="default">$td</span><span class="keyword">;&nbsp; </span><span class="comment">/* the starting date */<br />
//$rep = 12;&nbsp; /* number of future dates to display */ <br />
</span><span class="default">$nod </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;&nbsp; </span><span class="comment">/* number of days in the future to increment the date */<br />
</span><span class="default">$nom </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; </span><span class="comment">/* number of months in the future to increment the date */<br />
</span><span class="default">$noy </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; </span><span class="comment">/* number of years in the future to increment the date */<br />
</span><span class="default">$precon</span><span class="keyword">=</span><span class="default">future_date</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">$rep</span><span class="keyword">,</span><span class="default">$nod</span><span class="keyword">,</span><span class="default">$nom</span><span class="keyword">,</span><span class="default">$noy</span><span class="keyword">); <br />
return </span><span class="default">$precon</span><span class="keyword">;<br />
}<br />
function </span><span class="default">future_date</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">$rep</span><span class="keyword">,</span><span class="default">$nod</span><span class="keyword">,</span><span class="default">$nom</span><span class="keyword">,</span><span class="default">$noy</span><span class="keyword">) {<br />
&nbsp;</span><span class="default">$pre </span><span class="keyword">= array();<br />
&nbsp; while (</span><span class="default">$rep </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datyy</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datmm</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datdd</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fda</span><span class="keyword">=</span><span class="default">$datdd </span><span class="keyword">- </span><span class="default">$nod</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fmo</span><span class="keyword">=</span><span class="default">$datmm </span><span class="keyword">- </span><span class="default">$nom</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fyr</span><span class="keyword">=</span><span class="default">$datyy </span><span class="keyword">-</span><span class="default">$noy</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dat1</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$fmo</span><span class="keyword">,</span><span class="default">$fda</span><span class="keyword">,</span><span class="default">$fyr</span><span class="keyword">)).</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$pre</span><span class="keyword">,</span><span class="default">$dat1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//echo $dat1; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datstart</span><span class="keyword">=</span><span class="default">$dat1</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rep</span><span class="keyword">--; <br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$pre</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">nextweek</span><span class="keyword">()<br />
{<br />
</span><span class="default">$monN</span><span class="keyword">=</span><span class="default">6</span><span class="keyword">;<br />
</span><span class="default">$tueN</span><span class="keyword">=</span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$wedN</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;<br />
</span><span class="default">$thuN</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">;<br />
</span><span class="default">$friN</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$satN</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$sunN</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
<br />
</span><span class="default">$td</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">);&nbsp;&nbsp; <br />
</span><span class="default">$tdname</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"l"</span><span class="keyword">);&nbsp; <br />
&nbsp; switch(</span><span class="default">$tdname</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; case </span><span class="string">"Monday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$monN</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Tuesday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$tueN</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Wednesday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$wedN</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Thursday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$thuN</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Friday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$friN</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Saturday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$satN</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; case </span><span class="string">"Sunday"</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$rep</span><span class="keyword">=</span><span class="default">$sunN</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; break;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"Sorry"</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp; }<br />
<br />
&nbsp;<br />
</span><span class="comment">//echo $tdname."&lt;br&gt;";&nbsp;&nbsp; <br />
//echo $rep;<br />
</span><span class="default">$datstart </span><span class="keyword">=</span><span class="default">$td</span><span class="keyword">;&nbsp; </span><span class="comment">/* the starting date */<br />
//$rep = 12;&nbsp; /* number of future dates to display */ <br />
</span><span class="default">$nod </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;&nbsp; </span><span class="comment">/* number of days in the future to increment the date */<br />
</span><span class="default">$nom </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; </span><span class="comment">/* number of months in the future to increment the date */<br />
</span><span class="default">$noy </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; </span><span class="comment">/* number of years in the future to increment the date */<br />
<br />
</span><span class="default">$con </span><span class="keyword">= </span><span class="default">future_date1</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">$rep</span><span class="keyword">,</span><span class="default">$nod</span><span class="keyword">,</span><span class="default">$nom</span><span class="keyword">,</span><span class="default">$noy</span><span class="keyword">); <br />
return </span><span class="default">$con</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">future_date1</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">$rep</span><span class="keyword">,</span><span class="default">$nod</span><span class="keyword">,</span><span class="default">$nom</span><span class="keyword">,</span><span class="default">$noy</span><span class="keyword">) {<br />
&nbsp;</span><span class="default">$pre </span><span class="keyword">= array();<br />
&nbsp; while (</span><span class="default">$rep </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datyy</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datmm</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datdd</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$datstart</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fda</span><span class="keyword">=</span><span class="default">$datdd </span><span class="keyword">+ </span><span class="default">$nod</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fmo</span><span class="keyword">=</span><span class="default">$datmm </span><span class="keyword">+ </span><span class="default">$nom</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fyr</span><span class="keyword">=</span><span class="default">$datyy </span><span class="keyword">+ </span><span class="default">$noy</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dat1</span><span class="keyword">=</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$fmo</span><span class="keyword">,</span><span class="default">$fda</span><span class="keyword">,</span><span class="default">$fyr</span><span class="keyword">)).</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$pre</span><span class="keyword">,</span><span class="default">$dat1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//echo $dat1; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datstart</span><span class="keyword">=</span><span class="default">$dat1</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rep</span><span class="keyword">--; <br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$pre</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63659""></a>
  <div class="note">
   <strong class="user">Malte Starostik</strong>
   <a href="#63659" class="date">27-Mar-2006 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It says "Parse a time/date generated with strftime()" but that's not entirely correct -- While strptime("2006131", "%Y%W%u") works as expected, strptime("2006131", "%G%V%u") returns false instead of reversing the equivalent - and unambiguous - strftime() usage.&nbsp; I suspect that's because glibc doesn't support that.&nbsp; Anyway, this docu page fails to mention that apparently not all format components supported by strftime() can be used with strptime().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
