<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>用正则表达式将字符串分割到数组中</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.eregi.html">? eregi</a></li>
      <li style="float: right;"><a href="function.spliti.html">spliti ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.regex.html">POSIX 正则表达式函数</a></li>
    <li>用正则表达式将字符串分割到数组中</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.split" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">split</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">split</span> &mdash; <span class="dc-title">用正则表达式将字符串分割到数组中</span></p>

 </div>
 <div class="refsect1 unknown-unknown-unknown-unknown-unknown-seealst" id="refsect1-function.split-unknown-unknown-unknown-unknown-unknown-seealst">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>split</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$limit</code> = ?</span>
   ) : <span class="type">array</span></div>

  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> 函数使用了
    Perl 兼容正则表达式语法，通常是比
    <span class="function"><strong>split()</strong></span> 更快的替代方案。如果不需要正则表达式的威力，则使用
    <span class="function"><a href="function.explode.html" class="function">explode()</a></span> 更快，这样就不会招致正则表达式引擎的浪费。
   </p>
  </div>
  <p class="para">
   本函数返回一个字符串数组，每个单元为
   <code class="parameter">string</code> 经区分大小写的正则表达式
   <code class="parameter">pattern</code> 作为边界分割出的子串。如果设定了
   <code class="parameter">limit</code>，则返回的数组最多包含
   <code class="parameter">limit</code> 个单元，而其中最后一个单元包含了
   <code class="parameter">string</code> 中剩余的所有部分。如果出错，则
   <span class="function"><strong>split()</strong></span> 返回 <strong><code>false</code></strong>。
  </p>
  <p class="para">
   将 <var class="filename">/etc/passwd</var> 中的前四个字段分割出来：
  </p>
  <p class="para">
   <div class="example" id="example-5111">
    <p><strong>Example #1 <span class="function"><strong>split()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">list(</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$uid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$extra</span><span style="color: #007700">)&nbsp;=<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">split&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">":"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$passwd_line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="simpara">
   如果字符串中有 <span class="replaceable">n</span> 个与
   <code class="parameter">pattern</code> 匹配的项目，则返回的数组将包含
   <code class="literal"><span class="replaceable">n</span>+1</code> 个单元。例如，如果没有找到
   <code class="parameter">pattern</code>，则会返回一个只有一个单元的数组。当然，如果
   <code class="parameter">string</code> 为空也是这样。
  </p>
  <p class="para">
   解析可能用斜线，点，或横线分割的日期：
  </p>
  <p class="para">
   <div class="example" id="example-5112">
    <p><strong>Example #2 <span class="function"><strong>split()</strong></span> 例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;分隔符可以是斜线，点，或横线<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"04/30/1973"</span><span style="color: #007700">;<br />list(</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">split&nbsp;</span><span style="color: #007700">(</span><span style="color: #DD0000">'[/.-]'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Month:&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #DD0000">;&nbsp;Day:&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #DD0000">;&nbsp;Year:&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   想仿效 Perl 中类似的 <strong class="command">@chars =
   split(&#039;&#039;, $str)</strong> 行为，请参考
   <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> 或 <span class="function"><a href="function.str-split.html" class="function">str_split()</a></span> 函数中的例子。
  </p>
  <p class="para">
   注意 <code class="parameter">pattern</code>
   是一个正则表达式。如果想要用的分割字符是正则表达式中的特殊字符，要先将其转义。如果觉得
   <span class="function"><strong>split()</strong></span>（或其它任何 regex 函数）行为古怪的话，请阅读包含在
   PHP 发行包中 <var class="filename">regex/</var> 子目录下的
   <var class="filename">regex.7</var> 文件。该文件是手册页面格式，可以用类似
   <strong class="command">man /usr/local/src/regex/regex.7</strong> 的命令来阅读。
  </p>
  <p class="para">
   参见 <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span>，<span class="function"><a href="function.spliti.html" class="function">spliti()</a></span>，<span class="function"><a href="function.str-split.html" class="function">str_split()</a></span>，<span class="function"><a href="function.explode.html" class="function">explode()</a></span>，<span class="function"><a href="function.implode.html" class="function">implode()</a></span>，<span class="function"><a href="function.chunk-split.html" class="function">chunk_split()</a></span>
   和 <span class="function"><a href="function.wordwrap.html" class="function">wordwrap()</a></span>。
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="87428""></a>
  <div class="note">
   <strong class="user">Greg Levine</strong>
   <a href="#87428" class="date">04-Dec-2008 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I kept running into the same issue Chris Tyler experienced with lewis [ at t] hcoms [d dot t] co [d dot t] uk's function before realizing that Chris had come up with a solution. However, that solution was just a little off it seems, unless your CSV only contains one line.<br />
<br />
If you simply add another --length; in the place you suggested, then the function will always trim the last two characters on the line. Since the newline character is the last character on the line and the redundant quote (or other enclosure) is the second to last character, this works for the final segment. But when parsing segments that do not include a newline character, you end up trimming the redundant enclosure and the last character before the enclosure.<br />
<br />
For example,<br />
<br />
"he","she","him","her"\r\n<br />
<br />
becomes<br />
<br />
[0] =&gt; h<br />
[1] =&gt; sh<br />
[2] =&gt; hi<br />
[3] =&gt; her<br />
<br />
Since the segment could end with the enclosure (i.e., ") or the enclosure followed by the newline (i.e., "\r\n), you have make sure you are only adding another --length; when the latter is the case. Replacing the code block that you suggested with the following will do the trick.<br />
<br />
# Is the last thing a newline?<br />
if( $char == $newline )<br />
{<br />
&nbsp;&nbsp;&nbsp; # Well then get rid of it<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
}<br />
<br />
# Is the last thing a quote?<br />
if( $trim_quote )<br />
{<br />
&nbsp;&nbsp;&nbsp; # Well then get rid of it<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
}<br />
<br />
I've tested this only for the purposes of the script I'm working on at this time. So, there could be other bugs I haven't come across, but this seems like the easiest way to eliminate the redundant enclosure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84419""></a>
  <div class="note">
   <strong class="user">pascalaschwandenNOSPAM at gmail dot com</strong>
   <a href="#84419" class="date">13-Jul-2008 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following code will mimick the explode functionality: explode( " ", $s );&nbsp; The difference, of course, is that the split method takes a regular expression instead of a string.<br />
<br />
$s = "Split this sentence by spaces";<br />
$words = split("[ ]+", $s);<br />
print_r($words);<br />
<br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Split<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; this<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; sentence<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; by<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; spaces<br />
)<br />
<a href="http://www.codesplunk.com/nr/questions/php12.html" rel="nofollow" target="_blank">http://www.codesplunk.com/nr/questions/php12.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82413""></a>
  <div class="note">
   <strong class="user">Chris Tyler</strong>
   <a href="#82413" class="date">09-Apr-2008 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thank you Dave for your code below.&nbsp; Here is one change I made to avoid a redundant quote at the end of some lines (at least when I used excel:&nbsp; <br />
<br />
Added another --length;&nbsp; into the if statement below:<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Is the last thing a quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($trim_quote){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Well then get rid of it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; --$length;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // ADD TO FIX extra quote<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82050""></a>
  <div class="note">
   <strong class="user">lewis [ at t] hcoms [d dot t] co [d dot t] uk</strong>
   <a href="#82050" class="date">25-Mar-2008 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Those of you trying to use split for CSV, it won't always work as expected. Instead, try using a simple stack method:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Create a 2D array from a CSV string<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param mixed $data 2D array<br />
&nbsp;&nbsp; &nbsp; * @param string $delimiter Field delimiter<br />
&nbsp;&nbsp; &nbsp; * @param string $enclosure Field enclosure<br />
&nbsp;&nbsp; &nbsp; * @param string $newline Line seperator<br />
&nbsp;&nbsp; &nbsp; * @return<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">parse</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="string">','</span><span class="keyword">, </span><span class="default">$enclosure </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$newline </span><span class="keyword">= </span><span class="string">"\n"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$last_pos </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Create a continuous loop<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;; ++</span><span class="default">$i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get the positions<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$comma_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newline_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$newline</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Which one comes first?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">((</span><span class="default">$comma_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$comma_pos</span><span class="keyword">, (</span><span class="default">$quote_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$quote_pos</span><span class="keyword">, (</span><span class="default">$newline_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$newline_pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Cache it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= (isset(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">])) ? </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] : </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$done </span><span class="keyword">= (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">$end</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It it a special character?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$done </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$delimiter </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Ignore it as we're still in a quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">&amp;&amp; !</span><span class="default">$done</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">- ++</span><span class="default">$last_pos</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Is the last thing a quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$trim_quote</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Well then get rid of it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">--</span><span class="default">$length</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get all the contents of this column<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">][] = (</span><span class="default">$length </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$enclosure </span><span class="keyword">. </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$last_pos</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)) : </span><span class="string">''</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And we're done<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$done</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Save the last position<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last_pos </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Next row?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Our quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$enclosure</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Toggle it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It's an opening quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim this opening quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$last_pos </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">== </span><span class="default">$pos</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$last_pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It's a closing quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim the last quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This *should* work for any valid CSV string, regardless of what it contains inside its quotes (using RFC 4180). It should also be faster than most of the others I've seen. It's very simple in concept, and thoroughly commented.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81490""></a>
  <div class="note">
   <strong class="user">Dave Walter</strong>
   <a href="#81490" class="date">29-Feb-2008 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to&nbsp; the getCSVValues() function posted by justin at cam dot org, my testing indicates that it has a problem with a CSV string like this:<br />
<br />
1,2,"3,""4,5"",6",7<br />
<br />
This parses as:<br />
<br />
array(6) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "1"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "2"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(4) "3,"4"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(1) "5"<br />
&nbsp; [4]=&gt;<br />
&nbsp; string(0) ""<br />
&nbsp; [5]=&gt;<br />
&nbsp; string(1) "7"<br />
}<br />
<br />
instead of:<br />
<br />
array(4) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "1"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "2"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(9) "3,"4,5",6"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(1) "7"<br />
}<br />
<br />
To fix this, I changed the second substr_count to look for an odd number of quotes, as opposed to any quotes at all:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getCSVValues</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nquotes </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">%</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">) %</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// Look for an odd-number of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Put the quoted string's pieces back together again<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Remove first and last quotes, then merge pairs of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">=&amp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$qstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$elements</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75236""></a>
  <div class="note">
   <strong class="user">Mike</strong>
   <a href="#75236" class="date">18-May-2007 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Split a string into words on boundaries of one or more spaces, tabs or new-lines<br />
$s = "Please cut&nbsp;&nbsp; \t me \n in pieces";<br />
$words = split("[\n\r\t ]+", $s);<br />
print_r($words);<br />
<br />
// Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Please<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; cut<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; me<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; in<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; pieces<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73899""></a>
  <div class="note">
   <strong class="user">Jort</strong>
   <a href="#73899" class="date">14-Mar-2007 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for EITHER open square brackets OR close square brackets, then '[[]]' won't work (reasonably expected), but neither will '[\[\]]', nor with any number of escapes. HOWEVER, if your pattern is '[][]' it will work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61648""></a>
  <div class="note">
   <strong class="user">RE: gcerretini at technica dot net /UTF8</strong>
   <a href="#61648" class="date">08-Feb-2006 04:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Original problem:<br />
=================<br />
<br />
I've try using split function.<br />
<br />
<span class="default">&lt;?php<br />
$ferro</span><span class="keyword">=</span><span class="string">"2&amp;#65533;12"</span><span class="keyword">;<br />
</span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[&amp;#65533;]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br />
echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$ferro</span><span class="keyword">=</span><span class="string">"2d12"</span><span class="keyword">;<br />
</span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[d]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br />
echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This return:<br />
============<br />
<br />
2&amp;#65533;12<br />
p1-2<br />
p2-<br />
p3-12<br />
2d12<br />
p1-2<br />
p2-12<br />
p3-<br />
<br />
I use charset UTF-8. When I use char &amp;#65533; the split function ad an empty string between "2" and "12"... Why?<br />
<br />
Explanation:<br />
============<br />
<br />
UTF-8 charset codes some characters (like the "&amp;#65533;" character) into two bytes. In fact the regular expresion "[&amp;#65533;]" contains 4 bytes (4 non-unicode characters). To demonstrate the real situation I wrote following example:<br />
<br />
$ferro="2de12";<br />
$valore=split("[de]",$ferro);<br />
echo $ferro."&lt;br&gt;";<br />
echo "p1-".$valore[0]."&lt;br&gt;";<br />
echo "p2-".$valore[1]."&lt;br&gt;";<br />
echo "p3-".$valore[2]."&lt;br&gt;";<br />
<br />
This returns:<br />
=============<br />
<br />
2d12<br />
p1-2<br />
p2-<br />
p3-12</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58445""></a>
  <div class="note">
   <strong class="user">franz at fholzinger dot com</strong>
   <a href="#58445" class="date">04-Nov-2005 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example from ramkumar rajendran did not work. <br />
$line = split("/\n", $input_several_lines_long);<br />
I do not know why this does not work for me.<br />
<br />
The following has worked for me to get a maximum of 2 array parts separated by the first new line (independant if saved under UNIX or WINDOWS):<br />
$line = preg_split('/[\n\r]+/',$input_several_lines_long,2);<br />
Also empty lines are not considered here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54306""></a>
  <div class="note">
   <strong class="user">robin at teddyb dot org</strong>
   <a href="#54306" class="date">29-Jun-2005 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, this version is better than the last I submitted.&nbsp; The goal here is to be able to engage in *multiple* delimeter removal passes; for all but the last pass, set the third value to "1", and everything should go well.<br />
<br />
&nbsp;&nbsp;&nbsp; function quotesplit( $splitter=',', $s, $restore_quotes=0 )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //the logic further down<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $restore_quotes )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[count($result)-1] = $result[count($result)-1].'"'.$val.'"';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54304""></a>
  <div class="note">
   <strong class="user">robin at teddyb dot org</strong>
   <a href="#54304" class="date">29-Jun-2005 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
wchris's quotesplit assumes that anything that is quoted must also be a complete delimiter-seperated entry by itself.&nbsp; This version does not.&nbsp; It also uses split's argument order.<br />
<br />
&nbsp;&nbsp;&nbsp; function quotesplit( $splitter=',', $s )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //the logic further down<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[count($result)-1] = $result[count($result)-1].$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50113""></a>
  <div class="note">
   <strong class="user">wchris</strong>
   <a href="#50113" class="date">18-Feb-2005 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
moritz's quotesplit didn't work for me. It seemed to split on a comma even though it was between a pair of quotes. However, this did work:<br />
<br />
function quotesplit($s, $splitter=',')<br />
{<br />
//First step is to split it up into the bits that are surrounded by quotes and the bits that aren't. Adding the delimiter to the ends simplifies the logic further down<br />
<br />
&nbsp;&nbsp;&nbsp; $getstrings = split('\"', $splitter.$s.$splitter);<br />
<br />
//$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
//Add the whole string, untouched to the result array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
//Break up the string according to the delimiter character<br />
//Each string has extraneous delimiters around it (inc the ones we added above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49130""></a>
  <div class="note">
   <strong class="user">ramkumar rajendran</strong>
   <a href="#49130" class="date">17-Jan-2005 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A correction to a earlier note<br />
If you want to use split to check on line feeds (\n), the following won't work:<br />
<br />
$line = split("\n", $input_several_lines_long);<br />
<br />
You really have to do this instead, notice the second slash:<br />
$line = split("/\n", $input_several_lines_long);<br />
<br />
Took me a little while to figure to do</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47127""></a>
  <div class="note">
   <strong class="user">claes at dot2me.com</strong>
   <a href="#47127" class="date">03-Nov-2004 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Though this is obvious, the manual is a bit incorrect when claiming that the return will always be 1+number of time the split pattern occures.&nbsp; If the split pattern is the first part of the string, the return will still be 1.&nbsp; E.g.<br />
<br />
$a = split("zz," "zzxsj.com");<br />
count($a);<br />
<br />
=&gt; 1.<br />
<br />
The return of this can not in anyway be seperated from the return where the split pattern is not found.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41133""></a>
  <div class="note">
   <strong class="user">alphibia at alphibia dot com</strong>
   <a href="#41133" class="date">31-Mar-2004 06:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'd like to correct myself, I found that after testing my last solution it will create 5 lines no matter what... So I added this to make sure that it only displays 5 if there are five newlines. :-)<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; $MaxNewLines </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$BRCount </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$Message</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$BRCount</span><span class="keyword">&lt;</span><span class="default">$MaxNewLines</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">$BRCount</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">$BRCount </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">), </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MessageArray </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">, </span><span class="default">$MaxNewLines</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="default">$u</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; do&nbsp; &nbsp; { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++; <br />
&nbsp;&nbsp;&nbsp; } while(</span><span class="default">$u</span><span class="keyword">&lt;(</span><span class="default">$MaxNewLines</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">]); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;</span> <br />
<br />
-Tim<br />
<a href="http://www.alphibia.com" rel="nofollow" target="_blank">http://www.alphibia.com</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37635""></a>
  <div class="note">
   <strong class="user">nomail at please dot now</strong>
   <a href="#37635" class="date">21-Nov-2003 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use split to check on line feeds (\n), the following won't work:<br />
<br />
$line = split("\n", $input_several_lines_long);<br />
<br />
You really have to do this instead, notice the second slash:<br />
$line = split("\\n", $input_several_lines_long);<br />
<br />
Took me a little while to figure out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36853""></a>
  <div class="note">
   <strong class="user">krahn at niehs dot nih dot gov</strong>
   <a href="#36853" class="date">24-Oct-2003 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; strange things happen with split<br />
&gt; this didn't work<br />
&gt; $vontag $vonmonat were empty strings<br />
...<br />
&gt; list ($vontag , $vonmonat) = split ('.' , $fromdate); // &lt;&lt; bad<br />
<br />
Split is acting exactly as it should; it splits on regular expressions.<br />
A period is a regular expression pattern for a single character.<br />
So, an actual period must be escaped with a backslash:&nbsp; '\.'<br />
A period within brackets is not an any-character pattern, because it does<br />
not make sense in that context.<br />
<br />
Beware that regular expressions can be confusing becuase there<br />
are a few different varieties of patterns.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36398""></a>
  <div class="note">
   <strong class="user">dalu at uni dot de</strong>
   <a href="#36398" class="date">08-Oct-2003 12:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php4.3.0<br />
<br />
strange things happen with split<br />
<br />
this didn't work<br />
$vontag $vonmonat were empty strings<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
however this one worked perfectly<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
btw this fn checks if $now if between $fromdate and $todate<br />
use it if you like</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28369""></a>
  <div class="note">
   <strong class="user">jeffrey at jhu dot edu</strong>
   <a href="#28369" class="date">10-Jan-2003 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In answer to gwyne at gmx dot net, dec 1, 2002:<br />
<br />
For split(), when using a backslash as the delimiter, you have to *double escape* the backslash.<br />
<br />
example:<br />
==================================<br />
&lt;pre&gt;<br />
&lt;?<br />
$line = 'stuff\\\thing\doodad\\';<br />
$linearray = split('\\\\', $line); //&lt;--NOTE USE OF FOUR(4)backslashes<br />
print join(":", $linearray);<br />
?&gt;<br />
&lt;/pre&gt;<br />
<br />
==================================<br />
output is:<br />
<br />
&lt;pre&gt;<br />
stuff::thing:doodad:<br />
&lt;/pre&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23546""></a>
  <div class="note">
   <strong class="user">paha at paha dot hu</strong>
   <a href="#23546" class="date">21-Jul-2002 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's evident but not mentioned in the documentation that using asterisks is more restricted than in a normal regular expression.<br />
<br />
for exaple you cannot say:<br />
<br />
split(";*",$string);<br />
<br />
because what if there's no ";" separator?(which is covered by this regular expression) <br />
<br />
so you have to use at least<br />
<br />
split(";+",$quotatxt);<br />
<br />
in this situation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22415""></a>
  <div class="note">
   <strong class="user">fotw at gmx dot net</strong>
   <a href="#22415" class="date">17-Jun-2002 12:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ups! It seems that neither explode nor split REALY takes a STRING but only a single character as a string for splitting the string.<br />
&nbsp;I found this problem in one of my codes when trying to split a string using ";\n" as breaking string. The result, only ";" was thaken... the rest of the string was ignored.<br />
&nbsp;Same when I tried to substitute "\n" by any other thing. :(</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22396""></a>
  <div class="note">
   <strong class="user">not at anythingspecial dot com</strong>
   <a href="#22396" class="date">16-Jun-2002 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to do a split on a period make sure you escape the period out..<br />
<br />
$ext_arr = split("\.","something.jpg");<br />
... because<br />
$ext_arr = split(".","something.jpg"); won't work properly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22267""></a>
  <div class="note">
   <strong class="user">kang at elpmis dot com</strong>
   <a href="#22267" class="date">12-Jun-2002 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a good way to display a comma delimited file with two columns.&nbsp; The first column is the URL's description, the second is the actual URL.<br />
<br />
&lt;ul&gt;<br />
<span class="default">&lt;?php<br />
&nbsp; $fname</span><span class="keyword">=</span><span class="string">"relatedlinks.csv"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fname</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">) or die(</span><span class="string">"Error found."</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br />
&nbsp; while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$desc</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$dummy</span><span class="keyword">) = </span><span class="default">split</span><span class="keyword">( </span><span class="string">","</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;li&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;a href='</span><span class="default">$url</span><span class="string">'&gt;</span><span class="default">$desc</span><span class="string">&lt;/a&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;/li&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>&lt;/ul&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21942""></a>
  <div class="note">
   <strong class="user">jchart at sdccu dot net</strong>
   <a href="#21942" class="date">31-May-2002 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Ed. note: Close. The pipe *is* an operator in PHP, but
<br />
the reason this fails is because it's also an operator
<br />
in the regex syntax. The distinction here is important
<br />
since a PHP operator inside a string is just a character.]
<br />

<br />
The reason your code:
<br />

<br />
$line = "12|3|Fred"; 
<br />
list ($msgid, $msgref, $msgtopic)=split('|', $line); 
<br />

<br />
didn't work is because the "|" symbol is an operator in PHP. If you want to use the pipe symbol as a delimiter you must excape it with a back slash, "\|". You code should look like this:
<br />

<br />
$line = "12|3|Fred"; 
<br />
list ($msgid, $msgref, $msgtopic)=split('\|', $line);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21557""></a>
  <div class="note">
   <strong class="user">mcgarry at tig dot com dot au</strong>
   <a href="#21557" class="date">17-May-2002 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
split() doesn't like NUL characters within the string, it treats the first one it meets as the end of the string, so if you have data you want to split that can contain a NUL character you'll need to convert it into something else first, eg:<br />
<br />
$line=str_replace(chr(0),'',$line);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
