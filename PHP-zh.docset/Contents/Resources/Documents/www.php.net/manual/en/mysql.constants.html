<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>预定义常量</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="changelog.mysql.html">? 更新日志</a></li>
      <li style="float: right;"><a href="mysql.examples.html">范例 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.mysql.html">Mysql（原始）</a></li>
    <li>预定义常量</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysql.constants" class="appendix">
 <h1>预定义常量</h1>

 <p class="simpara">下列常量由此扩展定义，且仅在此扩展编译入 PHP 或在运行时动态载入时可用。</p>
 <p class="para">
  在 PHP 4.3.0 以后的版本中，允许在
  <span class="function"><a href="function.mysql-connect.html" class="function">mysql_connect()</a></span> 函数和 <span class="function"><a href="function.mysql-pconnect.html" class="function">mysql_pconnect()</a></span>
  函数中指定更多的客户端标记。下面列出所定义的常量：
  <table id="mysql.client-flags" class="doctable table">
   <caption><strong>MySQL 客户端常量</strong></caption>
    
     <thead>
      <tr>
       <th>常量</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr id="constant.mysql-client-compress">
       <td><strong><code>MYSQL_CLIENT_COMPRESS</code></strong></td>
       <td>使用压缩的通讯协议</td>
      </tr>

      <tr id="constant.mysql-client-ignore-space">
       <td><strong><code>MYSQL_CLIENT_IGNORE_SPACE</code></strong></td>
       <td>允许在函数名后留空格位</td>
      </tr>

      <tr id="constant.mysql-client-interactive">
       <td><strong><code>MYSQL_CLIENT_INTERACTIVE</code></strong></td>
       <td>允许设置断开连接之前所空闲等候的 interactive_timeout 时间（代替 wait_timeout）。</td>
      </tr>

      <tr id="constant.mysql-client-ssl">
       <td><strong><code>MYSQL_CLIENT_SSL</code></strong></td>
       <td>
        使用 SSL 加密。本标志仅在 MySQL 客户端库版本为
        4.x 或更高版本时可用。在 PHP 4 和 Windows 版的 PHP 5
        安装包中绑定的都是 3.23.x。
       </td>
      </tr>

     </tbody>
    
  </table>

 </p>

 <p class="para">
  <span class="function"><a href="function.mysql-fetch-array.html" class="function">mysql_fetch_array()</a></span> 函数使用一个常量来表示所返回数组的类型。下面是常量的定义：
  <table class="doctable table">
   <caption><strong>MySQL fetch 常量</strong></caption>
   
    <thead>
     <tr>
      <th>常量</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr id="constant.mysql-assoc">
      <td><strong><code>MYSQL_ASSOC</code></strong></td>
      <td>
       返回的数据列使用字段名作为数组的索引名。
      </td>
     </tr>

     <tr id="constant.mysql-both">
      <td><strong><code>MYSQL_BOTH</code></strong></td>
      <td>
       返回的数据列使用字段名及数字索引作为数组的索引名。
      </td>
     </tr>

     <tr id="constant.mysql-num">
      <td><strong><code>MYSQL_NUM</code></strong></td>
      <td>
       返回的数据列使用数字索引作为数组的索引名。索引从 0 开始，表示返回结果的第一个字段。
      </td>
     </tr>

    </tbody>
   
  </table>

 </p>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104687""></a>
  <div class="note">
   <strong class="user">frak at gingerhq dot net</strong>
   <a href="#104687" class="date">30-Jun-2011 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using stored procedures and mysql_error() returns "PROCEDURE storedProcedureName can't return a result set in the given context", you need to pass an additional flag (CLIENT_MULTI_RESULTS) to mysql_connect() as such:<br />
mysql_connect($hostname, $username, $password, true, 131072);<br />
<br />
Some other sources say that you should use 65536. 65536 is actually the flag to allow multiple statements in a single mysql_query(), and is a security issue. The reason it allows you to receive results from stored procedures is because it implies 131072. To be safe, use 131072 over 65536.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96193""></a>
  <div class="note">
   <strong class="user">pcdinh at phpvietnam dot net</strong>
   <a href="#96193" class="date">13-Feb-2010 12:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Other client flags extracted from MySQL client source<br />
<br />
#define CLIENT_LONG_PASSWORD 1 /* new more secure passwords */<br />
#define CLIENT_FOUND_ROWS 2 /* Found instead of affected rows */<br />
#define CLIENT_LONG_FLAG 4 /* Get all column flags */<br />
#define CLIENT_CONNECT_WITH_DB 8 /* One can specify db on connect */<br />
#define CLIENT_NO_SCHEMA 16 /* Don't allow database.table.column */<br />
#define CLIENT_COMPRESS 32 /* Can use compression protocol */<br />
#define CLIENT_ODBC 64 /* Odbc client */<br />
#define CLIENT_LOCAL_FILES 128 /* Can use LOAD DATA LOCAL */<br />
#define CLIENT_IGNORE_SPACE 256 /* Ignore spaces before '(' */<br />
#define CLIENT_PROTOCOL_41 512 /* New 4.1 protocol */<br />
#define CLIENT_INTERACTIVE 1024 /* This is an interactive client */<br />
#define CLIENT_SSL 2048 /* Switch to SSL after handshake */<br />
#define CLIENT_IGNORE_SIGPIPE 4096 /* IGNORE sigpipes */<br />
#define CLIENT_TRANSACTIONS 8192 /* Client knows about transactions */<br />
#define CLIENT_RESERVED 16384 /* Old flag for 4.1 protocol */<br />
#define CLIENT_SECURE_CONNECTION 32768 /* New 4.1 authentication */<br />
#define CLIENT_MULTI_STATEMENTS 65536 /* Enable/disable multi-stmt support */<br />
#define CLIENT_MULTI_RESULTS 131072 /* Enable/disable multi-results */<br />
#define CLIENT_REMEMBER_OPTIONS (((ulong) 1) &lt;&lt; 31)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86644""></a>
  <div class="note">
   <strong class="user">Contact at LinuxIntro dot com</strong>
   <a href="#86644" class="date">27-Oct-2008 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you connect and expect to use a stored procedure,you must pass a special flag to MySQL via the connect command, otherwise you will not get the results returned, and it will result in this error:<br />
PROCEDURE AlexGrim.GetStats_ForumCategories can't return a result set in the given context<br />
<br />
To fix this, change you connection string, adding ",false,65536" as the last 2 fields:<br />
$this-&gt;con = mysql_connect($this-&gt;h,$this-&gt;u,$this-&gt;p,false,65536);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
