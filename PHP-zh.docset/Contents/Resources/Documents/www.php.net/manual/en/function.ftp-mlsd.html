<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>返回指定目录中的文件列表</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ftp-mkdir.html">? ftp_mkdir</a></li>
      <li style="float: right;"><a href="function.ftp-nb-continue.html">ftp_nb_continue ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ftp.html">FTP 函数</a></li>
    <li>返回指定目录中的文件列表</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ftp-mlsd" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ftp_mlsd</h1>
  <p class="verinfo">(PHP 7 &gt;= 7.2.0, PHP 8)</p><p class="refpurpose"><span class="refname">ftp_mlsd</span> &mdash; <span class="dc-title">返回指定目录中的文件列表</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.ftp-mlsd-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>ftp_mlsd</strong></span>(<span class="methodparam"><span class="type"><a href="class.ftp-connection.html" class="type FTP\Connection">FTP\Connection</a></span> <code class="parameter">$ftp</code></span>, <span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$directory</code></span>): <span class="type"><span class="type"><a href="language.types.array.html" class="type array">array</a></span>|<span class="type"><a href="language.types.value.html" class="type false">false</a></span></span></div>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.ftp-mlsd-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">ftp</code></dt>
     <dd>
       <p class="para"><span class="classname"><a href="class.ftp-connection.html" class="classname">FTP\Connection</a></span> 实例。</p>
     </dd>
    
    
     <dt><code class="parameter">directory</code></dt>
     <dd>
      <p class="para">
       要列出的目录。
      </p>
     </dd>
    
   </dl>
  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.ftp-mlsd-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   如果成功，则返回一个由目录中所有文件信息（数组）所组成的数组；如果错误，则返回 <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.ftp-mlsd-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
 <td>8.1.0</td>
 <td>
  现在 <code class="parameter">ftp</code> 参数接受 <span class="classname"><a href="class.ftp-connection.html" class="classname">FTP\Connection</a></span>
  实例，之前接受 <a href="language.types.resource.html" class="link">resource</a>。
 </td>
</tr>

    </tbody>
   
  </table>

 </div>

 
 <div class="refsect1 examples" id="refsect1-function.ftp-mlsd-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="example-4376">
    <p><strong>Example #1 <span class="function"><strong>ftp_mlsd()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">// 简单基本连接<br /></span><span style="color: #0000BB">$ftp </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 使用用户名和密码进行登录<br /></span><span style="color: #0000BB">$login_result </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp</span><span style="color: #007700">, </span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">, </span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 获取当前目录的内容<br /></span><span style="color: #0000BB">$contents </span><span style="color: #007700">= </span><span style="color: #0000BB">ftp_mlsd</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp</span><span style="color: #007700">, </span><span style="color: #DD0000">"."</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 输出 $contents<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$contents</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>  
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">array(5) {
  [0]=&gt;
  array(8) {
    [&quot;name&quot;]=&gt;
    string(1) &quot;.&quot;
    [&quot;modify&quot;]=&gt;
    string(14) &quot;20171212154511&quot;
    [&quot;perm&quot;]=&gt;
    string(7) &quot;flcdmpe&quot;
    [&quot;type&quot;]=&gt;
    string(4) &quot;cdir&quot;
    [&quot;unique&quot;]=&gt;
    string(11) &quot;811U5740002&quot;
    [&quot;UNIX.group&quot;]=&gt;
    string(2) &quot;33&quot;
    [&quot;UNIX.mode&quot;]=&gt;
    string(4) &quot;0755&quot;
    [&quot;UNIX.owner&quot;]=&gt;
    string(2) &quot;33&quot;
  }
  [1]=&gt;
  array(8) {
    [&quot;name&quot;]=&gt;
    string(2) &quot;..&quot;
    [&quot;modify&quot;]=&gt;
    string(14) &quot;20171212154511&quot;
    [&quot;perm&quot;]=&gt;
    string(7) &quot;flcdmpe&quot;
    [&quot;type&quot;]=&gt;
    string(4) &quot;pdir&quot;
    [&quot;unique&quot;]=&gt;
    string(11) &quot;811U5740002&quot;
    [&quot;UNIX.group&quot;]=&gt;
    string(2) &quot;33&quot;
    [&quot;UNIX.mode&quot;]=&gt;
    string(4) &quot;0755&quot;
    [&quot;UNIX.owner&quot;]=&gt;
    string(2) &quot;33&quot;
  }
  [2]=&gt;
  array(8) {
    [&quot;name&quot;]=&gt;
    string(11) &quot;public_html&quot;
    [&quot;modify&quot;]=&gt;
    string(14) &quot;20171211171525&quot;
    [&quot;perm&quot;]=&gt;
    string(7) &quot;flcdmpe&quot;
    [&quot;type&quot;]=&gt;
    string(3) &quot;dir&quot;
    [&quot;unique&quot;]=&gt;
    string(11) &quot;811U5740525&quot;
    [&quot;UNIX.group&quot;]=&gt;
    string(2) &quot;33&quot;
    [&quot;UNIX.mode&quot;]=&gt;
    string(4) &quot;0755&quot;
    [&quot;UNIX.owner&quot;]=&gt;
    string(2) &quot;33&quot;
  }
  [3]=&gt;
  array(8) {
    [&quot;name&quot;]=&gt;
    string(10) &quot;public_ftp&quot;
    [&quot;modify&quot;]=&gt;
    string(14) &quot;20171211174536&quot;
    [&quot;perm&quot;]=&gt;
    string(7) &quot;flcdmpe&quot;
    [&quot;type&quot;]=&gt;
    string(3) &quot;dir&quot;
    [&quot;unique&quot;]=&gt;
    string(11) &quot;811U57405EE&quot;
    [&quot;UNIX.group&quot;]=&gt;
    string(2) &quot;33&quot;
    [&quot;UNIX.mode&quot;]=&gt;
    string(4) &quot;0755&quot;
    [&quot;UNIX.owner&quot;]=&gt;
    string(2) &quot;33&quot;
  }
  [4]=&gt;
  array(8) {
    [&quot;name&quot;]=&gt;
    string(3) &quot;www&quot;
    [&quot;modify&quot;]=&gt;
    string(14) &quot;www&quot;
    [&quot;perm&quot;]=&gt;
    string(7) &quot;flcdmpe&quot;
    [&quot;type&quot;]=&gt;
    string(3) &quot;dir&quot;
    [&quot;unique&quot;]=&gt;
    string(11) &quot;811U5740780&quot;
    [&quot;UNIX.group&quot;]=&gt;
    string(2) &quot;33&quot;
    [&quot;UNIX.mode&quot;]=&gt;
    string(4) &quot;0755&quot;
    [&quot;UNIX.owner&quot;]=&gt;
    string(2) &quot;33&quot;
  }
}</pre>
</div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.ftp-mlsd-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="function.ftp-rawlist.html" class="function" rel="rdfs-seeAlso">ftp_rawlist()</a> - 返回指定目录下文件的详细列表</span></li>
    <li><span class="function"><a href="function.ftp-nlist.html" class="function" rel="rdfs-seeAlso">ftp_nlist()</a> - 返回给定目录的文件列表</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128376""></a>
  <div class="note">
   <strong class="user">andy at sarver dot pro</strong>
   <a href="#128376" class="date">06-Apr-2023 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have yet to find a resolution to this; but I notice the ftp_mlsd command is limited in the number of files it will grab at once. For me it ranged between 7,500 and 8,500 files. Seems to me there is some max duration it will query for and what you get is a function of how fast the files can be enumerated.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="128156""></a>
  <div class="note">
   <strong class="user">Frank Glck</strong>
   <a href="#128156" class="date">27-Jan-2023 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sometimes it is necessary to set:<br />
<br />
ftp_set_option($this-&gt;connection_id, FTP_USEPASVADDRESS, false)<br />
<br />
before you set:<br />
ftp_pasv($this-&gt;connection_id, $state)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125751""></a>
  <div class="note">
   <strong class="user">fantastory dot net at gmail dot com</strong>
   <a href="#125751" class="date">31-Jan-2021 06:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When running from script the function may require ftp_pasv, for swithching server to pasive mode.<br />
<br />
If you are behind firewall ftp_mlsd will return FALSE otherwise.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
