<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>调用回调函数，并把一个数组参数作为回调函数的参数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.call-user-func.html">? call_user_func</a></li>
      <li style="float: right;"><a href="function.create-function.html">create_function ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.funchand.html">函数处理 函数</a></li>
    <li>调用回调函数，并把一个数组参数作为回调函数的参数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.call-user-func-array" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">call_user_func_array</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">call_user_func_array</span> &mdash; <span class="dc-title">调用回调函数，并把一个数组参数作为回调函数的参数</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.call-user-func-array-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>call_user_func_array</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>, <span class="methodparam"><span class="type"><a href="language.types.array.html" class="type array">array</a></span> <code class="parameter">$args</code></span>): <span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span></div>

  <p class="para rdfs-comment">
   把第一个参数作为回调函数（<code class="parameter">callback</code>）调用，把参数数组作（<code class="parameter">args</code>）为回调函数的的参数传入。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.call-user-func-array-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">callback</code></dt>
     <dd>
      <p class="para">
       被调用的回调函数。
      </p>
     </dd>
    
    
     <dt><code class="parameter">args</code></dt>
     <dd>
      <p class="para">
       要被传入回调函数的数组。
      </p>
      <p class="para">
       如果 <code class="parameter">args</code> 的 key 都是数字，则会忽略 key，并按顺序将每个元素作为位置参数传递给 <code class="parameter">callback</code> 。
      </p>
      <p class="para">
       如果 <code class="parameter">args</code> 的任一 key 是字符串，则这些元素将作为命名参数传递给 <code class="parameter">callback</code>，名称由 key 指定。
      </p>
      <p class="para">
       在 <code class="parameter">args</code> 中，如果数字 key 在 字符串 key 之后出现，或者字符串 key
       与 <code class="parameter">callback</code> 的任何参数名称不匹配，将会导致 fatal error。
      </p>
     </dd>
    
   </dl>
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.call-user-func-array-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回回调函数的结果。如果出错的话就返回 <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> 。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.call-user-func-array-changelog">
  <h3 class="title">更新日志</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>版本</th>
       <th>说明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>8.0.0</td>
       <td>
        <code class="parameter">args</code> 键现在将被解释为参数名称，而不是被默默地忽略。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.call-user-func-array-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="example-5185">
    <p><strong>Example #1 <span class="function"><strong>call_user_func_array()</strong></span>例子</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foobar</span><span style="color: #007700">(</span><span style="color: #0000BB">$arg</span><span style="color: #007700">, </span><span style="color: #0000BB">$arg2</span><span style="color: #007700">) {<br />    echo </span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">, </span><span style="color: #DD0000">" got </span><span style="color: #0000BB">$arg</span><span style="color: #DD0000"> and </span><span style="color: #0000BB">$arg2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br />class </span><span style="color: #0000BB">foo </span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">bar</span><span style="color: #007700">(</span><span style="color: #0000BB">$arg</span><span style="color: #007700">, </span><span style="color: #0000BB">$arg2</span><span style="color: #007700">) {<br />        echo </span><span style="color: #0000BB">__METHOD__</span><span style="color: #007700">, </span><span style="color: #DD0000">" got </span><span style="color: #0000BB">$arg</span><span style="color: #DD0000"> and </span><span style="color: #0000BB">$arg2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br /><br /></span><span style="color: #FF8000">// Call the foobar() function with 2 arguments<br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">"foobar"</span><span style="color: #007700">, array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">, </span><span style="color: #DD0000">"two"</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Call the $foo-&gt;bar() method with 2 arguments<br /></span><span style="color: #0000BB">$foo </span><span style="color: #007700">= new </span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">, </span><span style="color: #DD0000">"bar"</span><span style="color: #007700">), array(</span><span style="color: #DD0000">"three"</span><span style="color: #007700">, </span><span style="color: #DD0000">"four"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">foobar got one and two
foo::bar got three and four</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-5186">
    <p><strong>Example #2 <span class="function"><strong>call_user_func_array()</strong></span>使用命名空间的情况</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">namespace </span><span style="color: #0000BB">Foobar</span><span style="color: #007700">;<br /><br />class </span><span style="color: #0000BB">Foo </span><span style="color: #007700">{<br />    static public function </span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">) {<br />        print </span><span style="color: #DD0000">"Hello </span><span style="color: #007700">{</span><span style="color: #0000BB">$name</span><span style="color: #007700">}</span><span style="color: #DD0000">!\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #0000BB">__NAMESPACE__ </span><span style="color: #007700">.</span><span style="color: #DD0000">'\Foo::test'</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'Hannes'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(array(</span><span style="color: #0000BB">__NAMESPACE__ </span><span style="color: #007700">.</span><span style="color: #DD0000">'\Foo'</span><span style="color: #007700">, </span><span style="color: #DD0000">'test'</span><span style="color: #007700">), array(</span><span style="color: #DD0000">'Philip'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Hello Hannes!
Hello Philip!</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-5187">
    <p><strong>Example #3 把完整的函数作为回调传入<span class="function"><strong>call_user_func_array()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$func </span><span style="color: #007700">= function(</span><span style="color: #0000BB">$arg1</span><span style="color: #007700">, </span><span style="color: #0000BB">$arg2</span><span style="color: #007700">) {<br />    return </span><span style="color: #0000BB">$arg1 </span><span style="color: #007700">* </span><span style="color: #0000BB">$arg2</span><span style="color: #007700">;<br />};<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$func</span><span style="color: #007700">, array(</span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">int(8)</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-5188">
    <p><strong>Example #4 传引用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function </span><span style="color: #0000BB">mega</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">){<br />    </span><span style="color: #0000BB">$a </span><span style="color: #007700">= </span><span style="color: #0000BB">55</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"function mega \$a=</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">$bar </span><span style="color: #007700">= </span><span style="color: #0000BB">77</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">'mega'</span><span style="color: #007700">,array(&amp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">));<br />echo </span><span style="color: #DD0000">"global \$bar=</span><span style="color: #0000BB">$bar</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>以上示例会输出：</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">function mega $a=55
global $bar=55</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-5189">
    <p><strong>Example #5 <span class="function"><strong>call_user_func_array()</strong></span> 使用命名参数</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">foobar</span><span style="color: #007700">(</span><span style="color: #0000BB">$first</span><span style="color: #007700">, </span><span style="color: #0000BB">$second</span><span style="color: #007700">) {<br />    echo </span><span style="color: #0000BB">__FUNCTION__</span><span style="color: #007700">, </span><span style="color: #DD0000">" got </span><span style="color: #0000BB">$first</span><span style="color: #DD0000"> and </span><span style="color: #0000BB">$second</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">// Call the foobar() function with named arguments in non-positional order<br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">"foobar"</span><span style="color: #007700">, array(</span><span style="color: #DD0000">"second" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"two"</span><span style="color: #007700">, </span><span style="color: #DD0000">"first" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"one"</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Call the foobar() function with one named argument<br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">"foobar"</span><span style="color: #007700">, array(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">, </span><span style="color: #DD0000">"second" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"bar"</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">// Fatal error: Cannot use positional argument after named argument<br /></span><span style="color: #0000BB">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">"foobar"</span><span style="color: #007700">, array(</span><span style="color: #DD0000">"first" </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">"one"</span><span style="color: #007700">, </span><span style="color: #DD0000">"bar"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">foobar got one and two
foobar got foo and bar

Fatal error: Uncaught Error: Cannot use positional argument after named argument</pre>
</div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.call-user-func-array-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">在函数中注册有多个回调内容时(如使用
<span class="function"><a href="function.call-user-func.html" class="function">call_user_func()</a></span> 与 <span class="function"><strong>call_user_func_array()</strong></span>)，如在前一个回调中有未捕获的异常，其后的将不再被调用。</p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.call-user-func-array-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="function.call-user-func.html" class="function" rel="rdfs-seeAlso">call_user_func()</a> - 把第一个参数作为回调函数调用</span></li>
    <li><span class="methodname"><a href="reflectionfunction.invokeargs.html" class="methodname" rel="rdfs-seeAlso">ReflectionFunction::invokeArgs()</a> - Invokes function args</span></li>
    <li><span class="methodname"><a href="reflectionmethod.invokeargs.html" class="methodname" rel="rdfs-seeAlso">ReflectionMethod::invokeArgs()</a> - 带参数执行</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128877""></a>
  <div class="note">
   <strong class="user">alangiderick at gmail dot com</strong>
   <a href="#128877" class="date">10-Sep-2023 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's quite interesting reading the notes in this page especially the one that mentions the difference between argument unpacking being significantly faster than calling `call_user_func_array()` directly by admin at torntech dot com.<br />
<br />
This is true for PHP 5 but as from PHP 7.0+, there is no significant difference in the run-time between these two mechanisms of operation. The time taken is almost, if not the same for both operations, so this is already something that tells me that the PHP run-time environment has changed quite a lot (for the PHP 7 rewrite).<br />
<br />
I used the example from admin at torntech dot com to check this hypothesis.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125953""></a>
  <div class="note">
   <strong class="user">sebastian dot rapetti at tim dot it</strong>
   <a href="#125953" class="date">23-Mar-2021 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using PHP 8, call_user_func_array call callback function using named arguments if an array with keys is passed to $args parameter, if the array used has only values, arguments are passed positionally.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">test</span><span class="keyword">(</span><span class="default">string $param1</span><span class="keyword">, </span><span class="default">string $param2</span><span class="keyword">): </span><span class="default">void<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$param1</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$param2</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$args </span><span class="keyword">= [</span><span class="string">'hello'</span><span class="keyword">, </span><span class="string">'world'</span><span class="keyword">];<br />
</span><span class="comment">//hello world<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
<br />
</span><span class="default">$args </span><span class="keyword">= [</span><span class="string">'param2' </span><span class="keyword">=&gt; </span><span class="string">'world'</span><span class="keyword">, </span><span class="string">'param1' </span><span class="keyword">=&gt; </span><span class="string">'hello'</span><span class="keyword">];<br />
</span><span class="comment">//hello world<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
<br />
</span><span class="default">$args </span><span class="keyword">= [</span><span class="string">'unknown_param' </span><span class="keyword">=&gt; </span><span class="string">'hello'</span><span class="keyword">, </span><span class="string">'param2' </span><span class="keyword">=&gt; </span><span class="string">'world'</span><span class="keyword">];<br />
</span><span class="comment">//Fatal error: Uncaught Error: Unknown named parameter $unknown_param<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117655""></a>
  <div class="note">
   <strong class="user">admin at torntech dot com</strong>
   <a href="#117655" class="date">15-Jul-2015 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5.6 you can utilize argument unpacking as an alternative to call_user_func_array, and is often 3 to 4 times faster.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">foo </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$func </span><span class="keyword">= </span><span class="string">'foo'</span><span class="keyword">;<br />
</span><span class="default">$values </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">); <br />
</span><span class="comment">//returns 3<br />
<br />
</span><span class="default">$func</span><span class="keyword">(...</span><span class="default">$values</span><span class="keyword">);<br />
</span><span class="comment">//returns 3<br />
</span><span class="default">?&gt;<br />
</span><br />
Benchmarks from https://gist.github.com/nikic/6390366<br />
cufa&nbsp;&nbsp; with 0 args took 0.43453288078308<br />
switch with 0 args took 0.24134302139282<br />
unpack with 0 args took 0.12418699264526<br />
cufa&nbsp;&nbsp; with 5 args took 0.73408579826355<br />
switch with 5 args took 0.49595499038696<br />
unpack with 5 args took 0.18640494346619<br />
cufa&nbsp;&nbsp; with 100 args took 5.0327250957489<br />
switch with 100 args took 5.291127204895<br />
unpack with 100 args took 1.2362589836121</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47578""></a>
  <div class="note">
   <strong class="user">james at gogo dot co dot nz</strong>
   <a href="#47578" class="date">21-Nov-2004 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware the call_user_func_array always returns by value, as demonstrated here...<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">foo</span><span class="keyword">(&amp;</span><span class="default">$a</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">=&amp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'foo'</span><span class="keyword">, array(&amp;</span><span class="default">$b</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$b </span><span class="keyword">. </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$c</span><span class="keyword">;&nbsp; &nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
outputs "2 3", rather than the expected "3 3".<br />
<br />
Here is a function you can use in place of call_user_func_array which returns a reference to the result of the function call. <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">ref_call_user_func_array</span><span class="keyword">(</span><span class="default">$callable</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$callable</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $callable is the name of a function<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$call </span><span class="keyword">= </span><span class="default">$callable</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$callable</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $callable is an object and a method name<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$call </span><span class="keyword">= </span><span class="string">"\$callable[0]-&gt;</span><span class="keyword">{</span><span class="default">$callable</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]}</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $callable is a class name and a static method<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$call </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">{</span><span class="default">$callable</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">::</span><span class="keyword">{</span><span class="default">$callable</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]}</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Note because the keys in $args might be strings<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // we do this in a slightly round about way.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$argumentString </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$argumentKeys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$argumentKeys </span><span class="keyword">as </span><span class="default">$argK</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$argumentString</span><span class="keyword">[] = </span><span class="string">"\$args[</span><span class="default">$argumentKeys</span><span class="keyword">[</span><span class="default">$argK</span><span class="keyword">]</span><span class="string">]"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$argumentString </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$argumentString</span><span class="keyword">, </span><span class="string">', '</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Note also that eval doesn't return references, so we <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // work around it in this way...&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">eval(</span><span class="string">"\$result =&amp; </span><span class="keyword">{</span><span class="default">$call</span><span class="keyword">}</span><span class="string">(</span><span class="keyword">{</span><span class="default">$argumentString</span><span class="keyword">}</span><span class="string">);"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
