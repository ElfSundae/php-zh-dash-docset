<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>查询关于网络实体的信息树</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.snmpwalk.html">? snmpwalk</a></li>
      <li style="float: right;"><a href="class.snmp.html">SNMP ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.snmp.html">SNMP 函数</a></li>
    <li>查询关于网络实体的信息树</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.snmpwalkoid" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">snmpwalkoid</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">snmpwalkoid</span> &mdash; <span class="dc-title">查询关于网络实体的信息树</span></p>

 </div>
 <div class="refsect1 unknown-unknown-unknown-unknown-unknown-unknown-seealsu" id="refsect1-function.snmpwalkoid-unknown-unknown-unknown-unknown-unknown-unknown-seealsu">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>snmpwalkoid</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$hostname</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$community</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$object_id</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$timeout</code><span class="initializer"> = ?</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">int</span> <code class="parameter">$retries</code><span class="initializer"> = ?</span></span><br>): <span class="type">array</span></div>


  <p class="para rdfs-comment">
   返回一个包含对象 id 及它们各自对象值的关联数组，这些对象以 
   <code class="parameter">object_id</code> 作为根，错误则返回 <strong><code>false</code></strong>。
  </p>

  <p class="para">
   <span class="function"><strong>snmpwalkoid()</strong></span> 用于从
   <code class="parameter">hostname</code> 所指定的 SNMP 
   代理那里读取所有对象 id 及它们各自的值。<code class="parameter">community</code>
   指定对于该代理有读权限的域。一个为 <strong><code>null</code></strong>
   的 <code class="parameter">object_id</code> 将被看作 
   SNMP 对象树的根，而在此树下的所有对象将作为一个数组被返回。如果指定了
   <code class="parameter">object_id</code>，则返回所有在
   <code class="parameter">object_id</code> 下的 SNMP 对象。
  </p>

  <p class="para">
   <span class="function"><strong>snmpwalkoid()</strong></span> 和
   <span class="function"><a href="function.snmpwalk.html" class="function">snmpwalk()</a></span> 的同时存在出于历史原因。提供两个函数是为了向后兼容。
   <div class="informalexample">
    <div class="example-contents"> 
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a </span><span style="color: #007700">= </span><span style="color: #0000BB">snmpwalkoid</span><span style="color: #007700">(</span><span style="color: #DD0000">"127.0.0.1"</span><span style="color: #007700">, </span><span style="color: #DD0000">"public"</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">); <br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p> 

  <p class="para">
   上边的函数调用将从运行于本机的 SNMP 
   代理那里返回所有的 SNMP 对象。可使用循环遍历这些值。
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">for (</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">); </span><span style="color: #0000BB">$i </span><span style="color: #007700">= </span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">); </span><span style="color: #0000BB">next</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">: </span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]</span><span style="color: #DD0000">&lt;br /&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="116209""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#116209" class="date">21-Nov-2014 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
make sure you install "snmp-mibs-downloader" in debian.&nbsp; <br />
<br />
apt-get install snmp-mibs-downloader<br />
<br />
you my also need to edit your /etc/apt/sources.list<br />
<br />
deb <a href="http://ftp.us.debian.org/debian/ wheezy main contrib non-free" rel="nofollow" target="_blank">http://ftp.us.debian.org/debian/ wheezy main contrib non-free</a><br />
deb-src <a href="http://ftp.us.debian.org/debian/ wheezy main contrib non-free" rel="nofollow" target="_blank">http://ftp.us.debian.org/debian/ wheezy main contrib non-free</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53832""></a>
  <div class="note">
   <strong class="user">thammer at rtccom dot com</strong>
   <a href="#53832" class="date">14-Jun-2005 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The above note mentions that the MAC addresses come back converted to integers or something funky like that. Not sure why that is happening but I fixed that with a wrapper function.<br />
<br />
function PadMAC($mac) {<br />
&nbsp;&nbsp;&nbsp; $mac_arr = explode(':',$mac);<br />
&nbsp;&nbsp;&nbsp; foreach($mac_arr as $atom) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $atom = trim($atom);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newarr[] = sprintf("%02s",$atom);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $newmac = implode(':',$newarr);<br />
&nbsp;&nbsp;&nbsp; return $newmac;<br />
}<br />
<br />
Maybe that will help somebody with that issue. I know I personally use the heck out of these user contributed notes</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46538""></a>
  <div class="note">
   <strong class="user">gene_wood at example dot com</strong>
   <a href="#46538" class="date">14-Oct-2004 09:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Looks like timeout is in MICRO seconds.<br />
1,000,000 &amp;micros = 1 s</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="10489""></a>
  <div class="note">
   <strong class="user">jasper at pointless dot net</strong>
   <a href="#10489" class="date">06-Jan-2001 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
N.B. it's possible for snmpwalkoid to lose data - the "rmon.matrix.matrixSDTable" table for example uses binary mac addresses as part of the index, these get converted to ascii, and by the time they get to php they can be non-unique - so some entrys in the table get lost...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
