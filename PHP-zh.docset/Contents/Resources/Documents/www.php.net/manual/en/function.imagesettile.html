<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>设置要填充的平铺图像</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.imagesetthickness.html">? imagesetthickness</a></li>
      <li style="float: right;"><a href="function.imagestring.html">imagestring ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.image.html">GD 和图像处理 函数</a></li>
    <li>设置要填充的平铺图像</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.imagesettile" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imagesettile</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">imagesettile</span> &mdash; <span class="dc-title">设置要填充的平铺图像</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imagesettile-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>imagesettile</strong></span>(<span class="methodparam"><span class="type"><a href="class.gdimage.html" class="type GdImage">GdImage</a></span> <code class="parameter">$image</code></span>, <span class="methodparam"><span class="type"><a href="class.gdimage.html" class="type GdImage">GdImage</a></span> <code class="parameter">$tile</code></span>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>

  <p class="para rdfs-comment">
   当使用特殊颜色 <strong><code><a href="image.constants.html#constant.img-color-tiled">IMG_COLOR_TILED</a></code></strong>时，<span class="function"><strong>imagesettile()</strong></span>
   设置所有区域填充函数（比如 <span class="function"><a href="function.imagefill.html" class="function">imagefill()</a></span>
   和 <span class="function"><a href="function.imagefilledpolygon.html" class="function">imagefilledpolygon()</a></span>）要使用的平铺图像。
  </p>
  <p class="para">
   平铺是指使用重复模式填充区域的图像。<em>任何</em> GD 图像都可以用于平铺，并且通过使用
   <span class="function"><a href="function.imagecolortransparent.html" class="function">imagecolortransparent()</a></span> 来设定平铺图像的透明颜色索引，可以创建允许底层区域的某些部分透过的平铺。
  </p>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
    平铺完成后不需要采取什么特殊动作，但如果要销毁平铺图像（或让 PHP 销毁），不能使用
    <strong><code><a href="image.constants.html#constant.img-color-tiled">IMG_COLOR_TILED</a></code></strong> 颜色，除非设置了新的平铺图像。
   </p>
  </div>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imagesettile-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    <dt>
<code class="parameter">image</code></dt><dd><p class="para">由图象创建函数(例如<span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>)返回的 
<span class="classname"><a href="class.gdimage.html" class="classname">GdImage</a></span> 对象。</p></dd>
    
     <dt><code class="parameter">tile</code></dt>
     <dd>
      <p class="para">
       用作平铺的图像对象。
      </p>
     </dd>
    
   </dl>
  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imagesettile-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong>， 或者在失败时返回 <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong>。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.imagesettile-changelog">
  <h3 class="title">更新日志</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>版本</th>
      <th>说明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>8.0.0</td>
      <td>
       <code class="parameter">image</code> 和 <code class="parameter">tile</code> 现在需要
       <span class="classname"><a href="class.gdimage.html" class="classname">GdImage</a></span> 实例；之前需要 <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span>。
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.imagesettile-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   <div class="example" id="example-2789">
    <p><strong>Example #1 <span class="function"><strong>imagesettile()</strong></span> 示例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Load an external image<br /></span><span style="color: #0000BB">$zend </span><span style="color: #007700">= </span><span style="color: #0000BB">imagecreatefromgif</span><span style="color: #007700">(</span><span style="color: #DD0000">'./zend.gif'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Create a 200x200 image<br /></span><span style="color: #0000BB">$im </span><span style="color: #007700">= </span><span style="color: #0000BB">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">, </span><span style="color: #0000BB">200</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Set the tile<br /></span><span style="color: #0000BB">imagesettile</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">, </span><span style="color: #0000BB">$zend</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Make the image repeat<br /></span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">, </span><span style="color: #0000BB">199</span><span style="color: #007700">, </span><span style="color: #0000BB">199</span><span style="color: #007700">, </span><span style="color: #0000BB">IMG_COLOR_TILED</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Output image to the browser<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type: image/png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">imagepng</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$zend</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>以上示例的输出类似于：</p></div>
    <div class="mediaobject">
     
     <div class="imageobject">
      <img src="images/21009b70229598c6a80eef8b45bf282b-imagesettile.png" alt="示例输出：imagesettile()" width="200" height="200" />
     </div>
    </div>
   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="58539""></a>
  <div class="note">
   <strong class="user">onion at ooer dot com</strong>
   <a href="#58539" class="date">07-Nov-2005 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using a tile image that has some form of transparency you'll need to make sure your destination image is set to use alpha blending. By default it will be, but if for any reason you've changed it you'll need to do:<br />
<br />
imagealphablending($image,true);<br />
<br />
before any operation using IMG_COLOR_TILED.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42855""></a>
  <div class="note">
   <strong class="user">aquilo at xtram dot net</strong>
   <a href="#42855" class="date">01-Jun-2004 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is very little information about this function so I thought I'd add a few notes I found while trying to get this <br />
<br />
working.<br />
<br />
First make sure your version of PHP is above 4.3.2 I spent an hour searching goggles 13000+ mirrors of this same page and <br />
<br />
finally found the info I needed at AltaVista, there is a bug in PHP 4.3.2 that makes this none functional.<br />
<br />
if your creating the base image you need to create it with imageCreateTrueColor() if your using a PNG with transparency, I <br />
<br />
found even nullifying the PNG's transparency with GD doesn't work. the tiling PNG has to be created without transparency to work with imageCreate(). but from what I've seen imageCreateFromXXX() can use transparent and nonetransparent PNG's.<br />
<br />
here is an example.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $diagramWidth </span><span class="keyword">= </span><span class="default">300</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diagramHeight </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">imageCreateTrueColor </span><span class="keyword">(</span><span class="default">$diagramWidth</span><span class="keyword">, </span><span class="default">$diagramHeight</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$imagebg </span><span class="keyword">= </span><span class="default">imageCreateFromPNG </span><span class="keyword">(</span><span class="string">'tile.png'</span><span class="keyword">); </span><span class="comment">// transparent PNG<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageSetTile </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$imagebg</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageFilledRectangle </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$diagramWidth</span><span class="keyword">, </span><span class="default">$diagramHeight</span><span class="keyword">, </span><span class="default">IMG_COLOR_TILED</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textcolor1 </span><span class="keyword">= </span><span class="default">imageColorAllocate </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textcolor2 </span><span class="keyword">= </span><span class="default">imageColorAllocate </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageString </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">, </span><span class="string">'Transparent PNG Tile Test...'</span><span class="keyword">, </span><span class="default">$textcolor1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageString </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">,&nbsp; </span><span class="default">9</span><span class="keyword">, </span><span class="default">19</span><span class="keyword">, </span><span class="string">'Transparent PNG Tile Test...'</span><span class="keyword">, </span><span class="default">$textcolor2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagePNG </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy </span><span class="keyword">(</span><span class="default">$imagebg</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
hope this helps someone else!<br />
Aquilo</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
