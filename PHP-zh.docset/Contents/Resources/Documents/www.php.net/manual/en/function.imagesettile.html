<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>设定用于填充的贴图</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.imagesetthickness.html">? imagesetthickness</a></li>
      <li style="float: right;"><a href="function.imagestring.html">imagestring ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.image.html">GD 和图像处理 函数</a></li>
    <li>设定用于填充的贴图</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.imagesettile" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">imagesettile</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">imagesettile</span> &mdash; <span class="dc-title">设定用于填充的贴图</span></p>

   </div>
   <div class="refsect1 unknown-notet" id="refsect1-function.imagesettile-unknown-notet">
    <h3 class="title">说明</h3>
    <div class="methodsynopsis dc-description">
     <span class="methodname"><strong>imagesettile</strong></span>
      ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$image</code></span>
     , <span class="methodparam"><span class="type">resource</span> <code class="parameter">$tile</code></span>
     ) : <span class="type">bool</span></div>

    <p class="para rdfs-comment">
     <span class="function"><strong>imagesettile()</strong></span> 设定所有区域填充函数（例如
     <span class="function"><a href="function.imagefill.html" class="function">imagefill()</a></span>
     和 <span class="function"><a href="function.imagefilledpolygon.html" class="function">imagefilledpolygon()</a></span>）在使用特殊颜色
     <em>IMG_COLOR_TILED</em> 填充时所使用的贴图。
    </p>
    <p class="para">
     贴图是指用重复的样式来填充一块区域所使用的图像。<em class="emphasis">任何</em>
     GD 图像都能用作贴图，并且通过使用 <span class="function"><a href="function.imagecolortransparent.html" class="function">imagecolortransparent()</a></span>
     来设定贴图的透明色，贴图可以使底层的特定区域透上来。
    </p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      使用完贴图后不需要采取什么特殊动作。但如果销毁了贴图，在设定一个新的贴图之前不能使用
      <em>IMG_COLOR_TILED</em>！
     </p>
    </p></blockquote>
   </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="58539""></a>
  <div class="note">
   <strong class="user">onion at ooer dot com</strong>
   <a href="#58539" class="date">07-Nov-2005 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using a tile image that has some form of transparency you'll need to make sure your destination image is set to use alpha blending. By default it will be, but if for any reason you've changed it you'll need to do:<br />
<br />
imagealphablending($image,true);<br />
<br />
before any operation using IMG_COLOR_TILED.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42855""></a>
  <div class="note">
   <strong class="user">aquilo at xtram dot net</strong>
   <a href="#42855" class="date">01-Jun-2004 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is very little information about this function so I thought I'd add a few notes I found while trying to get this <br />
<br />
working.<br />
<br />
First make sure your version of PHP is above 4.3.2 I spent an hour searching goggles 13000+ mirrors of this same page and <br />
<br />
finally found the info I needed at AltaVista, there is a bug in PHP 4.3.2 that makes this none functional.<br />
<br />
if your creating the base image you need to create it with imageCreateTrueColor() if your using a PNG with transparency, I <br />
<br />
found even nullifying the PNG's transparency with GD doesn't work. the tiling PNG has to be created without transparency to work with imageCreate(). but from what I've seen imageCreateFromXXX() can use transparent and nonetransparent PNG's.<br />
<br />
here is an example.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $diagramWidth </span><span class="keyword">= </span><span class="default">300</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diagramHeight </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">imageCreateTrueColor </span><span class="keyword">(</span><span class="default">$diagramWidth</span><span class="keyword">, </span><span class="default">$diagramHeight</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$imagebg </span><span class="keyword">= </span><span class="default">imageCreateFromPNG </span><span class="keyword">(</span><span class="string">'tile.png'</span><span class="keyword">); </span><span class="comment">// transparent PNG<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageSetTile </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$imagebg</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageFilledRectangle </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$diagramWidth</span><span class="keyword">, </span><span class="default">$diagramHeight</span><span class="keyword">, </span><span class="default">IMG_COLOR_TILED</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textcolor1 </span><span class="keyword">= </span><span class="default">imageColorAllocate </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textcolor2 </span><span class="keyword">= </span><span class="default">imageColorAllocate </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageString </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">, </span><span class="string">'Transparent PNG Tile Test...'</span><span class="keyword">, </span><span class="default">$textcolor1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageString </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">,&nbsp; </span><span class="default">9</span><span class="keyword">, </span><span class="default">19</span><span class="keyword">, </span><span class="string">'Transparent PNG Tile Test...'</span><span class="keyword">, </span><span class="default">$textcolor2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagePNG </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy </span><span class="keyword">(</span><span class="default">$imagebg</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
hope this helps someone else!<br />
Aquilo</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
