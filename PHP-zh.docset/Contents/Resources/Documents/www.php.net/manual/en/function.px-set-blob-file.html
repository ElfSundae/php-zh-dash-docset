<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Sets the file where blobs are read from</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.px-retrieve-record.html">? px_retrieve_record</a></li>
      <li style="float: right;"><a href="function.px-set-parameter.html">px_set_parameter ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.paradox.html">Paradox 函数</a></li>
    <li>Sets the file where blobs are read from</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.px-set-blob-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">px_set_blob_file</h1>
  <p class="verinfo">(PECL paradox &gt;= 1.3.0)</p><p class="refpurpose"><span class="refname">px_set_blob_file</span> &mdash; <span class="dc-title">Sets the file where blobs are read from</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.px-set-blob-file-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>px_set_blob_file</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$pxdoc</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Sets the name of the file where blobs are going to be read from or written
   into. Without
   calling this function, <span class="function"><a href="function.px-get-record.html" class="function">px_get_record()</a></span> or
   <span class="function"><a href="function.px-retrieve-record.html" class="function">px_retrieve_record()</a></span>  will only return
   data in blob fields if the data is part of the record and not stored in the
   blob file. Blob data is stored in the record if it is small enough to fit
   in the size of the blob field.</p>
  <p class="para">
   Calling <span class="function"><a href="function.px-put-record.html" class="function">px_put_record()</a></span>,
   <span class="function"><a href="function.px-insert-record.html" class="function">px_insert_record()</a></span>, or
   <span class="function"><a href="function.px-update-record.html" class="function">px_update_record()</a></span> without calling
   <span class="function"><strong>px_set_blob_file()</strong></span> will result in truncated blob fields
   unless the data fits into the database file.
  </p>
  <p class="para">
   Calling this function twice will close the first blob file and open the new
   one.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.px-set-blob-file-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">pxdoc</code></dt>

     <dd>

      <p class="para">
       Resource identifier of the paradox database
       as returned by <span class="function"><a href="function.px-new.html" class="function">px_new()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       The name of the file. Its extension should be <em>.MB</em>.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.px-set-blob-file-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code>TRUE</code></strong>， 或者在失败时返回 <strong><code>FALSE</code></strong>。
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="106911""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#106911" class="date">18-Dec-2011 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: Due to the (old) bug https://bugs.php.net/bug.php?id=57141 the database file passed to px_open_fp needs to be opened with write permissions (e.g. using the r+ flag). It will crash with a fatal error if opened in read only mode.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103624""></a>
  <div class="note">
   <strong class="user">simon at centurioncomputers dot com dot au</strong>
   <a href="#103624" class="date">22-Apr-2011 08:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I could not get the OO interface to set_blob_file() to work....<br />
<br />
<span class="default">&lt;?php<br />
$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"/home/httpd/vhosts/newjcs/SALLY.DB"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
</span><span class="default">$pxdoc </span><span class="keyword">= new </span><span class="default">paradox_db</span><span class="keyword">();<br />
</span><span class="default">$pxdoc</span><span class="keyword">-&gt;</span><span class="default">set_blob_file</span><span class="keyword">(</span><span class="string">'/home/httpd/vhosts/newjcs/SALLY.MB'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>.............................<br />
Fatal error: paradox_db::set_blob_file(): Paradox database has not been opened or created when setting the blob file<br />
.............................<br />
<br />
but worked nicely when called procedurally, so quick example to grab the images from a paradox DB , the field names you will have to change to suit. <br />
<br />
<span class="default">&lt;?php<br />
$pxdoc </span><span class="keyword">= </span><span class="default">px_new</span><span class="keyword">();<br />
</span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"/blah/SALLY.DB"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
</span><span class="default">px_open_fp</span><span class="keyword">(</span><span class="default">$pxdoc</span><span class="keyword">, </span><span class="default">$fp</span><span class="keyword">);<br />
</span><span class="default">px_set_blob_file</span><span class="keyword">(</span><span class="default">$pxdoc</span><span class="keyword">,</span><span class="string">'/blah/SALLY.MB'</span><span class="keyword">);<br />
</span><span class="default">$numrecords</span><span class="keyword">=</span><span class="default">px_numrecords</span><span class="keyword">(</span><span class="default">$pxdoc</span><span class="keyword">);<br />
for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;=</span><span class="default">$numrecords</span><span class="keyword">;++</span><span class="default">$x</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$yaks</span><span class="keyword">=</span><span class="default">px_get_record</span><span class="keyword">(</span><span class="default">$pxdoc</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$yaks</span><span class="keyword">[</span><span class="string">'Picture'</span><span class="keyword">]){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">"/blah/ims/</span><span class="keyword">{</span><span class="default">$yaks</span><span class="keyword">[</span><span class="string">'Val No'</span><span class="keyword">]}</span><span class="string">.bmp"</span><span class="keyword">,</span><span class="default">$yaks</span><span class="keyword">[</span><span class="string">'Picture'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">px_close</span><span class="keyword">(</span><span class="default">$pxdoc</span><span class="keyword">);<br />
</span><span class="default">px_delete</span><span class="keyword">(</span><span class="default">$pxdoc</span><span class="keyword">);<br />
</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
