<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>SimpleXML</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.libxml-use-internal-errors.html">? libxml_use_internal_errors</a></li>
      <li style="float: right;"><a href="intro.simplexml.html">简介 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="refs.xml.html">XML 操作</a></li>
    <li>SimpleXML</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="book.simplexml" class="book">
 
 <h1 class="title">SimpleXML</h1>

 
 
 

 







 







 




 




 








<ul class="chunklist chunklist_book"><li><a href="intro.simplexml.html">简介</a></li><li><a href="simplexml.setup.html">安装/配置</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexml.requirements.html">需求</a></li><li><a href="simplexml.installation.html">安装</a></li></ul></li><li><a href="simplexml.examples.html">示例</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexml.examples-basic.html">Basic SimpleXML usage</a></li><li><a href="simplexml.examples-errors.html">Dealing with XML errors</a></li></ul></li><li><a href="class.simplexmlelement.html">SimpleXMLElement</a> &mdash; The SimpleXMLElement class<ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexmlelement.addattribute.html">SimpleXMLElement::addAttribute</a> &mdash; Adds an attribute to the SimpleXML element</li><li><a href="simplexmlelement.addchild.html">SimpleXMLElement::addChild</a> &mdash; Adds a child element to the XML node</li><li><a href="simplexmlelement.asxml.html">SimpleXMLElement::asXML</a> &mdash; Return a well-formed XML string based on SimpleXML element</li><li><a href="simplexmlelement.attributes.html">SimpleXMLElement::attributes</a> &mdash; Identifies an element's attributes</li><li><a href="simplexmlelement.children.html">SimpleXMLElement::children</a> &mdash; Finds children of given node</li><li><a href="simplexmlelement.construct.html">SimpleXMLElement::__construct</a> &mdash; Creates a new SimpleXMLElement object</li><li><a href="simplexmlelement.count.html">SimpleXMLElement::count</a> &mdash; Counts the children of an element</li><li><a href="simplexmlelement.current.html">SimpleXMLElement::current</a> &mdash; Returns the current element</li><li><a href="simplexmlelement.getdocnamespaces.html">SimpleXMLElement::getDocNamespaces</a> &mdash; Returns namespaces declared in document</li><li><a href="simplexmlelement.getname.html">SimpleXMLElement::getName</a> &mdash; Gets the name of the XML element</li><li><a href="simplexmlelement.getnamespaces.html">SimpleXMLElement::getNamespaces</a> &mdash; Returns namespaces used in document</li><li><a href="simplexmlelement.getchildren.html">SimpleXMLElement::getChildren</a> &mdash; Returns the sub-elements of the current element</li><li><a href="simplexmlelement.haschildren.html">SimpleXMLElement::hasChildren</a> &mdash; Checks whether the current element has sub elements</li><li><a href="simplexmlelement.key.html">SimpleXMLElement::key</a> &mdash; Return current key</li><li><a href="simplexmlelement.next.html">SimpleXMLElement::next</a> &mdash; Move to next element</li><li><a href="simplexmlelement.registerxpathnamespace.html">SimpleXMLElement::registerXPathNamespace</a> &mdash; Creates a prefix/ns context for the next XPath query</li><li><a href="simplexmlelement.rewind.html">SimpleXMLElement::rewind</a> &mdash; Rewind to the first element</li><li><a href="simplexmlelement.savexml.html">SimpleXMLElement::saveXML</a> &mdash; 别名 SimpleXMLElement::asXML</li><li><a href="simplexmlelement.tostring.html">SimpleXMLElement::__toString</a> &mdash; Returns the string content</li><li><a href="simplexmlelement.valid.html">SimpleXMLElement::valid</a> &mdash; Check whether the current element is valid</li><li><a href="simplexmlelement.xpath.html">SimpleXMLElement::xpath</a> &mdash; Runs XPath query on XML data</li></ul></li><li><a href="class.simplexmliterator.html">SimpleXMLIterator</a> &mdash; The SimpleXMLIterator class</li><li><a href="ref.simplexml.html">SimpleXML 函数</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.simplexml-import-dom.html">simplexml_import_dom</a> &mdash; Get a SimpleXMLElement object from a DOM node</li><li><a href="function.simplexml-load-file.html">simplexml_load_file</a> &mdash; Interprets an XML file into an object</li><li><a href="function.simplexml-load-string.html">simplexml_load_string</a> &mdash; Interprets a string of XML into an object</li></ul></li></ul></div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119080""></a>
  <div class="note">
   <strong class="user">oleg at mastak dot fi</strong>
   <a href="#119080" class="date">30-Mar-2016 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Two lines xml2array:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xmlstring</span><span class="keyword">);<br />
</span><span class="default">$array </span><span class="keyword">= (array) </span><span class="default">$xml</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113348""></a>
  <div class="note">
   <strong class="user">dkrnl at yandex dot ru</strong>
   <a href="#113348" class="date">30-Sep-2013 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wrapper XMLReader class, for simple SAX-reading huge xml:<br />
https://github.com/dkrnl/SimpleXMLReader<br />
<br />
Usage example: <a href="http://github.com/dkrnl/SimpleXMLReader/blob/master/examples/example1.php" rel="nofollow" target="_blank">http://github.com/dkrnl/SimpleXMLReader/blob/master/examples/example1.php</a><br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Simple XML Reader<br />
&nbsp;*<br />
&nbsp;* @license Public Domain<br />
&nbsp;* @author Dmitry Pyatkov(aka dkrnl) &lt;dkrnl@yandex.ru&gt;<br />
&nbsp;* @url <a href="http://github.com/dkrnl/SimpleXMLReader" rel="nofollow" target="_blank">http://github.com/dkrnl/SimpleXMLReader</a><br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">SimpleXMLReader </span><span class="keyword">extends </span><span class="default">XMLReader<br />
</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Callbacks<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @var array<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$callback </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Add node callback<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string&nbsp;&nbsp; $name<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; callback $callback<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; integer&nbsp; $nodeType<br />
&nbsp;&nbsp; &nbsp; * @return SimpleXMLReader<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">registerCallback</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$nodeType </span><span class="keyword">= </span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Already exists callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Already exists parser callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$callback</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Remove node callback<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string&nbsp; $name<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; integer $nodeType<br />
&nbsp;&nbsp; &nbsp; * @return SimpleXMLReader<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">unRegisterCallback</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$nodeType </span><span class="keyword">= </span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Unknow parser callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Run parser<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @return void<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">parse</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Empty parser callback."</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$continue </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$continue </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">][</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$continue </span><span class="keyword">= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">][</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">], </span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Run XPath query on current node<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $path<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $version<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $encoding<br />
&nbsp;&nbsp; &nbsp; * @return array(SimpleXMLElement)<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">expandXpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">)-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Expand current node to string<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $version<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $encoding<br />
&nbsp;&nbsp; &nbsp; * @return SimpleXMLElement<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">expandString</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">)-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Expand current node to SimpleXMLElement<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $version<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $encoding<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $className<br />
&nbsp;&nbsp; &nbsp; * @return SimpleXMLElement<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="default">$className </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expand</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">, </span><span class="default">$className</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Expand current node to DomDocument<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $version<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; string $encoding<br />
&nbsp;&nbsp; &nbsp; * @return DomDocument<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">expandDomDocument</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expand</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$document</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110958""></a>
  <div class="note">
   <strong class="user">whyme</strong>
   <a href="#110958" class="date">28-Dec-2012 09:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple means simple.&nbsp; If you know the structure and just want the value of a tag:
<br />

<br />
<span class="default">&lt;?php
<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$xmlfile</span><span class="keyword">);
<br />
print </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">City</span><span class="keyword">-&gt;</span><span class="default">Street</span><span class="keyword">-&gt;</span><span class="default">Address</span><span class="keyword">-&gt;</span><span class="default">HouseColor</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Warning, numbers can come out as strings, empty elements like &lt;HouseColor&gt;&lt;/HouseColor&gt; come out as array(0)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108688""></a>
  <div class="note">
   <strong class="user">xaviered at gmail dot com</strong>
   <a href="#108688" class="date">17-May-2012 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a recursive function that will convert a given SimpleXMLElement object into an array, preserving namespaces and attributes.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">xmlObjToArr</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$namespace </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getDocNamespaces</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$namespace</span><span class="keyword">[</span><span class="default">NULL</span><span class="keyword">] = </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attributes </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">((string)</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$obj</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) &lt;= </span><span class="default">0 </span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// get info for all namespaces
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$namespace </span><span class="keyword">as </span><span class="default">$ns</span><span class="keyword">=&gt;</span><span class="default">$nsUrl </span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// atributes
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objAttributes </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">(</span><span class="default">$ns</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$objAttributes </span><span class="keyword">as </span><span class="default">$attributeName </span><span class="keyword">=&gt; </span><span class="default">$attributeValue </span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attribName </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$attributeName</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attribVal </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$attributeValue</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$ns</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attribName </span><span class="keyword">= </span><span class="default">$ns </span><span class="keyword">. </span><span class="string">':' </span><span class="keyword">. </span><span class="default">$attribName</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attributes</span><span class="keyword">[</span><span class="default">$attribName</span><span class="keyword">] = </span><span class="default">$attribVal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// children
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$objChildren </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">(</span><span class="default">$ns</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$objChildren </span><span class="keyword">as </span><span class="default">$childName</span><span class="keyword">=&gt;</span><span class="default">$child </span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$childName </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">((string)</span><span class="default">$childName</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !empty(</span><span class="default">$ns</span><span class="keyword">) ) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$childName </span><span class="keyword">= </span><span class="default">$ns</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$childName</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$childName</span><span class="keyword">][] = </span><span class="default">xmlObjToArr</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="default">$name</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="default">$text</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'attributes'</span><span class="keyword">=&gt;</span><span class="default">$attributes</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'children'</span><span class="keyword">=&gt;</span><span class="default">$children
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105330""></a>
  <div class="note">
   <strong class="user">soloman at textgrid dot com</strong>
   <a href="#105330" class="date">09-Aug-2011 05:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Three line xml2array:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xmlstring</span><span class="keyword">);<br />
</span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Ta da!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103816""></a>
  <div class="note">
   <strong class="user">streaver91 at gmail dot com</strong>
   <a href="#103816" class="date">04-May-2011 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The BIGGEST differece between an XML and a PHP array is that in an XML file, the name of elements can be the same even if they are siblings, eg. "&lt;pa&gt;&lt;ch /&gt;&lt;ch /&gt;&lt;ch /&gt;&lt;/pa&gt;", while in an PHP array, the key of which must be different.
<br />

<br />
I think the array structure developed by svdmeer can fit for XML, and fits well.
<br />

<br />
here is an example array converted from an xml file:
<br />
array(
<br />
"@tag"=&gt;"name",
<br />
"@attr"=&gt;array(
<br />
&nbsp;&nbsp;&nbsp; "id"=&gt;"1","class"=&gt;"2")
<br />
"@text"=&gt;"some text",
<br />
)
<br />

<br />
or if it has childrens, that can be:
<br />

<br />
array(
<br />
"@tag"=&gt;"name",
<br />
"@attr"=&gt;array(
<br />
&nbsp;&nbsp;&nbsp; "id"=&gt;"1","class"=&gt;"2")
<br />
"@items"=&gt;array(
<br />
&nbsp;&nbsp;&nbsp; 0=&gt;array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "@tag"=&gt;"name","@text"=&gt;"some text"
<br />
&nbsp;&nbsp;&nbsp; )
<br />
)
<br />

<br />
Also, I wrote a function that can change that array back to XML.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array2XML</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$root</span><span class="keyword">) {
<br />
</span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="string">"&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;</span><span class="keyword">{</span><span class="default">$root</span><span class="keyword">}</span><span class="string">&gt;&lt;/</span><span class="keyword">{</span><span class="default">$root</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">); 
<br />
</span><span class="default">$f </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$f,$c,$a'</span><span class="keyword">,</span><span class="string">' 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($a as $v) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($v["@text"])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ch = $c-&gt;addChild($v["@tag"],$v["@text"]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ch = $c-&gt;addChild($v["@tag"]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($v["@items"])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $f($f,$ch,$v["@items"]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($v["@attr"])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($v["@attr"] as $attr =&gt; $val) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ch-&gt;addAttribute($attr,$val);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }'</span><span class="keyword">);
<br />
</span><span class="default">$f</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);
<br />
return </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101949""></a>
  <div class="note">
   <strong class="user">phil at dier dot us</strong>
   <a href="#101949" class="date">19-Jan-2011 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function I came up with to convert an associative array to XML.&nbsp; Works for multidimensional arrays as well.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">assocArrayToXML</span><span class="keyword">(</span><span class="default">$root_element_name</span><span class="keyword">,</span><span class="default">$ar</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="string">"&lt;?xml version=\"1.0\"?&gt;&lt;</span><span class="keyword">{</span><span class="default">$root_element_name</span><span class="keyword">}</span><span class="string">&gt;&lt;/</span><span class="keyword">{</span><span class="default">$root_element_name</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$f,$c,$a'</span><span class="keyword">,</span><span class="string">'
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($a as $k=&gt;$v) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_array($v)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ch=$c-&gt;addChild($k);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $f($f,$ch,$v);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $c-&gt;addChild($k,$v);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$ar</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101063""></a>
  <div class="note">
   <strong class="user">philipp at strazny dot com</strong>
   <a href="#101063" class="date">23-Nov-2010 05:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a quick way to dump the nodeValues from SimpleXML into an array using the path to each nodeValue as key. The paths are compatible with e.g. DOMXPath. I use this when I need to update values externally (i.e. in code that doesn't know about the underlying xml). Then I use DOMXPath to find the node containing the original value and update it.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, &amp;</span><span class="default">$return</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$xml </span><span class="keyword">instanceof </span><span class="default">SimpleXMLElement</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$root</span><span class="keyword">){ </span><span class="comment">// we're at root
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">.= </span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">count</span><span class="keyword">(</span><span class="default">$children</span><span class="keyword">) == </span><span class="default">0 </span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$path</span><span class="keyword">] = (string)</span><span class="default">$xml</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$seen</span><span class="keyword">=array();
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$children </span><span class="keyword">as </span><span class="default">$child </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$childname </span><span class="keyword">= (</span><span class="default">$child </span><span class="keyword">instanceof </span><span class="default">SimpleXMLElement</span><span class="keyword">)?</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">():</span><span class="default">$child</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( !isset(</span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">])){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">]++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$child</span><span class="keyword">.</span><span class="string">'['</span><span class="keyword">.</span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">].</span><span class="string">']'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
} 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Use like this:
<br />

<br />
<span class="default">&lt;?php
<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(...</span><span class="default">some xml string</span><span class="keyword">...);
<br />
</span><span class="default">$xmlarray </span><span class="keyword">= array(); </span><span class="comment">// this will hold the flattened data
<br />
</span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$xmlarray</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You can also pull multiple files in one array:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach(</span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$xmlarray</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>The respective filename/path is thus prefixed to each key.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100981""></a>
  <div class="note">
   <strong class="user">kristof at viewranger dot com</strong>
   <a href="#100981" class="date">18-Nov-2010 05:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you tried to load an XML file with this, but the CDATA parts were not loaded for some reason, is because you should do it this way:<br />
<br />
$xml = simplexml_load_file($this-&gt;filename, 'SimpleXMLElement', LIBXML_NOCDATA);<br />
<br />
This converts CDATA to String in the returning object.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96263""></a>
  <div class="note">
   <strong class="user">emmanuel</strong>
   <a href="#96263" class="date">17-Feb-2010 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
dynamic sql in php using xml:
<br />

<br />
test.xml:
<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<br />
&lt;sql&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;statement&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; SELECT * FROM USERS
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;call criteria="byId"&gt;WHERE id = %d&lt;/call&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;call criteria="byUsername"&gt;WHERE username = "%s"&lt;/call&gt;;
<br />
&nbsp;&nbsp;&nbsp; &lt;/statement&gt;
<br />
&lt;/sql&gt;
<br />

<br />
index.php:
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">callMe</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'byUsername' </span><span class="keyword">=&gt; </span><span class="string">'dynsql'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$search</span><span class="keyword">[</span><span class="default">$param</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$search</span><span class="keyword">[</span><span class="default">$param</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">""</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">"test.xml"</span><span class="keyword">);
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">statement</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="string">'/&lt;call criteria="(\w+)"&gt;(.*?)&lt;\/call&gt;/'</span><span class="keyword">, </span><span class="string">'callMe'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
</span><span class="default">$node </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
echo </span><span class="default">$node</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
obviously, this example can be improved [in your own code.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95762""></a>
  <div class="note">
   <strong class="user">mahmutta at gmail dot com</strong>
   <a href="#95762" class="date">20-Jan-2010 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
while using simple xml and get double or float int value from xml object for using math operations (+ * - / ) some errors happens on the operation, this is because of simple xml returns everythings to objects. <br />
exmple;<br />
<br />
<span class="default">&lt;?php<br />
<br />
$name </span><span class="keyword">= </span><span class="string">"somestring"</span><span class="keyword">;<br />
</span><span class="default">$size </span><span class="keyword">= </span><span class="default">11.45</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'<br />
&lt;xml&gt;<br />
&nbsp;&lt;name&gt;somestring&lt;/name&gt;<br />
&nbsp;&lt;size&gt;11.45&lt;/size&gt;<br />
&lt;/xml&gt;'</span><span class="keyword">;<br />
<br />
&nbsp;<br />
</span><span class="default">$xmlget </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">)<br />
<br />
echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">size</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// 20&nbsp; its false<br />
// ($xml-&gt;size is an object (int)11 and&nbsp; (45) )<br />
<br />
// this is true<br />
</span><span class="keyword">echo </span><span class="default">$size</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 22.90 <br />
</span><span class="keyword">echo (float)</span><span class="default">$size</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// 22.90 <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90554""></a>
  <div class="note">
   <strong class="user">mail at kleineedv dot de</strong>
   <a href="#90554" class="date">28-Apr-2009 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a problem with simplexml reading nodes from an xml file. It always return an SimpleXML-Object but not the text inside the node.
<br />

<br />
Example:
<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<br />
&lt;Test&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;Id&gt;123&lt;/Id&gt;
<br />
&lt;/Test&gt;
<br />

<br />
Reading this xml into a variable called $xml and then doing the following
<br />
<span class="default">&lt;?php
<br />
$myId </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Id</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>Did not return 123 in $myId, but instead I got a SimpleXMLElement Object.
<br />

<br />
The solution is simple, when you know it. Use explicit string conversion.
<br />
<span class="default">&lt;?php
<br />
$myId </span><span class="keyword">= (string)</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Id</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88457""></a>
  <div class="note">
   <strong class="user">oscargodson at gmail dot com</strong>
   <a href="#88457" class="date">25-Jan-2009 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to what others have said, you can't directly put a $_GET or $_POST value into a variable then into an attribute using SimpleXML. You must first convert it to an integer.<br />
<br />
This will NOT work<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; $page_id </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">page</span><span class="keyword">[</span><span class="default">$page_id</span><span class="keyword">]<br />
</span><span class="default">?&gt;<br />
</span><br />
You will get something like:<br />
Notice: Trying to get property of non-object in /Applications/MAMP/htdocs/mysite/index.php on line 10<br />
<br />
However, this WILL work and is much simpler then using (string) or other methods.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $page_id </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">]);<br />
&nbsp;&nbsp; echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">page</span><span class="keyword">[</span><span class="default">$page_id</span><span class="keyword">]<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87083""></a>
  <div class="note">
   <strong class="user">QLeap</strong>
   <a href="#87083" class="date">18-Nov-2008 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Storing SimpleXMLElement values in $_SESSION does not work. Saving the results as an object or individual elements of the object will result in the dreaded "Warning: session_start() [function.session-start]: Node no longer exists" error.<br />
<br />
For example, this does not work:<br />
<br />
&nbsp;&nbsp;&nbsp; $xml&nbsp; = new SimpleXMLElement($page);<br />
&nbsp;&nbsp;&nbsp; $country&nbsp; = $xml-&gt;Response-&gt;Placemark-&gt;AddressDetails-&gt;Country-&gt;CountryNameCode;<br />
&nbsp;&nbsp;&nbsp; $_SESSION['country'] = $country;<br />
<br />
This will work:<br />
<br />
&nbsp;&nbsp;&nbsp; $_SESSION['country'] = (string) $country;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84135""></a>
  <div class="note">
   <strong class="user">aalaap at gmail dot com</strong>
   <a href="#84135" class="date">30-Jun-2008 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are two quick and dirty functions that use SimpleXML to detect if a feed xml is RSS or ATOM:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">is_rss</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; @</span><span class="default">$feed </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$feed</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
function </span><span class="default">is_atom</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; @</span><span class="default">$feed </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$feed</span><span class="keyword">-&gt;</span><span class="default">entry</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The functions take in the full text feed (retrieved via cURL, for example) and return a true or a false based on the result.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
