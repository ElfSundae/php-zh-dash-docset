<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>Sends a message</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="stomp.readframe.html">? Stomp::readFrame</a></li>
      <li style="float: right;"><a href="stomp.setreadtimeout.html">Stomp::setReadTimeout ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.stomp.html">Stomp</a></li>
    <li>Sends a message</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="stomp.send" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Stomp::send</h1>
  <h1 class="refname">stomp_send</h1>
  <p class="verinfo">(PECL stomp &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">Stomp::send</span> -- <span class="refname">stomp_send</span> &mdash; <span class="dc-title">Sends a message</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-stomp.send-description">
  <h3 class="title">说明</h3>
  <p class="para">面向对象风格 (method):</p>
   <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>Stomp::send</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$destination</code></span>, <span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$msg</code></span>, <span class="methodparam"><span class="type"><a href="language.types.array.html" class="type array">array</a></span> <code class="parameter">$headers</code><span class="initializer"> = ?</span></span>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>

  <p class="para rdfs-comment">过程化风格:</p>
  <div class="methodsynopsis dc-description"><span class="methodname"><strong>stomp_send</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> <code class="parameter">$link</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$destination</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$msg</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.array.html" class="type array">array</a></span> <code class="parameter">$headers</code><span class="initializer"> = ?</span></span><br>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>

  <p class="para rdfs-comment">
   Sends a message to the Message Broker.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-stomp.send-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>
    <dt><code class="parameter">link</code></dt><dd><p class="para">仅对过程化样式：由 <span class="function"><a href="stomp.construct.html" class="function">stomp_connect()</a></span> 返回的 stomp 连接标识符。</p></dd>
    
     <dt><code class="parameter">destination</code></dt>
     <dd>
      <p class="para">
       Where to send the message    
      </p>
     </dd>
    
    
     <dt><code class="parameter">msg</code></dt>
     <dd>
      <p class="para">
       Message to send.
      </p>
     </dd>
    
    <dt><code class="parameter">headers</code></dt><dd><p class="para">关联数组包含附加的头信息（例如： receipt）。</p></dd>
   </dl>
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-stomp.send-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   成功时返回 <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong>， 或者在失败时返回 <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong>。 
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-stomp.send-examples">
  <h3 class="title">示例</h3>
  <p class="para">
   See <span class="function"><a href="stomp.ack.html" class="function">stomp_ack()</a></span>.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-stomp.send-notes">
  <h3 class="title">注释</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <p class="para">A transaction header may be specified, indicating that the message acknowledgment should be part of the named transaction.</p></p></blockquote>
  <div class="tip"><strong class="tip">Tip</strong><p class="simpara">Stomp is inherently asynchronous. Synchronous communication can be implemented adding a receipt header. This will cause methods to not return anything until the server has acknowledged receipt of the message or until read timeout was reached.</p></div>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105487""></a>
  <div class="note">
   <strong class="user">james dot mk dot green at gmail dot com</strong>
   <a href="#105487" class="date">22-Aug-2011 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Without a receipt header your application will fire messages potentially faster than the broker can receive them at. The broker may issue failure notices however STOMP being asynchronous your client won't get to see it.<br />
<br />
Without a receipt ActiveMQ (5.5.0) with ProducerFlowControl turned on drops messages (even persistent ones) and my application knows nothing about it (send() returned true). With receipt header specified the STOMP library handles the wait for the receipt acknowledgement for you - you are essentially automatically throttled.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
