<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>安装</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/46435ff017f60abb4908b0ce55102d08-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="image.requirements.html">? 需求</a></li>
      <li style="float: right;"><a href="image.configuration.html">运行时配置 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="image.setup.html">安装/配置</a></li>
    <li>安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="image.installation" class="section">
 <h2 class="title">安装</h2>
 <p class="para">
  要激活 GD 支持，配置 PHP 时加上
  <strong class="option configure">--with-gd[=DIR]</strong>，DIR 是 GD
  的基本安装目录。要使用推荐的绑定的 GD 库版本，使用
  <strong class="option configure">--with-gd</strong>。要编译
  GD 库，需要<span class="productname">libpng</span> 和 <span class="productname">libjpeg</span>。
  自 PHP 7.4.0 起，<strong class="option configure">--with-gd</strong> 变为
  <strong class="option configure">--enable-gd</strong> （是否启用扩展）
  和 <strong class="option configure">--with-external-gd</strong>
  （选择使用外部 <span class="productname">libgd</span>，而不是绑定的）。
 </p>
 <p class="para">
  在 Windows 中，需要将 GD 的 DLL 文件 <var class="filename">php_gd.dll</var>
  作为一个扩展包含在 <var class="filename">php.ini</var> 中。
  在 PHP 8.0.0 之前，DLL 被命名为 <var class="filename">php_gd2.dll</var>。
 </p>

 <p class="para">
  要增强 GD 的能力以处理更多的图像格式，在配置 PHP 时指定
  <code class="literal">--with-XXXX</code> 的配置开关。
  <table class="doctable table">
   <caption><strong>所支持的图像格式</strong></caption>
   
    <thead>
     <tr>
      <th>图像格式</th>
      <th>配置开关</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><code class="literal">jpeg</code></td>
      <td>
       要激活 jpeg 的支持，加上
       <strong class="option configure">--with-jpeg-dir=DIR</strong>。
       支持 Jpeg 6b、7 或 8。
       从 PHP 7.4.0 开始，使用
       <strong class="option configure">--with-jpeg</strong> 替代。
      </td>
     </tr>

     <tr>
      <td><code class="literal">png</code></td>
      <td>
       要激活 png 的支持，加上
       <strong class="option configure">--with-png-dir=DIR</strong>。注意，libpng
       需要 <a href="zlib.requirements.html" class="link">zlib library</a>，因此配置中还要加上
       <strong class="option configure">--with-zlib-dir[=DIR]</strong>。
       从 PHP 7.4.0 开始，<strong class="option configure">--with-png-dir</strong>
       和 <strong class="option configure">--with-zlib-dir</strong> 已经移除。
       需要安装 <span class="productname">libpng</span> 和 <span class="productname">zlib</span>。
      </td>
     </tr>

     <tr>
      <td><code class="literal">xpm</code></td>
      <td>
       要激活 xpm 的支持，加上
       <strong class="option configure">--with-xpm-dir=DIR</strong>。
       如果配置时提示找不到所需要的库，可以加上 X11 库的路径。
       从 PHP 7.4.0 开始，使用
       <strong class="option configure">--with-xpm</strong> 替代。
      </td>
     </tr>

     <tr>
      <td><code class="literal">webp</code></td>
      <td>
       要激活 xpm 的支持，加上 <strong class="option configure">--with-webp-dir=DIR</strong>。
       从 PHP 7.4.0 开始，使用 <strong class="option configure">--with-webp</strong> 替代。
      </td>
     </tr>

    </tbody>
   
  </table>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    当把 PHP 和 libpng 一起编译时，必须使用和 GD 库连接的同一个版本。
   </span>
  </p></blockquote>
 </p>
 <p class="para">
  要增强 GD 的能力以处理更多的字体，在配置 PHP 时指定
  <code class="literal">--with-XXXX</code> 的配置开关。
  <table class="doctable table">
   <caption><strong>所支持的字库</strong></caption>
   
    <thead>
     <tr>
      <th>字库</th>
      <th>配置开关</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><code class="literal">FreeType 2</code></td>
      <td>
       要激活 FreeType 2 的支持，加上
       <strong class="option configure">--with-freetype-dir=DIR</strong>。
       从 PHP 7.4.0 开始使用 <strong class="option configure">--with-freetype</strong>
       代替，它依赖于 <span class="productname">pkg-config</span>。
      </td>
     </tr>

     <tr>
      <td><code class="literal">本地 TrueType 字符串函数</code></td>
      <td>
       要激活本地 TrueType 字符串函数的支持，加上
       <strong class="option configure">--enable-gd-native-ttf</strong>。
       （此选项无效，自 PHP 7.2.0 起已被删除。）
      </td>
     </tr>

    </tbody>
   
  </table>

 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125850""></a>
  <div class="note">
   <strong class="user">Parmjit Singh</strong>
   <a href="#125850" class="date">22-Feb-2021 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Installation on Pop-os No need for php5 or php7.0 etc:<br />
<br />
sudo apt install php-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125750""></a>
  <div class="note">
   <strong class="user">omni at ominsapien dot com</strong>
   <a href="#125750" class="date">31-Jan-2021 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello. Does GD image processing allow for color spaces / color profiles to be defined or maintained from the source image? For example, if I upload a jpg with ProPhoto RGB color space with the embedded profile, will all of the subsequent processed images that are output maintain the profile? Or is there no profile and or is it changed to sRGB?<br />
<br />
Same question goes for ImageMagick.<br />
<br />
Thank you so much!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124849""></a>
  <div class="note">
   <strong class="user">tecknovice at gmail dot com</strong>
   <a href="#124849" class="date">24-Mar-2020 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
currently is php7.2-gd<br />
<br />
sudo apt install php7.2-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124699""></a>
  <div class="note">
   <strong class="user">Gabriel Torres</strong>
   <a href="#124699" class="date">09-Feb-2020 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 7.4, to enable GD you have to use --enable-gd instead of --with-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124600""></a>
  <div class="note">
   <strong class="user">nordin74</strong>
   <a href="#124600" class="date">11-Jan-2020 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since 7.4 replace "--with-gd" by "--enable-gd"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123701""></a>
  <div class="note">
   <strong class="user">abdulbasitsaeed</strong>
   <a href="#123701" class="date">19-Mar-2019 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To install PHP GD extension on an Amazon Linux AMI server, with php 7:<br />
<br />
sudo yum install php 70-gd<br />
<br />
Do remember to restart Apache after the installation!<br />
<br />
sudo service httpd restart</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123243""></a>
  <div class="note">
   <strong class="user">fabrizzio at webtux dot cl</strong>
   <a href="#123243" class="date">19-Oct-2018 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php --version if result is 7.2 version<br />
<br />
sudo apt-get install php7.2-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122384""></a>
  <div class="note">
   <strong class="user">remalsha at gmail dot com</strong>
   <a href="#122384" class="date">13-Feb-2018 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On AntergosOS ( Arch linux ) <br />
<br />
*first run &gt;&gt;php -v&nbsp;&nbsp; and get current php version. In my case for PHP 7.1.14<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; sudo pacman -S php71-gd&nbsp;&nbsp; <br />
<br />
then restart you apache server using,<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; sudo systemctl restart httpd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120872""></a>
  <div class="note">
   <strong class="user">Qussayyon Qamaron: Qusai.zf2@gmailcom</strong>
   <a href="#120872" class="date">25-Mar-2017 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
#install under Ubuntu 16.04:<br />
&nbsp;&nbsp;&nbsp; * if you have access to PHP7.1:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;sudo&gt; apt install php7.1-gd &amp;&amp; &lt;sudo&gt; systemctl restart apache2<br />
&nbsp;&nbsp;&nbsp; * if you have access to PHP7.0:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;sudo&gt; apt install php7.0-gd &amp;&amp; &lt;sudo&gt; systemctl restart apache2<br />
<br />
------------------------------------------------<br />
Qussayyon Qamaron: Qusai.zf2gmailcom</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120325""></a>
  <div class="note">
   <strong class="user">theonestep4 at gmail dot com</strong>
   <a href="#120325" class="date">13-Dec-2016 05:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To install on CentOS:<br />
<br />
yum install php-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120116""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#120116" class="date">03-Nov-2016 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For all who use php 7 and ubuntu<br />
<br />
sudo apt-get install php7.0-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119079""></a>
  <div class="note">
   <strong class="user">Mike K</strong>
   <a href="#119079" class="date">30-Mar-2016 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Ubuntu I was missing the libpng-dev, libjpeg-dev (and in my case) libwebp-dev libraries, all gettable with apt-get.<br />
<br />
Also once those libraries are installed, including --with-png-dir --with-jpeg-dir --with-webp-dir, without any values (i.e. =/dir) appeared to be valid ... though admittedly I didn't try without (in case the configure script autodetected them).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118884""></a>
  <div class="note">
   <strong class="user">svestka1999 at gmail dot com</strong>
   <a href="#118884" class="date">22-Feb-2016 06:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instructions how to compile bundled version on Linux:<br />
<a href="http://stackoverflow.com/questions/35560150/php-gd-bundled-extension-without-recompiling-php-solution" rel="nofollow" target="_blank">http://stackoverflow.com/questions/35560150/php-gd-bundled-extension-without-recompiling-php-solution</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115989""></a>
  <div class="note">
   <strong class="user">leyluj21 at gmail dot com</strong>
   <a href="#115989" class="date">23-Oct-2014 09:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using PHPBREW , the extension is called gd.<br />
So you do.<br />
```<br />
phpbrew ext install gd<br />
```<br />
<br />
It will compile the extension to the core.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115676""></a>
  <div class="note">
   <strong class="user">james dot a dot munsch at gmail dot com</strong>
   <a href="#115676" class="date">05-Sep-2014 10:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
sudo apt-get install php5-gd &amp;&amp; sudo service apache2 restart<br />
<br />
To install under Ubuntu 14.04.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109472""></a>
  <div class="note">
   <strong class="user">alejo dot jm at gmail dot com</strong>
   <a href="#109472" class="date">20-Jul-2012 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Macox lion with mac port just use:<br />
sudo port install php5-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105155""></a>
  <div class="note">
   <strong class="user">florian</strong>
   <a href="#105155" class="date">31-Jul-2011 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
People having difficulties setting the --with-libdir option needs to set it like this :<br />
<br />
--with-libdir=lib64<br />
<br />
That option works fine. Doing --with-libdir=/usr/lib64 doesn't work because the configure script prepends the --prefix option before the --with-libdir option. So, doing --with-libdir=/usr/lib64 makes the configure script to look for libs in /usr/usr/lib64, which is wrong of course, and not in /usr/lib64.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104571""></a>
  <div class="note">
   <strong class="user">Joseph Marlin</strong>
   <a href="#104571" class="date">23-Jun-2011 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I also had to install the libgd package in addition to php5-gd:<br />
<br />
sudo apt-get install libgd2-xpm-dev*</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103507""></a>
  <div class="note">
   <strong class="user">octopus at logicaloctopus dot com</strong>
   <a href="#103507" class="date">17-Apr-2011 12:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was running PHP on a SUSE box on amazon EC2.<br />
to get gd to work all I had to do was to run:<br />
&gt; yast -i php5_gd<br />
<br />
and when that completed I just restarted apache. voila!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102971""></a>
  <div class="note">
   <strong class="user">boly38 at gmail dot com</strong>
   <a href="#102971" class="date">17-Mar-2011 05:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get GD bundled under Ubuntu, the way to recompile php5 with gd is described here (french) <a href="http://doc.ubuntu-fr.org/modules_php#php5-gd" rel="nofollow" target="_blank">http://doc.ubuntu-fr.org/modules_php#php5-gd</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99856""></a>
  <div class="note">
   <strong class="user">elassoto at hotmail dot com</strong>
   <a href="#99856" class="date">10-Sep-2010 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have already compiled PHP and want to recompile '--with-gd', don't forget to run 'make clean' first!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86699""></a>
  <div class="note">
   <strong class="user">msc at homofaber dot com</strong>
   <a href="#86699" class="date">30-Oct-2008 07:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that it might be pretty easy to install gd without the need to recompile php, when using debian:
<br />

<br />
apt-get install php5-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
