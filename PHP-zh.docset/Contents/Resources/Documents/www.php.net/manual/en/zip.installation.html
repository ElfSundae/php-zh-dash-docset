<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>安装</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="zip.requirements.html">? 需求</a></li>
      <li style="float: right;"><a href="zip.resources.html">资源类型 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="zip.setup.html">安装/配置</a></li>
    <li>安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="zip.installation" class="section">
 <h2 class="title">安装</h2>
 
 <div class="section" id="zip.installation.linux">
  <h2 class="title">Linux 系统</h2>
  <p class="para">
   必须在编译 PHP 时用 <strong class="option configure">--with-zip</strong>
   配置选项来提供 zip 支持来使用这些方法。
  </p>
  <p class="para">   
   PHP 7.4.0 之前，PHP 捆绑了 libzip，编译扩展需要使用
   <strong class="option configure">--enable-zip</strong> 配置项。从 PHP 7.3.0 开始, 不鼓励使用捆绑的 libzip
   进行构建，但仍然可以使用 <strong class="option configure">--without-libzip</strong> 配置项。
  </p>
  <p class="para">
   新增 <strong class="option configure">--with-libzip=DIR</strong> 配置选项以使用系统
   libzip 安装。需要 libzip 版本 0.11，推荐使用 0.11.2 或更高版本。
  </p>
 </div>
  
 <div class="section" id="zip.installation.new.windows">
  <h2 class="title">Windows</h2>
  <p class="para">
   从 PHP 8.2.0 开始，必须在 <var class="filename">php.ini</var> 中<a href="install.pecl.windows.html#install.pecl.windows.loading" class="link">启用</a>
   <var class="filename">php_zip.dll</var> DLL。以前内置此扩展。
  </p>
 </div>
 
 <div class="section" id="zip.installation.pecl">
  <h2 class="title">通过 PECL 安装</h2>
  <p class="para">
   安装此 PECL 扩展相关的信息可在手册中标题为
<a href="install.pecl.html" class="link">PECL
扩展的安装</a>章节中找到。更多信息如新的发行版本、下载、源文件、
维护人员信息及变更日志等，都在此处：
   <a href="https://pecl.php.net/package/zip" class="link external" title="Link : https://pecl.php.net/package/zip">&raquo;&nbsp;https://pecl.php.net/package/zip</a>.
  </p>
 </div>
 
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="129230""></a>
  <div class="note">
   <strong class="user">askertv at gmail dot com</strong>
   <a href="#129230" class="date">09-Feb-2024 02:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
SOLVET "No package 'libzip' found":<br />
<br />
$ export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib64/pkgconfig/<br />
<br />
$ ./configure \<br />
...<br />
--with-zip \<br />
...<br />
<br />
Configuration OK<br />
<br />
$ make &amp;&amp; make install</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="129226""></a>
  <div class="note">
   <strong class="user">askertv at gmail dot com</strong>
   <a href="#129226" class="date">08-Feb-2024 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
No package 'libzip' found<br />
<br />
INSTALLATION PHP FROM SOURCE:<br />
<br />
./configure \<br />
--prefix=/usr/local/php-7.4.5 \<br />
--disable-debug \<br />
--enable-fpm \<br />
--with-fpm-user=nginx \<br />
--with-fpm-group=nginx \<br />
--enable-inline-optimization \<br />
--enable-ftp \<br />
--enable-xml \<br />
--with-libdir=/usr/lib64 \<br />
--with-curl \<br />
--with-iconv \<br />
--with-gettext \<br />
--with-mysqli \<br />
--enable-pdo \<br />
--with-pdo-mysql \<br />
--with-zlib \<br />
--with-zlib-dir=/usr/lib \<br />
--srcdir=/usr/local/src/php-7.4.5 \<br />
--enable-sockets \<br />
--enable-soap \<br />
--with-openssl \<br />
--enable-gd \<br />
--with-jpeg \<br />
--with-xpm \<br />
--with-freetype \<br />
--with-zip \<br />
--with-libzip=/usr/local/lib64/ \<br />
ONIG_LIBS=/usr/lib64<br />
<br />
checking for zip archive read/write support... yes<br />
checking for libzip &gt;= 0.11... no<br />
configure: error: Package requirements (libzip &gt;= 0.11) were not met:<br />
<br />
No package 'libzip' found<br />
<br />
Consider adjusting the PKG_CONFIG_PATH environment variable if you<br />
installed software in a non-standard prefix.<br />
<br />
Alternatively, you may set the environment variables LIBZIP_CFLAGS<br />
and LIBZIP_LIBS to avoid the need to call pkg-config.<br />
See the pkg-config man page for more details.<br />
<br />
INSTALLATION libzip-1.10.1 from source:<br />
<br />
make install<br />
[ 50%] Built target zip<br />
[ 94%] Built target man<br />
[ 96%] Built target zipcmp<br />
[ 96%] Built target zipmerge<br />
[ 98%] Built target ziptool<br />
[ 98%] Built target add-compressed-data<br />
[ 98%] Built target autoclose-archive<br />
[100%] Built target in-memory<br />
Install the project...<br />
-- Install configuration: ""<br />
-- Installing: /usr/local/lib64/pkgconfig/libzip.pc<br />
-- Installing: /usr/local/lib64/cmake/libzip/modules/FindNettle.cmake<br />
-- Installing: /usr/local/lib64/cmake/libzip/modules/Findzstd.cmake<br />
-- Installing: /usr/local/lib64/cmake/libzip/modules/FindMbedTLS.cmake<br />
-- Installing: /usr/local/include/zipconf.h<br />
-- Installing: /usr/local/lib64/cmake/libzip/libzip-config.cmake<br />
-- Installing: /usr/local/lib64/cmake/libzip/libzip-config-version.cmake<br />
-- Installing: /usr/local/lib64/cmake/libzip/libzip-targets.cmake<br />
-- Installing: /usr/local/lib64/cmake/libzip/libzip-targets-noconfig.cmake<br />
-- Installing: /usr/local/lib64/libzip.so.5.5<br />
-- Up-to-date: /usr/local/lib64/libzip.so.5<br />
-- Up-to-date: /usr/local/lib64/libzip.so<br />
-- Installing: /usr/local/include/zip.h<br />
-- Installing: /usr/local/share/man/man3/ZIP_SOURCE_GET_ARGS.3<br />
...<br />
...<br />
-- Installing: /usr/local/bin/zipcmp<br />
-- Set runtime path of "/usr/local/bin/zipcmp" to ""<br />
-- Installing: /usr/local/bin/zipmerge<br />
-- Set runtime path of "/usr/local/bin/zipmerge" to ""<br />
-- Installing: /usr/local/bin/ziptool<br />
-- Set runtime path of "/usr/local/bin/ziptool" to ""<br />
<br />
OS: RedHat-7.9</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125160""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#125160" class="date">01-Jul-2020 11:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is how I installed it on my machine (ubuntu):<br />
php 7:<br />
<br />
sudo apt-get install php7.0-zip<br />
<br />
service apache2 restart</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125136""></a>
  <div class="note">
   <strong class="user">php dot net at cage dot is</strong>
   <a href="#125136" class="date">23-Jun-2020 03:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you asking about how to update this within your Dockerfile, the answer seems to be to add to the environment variable like so:<br />
<br />
ENV PHP_EXTRA_CONFIGURE_ARGS="--with-apxs2 --disable-cgi --with-zip"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124916""></a>
  <div class="note">
   <strong class="user">sgalyen at notspamarizona dot edu</strong>
   <a href="#124916" class="date">15-Apr-2020 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In trying to compile PHP 7.4.x on CentOS 7.x I'm running into the dreaded "Package requirements (libzip &gt;= 0.11) were not met"<br />
<br />
As the referenced RPM package for lipzip 0.11.2 is a 3rd party (repo named Psychotic Ninja Plus, doesn't exactly inspire faith) I tried to compile from source.&nbsp; <br />
<br />
I was able to find the git sha1 for 0.11.1 and compile successfully - if anyone needs it:<br />
d2aac947ccc85bd4abbd02a6d9b237bdaa89d3f0<br />
<br />
If someone in the know could post the sha1 for 0.11.2, or whatever preferred version of libzip that successfully compiles, I would appreciate it!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123414""></a>
  <div class="note">
   <strong class="user">Marcel</strong>
   <a href="#123414" class="date">10-Dec-2018 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Getting error <br />
<br />
&nbsp; configure: error: Please reinstall the libzip distribution<br />
<br />
when compiling this extension for php 7.3?<br />
<br />
You need to install the 'libzip' package.<br />
<br />
In Dockerfile you would do this like:<br />
<br />
# Install zip<br />
RUN apt-get update &amp;&amp; \<br />
&nbsp;&nbsp; &nbsp; apt-get install -y \<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; libzip-dev \<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; docker-php-ext-install zip</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="122656""></a>
  <div class="note">
   <strong class="user">mattcasiro at gmail dot com</strong>
   <a href="#122656" class="date">23-Apr-2018 06:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If installing this in a Docker image using:<br />
"docker-php-ext-install zip"<br />
<br />
you may get an error such as:<br />
"docker-php-ext-install zip returned a non-zero code: 1"<br />
or<br />
"zip support requires ZLIB"<br />
<br />
Docker documentation now suggests this as the proper way to install, to ensure the dependant libraries are installed with it:<br />
# Install zip<br />
RUN apt-get update &amp;&amp; \<br />
&nbsp;&nbsp; &nbsp; apt-get install -y \<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; zlib1g-dev \<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; docker-php-ext-install zip</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
