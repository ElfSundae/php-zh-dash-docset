<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>安装</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mssql.requirements.html">? 需求</a></li>
      <li style="float: right;"><a href="mssql.configuration.html">运行时配置 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mssql.setup.html">安装／配置</a></li>
    <li>安装</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mssql.installation" class="section">
 <h2 class="title">安装</h2>
 <p class="para">
  The MSSQL extension is enabled by adding extension=php_mssql.dll to
  <var class="filename">php.ini</var>.
 </p>
 <p class="para">
  To get these functions to work, you have to compile PHP with
  <strong class="option configure">--with-mssql[=DIR]</strong>
, where DIR is the
  FreeTDS install prefix. And FreeTDS should be compiled using
  <strong class="option configure">--enable-msdblib</strong>
.
 </p>
 <div class="warning"><strong class="warning">Warning</strong>
  <p class="para">
   MS SQL functions are aliases to Sybase functions if PHP is compiled with
   <a href="book.sybase.html" class="link">Sybase</a> extension and without MS SQL
   extension.
  </p>
 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117833""></a>
  <div class="note">
   <strong class="user">MaxusR at yandex dot ru</strong>
   <a href="#117833" class="date">17-Aug-2015 11:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
MS SQL with dynamic ports enabled installation:<br />
<br />
Append to freetds.conf<br />
[mssql]<br />
host = &lt;host&gt;<br />
instance = &lt;instance&gt;<br />
tds version = 8.0<br />
<br />
On the server side the SQL Browser service must be running and UDP 1434 port must be open for incoming connections.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117223""></a>
  <div class="note">
   <strong class="user">sbonder at outlook dot com</strong>
   <a href="#117223" class="date">05-May-2015 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is how I got it to work:<br />
&gt; Install the necessary packages for FreeTDS:<br />
&nbsp; sudo apt-get -y install freetds-bin tdsodbc unixodbc<br />
<br />
&gt; Configure FreeTD<br />
&nbsp; nano /etc/freetds/freetds.conf<br />
<br />
&gt; Create a server<br />
&nbsp;[sqlserver]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; host = &lt;server_name&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; port = 1433<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; tds version = 8.0<br />
<br />
&gt; You can now test whether you can connect to your MSSQL Server as follows - using the tsql command line tool:<br />
&nbsp; tsql -S &lt;createdsevername&gt; -U &lt;username&gt; -P &lt;password&gt; -D &lt;chosen_database&gt;<br />
<br />
&gt; You should get a message that looks similar to this:<br />
locale is "en_US.UTF-8" <br />
locale charset is "UTF-8" <br />
using default charset "UTF-8" <br />
Default database being set to &lt;chosen_database&gt; <br />
1&gt; quit<br />
<br />
&gt; Install a php extention:<br />
apt-get install php5-sybase<br />
<br />
&gt; Check if mssql in available in you phpinfo</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116675""></a>
  <div class="note">
   <strong class="user">justnshalom at gmail dot com</strong>
   <a href="#116675" class="date">09-Feb-2015 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Ubuntu Just you need to install <br />
php5-sybase <br />
sudo apt-get install php5-sybase<br />
Done ...<br />
Connect with this keyword<br />
mssql_connect('Your IP/localhost','username','password','database');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95850""></a>
  <div class="note">
   <strong class="user">Dave</strong>
   <a href="#95850" class="date">25-Jan-2010 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Linux users: I had to set the TDSDUMP and TDSCONFDUMP environment variables in my apache init script in order for freetds/mssql connections to work:<br />
<br />
In my /etc/init.d/httpd file:<br />
export FREETDSCONF=/usr/local/freetds/etc/freetds.conf<br />
export SYBASE=/usr/local/freetds<br />
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:$SYBASE/lib<br />
export TDSDUMP=/var/log/freetds/tdsdump-apache_log<br />
export TDSDUMPCONF=/var/log/freetds/tdsdumpconf-apache_log<br />
<br />
Make sure apache can write to the TDSDUMP directory.<br />
<br />
(Using FreeTDS 0.82, PHP 5.2.9)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93783""></a>
  <div class="note">
   <strong class="user">mirko dot steiner at slashdevslashnull dot de</strong>
   <a href="#93783" class="date">29-Sep-2009 03:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP msdblib niggle encountered<br />
<br />
In configuring your new version of PHP to work with FreeTDS 0.82, you may encounter:<br />
configure: error: Directory /usr/local/freetds-0.82 is not a FreeTDS installation directory<br />
PHP tests for a FreeTDS installation by looking for files that FreeTDS no longer installs. To assure PHP that FreeTDS is installed, create two files where FreeTDS was installed e.g.:<br />
$ touch /usr/local/freetds-0.82/include/tds.h<br />
$ touch /usr/local/freetds-0.82/lib/libtds.a<br />
The file that needs to be changed is used by autoconf when the distribution tarball is constructed. Cf. revision 1.13 of PHP source file config.m4. (12 June 2008) <br />
<br />
(<a href="http://www.freetds.org/news.html" rel="nofollow" target="_blank">http://www.freetds.org/news.html</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89328""></a>
  <div class="note">
   <strong class="user">jonatasvenancio at gmail dot com</strong>
   <a href="#89328" class="date">03-Mar-2009 11:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Finally i did it.
<br />

<br />
I could make the connection with MS-SQL:
<br />
1 - I downloaded the new version of ntwdblib.dll like we already saw at the others posts.
<br />
2 - I actived the php_mssql.dll in php.ini (the DLL must be in your extension dir)
<br />
3 - Restarted apache.
<br />
4 - Got my MS-SQL name instance (in my case was SQLEXPRESS because i was using MS-SQL Express Version and didn't change the default configuration).
<br />
5 - I did my connection file.
<br />

<br />
#################
<br />
<span class="default">&lt;?php
<br />
$conn </span><span class="keyword">= </span><span class="default">mssql_connect</span><span class="keyword">(</span><span class="string">"ADMIN-PC\SQLEXPRESS"</span><span class="keyword">, </span><span class="string">"usuario"</span><span class="keyword">, </span><span class="string">"senha"</span><span class="keyword">) or die (</span><span class="string">"erro ao conectar"</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// Admin-PC is the name of my computer and SQLExpress is the name of MS-SQL Instance).
<br />
// usuario is a user that i created on SQL server with this command.
<br />
// SP_AddLogin 'user', 'password'
<br />
// after that i used this onde SP_AddUser 'user'
<br />
// you can change fot the user you want.
<br />
// I cound't use the defaullt user of MS-SQL, but with this one the connection worked.
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
I hope this can help you.
<br />

<br />
Sorry for the english.
<br />
I'm brasilian.
<br />
Venancio</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84331""></a>
  <div class="note">
   <strong class="user">Matt Mason</strong>
   <a href="#84331" class="date">09-Jul-2008 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Had a problem compiling PHP with --with-mssql=/usr/local/freetds , kept saying that it wasn't a valid FreeTDS directory...<br />
<br />
Check that when you install FreeTDS from source, that it actually puts the required files from the source directory to where the installation directory was specified, so to fix:<br />
<br />
cp [tds source]/include/tds.h /usr/local/freetds/include<br />
cp [tds source]src/tds/.libs/libtds.a /usr/local/freetds/lib <br />
<br />
{in this example I installed FreeTDS to /usr/local/freetds}<br />
<br />
This may make it a little easier for some else too.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
