<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>从 HTML 中分离</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.basic-syntax.phptags.html">? PHP 标记</a></li>
      <li style="float: right;"><a href="language.basic-syntax.instruction-separation.html">指令分隔符 ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.basic-syntax.html">基本语法</a></li>
    <li>从 HTML 中分离</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.basic-syntax.phpmode" class="sect1">
   <h2 class="title">从 HTML 中分离</h2>
   <p class="para">
    凡是在一对开始和结束标记之外的内容都会被
    PHP 解析器忽略，这使得 PHP 文件可以具备混合内容。 可以使 PHP
    嵌入到 HTML 文档中去，如下例所示。
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">&lt;p&gt;This is going to be ignored by PHP and displayed by the browser.&lt;/p&gt;<br /><span style="color: #0000BB">&lt;?php </span><span style="color: #007700">echo </span><span style="color: #DD0000">'While this is going to be parsed.'</span><span style="color: #007700">; </span><span style="color: #0000BB">?&gt;<br /></span>&lt;p&gt;This will also be ignored by PHP and displayed by the browser.&lt;/p&gt;</span></code></div>
     </div>

    </div>
    这将如预期中的运行，因为当 PHP 解释器碰到 ?&gt;
    结束标记时就简单地将其后内容原样输出（除非马上紧接换行 - 见
    <a href="language.basic-syntax.instruction-separation.html" class="link">指令分隔符</a>）直到碰到下一个开始标记；例外是处于条件语句中间时，此时
    PHP 解释器会根据条件判断来决定哪些输出，哪些跳过。见下例。
   </p>
   <p class="para">
   使用条件结构：
    <div class="example" id="example-31">
     <p><strong>Example #1 使用条件的高级分离术</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php </span><span style="color: #007700">if (</span><span style="color: #0000BB">$expression </span><span style="color: #007700">== </span><span style="color: #0000BB">true</span><span style="color: #007700">): </span><span style="color: #0000BB">?&gt;<br /></span>  This will show if the expression is true.<br /><span style="color: #0000BB">&lt;?php </span><span style="color: #007700">else: </span><span style="color: #0000BB">?&gt;<br /></span>  Otherwise this will show.<br /><span style="color: #0000BB">&lt;?php </span><span style="color: #007700">endif; </span><span style="color: #0000BB">?&gt;</span></span></code></div>
     </div>

    </div>
    上例中 PHP 将跳过条件语句未达成的段落，即使该段落位于 PHP 开始和结束标记之外。由于
    PHP 解释器会在条件未达成时直接跳过该段条件语句块，因此 PHP 会根据条件来忽略之。
  </p>
  <p class="para">
   要输出大段文本时，跳出 PHP 解析模式通常比将文本通过
   <span class="function"><a href="function.echo.html" class="function">echo</a></span> 或 <span class="function"><a href="function.print.html" class="function">print</a></span> 输出更有效率。
  </p>
  <p class="para">
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     <p class="para">
      此外注意如果将 PHP 嵌入到 XML 或 XHTML 中则需要使用
      <code class="code">&lt;?php ?&gt;</code> 标记以保持符合标准。
     </p>
    </p></blockquote>
   </p>
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="128355""></a>
  <div class="note">
   <strong class="user">gazianis005 at gmail dot com</strong>
   <a href="#128355" class="date">31-Mar-2023 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are two types of escaping from HTML.<br />
1.Normal escaping of using&nbsp; outside of a pair of opening and closing tag<br />
2.Advance escaping of&nbsp; using conditions.<br />
<br />
Example of normal escaping<br />
<br />
&lt;p&gt;This is&nbsp; going to be ignored by the php parser and displayed by the browser&lt;/p&gt;<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="string">'This is going to be parsed'</span><span class="keyword">;</span><span class="default">?&gt;<br />
</span>&lt;&gt;This will also ignored by the php parser and displayed by the browser&lt;/&gt; <br />
<br />
Example of&nbsp; advanced escaping <br />
<br />
<span class="default">&lt;?php </span><span class="keyword">if(</span><span class="default">$expression </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>This will show if expression is true<br />
<span class="default">&lt;?php </span><span class="keyword">else : </span><span class="default">?&gt;<br />
</span>Otherwise&nbsp; this will show<br />
<span class="default">&lt;?php </span><span class="keyword">endif ;</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114589""></a>
  <div class="note">
   <strong class="user">sgurukrupa at gmail dot com</strong>
   <a href="#114589" class="date">10-Mar-2014 07:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Although not specifically pointed out in the main text, escaping from HTML also applies to other control statements:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">5</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">): </span><span class="default">?&gt;<br />
</span>Hello, there!<br />
<span class="default">&lt;?php </span><span class="keyword">endfor; </span><span class="default">?&gt;<br />
</span><br />
When the above code snippet is executed we get the following output:<br />
<br />
Hello, there!<br />
Hello, there!<br />
Hello, there!<br />
Hello, there!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99083""></a>
  <div class="note">
   <strong class="user">quickfur at quickfur dot ath dot cx</strong>
   <a href="#99083" class="date">26-Jul-2010 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When the documentation says that the PHP parser ignores everything outside the <span class="default">&lt;?php </span><span class="keyword">... </span><span class="default">?&gt;</span> tags, it means literally EVERYTHING. Including things you normally wouldn't consider "valid", such as the following:<br />
<br />
&lt;html&gt;&lt;body&gt;<br />
&lt;p<span class="default">&lt;?php </span><span class="keyword">if (</span><span class="default">$highlight</span><span class="keyword">): </span><span class="default">?&gt;</span> class="highlight"<span class="default">&lt;?php </span><span class="keyword">endif;</span><span class="default">?&gt;</span>&gt;This is a paragraph.&lt;/p&gt;<br />
&lt;/body&gt;&lt;/html&gt;<br />
<br />
Notice how the PHP code is embedded in the middle of an HTML opening tag. The PHP parser doesn't care that it's in the middle of an opening tag, and doesn't require that it be closed. It also doesn't care that after the closing ?&gt; tag is the end of the HTML opening tag. So, if $highlight is true, then the output will be:<br />
<br />
&lt;html&gt;&lt;body&gt;<br />
&lt;p class="highlight"&gt;This is a paragraph.&lt;/p&gt;<br />
&lt;/body&gt;&lt;/html&gt;<br />
<br />
Otherwise, it will be:<br />
<br />
&lt;html&gt;&lt;body&gt;<br />
&lt;p&gt;This is a paragraph.&lt;/p&gt;<br />
&lt;/body&gt;&lt;/html&gt;<br />
<br />
Using this method, you can have HTML tags with optional attributes, depending on some PHP condition. Extremely flexible and useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92643""></a>
  <div class="note">
   <strong class="user">ravenswd at gmail dot com</strong>
   <a href="#92643" class="date">01-Aug-2009 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One aspect of PHP that you need to be careful of, is that ?&gt; will drop you out of PHP code and into HTML even if it appears inside a // comment. (This does not apply to /* */ comments.) This can lead to unexpected results. For example, take this line:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $file_contents&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;?php die(); ?&gt;' </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
If you try to remove it by turning it into a comment, you get this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//&nbsp; $file_contents&nbsp; = '&lt;?php die(); </span><span class="default">?&gt;</span>' . "\n";<br />
?&gt;<br />
<br />
Which results in ' . "\n"; (and whatever is in the lines following it) to be output to your HTML page.<br />
<br />
The cure is to either comment it out using /* */ tags, or re-write the line as:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $file_contents&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;' </span><span class="keyword">. </span><span class="string">'?php die(); ?' </span><span class="keyword">. </span><span class="string">'&gt;' </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
