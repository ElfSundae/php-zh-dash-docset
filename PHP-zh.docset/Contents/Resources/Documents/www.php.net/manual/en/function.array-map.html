<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=gb2312">
  <title>为数组的每个元素应用回调函数</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-keys.html">? array_keys</a></li>
      <li style="float: right;"><a href="function.array-merge-recursive.html">array_merge_recursive ?</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">数组 函数</a></li>
    <li>为数组的每个元素应用回调函数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-map" class="refentry">
   <div class="refnamediv">
    <h1 class="refname">array_map</h1>
    <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">array_map</span> &mdash; <span class="dc-title">
     为数组的每个元素应用回调函数
    </span></p>

   </div>
 <div class="refsect1 description" id="refsect1-function.array-map-description">
  <h3 class="title">说明</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>array_map</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">...$arrays</code></span>
   ) : <span class="type">array</span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>array_map()</strong></span>：返回数组，是为 <code class="parameter">array</code> 每个元素应用 <code class="parameter">callback</code>函数之后的数组。
   <span class="function"><strong>array_map()</strong></span> 返回一个 <span class="type">array</span>，数组内容为 <code class="parameter">array1</code> 的元素按索引顺序为参数调用 <code class="parameter">callback</code> 后的结果（有更多数组时，还会传入 <code class="parameter">arrays</code> 的元素）。
   <code class="parameter">callback</code> 函数形参的数量必须匹配 <span class="function"><strong>array_map()</strong></span> 实参中数组的数量。
  </p>
   </div>

 
 <div class="refsect1 parameters" id="refsect1-function.array-map-parameters">
  <h3 class="title">参数</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       回调函数 <span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span>，应用到每个数组里的每个元素。
      </p>
      <p class="para">
       多个数组操作合并时，<code class="parameter">callback</code> 可以设置为 <strong><code>null</code></strong>。
       如果只提供了 <code class="parameter">array</code> 一个数组，
       <span class="methodname"><strong>array_map()</strong></span> 会返回输入的数组。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       数组，遍历运行 <code class="parameter">callback</code> 函数。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">arrays</code></dt>

     <dd>

      <p class="para">
       额外的数组列表，每个都遍历运行 <code class="parameter">callback</code> 函数。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-map-returnvalues">
  <h3 class="title">返回值</h3>
  <p class="para">
   返回数组，包含 <code class="parameter">callback</code> 函数处理之后 <code class="parameter">array</code> (有多个数组时，为 <code class="parameter">arrays</code>) 对应索引所有元素作为函数的参数。
  </p>
  <p class="para">
   当仅仅传入一个数组时，返回的数组会保留传入参数的键（key）。
   传入多个数组时，返回的数组键是按顺序的 integer。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-map-examples">
  <h3 class="title">范例</h3>
  <p class="para">
     <div class="example" id="function.array-fill.example.basic">
      <p><strong>Example #1 <span class="function"><strong>array_map()</strong></span> 例子</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cube</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'cube'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

      <div class="example-contents"><p>
       这使得 <var class="varname">$b</var> 成为：
      </p></div>
      <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 1
    [1] =&gt; 8
    [2] =&gt; 27
    [3] =&gt; 64
    [4] =&gt; 125
)
</pre></div>
      </div>
     </div>
  </p>
  <p class="para">
   <div class="example" id="example-5258">
    <p><strong>Example #2 <span class="function"><strong>array_map()</strong></span> 使用匿名函数 (PHP 5.3.0 起)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$func&nbsp;</span><span style="color: #007700">=&nbsp;function(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />};<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">$func</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 2
    [1] =&gt; 4
    [2] =&gt; 6
    [3] =&gt; 8
    [4] =&gt; 10
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5259">
    <p><strong>Example #3 <span class="function"><strong>array_map()</strong></span>：使用更多的数组</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">show_Spanish</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"The&nbsp;number&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$n</span><span style="color: #007700">}</span><span style="color: #DD0000">&nbsp;is&nbsp;called&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$m</span><span style="color: #007700">}</span><span style="color: #DD0000">&nbsp;in&nbsp;Spanish"</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">map_Spanish</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">];<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'uno'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'dos'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'tres'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cuatro'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cinco'</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'show_Spanish'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'map_Spanish'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
// printout of $c
Array
(
    [0] =&gt; The number 1 is called uno in Spanish
    [1] =&gt; The number 2 is called dos in Spanish
    [2] =&gt; The number 3 is called tres in Spanish
    [3] =&gt; The number 4 is called cuatro in Spanish
    [4] =&gt; The number 5 is called cinco in Spanish
)

// printout of $d
Array
(
    [0] =&gt; Array
        (
            [1] =&gt; uno
        )

    [1] =&gt; Array
        (
            [2] =&gt; dos
        )

    [2] =&gt; Array
        (
            [3] =&gt; tres
        )

    [3] =&gt; Array
        (
            [4] =&gt; cuatro
        )

    [4] =&gt; Array
        (
            [5] =&gt; cinco
        )

)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   传入两个及以上的数组时，它们元素数量将会相同。因为回调函数会并行地处理相互对应的元素。
   如果几个数组的元素数量不一致：空元素会扩展短那个数组，直到长度和最长的数组一样。
  </p>
  <p class="para">
   此函数有个有趣的用法：传入 <strong><code>null</code></strong> 作为回调函数的名称，将创建多维数组（一个数组，内部包含数组。）
  </p>
  <p class="para">
   <div class="example" id="example-5260">
    <p><strong>Example #4 多个数组的合并操作</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'one'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'two'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'three'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'four'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'five'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'uno'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'dos'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'tres'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cuatro'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cinco'</span><span style="color: #007700">];<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; 1
            [1] =&gt; one
            [2] =&gt; uno
        )

    [1] =&gt; Array
        (
            [0] =&gt; 2
            [1] =&gt; two
            [2] =&gt; dos
        )

    [2] =&gt; Array
        (
            [0] =&gt; 3
            [1] =&gt; three
            [2] =&gt; tres
        )

    [3] =&gt; Array
        (
            [0] =&gt; 4
            [1] =&gt; four
            [2] =&gt; cuatro
        )

    [4] =&gt; Array
        (
            [0] =&gt; 5
            [1] =&gt; five
            [2] =&gt; cinco
        )

)
</pre></div>
    </div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-5261">
    <p><strong>Example #5 
     仅有 <code class="parameter">array1</code> 时，<code class="parameter">callback</code> 设置为 <strong><code>null</code></strong>
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [0]=&gt;
  int(1)
  [1]=&gt;
  int(2)
  [2]=&gt;
  int(3)
}
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5262">
    <p><strong>Example #6 <span class="function"><strong>array_map()</strong></span> 键（key）是 string</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"stringkey"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"value"</span><span style="color: #007700">);<br />function&nbsp;</span><span style="color: #0000BB">cb1</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #0000BB">$a</span><span style="color: #007700">];<br />}<br />function&nbsp;</span><span style="color: #0000BB">cb2</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">];<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'cb1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'cb2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>以上例程会输出：</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(1) {
  [&quot;stringkey&quot;]=&gt;
  array(1) {
    [0]=&gt;
    string(5) &quot;value&quot;
  }
}
array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;value&quot;
    [1]=&gt;
    string(5) &quot;value&quot;
  }
}
array(1) {
  [&quot;stringkey&quot;]=&gt;
  string(5) &quot;value&quot;
}
array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;value&quot;
    [1]=&gt;
    string(5) &quot;value&quot;
  }
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-map-seealso">
  <h3 class="title">参见</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-filter.html" class="function" rel="rdfs-seeAlso">array_filter()</a> - 使用回调函数过滤数组的元素</span></li>
    <li class="member"><span class="function"><a href="function.array-reduce.html" class="function" rel="rdfs-seeAlso">array_reduce()</a> - 用回调函数迭代地将数组简化为单一的值</span></li>
    <li class="member"><span class="function"><a href="function.array-walk.html" class="function" rel="rdfs-seeAlso">array_walk()</a> - 使用用户自定义函数对数组中的每个元素做回调处理</span></li>
   </ul>
  </p>
 </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="125791""></a>
  <div class="note">
   <strong class="user">niemans at pbsolo dot nl</strong>
   <a href="#125791" class="date">07-Feb-2021 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple one-liner to add line numbers to a text:<br />
<br />
$i = 1; join(" \n", array_map(function($a) use(&amp;$i) { return $i++ . ': '. $a; }, explode("\n", $text)));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="125113""></a>
  <div class="note">
   <strong class="user">mail at markuszeller dot com</strong>
   <a href="#125113" class="date">12-Jun-2020 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thanks to the new lambda function shorthand, you can compact the first example calculating cubic values, which is much nicer to read. <br />
<br />
You do not have to declare a function.<br />
<br />
$a = [1, 2, 3, 4, 5];<br />
$b = array_map(fn($n) =&gt; $n * $n * $n, $a);<br />
print_r($b);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124957""></a>
  <div class="note">
   <strong class="user">luis at lpdeveloper dot com dot br</strong>
   <a href="#124957" class="date">28-Apr-2020 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
ExampleArrow function php &gt;= 7.4<br />
Short closures, also called arrow functions, are a way of writing shorter functions in PHP. This notation is useful when passing closures to functions like array_map or array_filter<br />
<br />
<span class="default">&lt;?php<br />
$request </span><span class="keyword">= [<br />
&nbsp; [</span><span class="string">'value'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">],<br />
&nbsp; [</span><span class="string">'value'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">],<br />
&nbsp; [</span><span class="string">'value'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">],<br />
];<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">fn</span><span class="keyword">(array </span><span class="default">$value</span><span class="keyword">)=&gt;</span><span class="default">$value</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">],</span><span class="default">$request</span><span class="keyword">)<br />
);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="124533""></a>
  <div class="note">
   <strong class="user">shaman_master at list dot ru</strong>
   <a href="#124533" class="date">25-Dec-2019 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Short-hands to "array_map", fill parameter arrays:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Applies the callback to the values of the given list. Mix `array_map()` and `iterator_apply()`.<br />
&nbsp;* <br />
&nbsp;* @param callable $callback Callback function to run for each value in list.<br />
&nbsp;* @param array $parameters Callback parameters, contain the keys "values" and "keys"(optional, auto fill).<br />
&nbsp;* @return array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">arr_map</span><span class="keyword">(?callable </span><span class="default">$callback</span><span class="keyword">, array </span><span class="default">$parameters</span><span class="keyword">): array<br />
{<br />
&nbsp;&nbsp;&nbsp; if (empty(</span><span class="default">$parameters</span><span class="keyword">[</span><span class="string">'values'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; throw new \</span><span class="default">InvalidArgumentException</span><span class="keyword">(</span><span class="string">'Parameters must contain the key "values"'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (! \</span><span class="default">is_iterable</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">[</span><span class="string">'values'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; throw new \</span><span class="default">InvalidArgumentException</span><span class="keyword">(</span><span class="string">'Parameter "values" must be iterable'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (\</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">[</span><span class="string">'values'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parameters</span><span class="keyword">[</span><span class="string">'values'</span><span class="keyword">] = \</span><span class="default">iterator_to_array</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">[</span><span class="string">'values'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= \</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">[</span><span class="string">'values'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; \</span><span class="default">array_walk</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parameters</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function (&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) use (</span><span class="default">$keys</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="string">'keys'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$keys</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$key </span><span class="keyword">!= </span><span class="string">'values'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= \</span><span class="default">array_fill_keys</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; return \</span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, ...\</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$parameters</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Usage, add prefix to values:<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">);<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">arr_map</span><span class="keyword">(</span><span class="string">'sprintf'</span><span class="keyword">, [</span><span class="string">'prefix_%s'</span><span class="keyword">, </span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="default">$array</span><span class="keyword">]));<br />
</span><span class="default">$iterator </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">$result2 </span><span class="keyword">= </span><span class="default">arr_map</span><span class="keyword">(</span><span class="string">'sprintf'</span><span class="keyword">, [</span><span class="string">'prefix_%s'</span><span class="keyword">, </span><span class="string">'values' </span><span class="keyword">=&gt; </span><span class="default">$iterator</span><span class="keyword">]);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="123779""></a>
  <div class="note">
   <strong class="user">amolocaleb at gmail dot com</strong>
   <a href="#123779" class="date">15-Apr-2019 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple obvious thing to keep in mind:<br />
the number of arrays passed as arguments to an array_map() function should correspond to the number of parameters defined in the callback otherwise,say if you write a function with n parameters and supply m arrays to the array_map&nbsp; such that m&gt;n,array_map() ignores params at n+1 onwards. but no error or notice is issued. Of course supplying fewer arguments than declared in the function declaration throws an <br />
ArgumentCountError</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120522""></a>
  <div class="note">
   <strong class="user">lewiscowles at me dot com</strong>
   <a href="#120522" class="date">25-Jan-2017 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The words "is an immutable implementation" are missing...<br />
<br />
Essentially the collection you send in can be sent to the same var you operate after map has completed, thus explicitly overwriting, but importantly the input array is not modified, so the method is (as it should be) immutable. This means if you send in `$array1` and assign result to `$array2`, you'll still have `$array1` as it was prior to the map function call.<br />
<br />
This is entirely separate from foreach modification semantics where mostly I've seen a mix of immutable (assigning to a new object) and mutable (using key and array to update in-place `$arrayinput[$key] = doSomethingWith($value)`.<br />
<br />
This is not a comment on the internal workings but has been tested on 5.4, 5.6, 7.0 and 7.1</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119352""></a>
  <div class="note">
   <strong class="user">mcmurphy510 at gmail dot com</strong>
   <a href="#119352" class="date">19-May-2016 03:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using Namespaces, the array_map callback expects the Fully Qualified NameSpace to be used.<br />
<br />
For example, this won't work:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">Test</span><span class="keyword">;<br />
function </span><span class="default">mapping_function</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">)&nbsp; {<br />
&nbsp;&nbsp;&nbsp; ...<br />
}<br />
</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'mapping_function'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);&nbsp; </span><span class="comment">//won't find 'mapping_function' here.<br />
</span><span class="default">?&gt;<br />
</span><br />
This, however, will work:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">namespace </span><span class="default">Test</span><span class="keyword">;<br />
function </span><span class="default">mapping_function</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">)&nbsp; {<br />
&nbsp;&nbsp;&nbsp; ...<br />
}<br />
</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'Test\mapping_function'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);&nbsp; </span><span class="comment">//using FQNS.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118172""></a>
  <div class="note">
   <strong class="user">Mahn</strong>
   <a href="#118172" class="date">20-Oct-2015 05:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You may be looking for a method to extract values of a multidimensional array on a conditional basis (i.e. a mixture between array_map and array_filter) other than a for/foreach loop. If so, you can take advantage of the fact that 1) the callback method on array_map returns null if no explicit return value is specified (as with everything else) and 2) array_filter with no arguments removes falsy values. <br />
<br />
So for example, provided you have:<br />
<br />
<span class="default">&lt;?php<br />
$data </span><span class="keyword">= [<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"John"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"smoker" </span><span class="keyword">=&gt; </span><span class="default">false<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Mary"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"smoker" </span><span class="keyword">=&gt; </span><span class="default">true<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Peter"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"smoker" </span><span class="keyword">=&gt; </span><span class="default">false<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Tony"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"smoker" </span><span class="keyword">=&gt; </span><span class="default">true<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">]<br />
];<br />
</span><span class="default">?&gt;<br />
</span><br />
You can extract the names of all the non-smokers with the following one-liner:<br />
<br />
<span class="default">&lt;?php<br />
$names </span><span class="keyword">= </span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$n</span><span class="keyword">) { if(!</span><span class="default">$n</span><span class="keyword">[</span><span class="string">'smoker'</span><span class="keyword">]) return </span><span class="default">$n</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]; }, </span><span class="default">$data</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
It's not necessarily better than a for/foreach loop, but the occasional one-liner for trivial tasks can help keep your code cleaner.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116938""></a>
  <div class="note">
   <strong class="user">CertaiN</strong>
   <a href="#116938" class="date">24-Mar-2015 05:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simplest array_map_recursive() implemention.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(callable </span><span class="default">$func</span><span class="keyword">, array </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, \</span><span class="default">FILTER_CALLBACK</span><span class="keyword">, [</span><span class="string">'options' </span><span class="keyword">=&gt; </span><span class="default">$func</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116538""></a>
  <div class="note">
   <strong class="user">mark at grooveshark dot com</strong>
   <a href="#116538" class="date">20-Jan-2015 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're looking for a way to get a specific set of key values (ala "pluck") you can just use array_column([['id' =&gt; 1]], 'id').</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115379""></a>
  <div class="note">
   <strong class="user">wapinet at mail dot ru</strong>
   <a href="#115379" class="date">15-Jul-2014 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.5.14<br />
<span class="default">&lt;?php<br />
$columns </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">100000</span><span class="keyword">);<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
0.067003011703491 sec<br />
24903680 byte<br />
&nbsp;*/<br />
</span><span class="default">array_map</span><span class="keyword">(function (</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">;<br />
}, </span><span class="default">$columns</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
0.042001962661743 sec<br />
19398656 byte<br />
&nbsp;*/<br />
</span><span class="keyword">foreach (</span><span class="default">$columns </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$column</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$columns</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$column</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/*<br />
0.05500316619873 sec<br />
10747904 byte<br />
&nbsp;*/<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$columns</span><span class="keyword">, function (&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">;<br />
});<br />
<br />
</span><span class="comment">/*<br />
0.0260009765625 sec<br />
10747904 byte<br />
&nbsp;*/<br />
</span><span class="keyword">foreach (</span><span class="default">$columns </span><span class="keyword">as &amp;</span><span class="default">$column</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$column </span><span class="keyword">= </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$column</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$time </span><span class="keyword">. </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">memory_get_peak_usage</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113886""></a>
  <div class="note">
   <strong class="user">elfe1021 at gmail dot com</strong>
   <a href="#113886" class="date">13-Dec-2013 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Find an interesting thing that in array_map's callable function, late static binding does not work:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'In A: '</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$n</span><span class="keyword">) {return static::</span><span class="default">foo</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);}, </span><span class="default">$names</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'In B: '</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">B</span><span class="keyword">::</span><span class="default">test</span><span class="keyword">([</span><span class="string">'alice'</span><span class="keyword">, </span><span class="string">'bob'</span><span class="keyword">]);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
the result is:<br />
array (size=2)<br />
&nbsp; 0 =&gt; string 'In A: alice' (length=11)<br />
&nbsp; 1 =&gt; string 'In A: bob' (length=9)<br />
<br />
if I change A::test to<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">([</span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="string">'foo'</span><span class="keyword">], </span><span class="default">$names</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Then the result is as expected:<br />
array (size=2)<br />
&nbsp; 0 =&gt; string 'In B: alice' (length=11)<br />
&nbsp; 1 =&gt; string 'In B: bob' (length=9)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113795""></a>
  <div class="note">
   <strong class="user">lukasz dot mordawski at gmail dot com</strong>
   <a href="#113795" class="date">03-Dec-2013 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Let's assume we have following situation:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyFilterClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">filter</span><span class="keyword">(array </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">privateFilterMethod</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">privateFilterMethod</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) </span><span class="default">$value</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$value </span><span class="keyword">.= </span><span class="string">'.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This will work, because $this inside anonymous function (unlike for example javascript) is the instance of MyFilterClass inside which we called it.<br />
I hope this would be useful for anyone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113051""></a>
  <div class="note">
   <strong class="user">CertaiN</strong>
   <a href="#113051" class="date">22-Aug-2013 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The most memory-efficient array_map_recursive().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(callable </span><span class="default">$func</span><span class="keyword">, array </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function(&amp;</span><span class="default">$v</span><span class="keyword">) use (</span><span class="default">$func</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112857""></a>
  <div class="note">
   <strong class="user">contato at williamsantana dot com dot br</strong>
   <a href="#112857" class="date">30-Jul-2013 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case of you need to recursively bypass a function over the itens of an array, you can use it<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
-----------------------------------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $strings </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'The'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'quick'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'fox'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'brown'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'jumps'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'over'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'the'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'lazy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'dog'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; );<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$strings</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hashedString </span><span class="keyword">= </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="string">'md5'</span><span class="keyword">, </span><span class="default">$strings</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$hashedString</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
------------------------------------------------------------------------<br />
Testing it, you'll obtain<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/* Original array */<br />
<br />
</span><span class="keyword">array (<br />
&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'The'</span><span class="keyword">,<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp; array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'quick'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'fox'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'brown'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'jumps'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'over'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'the'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'lazy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'dog'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp; ),<br />
);<br />
<br />
</span><span class="comment">/* Recursived array */<br />
</span><span class="keyword">array (<br />
&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'a4704fd35f0308287f2937ba3eccf5fe'</span><span class="keyword">,<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp; array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'1df3746a4728276afdc24f828186f73a'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'2b95d1f09b8b66c5c43622a4d9ec9a04'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'6ff47afa5dc7daa42cc705a03fca8a9b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'55947829059f255e4ba2f536a2ae99fe'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'3b759a9ca80234563d87672350659b2b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'8fc42c6ddf9966db3b09e84365034357'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'0ffe34b4e04c2b282c5a388b1ad8aa7a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'06d80eb0c50b49a509b49f2424e8c805'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp; ),<br />
);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope it helps you.<br />
<br />
Cheers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112716""></a>
  <div class="note">
   <strong class="user">jessiedeer at hotmail dot com</strong>
   <a href="#112716" class="date">16-Jul-2013 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map becomes interesting and faster than foreach when used with existing PHP functions.<br />
<br />
Example:<br />
<br />
$arr1 = array(1, 2, 3, 4);<br />
$arr2 = array(4, 3, 2, 1);<br />
<br />
// array with min values for each key<br />
print_r(array_map("min", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 2 [3] =&gt; 1 ) <br />
<br />
// array with max values for each key<br />
print_r(array_map("max", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 4 [1] =&gt; 3 [2] =&gt; 3 [3] =&gt; 4 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112715""></a>
  <div class="note">
   <strong class="user">jessiedeer at hotmail dot com</strong>
   <a href="#112715" class="date">16-Jul-2013 10:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map becomes interesting and faster than foreach when used with existing PHP functions.<br />
<br />
Example:<br />
<br />
$arr1 = array(1, 2, 3, 4);<br />
$arr2 = array(4, 3, 2, 1);<br />
<br />
// array with min values for each key<br />
print_r(array_map("min", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 2 [3] =&gt; 1 ) <br />
<br />
// array with max values for each key<br />
print_r(array_map("max", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 4 [1] =&gt; 3 [2] =&gt; 3 [3] =&gt; 4 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111433""></a>
  <div class="note">
   <strong class="user">shakespeare32 at gmail dot com</strong>
   <a href="#111433" class="date">19-Feb-2013 07:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Why not an array of callbacks?<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_maps</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$callbacks</span><span class="keyword">) { return </span><span class="default">$array</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">) &amp;&amp; </span><span class="default">function_exists</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$callbacks </span><span class="keyword">as </span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107808""></a>
  <div class="note">
   <strong class="user">qeremy</strong>
   <a href="#107808" class="date">07-Mar-2012 10:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An alternative for recursive mapping;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rarr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rarr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; : </span><span class="default">$fn</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">); </span><span class="comment">// or call_user_func($fn, $v)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rarr</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">sqr</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$x</span><span class="string"> ^ 2 = "</span><span class="keyword">. (</span><span class="default">$x </span><span class="keyword">* </span><span class="default">$x</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, array(</span><span class="default">4</span><span class="keyword">, array(</span><span class="default">5</span><span class="keyword">)));<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="string">"sqr"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1 ^ 2 = 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2 ^ 2 = 4<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3 ^ 2 = 9<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 4 ^ 2 = 16<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 5 ^ 2 = 25<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107690""></a>
  <div class="note">
   <strong class="user">gmail.com@mspreij</strong>
   <a href="#107690" class="date">26-Feb-2012 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hope I'm not late to the party, here's my function to apply array_map to the *keys* of an array.<br />
Extra array arguments will be used for the callback function's parameters just like with array_map, with the difference that a string is also allowed: it will just be used to create an array of appropriate length with as each value that string. Arrays are left alone (and will be padded with nulls by array_map as needed).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//_________________________________________________<br />
// array_map_keys($callback, $array, [$args, ..]) /<br />
</span><span class="keyword">function </span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array </span><span class="comment">/* [, $args ..] */</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp; if (! </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"first argument (callback) is not a valid function"</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"second argument must be an array"</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// If any additional arguments are not arrays, assume that value is wanted for every $array item.<br />
&nbsp; // array_map() will pad shorter arrays with Null values<br />
&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) { <br />
&nbsp;&nbsp;&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_map'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// Some examples:<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'foo'</span><span class="keyword">=&gt;</span><span class="default">123</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">=&gt;</span><span class="default">456</span><span class="keyword">);<br />
<br />
</span><span class="comment">// simply uppercase keys:<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="string">'strtoupper'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">));<br />
</span><span class="comment">// or..<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(function(</span><span class="default">$input</span><span class="keyword">) {return </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);}, </span><span class="default">$arr</span><span class="keyword">));<br />
</span><span class="comment">// &gt;&gt; array(2) { ["FOO"]=&gt;int(123) , ["BAR"]=&gt; int(456) }<br />
<br />
// Add a prefix 'myvar_':<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(function(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">) {return </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$input</span><span class="keyword">;}, </span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'myvar_'</span><span class="keyword">));<br />
</span><span class="comment">// &gt;&gt; array(2) { ["myvar_foo"]=&gt;int(123) , ["myvar_bar"]=&gt;int(456) }<br />
<br />
// Apart from the (static string) prefix, we also number them:<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'foo'</span><span class="keyword">=&gt;</span><span class="default">123</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">=&gt;</span><span class="default">456</span><span class="keyword">, </span><span class="string">'bazz'</span><span class="keyword">=&gt;</span><span class="default">789</span><span class="keyword">, </span><span class="string">'yadda'</span><span class="keyword">=&gt;</span><span class="string">'0AB'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(function(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$middle</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">) {return </span><span class="default">$number</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$middle</span><span class="keyword">.</span><span class="default">$input</span><span class="keyword">;}, </span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'myvar_'</span><span class="keyword">, </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))));<br />
</span><span class="comment">// &gt;&gt; array(4) { ["1:myvar_foo"]=&gt;int(123) , ["2:myvar_bar"]=&gt;int(456) , ["3:myvar_bazz"]=&gt;int(789) , ["4:myvar_yadda"]=&gt;string(3) "0AB" }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106684""></a>
  <div class="note">
   <strong class="user">php/hotblocks/nl</strong>
   <a href="#106684" class="date">28-Nov-2011 05:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the $arr argument has to be an array, not just a Traversable/Iterator.<br />
<br />
For instance this won't work:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$documents </span><span class="keyword">= </span><span class="default">$mongo</span><span class="keyword">-&gt;</span><span class="default">db</span><span class="keyword">-&gt;</span><span class="default">collection</span><span class="keyword">-&gt;</span><span class="default">find</span><span class="keyword">();<br />
</span><span class="comment">// $documents is Traversable by foreach<br />
<br />
</span><span class="default">$ids </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$document</span><span class="keyword">[</span><span class="string">'_id'</span><span class="keyword">];<br />
}, </span><span class="default">$objects</span><span class="keyword">);<br />
</span><span class="comment">// $ids will now be NULL, because $documents wasn't an Array<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
A solution is to first use iterator_to_array():<br />
<br />
<span class="default">&lt;?php<br />
<br />
$ids </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$document</span><span class="keyword">[</span><span class="string">'_id'</span><span class="keyword">];<br />
}, </span><span class="default">iterator_to_array</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">));<br />
</span><span class="comment">// $ids will now be an array of ['_id']s<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
But this is not very efficient: two cycles instead of one. Another solution is to use foreach: one cycle and a lot of freedom (and in the same scope).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96564""></a>
  <div class="note">
   <strong class="user">virtual dot greg at gmail dot com</strong>
   <a href="#96564" class="date">05-Mar-2010 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.3 enables us to use inline anonymous functions with array_map, cleaning up the syntax slightly.
<br />

<br />
<span class="default">&lt;?php
<br />
$data </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Bob'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Clerk'</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Alan'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Manager'</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'James'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Director'</span><span class="keyword">)
<br />
);
<br />

<br />
</span><span class="default">$names </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function(</span><span class="default">$person</span><span class="keyword">) { return </span><span class="default">$person</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]; },
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data
<br />
</span><span class="keyword">);
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This was possible (although not recommended) in prior versions of PHP 5, via create_function().
<br />

<br />
<span class="default">&lt;?php
<br />
$names </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$person'</span><span class="keyword">, </span><span class="string">'return $person["name"];'</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data
<br />
</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You're less likely to catch errors in the latter version because the code is passed as string arguments.
<br />

<br />
These are alternatives to using a foreach:
<br />

<br />
<span class="default">&lt;?php
<br />
$names </span><span class="keyword">= array();
<br />

<br />
foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$names</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">];
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94053""></a>
  <div class="note">
   <strong class="user">onassar at gmail dot com</strong>
   <a href="#94053" class="date">13-Oct-2009 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fixed a bug with array recursion.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * arrayMap function. Customized array_map function which preserves keys/associate array indexes. Note that this costs a descent amount more memory (eg. 1.5k per call)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @access public
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param callback $callback Callback function to run for each element in each array.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param mixed $arr1 An array to run through the callback function.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $array Variable list of array arugments to run through the callback function.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @return array Array containing all the elements of $arr1 after applying the callback function to each one, recursively, maintain keys.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arrayMap</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">()&gt;</span><span class="default">2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; (array) </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">2</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">$args</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="string">'self'</span><span class="keyword">,</span><span class="string">'arrayMap'</span><span class="keyword">),</span><span class="default">$temp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$temp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91523""></a>
  <div class="note">
   <strong class="user">galenjr at gmail dot com</strong>
   <a href="#91523" class="date">14-Jun-2009 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to array_map htmlentities with a specific quote style is to create a function that does it and map that function<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">map_entities</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">htmlentities</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">ENT_QUOTES </span><span class="keyword">);<br />
}<br />
</span><span class="default">$good_array </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">( </span><span class="string">'map_entities'</span><span class="keyword">, </span><span class="default">$bad_array </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86743""></a>
  <div class="note">
   <strong class="user">radist-hack at yandex dot ru</strong>
   <a href="#86743" class="date">01-Nov-2008 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To transpose rectangular two-dimension array, use the following code:<br />
<br />
array_unshift($array, null);<br />
$array = call_user_func_array("array_map", $array);<br />
<br />
If you need to rotate rectangular two-dimension array on 90 degree, add the following line before or after (depending on the rotation direction you need) the code above:<br />
$array = array_reverse($array);<br />
<br />
Here is example:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp; array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">),<br />
&nbsp; array(</span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">));<br />
</span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_map"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84632""></a>
  <div class="note">
   <strong class="user">stijnleenknegt at gmail dot com</strong>
   <a href="#84632" class="date">22-Jul-2008 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to pass an argument like ENT_QUOTES to htmlentities, you can do the follow.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">( </span><span class="string">'htmlentities' </span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0 </span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) , </span><span class="default">ENT_QUOTES</span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
The third argument creates an equal sized array of $array filled with the parameter you want to give with your callback function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81767""></a>
  <div class="note">
   <strong class="user">chreekat</strong>
   <a href="#81767" class="date">12-Mar-2008 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was miffed that array_map didn't have a way to pass values *and* keys to the callback, but then I realized I could do this:<br />
<br />
function callback($k, $v) { ... }<br />
<br />
array_map( "callback", array_keys($array), $array);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80958""></a>
  <div class="note">
   <strong class="user">loaded67 at hotmail dot com</strong>
   <a href="#80958" class="date">08-Feb-2008 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function is really nice for recursion in php!!!<br />
<br />
example in a class:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//private $container = array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* recursion */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* procedural */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$key</span><span class="keyword">.</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do stuff...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if(!isset($this-&gt;container[$key])){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;container[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //else{&nbsp; // trigger_error() xor throw new Exception?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo 'allready exists!&lt;br/&gt;'.PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">//<br />
</span><span class="default">$array </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'one'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'two'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'value3'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">test</span><span class="keyword">;<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
you could easiely do this without a class too offcourse!<br />
used in php 5.2.5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80571""></a>
  <div class="note">
   <strong class="user">pmf</strong>
   <a href="#80571" class="date">22-Jan-2008 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function behaves exactly like array_map but additionally does not reject non-array arguments. Instead, it transforms them with the array_fill function to a constant valued array of required length according to the other array arguments (if any) and executes the original array_map function.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_map2</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$max'</span><span class="keyword">,</span><span class="string">'return is_array($a)? $a: array_fill(0,$max,$a);'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">,</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">),</span><span class="default">array_reduce</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$v,$w'</span><span class="keyword">,</span><span class="string">'return max($v,is_array($w)? count($w): 1);'</span><span class="keyword">))));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_map"</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$get </span><span class="keyword">= </span><span class="string">"first=value1&amp;second=value2&amp;third=value3"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_map2</span><span class="keyword">(</span><span class="string">"explode"</span><span class="keyword">,</span><span class="string">"="</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="default">$get</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
would print out: <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">first<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">second<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">third<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
/pmf</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28247""></a>
  <div class="note">
   <strong class="user">stephen at mu dot com dot au</strong>
   <a href="#28247" class="date">06-Jan-2003 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note when doing something allong the lines of:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{
<br />
&nbsp; var </span><span class="default">$var</span><span class="keyword">;
<br />
&nbsp; function </span><span class="default">bar</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"baz"</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">));
<br />
&nbsp; }
<br />

<br />
&nbsp; function </span><span class="default">baz</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">+ </span><span class="default">$arg</span><span class="keyword">;
<br />
&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will *not* work as expected. You need to pass $this by reference as with:
<br />

<br />
array_map(array(&amp;$this, "baz"), array(1,2,3));
<br />

<br />
or you'll be making a copy of the object each time, changing a value, then throwing the result away.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
